(function(x,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue"),require("@wangeditor/editor"),require("element-plus"),require("@element-plus/icons-vue")):typeof define=="function"&&define.amd?define(["exports","vue","@wangeditor/editor","element-plus","@element-plus/icons-vue"],n):(x=typeof globalThis<"u"?globalThis:x||self,n(x.SSMLEditor={},x.Vue,x.wangEditor,x.ElementPlus,x.ElementPlusIconsVue))})(this,function(x,n,w,O,Qe){"use strict";var zi=Object.defineProperty;var Hi=(x,n,w)=>n in x?zi(x,n,{enumerable:!0,configurable:!0,writable:!0,value:w}):x[n]=w;var Ye=(x,n,w)=>(Hi(x,typeof n!="symbol"?n+"":n,w),w);const Zt={class:"bar-button-icon"},Jt={class:"fw-normal",style:{"font-size":"0.85rem"}},en=n.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const r=t,o=n.inject("editor"),i=()=>{!r.disabled&&o&&e("click",o==null?void 0:o.value)};return(a,l)=>(n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["bar-button px-2 py-1",{disabled:a.disabled}]),onClick:i,onMousedown:l[0]||(l[0]=n.withModifiers(()=>{},["prevent"]))},[n.createElementVNode("div",Zt,[n.createElementVNode("span",{class:n.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${a.icon}`]])},null,2)]),n.createElementVNode("div",Jt,n.toDisplayString(a.text),1)],34))}}),qi="",R=(t,e)=>{const r=t.__vccOpts||t;for(const[o,i]of e)r[o]=i;return r},T=R(en,[["__scopeId","data-v-edb3cf59"]]),Ki="",Xi="",Gi="",Y=n.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(t,{expose:e,emit:r}){const o=n.ref(""),i=n.ref();function a(){i.value.focus()}function l(){r("submit",o.value),o.value=""}return e({focus:a}),(c,s)=>(n.openBlock(),n.createBlock(n.unref(O.ElForm),{class:"flex flex-row",onSubmit:n.withModifiers(l,["prevent"])},{default:n.withCtx(()=>[n.createVNode(n.unref(O.ElInput),{type:c.type,ref_key:"inputRef",ref:i,modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=d=>o.value=d)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}}),Yi="",Qi="",Ze=n.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(t){return(e,r)=>(n.openBlock(),n.createBlock(n.unref(O.ElPopover),{hideAfter:e.hideAfter,width:e.width,visible:e.visible,trigger:e.trigger,"onUpdate:visible":r[0]||(r[0]=o=>e.$emit("update:visible",o))},{reference:n.withCtx(()=>[n.renderSlot(e.$slots,"reference")]),default:n.withCtx(()=>[n.renderSlot(e.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}}),Zi="",Ji="",ea="",ta="",na="",ra="",oa="",ia="",aa="";function Q(t){return n.getCurrentScope()?(n.onScopeDispose(t),!0):!1}function I(t){return typeof t=="function"?t():n.unref(t)}const Je=typeof window<"u",tn=t=>t!=null,Z=()=>{};var nn=Object.defineProperty,rn=Object.defineProperties,on=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,tt=(t,e,r)=>e in t?nn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sn=(t,e)=>{for(var r in e||(e={}))an.call(e,r)&&tt(t,r,e[r]);if(et)for(var r of et(e))ln.call(e,r)&&tt(t,r,e[r]);return t},cn=(t,e)=>rn(t,on(e));function un(t,e={}){if(!n.isRef(t))return n.toRefs(t);const r=Array.isArray(t.value)?Array.from({length:t.value.length}):{};for(const o in t.value)r[o]=n.customRef(()=>({get(){return t.value[o]},set(i){var a;if((a=I(e.replaceRef))!=null?a:!0)if(Array.isArray(t.value)){const c=[...t.value];c[o]=i,t.value=c}else{const c=cn(sn({},t.value),{[o]:i});Object.setPrototypeOf(c,Object.getPrototypeOf(t.value)),t.value=c}else t.value[o]=i}}));return r}function nt(t,e=!0){n.getCurrentInstance()?n.onMounted(t):e?t():n.nextTick(t)}function $(t){var e;const r=I(t);return(e=r==null?void 0:r.$el)!=null?e:r}const F=Je?window:void 0;function q(...t){let e,r,o,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,o,i]=t,e=F):[e,r,o,i]=t,!e)return Z;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const a=[],l=()=>{a.forEach(u=>u()),a.length=0},c=(u,m,p,_)=>(u.addEventListener(m,p,_),()=>u.removeEventListener(m,p,_)),s=n.watch(()=>[$(e),I(i)],([u,m])=>{l(),u&&a.push(...r.flatMap(p=>o.map(_=>c(u,p,_,m))))},{immediate:!0,flush:"post"}),d=()=>{s(),l()};return Q(d),d}function fn(){const t=n.ref(!1);return n.getCurrentInstance()&&n.onMounted(()=>{t.value=!0}),t}function oe(t){const e=fn();return n.computed(()=>(e.value,!!t()))}function dn(t,e={}){const{window:r=F}=e,o=oe(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let i;const a=n.ref(!1),l=d=>{a.value=d.matches},c=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",l):i.removeListener(l))},s=n.watchEffect(()=>{o.value&&(c(),i=r.matchMedia(I(t)),"addEventListener"in i?i.addEventListener("change",l):i.addListener(l),a.value=i.matches)});return Q(()=>{s(),c(),i=void 0}),a}var mn=Object.defineProperty,pn=Object.defineProperties,hn=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,ot=(t,e,r)=>e in t?mn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yn=(t,e)=>{for(var r in e||(e={}))gn.call(e,r)&&ot(t,r,e[r]);if(rt)for(var r of rt(e))bn.call(e,r)&&ot(t,r,e[r]);return t},wn=(t,e)=>pn(t,hn(e));function it(t,e={}){var r,o;const{pointerTypes:i,preventDefault:a,stopPropagation:l,exact:c,onMove:s,onEnd:d,onStart:u,initialValue:m,axis:p="both",draggingElement:_=F,handle:h=t}=e,f=n.ref((r=I(m))!=null?r:{x:0,y:0}),b=n.ref(),S=y=>i?i.includes(y.pointerType):!0,k=y=>{I(a)&&y.preventDefault(),I(l)&&y.stopPropagation()},g=y=>{if(!S(y)||I(c)&&y.target!==I(t))return;const C=I(t).getBoundingClientRect(),B={x:y.clientX-C.left,y:y.clientY-C.top};(u==null?void 0:u(B,y))!==!1&&(b.value=B,k(y))},v=y=>{if(!S(y)||!b.value)return;let{x:C,y:B}=f.value;(p==="x"||p==="both")&&(C=y.clientX-b.value.x),(p==="y"||p==="both")&&(B=y.clientY-b.value.y),f.value={x:C,y:B},s==null||s(f.value,y),k(y)},E=y=>{S(y)&&b.value&&(b.value=void 0,d==null||d(f.value,y),k(y))};if(Je){const y={capture:(o=e.capture)!=null?o:!0};q(h,"pointerdown",g,y),q(_,"pointermove",v,y),q(_,"pointerup",E,y)}return wn(yn({},un(f)),{position:f,isDragging:n.computed(()=>!!b.value),style:n.computed(()=>`left:${f.value.x}px;top:${f.value.y}px;`)})}var at=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,_n=Object.prototype.propertyIsEnumerable,xn=(t,e)=>{var r={};for(var o in t)vn.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&at)for(var o of at(t))e.indexOf(o)<0&&_n.call(t,o)&&(r[o]=t[o]);return r};function lt(t,e,r={}){const o=r,{window:i=F}=o,a=xn(o,["window"]);let l;const c=oe(()=>i&&"ResizeObserver"in i),s=()=>{l&&(l.disconnect(),l=void 0)},d=n.computed(()=>Array.isArray(t)?t.map(p=>$(p)):[$(t)]),u=n.watch(d,p=>{if(s(),c.value&&i){l=new ResizeObserver(e);for(const _ of p)_&&l.observe(_,a)}},{immediate:!0,flush:"post",deep:!0}),m=()=>{s(),u()};return Q(m),{isSupported:c,stop:m}}function X(t,e={}){const{reset:r=!0,windowResize:o=!0,windowScroll:i=!0,immediate:a=!0}=e,l=n.ref(0),c=n.ref(0),s=n.ref(0),d=n.ref(0),u=n.ref(0),m=n.ref(0),p=n.ref(0),_=n.ref(0);function h(){const f=$(t);if(!f){r&&(l.value=0,c.value=0,s.value=0,d.value=0,u.value=0,m.value=0,p.value=0,_.value=0);return}const b=f.getBoundingClientRect();l.value=b.height,c.value=b.bottom,s.value=b.left,d.value=b.right,u.value=b.top,m.value=b.width,p.value=b.x,_.value=b.y}return lt(t,h),n.watch(()=>$(t),f=>!f&&h()),i&&q("scroll",h,{capture:!0,passive:!0}),o&&q("resize",h,{passive:!0}),nt(()=>{a&&h()}),{height:l,bottom:c,left:s,right:d,top:u,width:m,x:p,y:_,update:h}}function st(t,e={width:0,height:0},r={}){const{window:o=F,box:i="content-box"}=r,a=n.computed(()=>{var s,d;return(d=(s=$(t))==null?void 0:s.namespaceURI)==null?void 0:d.includes("svg")}),l=n.ref(e.width),c=n.ref(e.height);return lt(t,([s])=>{const d=i==="border-box"?s.borderBoxSize:i==="content-box"?s.contentBoxSize:s.devicePixelContentBoxSize;if(o&&a.value){const u=$(t);if(u){const m=o.getComputedStyle(u);l.value=Number.parseFloat(m.width),c.value=Number.parseFloat(m.height)}}else if(d){const u=Array.isArray(d)?d:[d];l.value=u.reduce((m,{inlineSize:p})=>m+p,0),c.value=u.reduce((m,{blockSize:p})=>m+p,0)}else l.value=s.contentRect.width,c.value=s.contentRect.height},r),n.watch(()=>$(t),s=>{l.value=s?e.width:0,c.value=s?e.height:0}),{width:l,height:c}}function Sn(t,e,r={}){const{root:o,rootMargin:i="0px",threshold:a=.1,window:l=F,immediate:c=!0}=r,s=oe(()=>l&&"IntersectionObserver"in l),d=n.computed(()=>{const h=I(t);return(Array.isArray(h)?h:[h]).map($).filter(tn)});let u=Z;const m=n.ref(c),p=s.value?n.watch(()=>[d.value,$(o),m.value],([h,f])=>{if(u(),!m.value||!h.length)return;const b=new IntersectionObserver(e,{root:$(f),rootMargin:i,threshold:a});h.forEach(S=>S&&b.observe(S)),u=()=>{b.disconnect(),u=Z}},{immediate:c,flush:"post"}):Z,_=()=>{u(),p(),m.value=!1};return Q(_),{isSupported:s,isActive:m,pause(){u(),m.value=!1},resume(){m.value=!0},stop:_}}function En(t,{window:e=F,scrollTarget:r}={}){const o=n.ref(!1);return Sn(t,([{isIntersecting:i}])=>{o.value=i},{root:r,window:e}),o}function ct(t={}){const{window:e=F,initialWidth:r=Number.POSITIVE_INFINITY,initialHeight:o=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:a=!0}=t,l=n.ref(r),c=n.ref(o),s=()=>{e&&(a?(l.value=e.innerWidth,c.value=e.innerHeight):(l.value=e.document.documentElement.clientWidth,c.value=e.document.documentElement.clientHeight))};if(s(),nt(s),q("resize",s,{passive:!0}),i){const d=dn("(orientation: portrait)");n.watch(d,()=>s())}return{width:l,height:c}}const ie=t=>(n.pushScopeId("data-v-2f9c7bc6"),t=t(),n.popScopeId(),t),kn={class:"search-content vh-50 user-select-none"},Cn={class:"ps-2 w-75"},Vn={class:"menu"},Nn=ie(()=>n.createElementVNode("div",{class:"h h-1"},null,-1)),On={class:"flex flex-row"},Mn=ie(()=>n.createElementVNode("div",{class:"h-"},null,-1)),Bn={class:"content-list w-90"},Tn=["onClick"],Dn=ie(()=>n.createElementVNode("span",{class:"iconfont icon-play"},null,-1)),In=n.defineComponent({__name:"bar-search",props:{menuItemLabel:{},scenes:{},styles:{},dataList:{},fetch:{type:Function}},emits:["submit"],setup(t,{emit:e}){const r=t,o=n.ref(),i=n.ref(""),a=n.ref(""),l=n.ref(""),c=n.ref(r.dataList||[]),s=n.ref("first"),d=En(o);n.watch(d,_=>{_&&setTimeout(()=>{var h;(h=o.value)==null||h.focus()},100)}),n.onMounted(async()=>{await u()});async function u(){c.value=await r.fetch({search:i.value,menuKey:s.value,scene:a.value,style:l.value})}function m(_){s.value=_,u()}function p(_){e("submit",_)}return(_,h)=>(n.openBlock(),n.createElementBlock("div",kn,[n.createElementVNode("div",Cn,[n.createVNode(n.unref(O.ElForm),{onSubmit:n.withModifiers(u,["prevent"])},{default:n.withCtx(()=>[n.createVNode(n.unref(O.ElInput),{ref_key:"searchInputRef",ref:o,placeholder:"搜索",modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=f=>i.value=f),"suffix-icon":n.unref(Qe.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),n.createElementVNode("div",Vn,[n.createVNode(n.unref(O.ElMenu),{mode:"horizontal","default-active":"first",onSelect:h[1]||(h[1]=f=>m(f))},{default:n.withCtx(()=>[n.createVNode(n.unref(O.ElMenuItem),{index:"first"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(_.menuItemLabel.first),1)]),_:1}),n.createVNode(n.unref(O.ElMenuItem),{index:"second"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(_.menuItemLabel.second),1)]),_:1}),n.createVNode(n.unref(O.ElMenuItem),{index:"last"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(_.menuItemLabel.last),1)]),_:1})]),_:1})]),Nn,n.createElementVNode("div",On,[n.createVNode(n.unref(O.ElSelect),{modelValue:a.value,"onUpdate:modelValue":h[2]||(h[2]=f=>a.value=f),onChange:u,class:"m m-2",size:"large"},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(_.scenes,f=>(n.openBlock(),n.createBlock(n.unref(O.ElOption),{key:f.value,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n.createVNode(n.unref(O.ElSelect),{modelValue:l.value,"onUpdate:modelValue":h[3]||(h[3]=f=>l.value=f),onChange:u,class:"m m-2",size:"large"},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(_.styles,f=>(n.openBlock(),n.createBlock(n.unref(O.ElOption),{key:f.value,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),Mn,n.createElementVNode("div",Bn,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(c.value,(f,b)=>(n.openBlock(),n.createElementBlock("div",{onClick:S=>p(f),class:"content-list-item clickable ps-3",key:b},[Dn,n.createElementVNode("span",null,n.toDisplayString(f.label),1)],8,Tn))),128))])]))}}),la="",W=R(In,[["__scopeId","data-v-2f9c7bc6"]]),$n=n.createElementVNode("div",{class:"w-100 text-end me-2"},[n.createElementVNode("span",{class:"btn iconfont icon-close fs-5"})],-1),ae=n.defineComponent({__name:"fixed-panel",setup(t){const e=n.ref(),{x:r,y:o}=it(e,{initialValue:{x:40,y:40}}),{width:i,height:a}=st(e),{width:l,height:c}=ct(),s=n.computed(()=>({x:l.value-i.value,y:c.value-a.value})),d=n.computed(()=>{if(!s.value)return u(r.value,o.value);const m=r.value<5?5:r.value>s.value.x?s.value.x-5:r.value,p=o.value<5?5:o.value>s.value.y?s.value.y-5:o.value;return u(m,p)});function u(m,p){return`left:${m}px;top:${p}px`}return(m,p)=>(n.openBlock(),n.createBlock(n.Teleport,{to:"body"},[n.createElementVNode("div",{ref_key:"boxRef",ref:e,class:"card shadow brag-box z-3",style:n.normalizeStyle([{position:"fixed"},d.value])},[$n,n.renderSlot(m.$slots,"default")],4)]))}}),sa="",Ln={},Pn={class:"content"};function An(t,e){return n.openBlock(),n.createElementBlock("div",Pn,[n.renderSlot(t.$slots,"default",{},void 0,!0)])}const le=R(Ln,[["render",An],["__scopeId","data-v-7beae5b9"]]),Rn={},Fn={class:"bar-wrapper-item"};function jn(t,e){return n.openBlock(),n.createElementBlock("div",Fn,[n.renderSlot(t.$slots,"default")])}const ut=R(Rn,[["render",jn]]),Un={class:"bar-wrapper-group"},Wn={class:"group-items"},zn=n.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(t){return(e,r)=>(n.openBlock(),n.createElementBlock("div",Un,[n.createElementVNode("div",Wn,[n.renderSlot(e.$slots,"default",{},void 0,!0)]),n.createElementVNode("div",{class:n.normalizeClass(["divider",[e.divider]])},null,2)]))}}),ca="",j=R(zn,[["__scopeId","data-v-3a7abad9"]]),Hn=n.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},position:{}},emits:["update:visible","update:position"],setup(t,{emit:e}){const r=t,o=n.ref(),{x:i,y:a}=it(o,{initialValue:r.position}),{width:l,height:c}=st(o),{width:s,height:d}=ct();n.watch([i,a],([b,S])=>{e("update:position",{x:b,y:S})});const u=n.computed(()=>({x:s.value-l.value,y:d.value-c.value})),m=n.computed(()=>{const{x:b,y:S}=r.position;if(!u.value)return f(b,S);const k=b<5?5:b>u.value.x?u.value.x-5:b,g=S<5?5:S>u.value.y?u.value.y-5:S;return f(k,g)});n.onMounted(()=>{window.addEventListener("keydown",h)}),n.onUnmounted(()=>{window.addEventListener("keydown",h)});function p(){e("update:visible",!1)}function _(b){const S=b.target;o.value&&!o.value.contains(S)&&r.visible&&e("update:visible",!1)}function h(b){b.code==="Escape"&&r.visible&&p()}function f(b,S){return`left:${b}px;top:${S}px`}return(b,S)=>(n.openBlock(),n.createBlock(n.Teleport,{to:"body"},[n.withDirectives(n.createElementVNode("div",{class:"drag-box-mask",onClick:_},[n.createElementVNode("div",{ref_key:"boxRef",ref:o,class:"card shadow brag-box",style:n.normalizeStyle([{position:"fixed"},m.value])},[n.createElementVNode("div",{class:"w-100 text-end me-2"},[n.createElementVNode("span",{onClick:p,class:"btn iconfont icon-close fs-5"})]),n.renderSlot(b.$slots,"default",{},void 0,!0)],4)],512),[[n.vShow,b.visible]])]))}}),ua="",z=R(Hn,[["__scopeId","data-v-0f200676"]]),qn={install(t){t.component("BarButton",T),t.component("BarInput",Y),t.component("BarPopover",Ze),t.component("BarSearch",W),t.component("FixedPanel",ae),t.component("BarWrapper",le),t.component("BarWrapperItem",ut),t.component("BarWrapperGroup",j),t.component("DragBox",z)}};let Kn=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function L(t="r"){return`${t}-${Kn()}`}var K=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function se(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ft="Expected a function",dt=0/0,Xn="[object Symbol]",Gn=/^\s+|\s+$/g,Yn=/^[-+]0x[0-9a-f]+$/i,Qn=/^0b[01]+$/i,Zn=/^0o[0-7]+$/i,Jn=parseInt,er=typeof K=="object"&&K&&K.Object===Object&&K,tr=typeof self=="object"&&self&&self.Object===Object&&self,nr=er||tr||Function("return this")(),rr=Object.prototype,or=rr.toString,ir=Math.max,ar=Math.min,ce=function(){return nr.Date.now()};function lr(t,e,r){var o,i,a,l,c,s,d=0,u=!1,m=!1,p=!0;if(typeof t!="function")throw new TypeError(ft);e=mt(e)||0,J(r)&&(u=!!r.leading,m="maxWait"in r,a=m?ir(mt(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p);function _(y){var C=o,B=i;return o=i=void 0,d=y,l=t.apply(B,C),l}function h(y){return d=y,c=setTimeout(S,e),u?_(y):l}function f(y){var C=y-s,B=y-d,Qt=e-C;return m?ar(Qt,a-B):Qt}function b(y){var C=y-s,B=y-d;return s===void 0||C>=e||C<0||m&&B>=a}function S(){var y=ce();if(b(y))return k(y);c=setTimeout(S,f(y))}function k(y){return c=void 0,p&&o?_(y):(o=i=void 0,l)}function g(){c!==void 0&&clearTimeout(c),d=0,o=s=i=c=void 0}function v(){return c===void 0?l:k(ce())}function E(){var y=ce(),C=b(y);if(o=arguments,i=this,s=y,C){if(c===void 0)return h(s);if(m)return c=setTimeout(S,e),_(s)}return c===void 0&&(c=setTimeout(S,e)),l}return E.cancel=g,E.flush=v,E}function sr(t,e,r){var o=!0,i=!0;if(typeof t!="function")throw new TypeError(ft);return J(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),lr(t,e,{leading:o,maxWait:e,trailing:i})}function J(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function cr(t){return!!t&&typeof t=="object"}function ur(t){return typeof t=="symbol"||cr(t)&&or.call(t)==Xn}function mt(t){if(typeof t=="number")return t;if(ur(t))return dt;if(J(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=J(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Gn,"");var r=Qn.test(t);return r||Zn.test(t)?Jn(t.slice(2),r?2:8):Yn.test(t)?dt:+t}var fr=sr;const dr=se(fr);function pt(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function ue(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(function(r){typeof t[r]>"u"?t[r]=e[r]:pt(e[r])&&pt(t[r])&&Object.keys(e[r]).length>0&&ue(t[r],e[r])})}var ht={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function fe(){var t=typeof document<"u"?document:{};return ue(t,ht),t}var mr={document:ht,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout>"u"||clearTimeout(t)}};function gt(){var t=typeof window<"u"?window:{};return ue(t,mr),t}function pr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},de(t)}function ee(t,e){return ee=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o},ee(t,e)}function hr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function te(t,e,r){return hr()?te=Reflect.construct:te=function(i,a,l){var c=[null];c.push.apply(c,a);var s=Function.bind.apply(i,c),d=new s;return l&&ee(d,l.prototype),d},te.apply(null,arguments)}function gr(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function me(t){var e=typeof Map=="function"?new Map:void 0;return me=function(o){if(o===null||!gr(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(o))return e.get(o);e.set(o,i)}function i(){return te(o,arguments,de(this).constructor)}return i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ee(i,o)},me(t)}function br(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yr(t){var e=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return e},set:function(o){e.__proto__=o}})}var H=function(t){pr(e,t);function e(r){var o;return o=t.call.apply(t,[this].concat(r))||this,yr(br(o)),o}return e}(me(Array));function pe(t){t===void 0&&(t=[]);var e=[];return t.forEach(function(r){Array.isArray(r)?e.push.apply(e,pe(r)):e.push(r)}),e}function wr(t){for(var e=[],r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function vr(t){return t.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function _r(t,e){if(typeof t!="string")return[t];for(var r=[],o=e.querySelectorAll(t),i=0;i<o.length;i+=1)r.push(o[i]);return r}function N(t,e){var r=gt(),o=fe(),i=[];if(!e&&t instanceof H)return t;if(!t)return new H(i);if(typeof t=="string"){var a=t.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var l="div";a.indexOf("<li")===0&&(l="ul"),a.indexOf("<tr")===0&&(l="tbody"),(a.indexOf("<td")===0||a.indexOf("<th")===0)&&(l="tr"),a.indexOf("<tbody")===0&&(l="table"),a.indexOf("<option")===0&&(l="select");var c=o.createElement(l);c.innerHTML=a;for(var s=0;s<c.childNodes.length;s+=1)i.push(c.childNodes[s])}else i=_r(t.trim(),e||o)}else if(t.nodeType||t===r||t===o)i.push(t);else if(Array.isArray(t)){if(t instanceof H)return t;i=t}return new H(wr(i))}N.fn=H.prototype;function bt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=pe(e.map(function(i){return i.split(" ")}));return this.forEach(function(i){var a;(a=i.classList).add.apply(a,o)}),this}function yt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=pe(e.map(function(i){return i.split(" ")}));return this.forEach(function(i){var a;(a=i.classList).remove.apply(a,o)}),this}function wt(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(var o in t)this[r][o]=t[o],this[r].setAttribute(o,t[o]);return this}function vt(){var t=this[0];if(t){var e={};if(t.dataset)for(var r in t.dataset)e[r]=t.dataset[r];else for(var o=0;o<t.attributes.length;o+=1){var i=t.attributes[o];i.name.indexOf("data-")>=0&&(e[vr(i.name.split("data-")[1])]=i.value)}for(var a in e)e[a]==="false"?e[a]=!1:e[a]==="true"?e[a]=!0:parseFloat(e[a])===e[a]*1&&(e[a]*=1);return e}}function _t(t){if(typeof t>"u"){var e=this[0];if(!e)return;if(e.multiple&&e.nodeName.toLowerCase()==="select"){for(var r=[],o=0;o<e.selectedOptions.length;o+=1)r.push(e.selectedOptions[o].value);return r}return e.value}for(var i=0;i<this.length;i+=1){var a=this[i];if(Array.isArray(t)&&a.multiple&&a.nodeName.toLowerCase()==="select")for(var l=0;l<a.options.length;l+=1)a.options[l].selected=t.indexOf(a.options[l].value)>=0;else a.value=t}return this}function xt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=e[0],i=e[1],a=e[2],l=e[3];typeof e[1]=="function"&&(o=e[0],a=e[1],l=e[2],i=void 0),l||(l=!1);function c(f){var b=f.target;if(b){var S=f.target.dom7EventData||[];if(S.indexOf(f)<0&&S.unshift(f),N(b).is(i))a.apply(b,S);else for(var k=N(b).parents(),g=0;g<k.length;g+=1)N(k[g]).is(i)&&a.apply(k[g],S)}}function s(f){var b=f&&f.target?f.target.dom7EventData||[]:[];b.indexOf(f)<0&&b.unshift(f),a.apply(this,b)}for(var d=o.split(" "),u,m=0;m<this.length;m+=1){var p=this[m];if(i)for(u=0;u<d.length;u+=1){var h=d[u];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[h]||(p.dom7LiveListeners[h]=[]),p.dom7LiveListeners[h].push({listener:a,proxyListener:c}),p.addEventListener(h,c,l)}else for(u=0;u<d.length;u+=1){var _=d[u];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[_]||(p.dom7Listeners[_]=[]),p.dom7Listeners[_].push({listener:a,proxyListener:s}),p.addEventListener(_,s,l)}}return this}function St(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=e[0],i=e[1],a=e[2],l=e[3];typeof e[1]=="function"&&(o=e[0],a=e[1],l=e[2],i=void 0),l||(l=!1);for(var c=o.split(" "),s=0;s<c.length;s+=1)for(var d=c[s],u=0;u<this.length;u+=1){var m=this[u],p=void 0;if(!i&&m.dom7Listeners?p=m.dom7Listeners[d]:i&&m.dom7LiveListeners&&(p=m.dom7LiveListeners[d]),p&&p.length)for(var _=p.length-1;_>=0;_-=1){var h=p[_];a&&h.listener===a||a&&h.listener&&h.listener.dom7proxy&&h.listener.dom7proxy===a?(m.removeEventListener(d,h.proxyListener,l),p.splice(_,1)):a||(m.removeEventListener(d,h.proxyListener,l),p.splice(_,1))}}return this}function Et(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function kt(t){return t?(this.forEach(function(e,r){t.apply(e,[e,r])}),this):this}function Ct(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function Vt(t){var e=gt(),r=fe(),o=this[0],i,a;if(!o||typeof t>"u")return!1;if(typeof t=="string"){if(o.matches)return o.matches(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);for(i=N(t),a=0;a<i.length;a+=1)if(i[a]===o)return!0;return!1}if(t===r)return o===r;if(t===e)return o===e;if(t.nodeType||t instanceof H){for(i=t.nodeType?[t]:t,a=0;a<i.length;a+=1)if(i[a]===o)return!0;return!1}return!1}function Nt(){for(var t,e=fe(),r=0;r<arguments.length;r+=1){t=r<0||arguments.length<=r?void 0:arguments[r];for(var o=0;o<this.length;o+=1)if(typeof t=="string"){var i=e.createElement("div");for(i.innerHTML=t;i.firstChild;)this[o].appendChild(i.firstChild)}else if(t instanceof H)for(var a=0;a<t.length;a+=1)this[o].appendChild(t[a]);else this[o].appendChild(t)}return this}function Ot(t){for(var e=[],r=0;r<this.length;r+=1)for(var o=this[r].parentNode;o;)t?N(o).is(t)&&e.push(o):e.push(o),o=o.parentNode;return N(e)}function Mt(t){for(var e=[],r=0;r<this.length;r+=1)for(var o=this[r].querySelectorAll(t),i=0;i<o.length;i+=1)e.push(o[i]);return N(e)}function Bt(t){for(var e=[],r=0;r<this.length;r+=1)for(var o=this[r].children,i=0;i<o.length;i+=1)(!t||N(o[i]).is(t))&&e.push(o[i]);return N(e)}var xr="resize scroll".split(" ");function Tt(t){function e(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];if(typeof o[0]>"u"){for(var a=0;a<this.length;a+=1)xr.indexOf(t)<0&&(t in this[a]?this[a][t]():N(this[a]).trigger(t));return this}return this.on.apply(this,[t].concat(o))}return e}var Dt=Tt("click"),It=Tt("focus");Et&&(N.fn.hide=Et),Nt&&(N.fn.append=Nt),Dt&&(N.fn.click=Dt),xt&&(N.fn.on=xt),St&&(N.fn.off=St),It&&(N.fn.focus=It),wt&&(N.fn.attr=wt),_t&&(N.fn.val=_t),Ct&&(N.fn.html=Ct),vt&&(N.fn.dataset=vt),bt&&(N.fn.addClass=bt),yt&&(N.fn.removeClass=yt),Bt&&(N.fn.children=Bt),kt&&(N.fn.each=kt),Mt&&(N.fn.find=Mt),Vt&&(N.fn.is=Vt),Ot&&(N.fn.parents=Ot);const Sr=globalThis.Node,Er=globalThis.Comment,kr=globalThis.Element,Cr=globalThis.Text,Vr=globalThis.Range,Nr=globalThis.Selection,Or=globalThis.StaticRange;function $t(t,e,r,o,i){N("body").on("click",`#${o}-${e}`,dr(a=>{a.preventDefault();const l=Br(t,r,o);return l&&i(l)}))}function P(t,e,r,o){return $t(t,"close",e,r,o)}function Mr(t,e,r,o){return $t(t,"play",e,r,o)}function Br(t,e,r){const[o]=w.SlateEditor.nodes(t,{at:[],match:i=>!w.SlateElement.isElement(i)||!w.DomEditor.checkNodeType(i,e)?!1:i.domId===r});return o}function ne(t,e,r){const o=w.SlateEditor.previous(t,{at:e[1],match:i=>w.SlateText.isText(i)});o!=null&&(w.SlateTransforms.insertText(t,r(e[0]),{at:w.SlateEditor.end(t,o[1])}),w.SlateTransforms.delete(t,{at:w.SlatePath.next(o[1])}))}function Tr(){return L("w-e-dom-speaker")}let Dr=class{getValue(e){const{selection:r}=e;return r==null?null:w.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;if(r==null||w.SlateRange.isCollapsed(r))return!0;const o=w.SlateEditor.string(e,r);return o.length!=1||!/^[\u4E00-\u9FA5]+$/gi.test(o)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const a={type:"ssml-p",domId:Tr(),word:i,phoneme:r,remark:r,bgColor:"speaker",children:[{text:""}]};w.SlateTransforms.delete(e),w.SlateTransforms.insertNodes(e,a),e.move(1),P(e,"ssml-p",a.domId,l=>{ne(e,l,c=>c.word)})}};function Ir(t){const e={我:[{id:"1",text:"wo1",remark:"wo1"},{id:"2",text:"wo2",remark:"wo2"},{id:"3",text:"wo3",remark:"wo3"}],的:[{id:"1",text:"de1",remark:"de1"},{id:"2",text:"de2",remark:"de2"},{id:"3",text:"de3",remark:"de3"}]};return Promise.resolve(e[t]||e.我)}const he=n.defineComponent({emits:["error"],props:["fetch"],setup(t,{emit:e}){const r=new Dr,o=n.inject("editor"),i=n.ref([]),a=n.ref(!1);function l(){a.value||(a.value=!0)}function c(){a.value&&(a.value=!1)}async function s(d){const u=r.getValue(d);if(u?i.value=await(t.fetch||Ir)(u):i.value=[],r.isDisabled(d))return e("error","选中一个中文字符，并且有不能在其他语句之内");if(i.value.length==0)return e("error","选中的字符没有不是多音字");l()}return()=>n.createVNode(O.ElPopover,{visible:a.value,"onUpdate:visible":d=>a.value=d,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(T,{text:"多音字",icon:"speaker",onClick:s},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[i.value.map(({id:d,text:u})=>n.createVNode("div",{key:d,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,u),c()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});function $r(){return L("w-e-dom-continuous")}class Lr{getValue(e){const{selection:r}=e;return r==null?"":w.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||w.SlateRange.isCollapsed(r)||w.SlateEditor.string(e,r).length<2)}exec(e){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const o=this.getValue(e);if(o==null)return;const i={type:"ssml-w",domId:$r(),children:[{text:o}],remark:"连读",bgColor:"continuous"};w.SlateTransforms.delete(e),w.SlateTransforms.insertNodes(e,i),P(e,"ssml-w",i.domId,a=>{w.SlateTransforms.unwrapNodes(e,{at:a[1]})})}}const ge=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Lr;function o(i){if(r.isDisabled(i))return e("error","请选择多个中文字符或者多个多个英文单词");r.exec(i)}return()=>n.createVNode(T,{text:"连读",icon:"continuous",onClick:o},null)}});function Pr(){return L("w-e-dom-read")}class Ar{getValue(e){const{selection:r}=e;return r==null?"":w.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||w.SlateRange.isCollapsed(r)||w.SlateEditor.string(e,r).length<=0)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const a={type:"ssml-w",domId:Pr(),phoneme:r.id,remark:r.remark,value:i,bgColor:"read",children:[{text:i}]};w.SlateTransforms.delete(e),w.SlateTransforms.insertNodes(e,a),P(e,"ssml-w",a.domId,l=>ne(e,l,()=>i))}}const Rr=[{id:"z",text:"重音",remark:"重"},{id:"t",text:"拖音",remark:"拖"},{id:"all",text:"重音+拖音",remark:"重+拖"}],be=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Ar,o=n.inject("editor"),i=n.ref(!1);function a(){i.value||(i.value=!0)}function l(){i.value&&(i.value=!1)}function c(s){if(r.isDisabled(s)){e("error","请先选择文本");return}a()}return()=>n.createVNode(O.ElPopover,{visible:i.value,"onUpdate:visible":s=>i.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(T,{text:"重音",icon:"read",onClick:c},null),default:()=>n.createVNode("div",{class:"d-flex flex-column",onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[Rr.map(({id:s,text:d,remark:u})=>n.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,{id:s,text:d,remark:u}),l()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[d]))])})}});function Fr(){return L("w-e-dom-digital")}class jr{getValue(e){const{selection:r}=e;return r==null?"":w.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;if(r==null||w.SlateRange.isCollapsed(r))return!0;const o=w.SlateEditor.string(e,r);return!!(o.length<=0||Number.isNaN(Number(o)))}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const a={type:"ssml-say-as",domId:Fr(),interpretAs:r.id,remark:r.remark,bgColor:"digital",children:[{text:i}]};w.SlateTransforms.delete(e),w.SlateTransforms.insertNodes(e,a),P(e,"ssml-say-as",a.domId,l=>{w.SlateTransforms.unwrapNodes(e,{at:l[1]})})}}const Ur=[{id:"value",text:"读数值",remark:"读数值"},{id:"digits",text:"读数字",remark:"读数字"},{id:"telephone",text:"读手机号",remark:"读手机号"}],ye=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new jr,o=n.inject("editor"),i=n.ref(!1);function a(){i.value=!i.value}function l(c){if(r.isDisabled(c)){e("error","请选择纯数字文本");return}a()}return()=>n.createVNode(O.ElPopover,{visible:i.value,"onUpdate:visible":c=>i.value=c,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(T,{text:"数字符号",icon:"digital",onClick:l},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[Ur.map(({id:c,text:s,remark:d})=>n.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,{id:c,text:s,remark:d}),a()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});function Wr(){return L("w-e-dom-alias")}class zr{getValue(e){const{selection:r}=e;return r==null?null:w.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||w.SlateRange.isCollapsed(r)||w.SlateEditor.string(e,r).length<=0)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const a={type:"ssml-sub",domId:Wr(),remark:`(${r})`,alias:r,value:i,bgColor:"alias",children:[{text:""}]};w.SlateTransforms.delete(e),w.SlateTransforms.insertNodes(e,a),P(e,"ssml-sub",a.domId,l=>ne(e,l,c=>c.value))}}const we=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new zr,o=n.inject("editor"),i=n.ref(),a=n.ref(!1),l=n.shallowRef();function c(){a.value||(a.value=!0)}function s(){a.value&&(a.value=!1)}async function d(m){if(r.isDisabled(m)){e("error","选中一个中文字符，并且有不能在其他语句之内");return}c(),l.value=m.selection,i.value.focus()}function u(m){s();const p=o==null?void 0:o.value;!p||!m||(p.select(l.value),!r.isDisabled(p)&&r.exec(p,m))}return()=>n.createVNode(O.ElPopover,{visible:a.value,"onUpdate:visible":m=>a.value=m,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>n.createVNode(T,{text:"别名",icon:"alias",onClick:d},null),default:()=>n.createVNode(Y,{ref:i,onSubmit:u},null)})}});function Hr(t){const{selection:e}=t;if(e){const[r,o]=w.SlateRange.edges(e),i=w.SlateEditor.range(t,r,o),a=w.SlateEditor.string(t,i),l=a.trimEnd();if(l!==a){const c=a.length-l.length,s={...o,offset:o.offset-c},d={...e,anchor:r,focus:s};w.SlateTransforms.select(t,d)}}}function qr(){return L("w-e-dom-english")}class Kr{getValue(e){const{selection:r}=e;return r==null?null:w.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;if(r==null||w.SlateRange.isCollapsed(r))return!0;const o=w.SlateEditor.string(e,r);return o.length<=0||!/^[A-Za-z]+$/gi.test(o)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const a={type:"ssml-p",domId:qr(),word:i,phoneme:r,remark:r,bgColor:"english",children:[{text:""}]};w.SlateTransforms.delete(e),w.SlateTransforms.insertNodes(e,a),e.move(1),P(e,"ssml-p",a.domId,l=>ne(e,l,c=>c.word))}}function Xr(t){const e={translate:[{id:"1",text:"wərd",remark:"wərd"}],global:[{id:"2",text:"ˈɡlōbəl",remark:"ˈɡlōbəl"}]};return Promise.resolve(e[t]||e.translate)}const ve=n.defineComponent({emits:["error"],props:["popover","fetch"],setup(t,{emit:e}){const r=new Kr,o=n.inject("editor"),i=n.ref([]),a=n.ref(!1);function l(){a.value||(a.value=!0)}function c(){a.value&&(a.value=!1)}async function s(d){if(Hr(d),r.isDisabled(d))return e("error","请选择英文单词");const u=r.getValue(d);if(u){if(i.value=await(t.fetch||Xr)(u),i.value.length<=0)return e("error","找不到单词的音标");l()}}return()=>n.createVNode(O.ElPopover,{visible:a.value,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(T,{text:"音标",icon:"english",onClick:s},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[i.value.map(({id:d,text:u})=>n.createVNode("div",{key:d,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,u),c()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});function Gr(){return L("w-e-dom-changespeed")}class Yr{getValue(e){const{selection:r}=e;return r==null?null:w.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||w.SlateRange.isCollapsed(r)||w.SlateEditor.string(e,r).length<=1)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const a={type:"ssml-prosody",domId:Gr(),remark:r,rate:r,bgColor:"changespeed",children:[{text:i}]};w.SlateTransforms.delete(e),w.SlateTransforms.insertNodes(e,a),P(e,"ssml-prosody",a.domId,l=>{w.SlateTransforms.unwrapNodes(e,{at:l[1]})})}}function Qr(){const t=[];for(let e=2;e<=40;e++){const r=`${(e*.05).toFixed(2)}x`;t.push({id:e.toString(),text:r,remark:r})}return Promise.resolve(t)}const _e=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Yr,o=n.inject("editor"),i=n.ref([]),a=n.ref(!1);function l(){a.value||(a.value=!0)}function c(){a.value&&(a.value=!1)}async function s(d){if(i.value=await Qr(),r.isDisabled(d)){e("error","选中一个中文字符，并且有不能在其他语句之内");return}l()}return()=>n.createVNode(O.ElPopover,{style:{padding:"0px"},visible:a.value,"onUpdate:visible":d=>a.value=d,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(T,{text:"局部变速",icon:"changespeed",onClick:s},null),default:()=>n.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[i.value.map(({id:d,text:u})=>n.createVNode("div",{key:d,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,u),c()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});function Zr(){return L("w-e-dom-rhythm")}class Jr{isDisabled(e){const{selection:r}=e;return!!(r==null||w.SlateRange.isExpanded(r))}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i={type:"ssml-break",domId:Zr(),time:r.id,remark:r.remark,bgColor:"rhythm",children:[{text:""}]};w.SlateTransforms.insertNodes(e,i),e.move(1),P(e,"ssml-break",i.domId,a=>{w.SlateTransforms.delete(e,{at:a[1]})})}}const eo=[{id:"200ms",text:"短",remark:"短"},{id:"300ms",text:"中",remark:"中"},{id:"500ms",text:"长",remark:"长"}],xe=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Jr,o=n.inject("editor"),i=n.ref(!1);function a(){i.value||(i.value=!0)}function l(){i.value&&(i.value=!1)}function c(s){if(r.isDisabled(s)){e("error","不能选择文本");return}a()}return()=>n.createVNode(O.ElPopover,{visible:i.value,"onUpdate:visible":s=>i.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(T,{text:"停顿调节",icon:"rhythm",onClick:c},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[eo.map(({id:s,text:d,remark:u})=>n.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,{id:s,text:d,remark:u}),l()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[d]))])})}});var Se={exports:{}},Lt={exports:{}},to=void 0,Pt=function(t){return t!==to&&t!==null},no=Pt,ro={object:!0,function:!0,undefined:!0},oo=function(t){return no(t)?hasOwnProperty.call(ro,typeof t):!1},io=oo,ao=function(t){if(!io(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},lo=ao,so=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!lo(t)},co=so,uo=/^\s*class[\s{/}]/,fo=Function.prototype.toString,mo=function(t){return!(!co(t)||uo.test(fo.call(t)))},po=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},Ee,At;function ho(){return At||(At=1,Ee=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Ee}var go=function(){},bo=go(),ke=function(t){return t!==bo&&t!==null},Ce,Rt;function yo(){if(Rt)return Ce;Rt=1;var t=ke,e=Object.keys;return Ce=function(r){return e(t(r)?Object(r):r)},Ce}var Ve,Ft;function wo(){return Ft||(Ft=1,Ve=ho()()?Object.keys:yo()),Ve}var Ne,jt;function vo(){if(jt)return Ne;jt=1;var t=ke;return Ne=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},Ne}var Oe,Ut;function _o(){if(Ut)return Oe;Ut=1;var t=wo(),e=vo(),r=Math.max;return Oe=function(o,i){var a,l,c=r(arguments.length,2),s;for(o=Object(e(o)),s=function(d){try{o[d]=i[d]}catch(u){a||(a=u)}},l=1;l<c;++l)i=arguments[l],t(i).forEach(s);if(a!==void 0)throw a;return o},Oe}var xo=po()?Object.assign:_o(),So=ke,Eo=Array.prototype.forEach,ko=Object.create,Co=function(t,e){var r;for(r in t)e[r]=t[r]},Vo=function(t){var e=ko(null);return Eo.call(arguments,function(r){So(r)&&Co(Object(r),e)}),e},Me="razdwatrzy",No=function(){return typeof Me.contains!="function"?!1:Me.contains("dwa")===!0&&Me.contains("foo")===!1},Be,Wt;function Oo(){if(Wt)return Be;Wt=1;var t=String.prototype.indexOf;return Be=function(e){return t.call(this,e,arguments[1])>-1},Be}var Mo=No()?String.prototype.contains:Oo(),re=Pt,zt=mo,Ht=xo,qt=Vo,G=Mo,Bo=Lt.exports=function(t,e){var r,o,i,a,l;return arguments.length<2||typeof t!="string"?(a=e,e=t,t=null):a=arguments[2],re(t)?(r=G.call(t,"c"),o=G.call(t,"e"),i=G.call(t,"w")):(r=i=!0,o=!1),l={value:e,configurable:r,enumerable:o,writable:i},a?Ht(qt(a),l):l};Bo.gs=function(t,e,r){var o,i,a,l;return typeof t!="string"?(a=r,r=e,e=t,t=null):a=arguments[3],re(e)?zt(e)?re(r)?zt(r)||(a=r,r=void 0):r=void 0:(a=e,e=r=void 0):e=void 0,re(t)?(o=G.call(t,"c"),i=G.call(t,"e")):(o=!0,i=!1),l={get:e,set:r,configurable:o,enumerable:i},a?Ht(qt(a),l):l};var To=Lt.exports,Do=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var r=To,o=Do,i=Function.prototype.apply,a=Function.prototype.call,l=Object.create,c=Object.defineProperty,s=Object.defineProperties,d=Object.prototype.hasOwnProperty,u={configurable:!0,enumerable:!1,writable:!0},m,p,_,h,f,b,S;m=function(k,g){var v;return o(g),d.call(this,"__ee__")?v=this.__ee__:(v=u.value=l(null),c(this,"__ee__",u),u.value=null),v[k]?typeof v[k]=="object"?v[k].push(g):v[k]=[v[k],g]:v[k]=g,this},p=function(k,g){var v,E;return o(g),E=this,m.call(this,k,v=function(){_.call(E,k,v),i.call(g,this,arguments)}),v.__eeOnceListener__=g,this},_=function(k,g){var v,E,y,C;if(o(g),!d.call(this,"__ee__"))return this;if(v=this.__ee__,!v[k])return this;if(E=v[k],typeof E=="object")for(C=0;y=E[C];++C)(y===g||y.__eeOnceListener__===g)&&(E.length===2?v[k]=E[C?0:1]:E.splice(C,1));else(E===g||E.__eeOnceListener__===g)&&delete v[k];return this},h=function(k){var g,v,E,y,C;if(d.call(this,"__ee__")&&(y=this.__ee__[k],!!y))if(typeof y=="object"){for(v=arguments.length,C=new Array(v-1),g=1;g<v;++g)C[g-1]=arguments[g];for(y=y.slice(),g=0;E=y[g];++g)i.call(E,this,C)}else switch(arguments.length){case 1:a.call(y,this);break;case 2:a.call(y,this,arguments[1]);break;case 3:a.call(y,this,arguments[1],arguments[2]);break;default:for(v=arguments.length,C=new Array(v-1),g=1;g<v;++g)C[g-1]=arguments[g];i.call(y,this,C)}},f={on:m,once:p,off:_,emit:h},b={on:r(m),once:r(p),off:r(_),emit:r(h)},S=s({},b),t.exports=e=function(k){return k==null?l(S):s(Object(k),b)},e.methods=f})(Se,Se.exports);var Io=Se.exports;const V=se(Io)();function Te(t){if(window.navigator.userAgent.toLowerCase().indexOf("ie")>=0){const r=`<embed name="embedPlay" src="${t}"></embed>`;N("body").find("embed").length<=0&&N("body").append(r);const o=document.embedPlay;o.volume=100}else{const r=`<audio id='audioPlay' src='${t}' hidden='true'>`;N("body").find("audio").length<=0&&N("body").append(r),document.getElementById("audioPlay").play()}}function $o(){return L("w-e-dom-special")}class Lo{constructor(e){Ye(this,"editor");Ye(this,"oldSelection");this.editor=e}recordSelection(){this.oldSelection=this.editor.selection}getSelection(){const{selection:e}=this.editor;return e??this.oldSelection}getValue(){const{selection:e}=this.editor;return e==null?null:w.SlateEditor.string(this.editor,e)}isDisabled(){const e=this.getSelection();return e==null?(V.emit("editor-error","未选中编辑器"),!0):w.SlateRange.isExpanded(e)?(V.emit("editor-error","不能框选文字"),!0):!1}exec(e){if(this.isDisabled()||(this.editor.select(this.getSelection()),this.getValue()==null))return;const o={type:"ssml-audio",domId:$o(),src:e.value,remark:e.label,bgColor:"special",children:[{text:""}]};w.SlateTransforms.insertNodes(this.editor,o),this.editor.move(1),P(this.editor,"ssml-audio",o.domId,i=>w.SlateTransforms.delete(this.editor,{at:i[1]})),Mr(this.editor,"ssml-audio",o.domId,i=>Te(i[0].src))}}const De=n.defineComponent({__name:"special-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:a}=X(e),l=s=>{if(r.value??(r.value=new Lo(s)),r.value.isDisabled())return!1;r.value.recordSelection(),V.emit("special-menu-click",{x:o.value-200,y:i.value+a.value})};function c(s){r.value&&!r.value.isDisabled()&&r.value.exec(s)}return n.onMounted(()=>{V.on("special-drag-box-submit",c)}),n.onUnmounted(()=>{V.off("special-drag-box-submit",c)}),(s,d)=>(n.openBlock(),n.createBlock(n.unref(T),{ref_key:"menuRef",ref:e,text:"音效",icon:"special",onClick:l},null,512))}}),Ie=n.defineComponent({__name:"special-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认音效",second:"自定义音效",last:"最近音效"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=n.ref();n.onMounted(()=>{V.on("special-menu-click",s)}),n.onUnmounted(()=>{V.off("special-menu-click",s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-3s.wav#1",label:`${u.search||"测试"}音效1`},{value:"https://download.samplelib.com/wav/sample-3s.wav#2",label:`${u.menuKey||"测试"}音效2`},{value:"https://download.samplelib.com/wav/sample-3s.wav#3",label:`${u.scene||"测试"}音效3`},{value:"https://download.samplelib.com/wav/sample-3s.wav#4",label:`${u.style||"测试"}音效4`}])}async function s(u){r.value=u,e.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function d(u){e.value=!1,V.emit("special-drag-box-submit",u)}return(u,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}});function Po(){return L("w-e-dom-mute")}class Ao{isDisabled(e){const{selection:r}=e;return!!(r==null||w.SlateRange.isExpanded(r))}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i={type:"ssml-break",domId:Po(),time:r,remark:r,bgColor:"mute",children:[{text:""}]};w.SlateTransforms.insertNodes(e,i),e.move(1),P(e,"ssml-break",i.domId,a=>{w.SlateTransforms.delete(e,{at:a[1]})})}}const Ro=[{id:"150ms",text:"150ms",remark:"150ms"},{id:"200ms",text:"200ms",remark:"200ms"},{id:"300ms",text:"300ms",remark:"300ms"},{id:"400ms",text:"400ms",remark:"400ms"},{id:"500ms",text:"500ms",remark:"500ms"},{id:"600ms",text:"600ms",remark:"600ms"}],$e=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Ao,o=n.inject("editor");o||e("error","请注入editor");const i=n.ref(!1),a=n.ref(),l=n.shallowRef();function c(){i.value||(i.value=!0)}function s(){i.value&&(i.value=!1)}function d(m){if(r.isDisabled(m)){e("error","不能选择文本");return}c(),l.value=m.selection,a.value.focus()}function u(m){s();const p=o==null?void 0:o.value;!p||!m||(p.select(l.value),!r.isDisabled(p)&&r.exec(p,m))}return()=>n.createVNode(O.ElPopover,{visible:i.value,"onUpdate:visible":m=>i.value=m,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>n.createVNode(T,{text:"插入静音",icon:"mute",onClick:d},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[Ro.map(({id:m,text:p})=>n.createVNode("div",{key:m,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>u(m),onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[p])),n.createVNode(Y,{type:"number",ref:a,onSubmit:u},null)])})}}),Le=n.defineComponent({__name:"bgm-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:a}=X(e),l=s=>{r.value=s,V.emit("bgm-menu-click",{x:o.value-200,y:i.value+a.value})};function c(s){var d;(d=r.value)==null||d.emit("updateBgm",s)}return n.onMounted(()=>{V.on("bgm-drag-box-submit",c)}),n.onUnmounted(()=>{V.off("gbm-drag-box-submit",c)}),(s,d)=>(n.openBlock(),n.createBlock(n.unref(T),{ref_key:"menuRef",ref:e,text:"配乐",icon:"bgm",onClick:l},null,512))}}),Pe=n.defineComponent({__name:"bgm-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=n.ref();n.onMounted(()=>{V.on("bgm-menu-click",s)}),n.onUnmounted(()=>{V.off("bgm-menu-click",s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){r.value=u,e.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function d(u){e.value=!1,V.emit("bgm-drag-box-submit",u)}return(u,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Ae=n.defineComponent({__name:"sensitive-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:a}=X(e),l=s=>{r.value=s,V.emit("sensitive-menu-click",{x:o.value-200,y:i.value+a.value})};function c(s){var d;(d=r.value)==null||d.emit("sensitive",s)}return n.onMounted(()=>{V.on("sensitive-drag-box-submit",c)}),n.onUnmounted(()=>{V.off("sensitive-drag-box-submit",c)}),(s,d)=>(n.openBlock(),n.createBlock(n.unref(T),{ref_key:"menuRef",ref:e,text:"敏感词",icon:"sensitive",onClick:l},null,512))}}),Re=n.defineComponent({__name:"sensitive-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=n.ref();n.onMounted(()=>{V.on("sensitive-menu-click",s)}),n.onUnmounted(()=>{V.off("sensitive-menu-click",s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){r.value=u,e.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function d(u){e.value=!1,V.emit("sensitive-drag-box-submit",u)}return(u,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Fe=n.defineComponent({__name:"management-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:a}=X(e),l=s=>{r.value=s,V.emit("management-menu-click",{x:o.value-200,y:i.value+a.value})};function c(s){var d;(d=r.value)==null||d.emit("management",s)}return n.onMounted(()=>{V.on("management-drag-box-submit",c)}),n.onUnmounted(()=>{V.off("management-drag-box-submit",c)}),(s,d)=>(n.openBlock(),n.createBlock(n.unref(T),{ref_key:"menuRef",ref:e,text:"多人配音",icon:"management",onClick:l},null,512))}}),je=n.defineComponent({__name:"management-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=n.ref();n.onMounted(()=>{V.on("management-menu-click",s)}),n.onUnmounted(()=>{V.off("management-menu-click",s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){r.value=u,e.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function d(u){e.value=!1,V.emit("management-drag-box-submit",u)}return(u,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Ue=n.defineComponent({__name:"conversion-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:a}=X(e),l=s=>{r.value=s,V.emit("bgm-menu-click",{x:o.value-200,y:i.value+a.value})};function c(s){var d;(d=r.value)==null||d.emit("updateBgm",s)}return n.onMounted(()=>{V.on("bgm-drag-box-submit",c)}),n.onUnmounted(()=>{V.off("gbm-drag-box-submit",c)}),(s,d)=>(n.openBlock(),n.createBlock(n.unref(T),{ref_key:"menuRef",ref:e,text:"局部变音",icon:"conversion",onClick:l},null,512))}}),We=n.defineComponent({__name:"conversion-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=n.ref();n.onMounted(()=>{V.on("conversion-menu-click",s)}),n.onUnmounted(()=>{V.off("conversion-menu-click",s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){r.value=u,e.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function d(u){e.value=!1,V.emit("conversion-drag-box-submit",u)}return(u,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Fo=n.createElementVNode("div",null,"xxxxx",-1),ze=n.defineComponent({__name:"try-play",setup(t){return(e,r)=>(n.openBlock(),n.createBlock(n.unref(ae),null,{default:n.withCtx(()=>[Fo]),_:1}))}}),da="",jo={install:t=>{t.component("SpeakerMenu",he),t.component("ContinuousMenu",ge),t.component("ReadMenu",be),t.component("DigitalMenu",ye),t.component("AliasMenu",we),t.component("EnglishMenu",ve),t.component("ChangespeedMenu",_e),t.component("RhythmMenu",xe),t.component("SpecialMenu",De),t.component("SpecialDragBox",Ie),t.component("MuteMenu",$e),t.component("BgmMenu",Le),t.component("BgmDragBox",Pe),t.component("SensitiveMenu",Ae),t.component("SensitiveDragBox",Re),t.component("ManagementMenu",Fe),t.component("ManagementDragBox",je),t.component("ConversionMenu",Ue),t.component("ConversionDragBox",We),t.component("TryPlay",ze)}},ma="",pa="",ha="";var He={exports:{}},qe={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParsingError=void 0;class r extends Error{constructor(v,E){super(v),this.cause=E}}e.ParsingError=r;let o;function i(){return s(!1)||p()||m()||u()}function a(){return f(/\s*/),s(!0)||m()||d()||c(!1)}function l(){const g=c(!0),v=[];let E,y=a();for(;y;){if(y.node.type==="Element"){if(E)throw new Error("Found multiple root nodes");E=y.node}y.excluded||v.push(y.node),y=a()}if(!E)throw new r("Failed to parse XML","Root Element not found");if(o.xml.length!==0)throw new r("Failed to parse XML","Not Well-Formed XML");return{declaration:g?g.node:null,root:E,children:v}}function c(g){const v=f(g?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!v)return;const E={name:v[1],type:"ProcessingInstruction",attributes:{}};for(;!(b()||S("?>"));){const y=_();if(y)E.attributes[y.name]=y.value;else return}return f(/\?>/),{excluded:g?!1:o.options.filter(E)===!1,node:E}}function s(g){const v=f(/^<([^?!</>\s]+)\s*/);if(!v)return;const E={type:"Element",name:v[1],attributes:{},children:[]},y=g?!1:o.options.filter(E)===!1;for(;!(b()||S(">")||S("?>")||S("/>"));){const B=_();if(B)E.attributes[B.name]=B.value;else return}if(f(/^\s*\/>/))return E.children=null,{excluded:y,node:E};f(/\??>/);let C=i();for(;C;)C.excluded||E.children.push(C.node),C=i();if(o.options.strictMode){const B=`</${E.name}>`;if(o.xml.startsWith(B))o.xml=o.xml.slice(B.length);else throw new r("Failed to parse XML",`Closing tag not matching "${B}"`)}else f(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:y,node:E}}function d(){const g=f(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||f(/^<!DOCTYPE\s+\S+\s*>/);if(g){const v={type:"DocumentType",content:g[0]};return{excluded:o.options.filter(v)===!1,node:v}}}function u(){if(o.xml.startsWith("<![CDATA[")){const g=o.xml.indexOf("]]>");if(g>-1){const v=g+3,E={type:"CDATA",content:o.xml.substring(0,v)};return o.xml=o.xml.slice(v),{excluded:o.options.filter(E)===!1,node:E}}}}function m(){const g=f(/^<!--[\s\S]*?-->/);if(g){const v={type:"Comment",content:g[0]};return{excluded:o.options.filter(v)===!1,node:v}}}function p(){const g=f(/^([^<]+)/);if(g){const v={type:"Text",content:g[1]};return{excluded:o.options.filter(v)===!1,node:v}}}function _(){const g=f(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(g)return{name:g[1].trim(),value:h(g[2].trim())}}function h(g){return g.replace(/^['"]|['"]$/g,"")}function f(g){const v=o.xml.match(g);if(v)return o.xml=o.xml.slice(v[0].length),v}function b(){return o.xml.length===0}function S(g){return o.xml.indexOf(g)===0}function k(g,v={}){g=g.trim();const E=v.filter||(()=>!0);return o={xml:g,options:Object.assign(Object.assign({},v),{filter:E,strictMode:v.strictMode===!0})},l()}t.exports=k,e.default=k})(qe,qe.exports);var Uo=qe.exports;(function(t,e){var r=K&&K.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(Uo);function i(h){if(!h.options.indentation&&!h.options.lineSeparator)return;h.content+=h.options.lineSeparator;let f;for(f=0;f<h.level;f++)h.content+=h.options.indentation}function a(h){h.content=h.content.replace(/ +$/,"");let f;for(f=0;f<h.level;f++)h.content+=h.options.indentation}function l(h,f){h.content+=f}function c(h,f,b){if(typeof h.content=="string")s(h.content,f,b);else if(h.type==="Element")u(h,f,b);else if(h.type==="ProcessingInstruction")p(h,f);else throw new Error("Unknown node type: "+h.type)}function s(h,f,b){if(!b){const S=h.trim();(f.options.lineSeparator||S.length===0)&&(h=S)}h.length>0&&(!b&&f.content.length>0&&i(f),l(f,h))}function d(h,f){const b="/"+h.join("/"),S=h[h.length-1];return f.includes(S)||f.includes(b)}function u(h,f,b){if(f.path.push(h.name),!b&&f.content.length>0&&i(f),l(f,"<"+h.name),m(f,h.attributes),h.children===null||f.options.forceSelfClosingEmptyTag&&h.children.length===0){const S=f.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";l(f,S)}else if(h.children.length===0)l(f,"></"+h.name+">");else{const S=h.children;l(f,">"),f.level++;let k=h.attributes["xml:space"]==="preserve",g=!1;if(!k&&f.options.ignoredPaths&&(g=d(f.path,f.options.ignoredPaths),k=g),!k&&f.options.collapseContent){let v=!1,E=!1,y=!1;S.forEach(function(C,B){C.type==="Text"?(C.content.includes(`
`)?(E=!0,C.content=C.content.trim()):(B===0||B===S.length-1)&&C.content.trim().length===0&&(C.content=""),C.content.trim().length>0&&(v=!0)):C.type==="CDATA"?v=!0:y=!0}),v&&(!y||!E)&&(k=!0)}S.forEach(function(v){c(v,f,b||k)}),f.level--,!b&&!k&&i(f),g&&a(f),l(f,"</"+h.name+">")}f.path.pop()}function m(h,f){Object.keys(f).forEach(function(b){const S=f[b].replace(/"/g,"&quot;");l(h," "+b+'="'+S+'"')})}function p(h,f){f.content.length>0&&i(f),l(f,"<?"+h.name),m(f,h.attributes),l(f,"?>")}function _(h,f={}){f.indentation="indentation"in f?f.indentation:"    ",f.collapseContent=f.collapseContent===!0,f.lineSeparator="lineSeparator"in f?f.lineSeparator:`\r
`,f.whiteSpaceAtEndOfSelfclosingTag=f.whiteSpaceAtEndOfSelfclosingTag===!0,f.throwOnFailure=f.throwOnFailure!==!1;try{const b=(0,o.default)(h,{filter:f.filter,strictMode:f.strictMode}),S={content:"",level:0,options:f,path:[]};return b.declaration&&p(b.declaration,S),b.children.forEach(function(k){c(k,S,!1)}),f.lineSeparator?S.content.replace(/\r\n/g,`
`).replace(/\n/g,f.lineSeparator):S.content}catch(b){if(f.throwOnFailure)throw b;return h}}_.minify=(h,f={})=>_(h,Object.assign(Object.assign({},f),{indentation:"",lineSeparator:""})),t.exports=_,e.default=_})(He,He.exports);var Wo=He.exports;const zo=se(Wo),A=t=>(n.pushScopeId("data-v-dc5f32f2"),t=t(),n.popScopeId(),t),Ho={class:"edit-title"},qo={class:"title-wrapper"},Ko=A(()=>n.createElementVNode("div",{class:"title-author"},"SSML编辑器",-1)),Xo=A(()=>n.createElementVNode("div",{class:"h h-1"},null,-1)),Go={class:"author"},Yo=A(()=>n.createElementVNode("div",null,"已保存",-1)),Qo=A(()=>n.createElementVNode("div",null,"|",-1)),Zo=A(()=>n.createElementVNode("div",{class:"w-2"},null,-1)),Jo=A(()=>n.createElementVNode("span",{class:"iconfont icon-play font-size-12 p1"},null,-1)),ei=A(()=>n.createElementVNode("div",{class:"inline-block w-1 p-1"},null,-1)),ti={class:"operation-wrapper"},ni=A(()=>n.createElementVNode("div",{class:"menu-divider"},null,-1)),ri=A(()=>n.createElementVNode("div",{class:"w w-2"},null,-1)),oi={class:"ssml-code"},ii={class:"dialog-footer"},ai=n.defineComponent({__name:"editor-title",props:{characterTotal:{},characterMax:{},bgm:{}},setup(t){const e=n.inject("editor"),r=n.ref(!1),o=n.ref(""),i=n.computed(()=>zo(o.value,{indentation:"    ",filter:c=>c.type!=="Comment",collapseContent:!1,lineSeparator:`
`})),a=()=>{e&&(o.value=e.value.getHtml(),r.value=!0)},l=()=>{var c;(c=e==null?void 0:e.value)==null||c.emit("removeBgm")};return(c,s)=>(n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",Ho,[n.createElementVNode("div",qo,[Ko,Xo,n.createElementVNode("div",Go,[Yo,Qo,n.createElementVNode("div",null,n.toDisplayString(c.characterTotal)+"/"+n.toDisplayString(c.characterMax)+"字",1),Zo,c.bgm?(n.openBlock(),n.createBlock(n.unref(O.ElTag),{key:0,class:"bgm-txt p-2",closable:"",size:"small",onClick:s[0]||(s[0]=()=>c.bgm&&c.bgm.value&&n.unref(Te)(c.bgm.value)),onClose:l},{default:n.withCtx(()=>[Jo,ei,n.createElementVNode("span",null,n.toDisplayString(c.bgm.label),1)]),_:1})):n.createCommentVNode("",!0)])]),n.createElementVNode("div",ti,[n.createVNode(n.unref(O.ElButton),{type:"primary",icon:n.unref(Qe.Share),disabled:""},{default:n.withCtx(()=>[n.createTextVNode("分享")]),_:1},8,["icon"]),ni,n.createVNode(n.unref(O.ElButton),{type:"primary",onClick:a},{default:n.withCtx(()=>[n.createTextVNode("查看SSML")]),_:1}),n.createVNode(n.unref(O.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("下载音频")]),_:1}),n.createVNode(n.unref(O.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("下载视频")]),_:1}),n.createVNode(n.unref(O.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("下载字幕")]),_:1}),n.createVNode(n.unref(O.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("声音转换")]),_:1}),ri])]),n.createVNode(n.unref(O.ElDialog),{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=d=>r.value=d),title:"查看SSML",width:"50%"},{footer:n.withCtx(()=>[n.createElementVNode("span",ii,[n.createVNode(n.unref(O.ElButton),{type:"primary",onClick:s[1]||(s[1]=d=>r.value=!1)},{default:n.withCtx(()=>[n.createTextVNode(" 确定 ")]),_:1})])]),default:n.withCtx(()=>[n.createElementVNode("pre",oi,n.toDisplayString(i.value),1)]),_:1},8,["modelValue"])],64))}}),ga="",li=R(ai,[["__scopeId","data-v-dc5f32f2"]]),si=n.defineComponent({__name:"editor-core",props:{editorConfig:{},defaultHtml:{}},emits:["created","change"],setup(t,{emit:e}){const r=t,o=n.ref(null);n.onMounted(()=>{i()});const i=()=>{o.value&&w.createEditor({selector:o.value,mode:"simple",html:n.toRaw(r.defaultHtml),config:{...n.toRaw(r.editorConfig),onCreated(a){const l=a.getConfig();l.hoverbarKeys=void 0,a.focus(!0),e("created",a)},onChange(a){e("change",a)}}})};return(a,l)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"boxRef",ref:o,class:"edit-core",style:{height:"600px","overflow-y":"hidden"}},null,512))}});function Kt(t,e,r,o,i){const a=e===void 0?void 0:e.key;return{sel:t,data:e,children:r,text:o,elm:i,key:a}}const Xt=Array.isArray;function Ke(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function Gt(t,e,r){if(t.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&e!==void 0)for(let o=0;o<e.length;++o){const i=e[o];if(typeof i=="string")continue;const a=i.data;a!==void 0&&Gt(a,i.children,i.sel)}}function M(t,e,r){let o={},i,a,l;if(r!==void 0?(e!==null&&(o=e),Xt(r)?i=r:Ke(r)?a=r.toString():r&&r.sel&&(i=[r])):e!=null&&(Xt(e)?i=e:Ke(e)?a=e.toString():e&&e.sel?i=[e]:o=e),i!==void 0)for(l=0;l<i.length;++l)Ke(i[l])&&(i[l]=Kt(void 0,void 0,void 0,i[l],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&Gt(o,i,t),Kt(t,o,i,a,void 0)}const U={style:{userSelect:"none"},contentEditable:!1};function Xe(t){return M("span.ssml-wrap",[M(`span.tag.bg-color.${t.bgColor}`,{...U},[M("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),M(`span#${t.domId}-close.btn-close`,M("span.iconfont.icon-roundclosefill",null))]),M(`span.boundary.start.ft-color.${t.bgColor}`,{...U}),M("span",t.plain),M(`span.boundary.end.ft-color.${t.bgColor}`,{...U})])}function Ge(t,e){return M("span.ssml-wrap",[M(`span.tag.bg-color.${t.bgColor}`,{...U},[M("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),M(`span#${t.domId}-close.btn-close`,M("span.iconfont.icon-roundclosefill",null))]),M(`span.boundary.start.ft-color.${t.bgColor}`,{...U}),M("span",e),M(`span.boundary.end.ft-color.${t.bgColor}`,{...U})])}function ci(t){return M("span.ssml-wrap",[M(`span.tag.bg-color.${t.bgColor}`,{...U},[M("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),M(`span#${t.domId}-close.btn-close`,M("span.iconfont.icon-roundclosefill",null))])])}function ui(t){return M("span.ssml-wrap",[M(`span.tag.bg-color.${t.bgColor}`,{...U},[M(`span#${t.domId}-play.btn-text`,M("span.iconfont.icon-play",null)),M("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),M(`span#${t.domId}-close.btn-text`,M("span.iconfont.icon-roundclosefill",null))])])}function fi(t){const e=t;return Xe({...e,plain:e.word})}function di(t,e){if(e)return Ge(t,e);const r=t;return Xe({...r,plain:r.value})}function mi(t,e){if(!e)throw Error("children is not null");return Ge(t,e)}function pi(t){return ci(t)}function hi(t){const e=t;return Xe({...e,plain:e.value})}function gi(t,e){if(!e)throw Error("children is not null");return Ge(t,e)}function bi(t){return ui(t)}const yi=[{type:"ssml-p",renderElem:fi},{type:"ssml-w",renderElem:di},{type:"ssml-say-as",renderElem:mi},{type:"ssml-break",renderElem:pi},{type:"ssml-sub",renderElem:hi},{type:"ssml-prosody",renderElem:gi},{type:"ssml-audio",renderElem:bi}];function ba(t){return t}function wi(t,e){return`<s>${e}</s>`}function vi(t,e){const{phoneme:r,value:o}=t;return r?`<w phoneme="${r}">${o}</w>`:`<w>${e}</w>`}function _i(t){const{word:e,phoneme:r}=t;return`<p ph="${r}">${e}</p>`}function xi(t,e){const{interpretAs:r}=t;return`<say-as interpret-as="${r}">${e}</say-as>`}function Si(t){const{time:e}=t;return`<break time="${e}" />`}function Ei(t){const{alias:e,value:r}=t;return`<sub alias="${e}">${r}</sub>`}function ki(t,e){const{rate:r}=t;return`<prosody rate="${r}">${e}</prosody>`}function Ci(t){const{src:e}=t;return`<audio src="${e}" />`}const Vi=[{type:"paragraph",elemToHtml:wi},{type:"ssml-w",elemToHtml:vi},{type:"ssml-p",elemToHtml:_i},{type:"ssml-say-as",elemToHtml:xi},{type:"ssml-break",elemToHtml:Si},{type:"ssml-sub",elemToHtml:Ei},{type:"ssml-prosody",elemToHtml:ki},{type:"ssml-audio",elemToHtml:Ci}];function Ni(t,e){return{type:"paragraph",children:e}}function Oi(t,e){const r=t.getAttribute("phoneme");return r?{type:"ssml-w",phoneme:r,value:t.textContent,children:[{text:t.textContent||""}]}:{type:"ssml-w",children:e}}const Mi=[{selector:"s",parseElemHtml:Ni},{selector:"w",parseElemHtml:Oi}];function D(t,e){return t===e}function Bi(t){const{isInline:e,isVoid:r,deleteBackward:o,deleteForward:i,insertBreak:a,getHtml:l,apply:c,normalizeNode:s}=t,d=t;d.isInline=m=>{const p=w.DomEditor.getNodeType(m);return D(p,"ssml-w")||D(p,"ssml-p")||D(p,"ssml-break")||D(p,"ssml-say-as")||D(p,"ssml-sub")||D(p,"ssml-prosody")||D(p,"ssml-audio")?!0:e(m)},d.isVoid=m=>{const p=w.DomEditor.getNodeType(m);if(D(p,"ssml-w")){const{phoneme:_}=m;return!!_}return D(p,"ssml-p")||D(p,"ssml-break")?!0:D(p,"ssml-say-as")?!1:D(p,"ssml-sub")?!0:D(p,"ssml-prosody")?!1:D(p,"ssml-audio")?!0:r(m)},d.deleteBackward=m=>{o(m)},d.deleteForward=m=>{i(m)},d.insertBreak=()=>{a()},d.normalizeNode=m=>{s(m)};const u={voice:"",volume:"",pitch:""};return t.on("updateSpeak",m=>{Object.assign(u,m)}),t.on("updateBgm",m=>{u.bgm=m.value,u.bgmRemark=m.label}),t.on("removeBgm",()=>{u.bgm=void 0,u.bgmRemark=void 0}),d.getHtml=()=>{const m=[];for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const _=u[p];_&&m.push(`${p}=${_}`)}return`<speak ${m.join(" ")}>${l()}</speak>`},d.apply=m=>{c(m)},d}const ya="",Ti={editorPlugin:Bi,renderElems:yi,elemsToHtml:Vi,parseElemsHtml:Mi},wa="",va="",Di={class:"content"},Ii=n.defineComponent({__name:"bar-view",setup(t){n.onMounted(()=>{V.on("editor-error",e)}),n.onUnmounted(()=>{V.off("editor-error",e)});function e(i){O.ElMessage.warning({message:i,grouping:!0})}function r(i){const a={我:[{id:"1",text:"wo1",remark:"wo1"},{id:"2",text:"wo2",remark:"wo2"},{id:"3",text:"wo3",remark:"wo3"}],的:[{id:"1",text:"de1",remark:"de1"},{id:"2",text:"de2",remark:"de2"},{id:"3",text:"de3",remark:"de3"}]};return Promise.resolve(a[i]||a.的)}function o(i){const a={translate:[{id:"1",text:"wərd",remark:"wərd"}],global:[{id:"2",text:"ˈɡlōbəl",remark:"ˈɡlōbəl"}]};return Promise.resolve(a[i]||a.translate)}return(i,a)=>(n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",Di,[n.createVNode(n.unref(le),null,{default:n.withCtx(()=>[n.createVNode(n.unref(j),{divider:"green"},{default:n.withCtx(()=>[n.createVNode(n.unref(T),{text:"24K高清音质",icon:"play",disabled:""})]),_:1}),n.createVNode(n.unref(j),{divider:"cyan"},{default:n.withCtx(()=>[n.createVNode(n.unref(he),{onError:e,fetch:r}),n.createVNode(n.unref(be),{onError:e}),n.createVNode(n.unref(ye),{onError:e}),n.createVNode(n.unref(ge),{onError:e}),n.createVNode(n.unref(we),{onError:e}),n.createVNode(n.unref(ve),{fetch:o,onError:e})]),_:1}),n.createVNode(n.unref(j),{divider:"orange"},{default:n.withCtx(()=>[n.createVNode(n.unref(_e),{onError:e}),n.createVNode(n.unref(Fe)),n.createVNode(n.unref(Ue))]),_:1}),n.createVNode(n.unref(j),{divider:"purple"},{default:n.withCtx(()=>[n.createVNode(n.unref(xe),{onError:e}),n.createVNode(n.unref($e),{onError:e})]),_:1}),n.createVNode(n.unref(j),{divider:"yellow"},{default:n.withCtx(()=>[n.createVNode(n.unref(De)),n.createVNode(n.unref(Le))]),_:1}),n.createVNode(n.unref(j),null,{default:n.withCtx(()=>[n.createVNode(n.unref(Ae))]),_:1})]),_:1})]),n.createVNode(n.unref(Pe)),n.createVNode(n.unref(Ie)),n.createVNode(n.unref(Re)),n.createVNode(n.unref(je)),n.createVNode(n.unref(We)),n.createVNode(n.unref(ze))],64))}}),$i=t=>(n.pushScopeId("data-v-60e192fb"),t=t(),n.popScopeId(),t),Li={class:"edit-view"},Pi={class:"edit-box"},Ai=$i(()=>n.createElementVNode("div",{class:"h h-1"},null,-1)),Ri={class:"editor"},Fi=`地球在极其遥远的未来可能面临一些威胁，但目前不太可能突然消失。
The Earth may face some threats in the extremely distant future, but it is currently unlikely to suddenly disappear.
`,ji=n.defineComponent({__name:"editor-view",emits:["onCreated","onChange"],setup(t,{emit:e}){const r=n.ref(0),o=n.shallowRef(),i=n.ref(null);n.provide("editor",o);const a={maxLength:5e3,placeholder:"请输入内容..."};n.onUnmounted(()=>{var s;(s=o.value)==null||s.destroy()});const l=s=>{o.value=s,e("onCreated",s),s.on("updateBgm",d=>{i.value=d}),s.on("removeBgm",()=>{i.value=null})},c=s=>{r.value=s.getText().length,e("onChange",s)};return(s,d)=>(n.openBlock(),n.createElementBlock("div",Li,[n.createVNode(li,{bgm:i.value,"character-total":r.value,"character-max":a.maxLength||0},null,8,["bgm","character-total","character-max"]),n.createElementVNode("div",Pi,[n.createVNode(Ii),Ai,n.createElementVNode("div",Ri,[n.createVNode(si,{"editor-config":a,"default-html":Fi,onChange:c,onCreated:l})])])]))}}),_a="",Yt=R(ji,[["__scopeId","data-v-60e192fb"]]),Ui={install(t){t.component("EditorView",Yt)}},xa="",Wi={install(t){t.use(qn),t.use(jo),t.use(Ui)}};x.AliasMenu=we,x.BarButton=T,x.BarInput=Y,x.BarPopover=Ze,x.BarSearch=W,x.BarWrapper=le,x.BarWrapperGroup=j,x.BarWrapperItem=ut,x.BgmDragBox=Pe,x.BgmMenu=Le,x.ChangespeedMenu=_e,x.ContinuousMenu=ge,x.ConversionDragBox=We,x.ConversionMenu=Ue,x.DOMComment=Er,x.DOMElement=kr,x.DOMNode=Sr,x.DOMRange=Vr,x.DOMSelection=Nr,x.DOMStaticRange=Or,x.DOMText=Cr,x.DigitalMenu=ye,x.DragBox=z,x.EditorCoreModule=Ti,x.EditorView=Yt,x.EnglishMenu=ve,x.FixedPanel=ae,x.ManagementDragBox=je,x.ManagementMenu=Fe,x.MuteMenu=$e,x.ReadMenu=be,x.RhythmMenu=xe,x.SensitiveDragBox=Re,x.SensitiveMenu=Ae,x.SpeakerMenu=he,x.SpecialDragBox=Ie,x.SpecialMenu=De,x.TryPlay=ze,x.default=Wi,x.genRandomStr=L,x.playSound=Te,Object.defineProperties(x,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
