(function(x,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("@wangeditor/editor"),require("element-plus"),require("@element-plus/icons-vue")):typeof define=="function"&&define.amd?define(["exports","vue","@wangeditor/editor","element-plus","@element-plus/icons-vue"],e):(x=typeof globalThis<"u"?globalThis:x||self,e(x.SSMLEditor={},x.Vue,x.wangEditor,x.ElementPlus,x.ElementPlusIconsVue))})(this,function(x,e,E,I,ue){"use strict";var pa=Object.defineProperty;var ma=(x,e,E)=>e in x?pa(x,e,{enumerable:!0,configurable:!0,writable:!0,value:E}):x[e]=E;var A=(x,e,E)=>(ma(x,typeof e!="symbol"?e+"":e,E),E);const X={EDITOR:"ssml-editor",EDITORCONFIG:"ssml-editor-config"},S={ERROR:"emitter-ediror-error",BGM_MENU_CLICK:"emitter-bgm-menu-click",BGM_DRAG_BOX_SUBMIT:"emitter-bgm-drag-box-submit",CONVERSION_MENU_CLICK:"emitter-conversion-menu-click",CONVERSION_DRAG_BOX_SUBMIT:"emitter-conversion-drag-box-submit",MANAGEMENT_MENU_CLICK:"emitter-management-menu-click",MANAGEMENT_DRAG_BOX_SUBMIT:"emitter-management-drag-box-submit",SPECIAL_MENU_CLICK:"emitter-special-menu-click",SPECIAL_DRAG_BOX_SUBMIT:"emitter-special-drag-box-submit",SENSITIVE_MENU_CLICK:"emitter-sensitive-menu-click",SENSITIVE_DRAG_BOX_SUBMIT:"emitter-sensitive-drag-box-submit"},j={UPDATE_BGM:"wangeditor-update-bgm",REMOVE_BGM:"wangeditor-remove-bgm",UPDATE_SPEAK:"wangeditor-update-speak"},ln={class:"bar-button-icon"},sn={class:"fw-normal",style:{"font-size":"0.85rem"}},cn=e.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:n}){const o=t,r=e.inject(X.EDITOR),i=()=>{o.disabled||n("click",r.value)};return(a,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["bar-button px-2 py-1",{disabled:a.disabled}]),onClick:i,onMousedown:l[0]||(l[0]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",ln,[e.createElementVNode("span",{class:e.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${a.icon}`]])},null,2)]),e.createElementVNode("div",sn,e.toDisplayString(a.text),1)],34))}}),Oa="",$=(t,n)=>{const o=t.__vccOpts||t;for(const[r,i]of n)o[r]=i;return o},R=$(cn,[["__scopeId","data-v-7741060a"]]),Ba="",ka="",Ra="",te=e.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(t,{expose:n,emit:o}){const r=e.ref(""),i=e.ref();function a(){i.value.focus()}function l(){o("submit",r.value),r.value=""}return n({focus:a}),(c,s)=>(e.openBlock(),e.createBlock(e.unref(I.ElForm),{class:"flex flex-row",onSubmit:e.withModifiers(l,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElInput),{type:c.type,ref_key:"inputRef",ref:i,modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=m=>r.value=m)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}}),$a="",Da="",at=e.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(t){return(n,o)=>(e.openBlock(),e.createBlock(e.unref(I.ElPopover),{hideAfter:n.hideAfter,width:n.width,visible:n.visible,trigger:n.trigger,"onUpdate:visible":o[0]||(o[0]=r=>n.$emit("update:visible",r))},{reference:e.withCtx(()=>[e.renderSlot(n.$slots,"reference")]),default:e.withCtx(()=>[e.renderSlot(n.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}}),Aa="",La="",Pa="",Ua="",Fa="",Ga="",ja="",Ka="",Wa="";function ne(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function L(t){return typeof t=="function"?t():e.unref(t)}const oe=typeof window<"u",dn=t=>t!=null,re=()=>{};var un=Object.defineProperty,fn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,mn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,st=(t,n,o)=>n in t?un(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,_n=(t,n)=>{for(var o in n||(n={}))mn.call(n,o)&&st(t,o,n[o]);if(lt)for(var o of lt(n))hn.call(n,o)&&st(t,o,n[o]);return t},gn=(t,n)=>fn(t,pn(n));function bn(t,n={}){if(!e.isRef(t))return e.toRefs(t);const o=Array.isArray(t.value)?Array.from({length:t.value.length}):{};for(const r in t.value)o[r]=e.customRef(()=>({get(){return t.value[r]},set(i){var a;if((a=L(n.replaceRef))!=null?a:!0)if(Array.isArray(t.value)){const c=[...t.value];c[r]=i,t.value=c}else{const c=gn(_n({},t.value),{[r]:i});Object.setPrototypeOf(c,Object.getPrototypeOf(t.value)),t.value=c}else t.value[r]=i}}));return o}function ct(t,n=!0){e.getCurrentInstance()?e.onMounted(t):n?t():e.nextTick(t)}function P(t){var n;const o=L(t);return(n=o==null?void 0:o.$el)!=null?n:o}const K=oe?window:void 0;function Q(...t){let n,o,r,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([o,r,i]=t,n=K):[n,o,r,i]=t,!n)return re;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const a=[],l=()=>{a.forEach(u=>u()),a.length=0},c=(u,f,h,y)=>(u.addEventListener(f,h,y),()=>u.removeEventListener(f,h,y)),s=e.watch(()=>[P(n),L(i)],([u,f])=>{l(),u&&a.push(...o.flatMap(h=>r.map(y=>c(u,h,y,f))))},{immediate:!0,flush:"post"}),m=()=>{s(),l()};return ne(m),m}function yn(){const t=e.ref(!1);return e.getCurrentInstance()&&e.onMounted(()=>{t.value=!0}),t}function fe(t){const n=yn();return e.computed(()=>(n.value,!!t()))}function wn(t,n={}){const{window:o=K}=n,r=fe(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let i;const a=e.ref(!1),l=m=>{a.value=m.matches},c=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",l):i.removeListener(l))},s=e.watchEffect(()=>{r.value&&(c(),i=o.matchMedia(L(t)),"addEventListener"in i?i.addEventListener("change",l):i.addListener(l),a.value=i.matches)});return ne(()=>{s(),c(),i=void 0}),a}var xn=Object.defineProperty,En=Object.defineProperties,Nn=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable,ut=(t,n,o)=>n in t?xn(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,Sn=(t,n)=>{for(var o in n||(n={}))Vn.call(n,o)&&ut(t,o,n[o]);if(dt)for(var o of dt(n))Cn.call(n,o)&&ut(t,o,n[o]);return t},vn=(t,n)=>En(t,Nn(n));function ie(t,n={}){var o,r;const{pointerTypes:i,preventDefault:a,stopPropagation:l,exact:c,onMove:s,onEnd:m,onStart:u,initialValue:f,axis:h="both",draggingElement:y=K,handle:p=t}=n,d=e.ref((o=L(f))!=null?o:{x:0,y:0}),g=e.ref(),N=b=>i?i.includes(b.pointerType):!0,T=b=>{L(a)&&b.preventDefault(),L(l)&&b.stopPropagation()},_=b=>{if(!N(b)||L(c)&&b.target!==L(t))return;const M=L(t).getBoundingClientRect(),k={x:b.clientX-M.left,y:b.clientY-M.top};(u==null?void 0:u(k,b))!==!1&&(g.value=k,T(b))},w=b=>{if(!N(b)||!g.value)return;let{x:M,y:k}=d.value;(h==="x"||h==="both")&&(M=b.clientX-g.value.x),(h==="y"||h==="both")&&(k=b.clientY-g.value.y),d.value={x:M,y:k},s==null||s(d.value,b),T(b)},C=b=>{N(b)&&g.value&&(g.value=void 0,m==null||m(d.value,b),T(b))};if(oe){const b={capture:(r=n.capture)!=null?r:!0};Q(p,"pointerdown",_,b),Q(y,"pointermove",w,b),Q(y,"pointerup",C,b)}return vn(Sn({},bn(d)),{position:d,isDragging:e.computed(()=>!!g.value),style:e.computed(()=>`left:${d.value.x}px;top:${d.value.y}px;`)})}var ft=Object.getOwnPropertySymbols,Tn=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,In=(t,n)=>{var o={};for(var r in t)Tn.call(t,r)&&n.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&ft)for(var r of ft(t))n.indexOf(r)<0&&Mn.call(t,r)&&(o[r]=t[r]);return o};function pt(t,n,o={}){const r=o,{window:i=K}=r,a=In(r,["window"]);let l;const c=fe(()=>i&&"ResizeObserver"in i),s=()=>{l&&(l.disconnect(),l=void 0)},m=e.computed(()=>Array.isArray(t)?t.map(h=>P(h)):[P(t)]),u=e.watch(m,h=>{if(s(),c.value&&i){l=new ResizeObserver(n);for(const y of h)y&&l.observe(y,a)}},{immediate:!0,flush:"post",deep:!0}),f=()=>{s(),u()};return ne(f),{isSupported:c,stop:f}}function J(t,n={}){const{reset:o=!0,windowResize:r=!0,windowScroll:i=!0,immediate:a=!0}=n,l=e.ref(0),c=e.ref(0),s=e.ref(0),m=e.ref(0),u=e.ref(0),f=e.ref(0),h=e.ref(0),y=e.ref(0);function p(){const d=P(t);if(!d){o&&(l.value=0,c.value=0,s.value=0,m.value=0,u.value=0,f.value=0,h.value=0,y.value=0);return}const g=d.getBoundingClientRect();l.value=g.height,c.value=g.bottom,s.value=g.left,m.value=g.right,u.value=g.top,f.value=g.width,h.value=g.x,y.value=g.y}return pt(t,p),e.watch(()=>P(t),d=>!d&&p()),i&&Q("scroll",p,{capture:!0,passive:!0}),r&&Q("resize",p,{passive:!0}),ct(()=>{a&&p()}),{height:l,bottom:c,left:s,right:m,top:u,width:f,x:h,y,update:p}}function pe(t,n={width:0,height:0},o={}){const{window:r=K,box:i="content-box"}=o,a=e.computed(()=>{var s,m;return(m=(s=P(t))==null?void 0:s.namespaceURI)==null?void 0:m.includes("svg")}),l=e.ref(n.width),c=e.ref(n.height);return pt(t,([s])=>{const m=i==="border-box"?s.borderBoxSize:i==="content-box"?s.contentBoxSize:s.devicePixelContentBoxSize;if(r&&a.value){const u=P(t);if(u){const f=r.getComputedStyle(u);l.value=Number.parseFloat(f.width),c.value=Number.parseFloat(f.height)}}else if(m){const u=Array.isArray(m)?m:[m];l.value=u.reduce((f,{inlineSize:h})=>f+h,0),c.value=u.reduce((f,{blockSize:h})=>f+h,0)}else l.value=s.contentRect.width,c.value=s.contentRect.height},o),e.watch(()=>P(t),s=>{l.value=s?n.width:0,c.value=s?n.height:0}),{width:l,height:c}}function On(t,n,o={}){const{root:r,rootMargin:i="0px",threshold:a=.1,window:l=K,immediate:c=!0}=o,s=fe(()=>l&&"IntersectionObserver"in l),m=e.computed(()=>{const p=L(t);return(Array.isArray(p)?p:[p]).map(P).filter(dn)});let u=re;const f=e.ref(c),h=s.value?e.watch(()=>[m.value,P(r),f.value],([p,d])=>{if(u(),!f.value||!p.length)return;const g=new IntersectionObserver(n,{root:P(d),rootMargin:i,threshold:a});p.forEach(N=>N&&g.observe(N)),u=()=>{g.disconnect(),u=re}},{immediate:c,flush:"post"}):re,y=()=>{u(),h(),f.value=!1};return ne(y),{isSupported:s,isActive:f,pause(){u(),f.value=!1},resume(){f.value=!0},stop:y}}function Bn(t,{window:n=K,scrollTarget:o}={}){const r=e.ref(!1);return On(t,([{isIntersecting:i}])=>{r.value=i},{root:o,window:n}),r}function me(t={}){const{window:n=K,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:a=!0}=t,l=e.ref(o),c=e.ref(r),s=()=>{n&&(a?(l.value=n.innerWidth,c.value=n.innerHeight):(l.value=n.document.documentElement.clientWidth,c.value=n.document.documentElement.clientHeight))};if(s(),ct(s),Q("resize",s,{passive:!0}),i){const m=wn("(orientation: portrait)");e.watch(m,()=>s())}return{width:l,height:c}}const he=t=>(e.pushScopeId("data-v-9a2efc34"),t=t(),e.popScopeId(),t),kn={class:"search-content vh-50"},Rn={class:"ps-2 w-75"},$n={class:"menu"},Dn=he(()=>e.createElementVNode("div",{class:"h h-1"},null,-1)),An={class:"flex flex-row"},Ln=he(()=>e.createElementVNode("div",{class:"h-"},null,-1)),Pn={class:"content-list w-90"},Un=["onClick"],Fn=he(()=>e.createElementVNode("span",{class:"iconfont icon-play"},null,-1)),Gn=e.defineComponent({__name:"bar-search",props:{menuItemLabel:{},scenes:{},styles:{},dataList:{},fetch:{type:Function}},emits:["submit"],setup(t,{emit:n}){const o=t,r=e.ref(),i=e.ref(""),a=e.ref(""),l=e.ref(""),c=e.ref(o.dataList||[]),s=e.ref("first"),m=Bn(r);e.watch(m,y=>{y&&setTimeout(()=>{var p;(p=r.value)==null||p.focus()},100)}),e.onMounted(async()=>{await u()});async function u(){c.value=await o.fetch({search:i.value,menuKey:s.value,scene:a.value,style:l.value})}function f(y){s.value=y,u()}function h(y){n("submit",y)}return(y,p)=>(e.openBlock(),e.createElementBlock("div",kn,[e.createElementVNode("div",Rn,[e.createVNode(e.unref(I.ElForm),{onSubmit:e.withModifiers(u,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElInput),{ref_key:"searchInputRef",ref:r,placeholder:"搜索",modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=d=>i.value=d),"suffix-icon":e.unref(ue.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),e.createElementVNode("div",$n,[e.createVNode(e.unref(I.ElMenu),{mode:"horizontal","default-active":"first",onSelect:p[1]||(p[1]=d=>f(d))},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElMenuItem),{index:"first"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y.menuItemLabel.first),1)]),_:1}),e.createVNode(e.unref(I.ElMenuItem),{index:"second"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y.menuItemLabel.second),1)]),_:1}),e.createVNode(e.unref(I.ElMenuItem),{index:"last"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y.menuItemLabel.last),1)]),_:1})]),_:1})]),Dn,e.createElementVNode("div",An,[e.createVNode(e.unref(I.ElSelect),{modelValue:a.value,"onUpdate:modelValue":p[2]||(p[2]=d=>a.value=d),onChange:u,class:"m m-2",size:"large"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.scenes,d=>(e.openBlock(),e.createBlock(e.unref(I.ElOption),{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e.createVNode(e.unref(I.ElSelect),{modelValue:l.value,"onUpdate:modelValue":p[3]||(p[3]=d=>l.value=d),onChange:u,class:"m m-2",size:"large"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.styles,d=>(e.openBlock(),e.createBlock(e.unref(I.ElOption),{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),Ln,e.createElementVNode("div",Pn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(d,g)=>(e.openBlock(),e.createElementBlock("div",{onClick:N=>h(d),class:"content-list-item clickable ps-3",key:g},[Fn,e.createElementVNode("span",null,e.toDisplayString(d.label),1)],8,Un))),128))])]))}}),za="",H=$(Gn,[["__scopeId","data-v-9a2efc34"]]),mt=e.defineComponent({__name:"fixed-panel",emits:["dragging"],setup(t,{emit:n}){const o=e.ref(),r=oe?window.innerWidth:200,i=oe?window.innerHeight:200,{x:a,y:l}=ie(o,{initialValue:{x:r-100,y:i/2},preventDefault:!0,onStart:()=>{n("dragging",!0)},onEnd:()=>{n("dragging",!1)}}),{width:c,height:s}=pe(o),{width:m,height:u}=me(),f=e.computed(()=>({x:m.value-c.value,y:u.value-s.value})),h=e.computed(()=>{if(!f.value)return y(a.value,l.value);const p=a.value<5?5:a.value>f.value.x?f.value.x-5:a.value,d=l.value<5?5:l.value>f.value.y?f.value.y-5:l.value;return y(p,d)});function y(p,d){return`left:${p}px;top:${d}px`}return(p,d)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{ref_key:"boxRef",ref:o,class:"fixed-panel z-3 user-select-none",style:e.normalizeStyle([{position:"fixed"},h.value])},[e.renderSlot(p.$slots,"default")],4)]))}});function ht(t,n){return`left:${t}px;top:${n}px`}function _e(t,n){const{x:o,y:r}=n,{width:i,height:a}=pe(t),{width:l,height:c}=me(),s=e.computed(()=>({x:l.value-i.value,y:c.value-a.value}));return{style:e.computed(()=>{if(!s.value)return ht(o.value,r.value);const u=o.value<5?5:o.value>s.value.x?s.value.x-5:o.value,f=r.value<5?5:r.value>s.value.y?s.value.y-5:r.value;return ht(u,f)})}}const Xa="",jn={},Kn={class:"content"};function Wn(t,n){return e.openBlock(),e.createElementBlock("div",Kn,[e.renderSlot(t.$slots,"default",{},void 0,!0)])}const ge=$(jn,[["render",Wn],["__scopeId","data-v-7beae5b9"]]),zn={},Xn={class:"bar-wrapper-item"};function Hn(t,n){return e.openBlock(),e.createElementBlock("div",Xn,[e.renderSlot(t.$slots,"default")])}const _t=$(zn,[["render",Hn]]),qn={class:"bar-wrapper-group"},Yn={class:"group-items"},Qn=e.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",qn,[e.createElementVNode("div",Yn,[e.renderSlot(n.$slots,"default",{},void 0,!0)]),e.createElementVNode("div",{class:e.normalizeClass(["divider",[n.divider]])},null,2)]))}}),Ha="",W=$(Qn,[["__scopeId","data-v-3a7abad9"]]),Zn=e.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},position:{}},emits:["update:visible","update:position"],setup(t,{emit:n}){const o=t,r=e.ref(),{x:i,y:a}=ie(r,{initialValue:o.position}),{width:l,height:c}=pe(r),{width:s,height:m}=me();e.watch([i,a],([g,N])=>{n("update:position",{x:g,y:N})});const u=e.computed(()=>({x:s.value-l.value,y:m.value-c.value})),f=e.computed(()=>{const{x:g,y:N}=o.position;if(!u.value)return d(g,N);const T=g<5?5:g>u.value.x?u.value.x-5:g,_=N<5?5:N>u.value.y?u.value.y-5:N;return d(T,_)});e.onMounted(()=>{window.addEventListener("keydown",p)}),e.onUnmounted(()=>{window.addEventListener("keydown",p)});function h(){n("update:visible",!1)}function y(g){const N=g.target;r.value&&!r.value.contains(N)&&o.visible&&n("update:visible",!1)}function p(g){g.code==="Escape"&&o.visible&&h()}function d(g,N){return`left:${g}px;top:${N}px`}return(g,N)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{class:"drag-box-mask user-select-none",onClick:y},[e.createElementVNode("div",{ref_key:"boxRef",ref:r,class:"card shadow brag-box",style:e.normalizeStyle([{position:"fixed"},f.value])},[e.createElementVNode("div",{class:"w-100 text-end me-2"},[e.createElementVNode("span",{onClick:h,class:"btn iconfont icon-close fs-5"})]),e.renderSlot(g.$slots,"default",{},void 0,!0)],4)],512),[[e.vShow,g.visible]])]))}}),qa="",q=$(Zn,[["__scopeId","data-v-ca198ced"]]),Jn={install(t){t.component("BarButton",R),t.component("BarInput",te),t.component("BarPopover",at),t.component("BarSearch",H),t.component("FixedPanel",mt),t.component("BarWrapper",ge),t.component("BarWrapperItem",_t),t.component("BarWrapperGroup",W),t.component("DragBox",q)}};var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function be(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ye={exports:{}},gt={exports:{}},eo=void 0,bt=function(t){return t!==eo&&t!==null},to=bt,no={object:!0,function:!0,undefined:!0},oo=function(t){return to(t)?hasOwnProperty.call(no,typeof t):!1},ro=oo,io=function(t){if(!ro(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},ao=io,lo=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!ao(t)},so=lo,co=/^\s*class[\s{/}]/,uo=Function.prototype.toString,fo=function(t){return!(!so(t)||co.test(uo.call(t)))},po=function(){var t=Object.assign,n;return typeof t!="function"?!1:(n={foo:"raz"},t(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")},we,yt;function mo(){return yt||(yt=1,we=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),we}var ho=function(){},_o=ho(),xe=function(t){return t!==_o&&t!==null},Ee,wt;function go(){if(wt)return Ee;wt=1;var t=xe,n=Object.keys;return Ee=function(o){return n(t(o)?Object(o):o)},Ee}var Ne,xt;function bo(){return xt||(xt=1,Ne=mo()()?Object.keys:go()),Ne}var Ve,Et;function yo(){if(Et)return Ve;Et=1;var t=xe;return Ve=function(n){if(!t(n))throw new TypeError("Cannot use null or undefined");return n},Ve}var Ce,Nt;function wo(){if(Nt)return Ce;Nt=1;var t=bo(),n=yo(),o=Math.max;return Ce=function(r,i){var a,l,c=o(arguments.length,2),s;for(r=Object(n(r)),s=function(m){try{r[m]=i[m]}catch(u){a||(a=u)}},l=1;l<c;++l)i=arguments[l],t(i).forEach(s);if(a!==void 0)throw a;return r},Ce}var xo=po()?Object.assign:wo(),Eo=xe,No=Array.prototype.forEach,Vo=Object.create,Co=function(t,n){var o;for(o in t)n[o]=t[o]},So=function(t){var n=Vo(null);return No.call(arguments,function(o){Eo(o)&&Co(Object(o),n)}),n},Se="razdwatrzy",vo=function(){return typeof Se.contains!="function"?!1:Se.contains("dwa")===!0&&Se.contains("foo")===!1},ve,Vt;function To(){if(Vt)return ve;Vt=1;var t=String.prototype.indexOf;return ve=function(n){return t.call(this,n,arguments[1])>-1},ve}var Mo=vo()?String.prototype.contains:To(),ae=bt,Ct=fo,St=xo,vt=So,ee=Mo,Io=gt.exports=function(t,n){var o,r,i,a,l;return arguments.length<2||typeof t!="string"?(a=n,n=t,t=null):a=arguments[2],ae(t)?(o=ee.call(t,"c"),r=ee.call(t,"e"),i=ee.call(t,"w")):(o=i=!0,r=!1),l={value:n,configurable:o,enumerable:r,writable:i},a?St(vt(a),l):l};Io.gs=function(t,n,o){var r,i,a,l;return typeof t!="string"?(a=o,o=n,n=t,t=null):a=arguments[3],ae(n)?Ct(n)?ae(o)?Ct(o)||(a=o,o=void 0):o=void 0:(a=n,n=o=void 0):n=void 0,ae(t)?(r=ee.call(t,"c"),i=ee.call(t,"e")):(r=!0,i=!1),l={get:n,set:o,configurable:r,enumerable:i},a?St(vt(a),l):l};var Oo=gt.exports,Bo=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,n){var o=Oo,r=Bo,i=Function.prototype.apply,a=Function.prototype.call,l=Object.create,c=Object.defineProperty,s=Object.defineProperties,m=Object.prototype.hasOwnProperty,u={configurable:!0,enumerable:!1,writable:!0},f,h,y,p,d,g,N;f=function(T,_){var w;return r(_),m.call(this,"__ee__")?w=this.__ee__:(w=u.value=l(null),c(this,"__ee__",u),u.value=null),w[T]?typeof w[T]=="object"?w[T].push(_):w[T]=[w[T],_]:w[T]=_,this},h=function(T,_){var w,C;return r(_),C=this,f.call(this,T,w=function(){y.call(C,T,w),i.call(_,this,arguments)}),w.__eeOnceListener__=_,this},y=function(T,_){var w,C,b,M;if(r(_),!m.call(this,"__ee__"))return this;if(w=this.__ee__,!w[T])return this;if(C=w[T],typeof C=="object")for(M=0;b=C[M];++M)(b===_||b.__eeOnceListener__===_)&&(C.length===2?w[T]=C[M?0:1]:C.splice(M,1));else(C===_||C.__eeOnceListener__===_)&&delete w[T];return this},p=function(T){var _,w,C,b,M;if(m.call(this,"__ee__")&&(b=this.__ee__[T],!!b))if(typeof b=="object"){for(w=arguments.length,M=new Array(w-1),_=1;_<w;++_)M[_-1]=arguments[_];for(b=b.slice(),_=0;C=b[_];++_)i.call(C,this,M)}else switch(arguments.length){case 1:a.call(b,this);break;case 2:a.call(b,this,arguments[1]);break;case 3:a.call(b,this,arguments[1],arguments[2]);break;default:for(w=arguments.length,M=new Array(w-1),_=1;_<w;++_)M[_-1]=arguments[_];i.call(b,this,M)}},d={on:f,once:h,off:y,emit:p},g={on:o(f),once:o(h),off:o(y),emit:o(p)},N=s({},g),t.exports=n=function(T){return T==null?l(N):s(Object(T),g)},n.methods=d})(ye,ye.exports);var ko=ye.exports;const v=be(ko)();var Tt="Expected a function",Mt=0/0,Ro="[object Symbol]",$o=/^\s+|\s+$/g,Do=/^[-+]0x[0-9a-f]+$/i,Ao=/^0b[01]+$/i,Lo=/^0o[0-7]+$/i,Po=parseInt,Uo=typeof Z=="object"&&Z&&Z.Object===Object&&Z,Fo=typeof self=="object"&&self&&self.Object===Object&&self,Go=Uo||Fo||Function("return this")(),jo=Object.prototype,Ko=jo.toString,Wo=Math.max,zo=Math.min,Te=function(){return Go.Date.now()};function Xo(t,n,o){var r,i,a,l,c,s,m=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(Tt);n=It(n)||0,le(o)&&(u=!!o.leading,f="maxWait"in o,a=f?Wo(It(o.maxWait)||0,n):a,h="trailing"in o?!!o.trailing:h);function y(b){var M=r,k=i;return r=i=void 0,m=b,l=t.apply(k,M),l}function p(b){return m=b,c=setTimeout(N,n),u?y(b):l}function d(b){var M=b-s,k=b-m,an=n-M;return f?zo(an,a-k):an}function g(b){var M=b-s,k=b-m;return s===void 0||M>=n||M<0||f&&k>=a}function N(){var b=Te();if(g(b))return T(b);c=setTimeout(N,d(b))}function T(b){return c=void 0,h&&r?y(b):(r=i=void 0,l)}function _(){c!==void 0&&clearTimeout(c),m=0,r=s=i=c=void 0}function w(){return c===void 0?l:T(Te())}function C(){var b=Te(),M=g(b);if(r=arguments,i=this,s=b,M){if(c===void 0)return p(s);if(f)return c=setTimeout(N,n),y(s)}return c===void 0&&(c=setTimeout(N,n)),l}return C.cancel=_,C.flush=w,C}function Ho(t,n,o){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Tt);return le(o)&&(r="leading"in o?!!o.leading:r,i="trailing"in o?!!o.trailing:i),Xo(t,n,{leading:r,maxWait:n,trailing:i})}function le(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function qo(t){return!!t&&typeof t=="object"}function Yo(t){return typeof t=="symbol"||qo(t)&&Ko.call(t)==Ro}function It(t){if(typeof t=="number")return t;if(Yo(t))return Mt;if(le(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=le(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace($o,"");var o=Ao.test(t);return o||Lo.test(t)?Po(t.slice(2),o?2:8):Do.test(t)?Mt:+t}var Qo=Ho;const Zo=be(Qo);function Ot(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Me(t,n){t===void 0&&(t={}),n===void 0&&(n={}),Object.keys(n).forEach(function(o){typeof t[o]>"u"?t[o]=n[o]:Ot(n[o])&&Ot(t[o])&&Object.keys(n[o]).length>0&&Me(t[o],n[o])})}var Bt={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ie(){var t=typeof document<"u"?document:{};return Me(t,Bt),t}var Jo={document:Bt,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout>"u"||clearTimeout(t)}};function kt(){var t=typeof window<"u"?window:{};return Me(t,Jo),t}function er(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function Oe(t){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Oe(t)}function se(t,n){return se=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},se(t,n)}function tr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ce(t,n,o){return tr()?ce=Reflect.construct:ce=function(i,a,l){var c=[null];c.push.apply(c,a);var s=Function.bind.apply(i,c),m=new s;return l&&se(m,l.prototype),m},ce.apply(null,arguments)}function nr(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Be(t){var n=typeof Map=="function"?new Map:void 0;return Be=function(r){if(r===null||!nr(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return ce(r,arguments,Oe(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),se(i,r)},Be(t)}function or(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rr(t){var n=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return n},set:function(r){n.__proto__=r}})}var Y=function(t){er(n,t);function n(o){var r;return r=t.call.apply(t,[this].concat(o))||this,rr(or(r)),r}return n}(Be(Array));function ke(t){t===void 0&&(t=[]);var n=[];return t.forEach(function(o){Array.isArray(o)?n.push.apply(n,ke(o)):n.push(o)}),n}function ir(t){for(var n=[],o=0;o<t.length;o+=1)n.indexOf(t[o])===-1&&n.push(t[o]);return n}function ar(t){return t.toLowerCase().replace(/-(.)/g,function(n,o){return o.toUpperCase()})}function lr(t,n){if(typeof t!="string")return[t];for(var o=[],r=n.querySelectorAll(t),i=0;i<r.length;i+=1)o.push(r[i]);return o}function O(t,n){var o=kt(),r=Ie(),i=[];if(!n&&t instanceof Y)return t;if(!t)return new Y(i);if(typeof t=="string"){var a=t.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var l="div";a.indexOf("<li")===0&&(l="ul"),a.indexOf("<tr")===0&&(l="tbody"),(a.indexOf("<td")===0||a.indexOf("<th")===0)&&(l="tr"),a.indexOf("<tbody")===0&&(l="table"),a.indexOf("<option")===0&&(l="select");var c=r.createElement(l);c.innerHTML=a;for(var s=0;s<c.childNodes.length;s+=1)i.push(c.childNodes[s])}else i=lr(t.trim(),n||r)}else if(t.nodeType||t===o||t===r)i.push(t);else if(Array.isArray(t)){if(t instanceof Y)return t;i=t}return new Y(ir(i))}O.fn=Y.prototype;function Rt(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=ke(n.map(function(i){return i.split(" ")}));return this.forEach(function(i){var a;(a=i.classList).add.apply(a,r)}),this}function $t(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=ke(n.map(function(i){return i.split(" ")}));return this.forEach(function(i){var a;(a=i.classList).remove.apply(a,r)}),this}function Dt(t,n){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var o=0;o<this.length;o+=1)if(arguments.length===2)this[o].setAttribute(t,n);else for(var r in t)this[o][r]=t[r],this[o].setAttribute(r,t[r]);return this}function At(){var t=this[0];if(t){var n={};if(t.dataset)for(var o in t.dataset)n[o]=t.dataset[o];else for(var r=0;r<t.attributes.length;r+=1){var i=t.attributes[r];i.name.indexOf("data-")>=0&&(n[ar(i.name.split("data-")[1])]=i.value)}for(var a in n)n[a]==="false"?n[a]=!1:n[a]==="true"?n[a]=!0:parseFloat(n[a])===n[a]*1&&(n[a]*=1);return n}}function Lt(t){if(typeof t>"u"){var n=this[0];if(!n)return;if(n.multiple&&n.nodeName.toLowerCase()==="select"){for(var o=[],r=0;r<n.selectedOptions.length;r+=1)o.push(n.selectedOptions[r].value);return o}return n.value}for(var i=0;i<this.length;i+=1){var a=this[i];if(Array.isArray(t)&&a.multiple&&a.nodeName.toLowerCase()==="select")for(var l=0;l<a.options.length;l+=1)a.options[l].selected=t.indexOf(a.options[l].value)>=0;else a.value=t}return this}function Pt(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n[0],i=n[1],a=n[2],l=n[3];typeof n[1]=="function"&&(r=n[0],a=n[1],l=n[2],i=void 0),l||(l=!1);function c(d){var g=d.target;if(g){var N=d.target.dom7EventData||[];if(N.indexOf(d)<0&&N.unshift(d),O(g).is(i))a.apply(g,N);else for(var T=O(g).parents(),_=0;_<T.length;_+=1)O(T[_]).is(i)&&a.apply(T[_],N)}}function s(d){var g=d&&d.target?d.target.dom7EventData||[]:[];g.indexOf(d)<0&&g.unshift(d),a.apply(this,g)}for(var m=r.split(" "),u,f=0;f<this.length;f+=1){var h=this[f];if(i)for(u=0;u<m.length;u+=1){var p=m[u];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[p]||(h.dom7LiveListeners[p]=[]),h.dom7LiveListeners[p].push({listener:a,proxyListener:c}),h.addEventListener(p,c,l)}else for(u=0;u<m.length;u+=1){var y=m[u];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[y]||(h.dom7Listeners[y]=[]),h.dom7Listeners[y].push({listener:a,proxyListener:s}),h.addEventListener(y,s,l)}}return this}function Ut(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n[0],i=n[1],a=n[2],l=n[3];typeof n[1]=="function"&&(r=n[0],a=n[1],l=n[2],i=void 0),l||(l=!1);for(var c=r.split(" "),s=0;s<c.length;s+=1)for(var m=c[s],u=0;u<this.length;u+=1){var f=this[u],h=void 0;if(!i&&f.dom7Listeners?h=f.dom7Listeners[m]:i&&f.dom7LiveListeners&&(h=f.dom7LiveListeners[m]),h&&h.length)for(var y=h.length-1;y>=0;y-=1){var p=h[y];a&&p.listener===a||a&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===a?(f.removeEventListener(m,p.proxyListener,l),h.splice(y,1)):a||(f.removeEventListener(m,p.proxyListener,l),h.splice(y,1))}}return this}function Ft(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function Gt(t){return t?(this.forEach(function(n,o){t.apply(n,[n,o])}),this):this}function jt(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(var n=0;n<this.length;n+=1)this[n].innerHTML=t;return this}function Kt(t){var n=kt(),o=Ie(),r=this[0],i,a;if(!r||typeof t>"u")return!1;if(typeof t=="string"){if(r.matches)return r.matches(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);for(i=O(t),a=0;a<i.length;a+=1)if(i[a]===r)return!0;return!1}if(t===o)return r===o;if(t===n)return r===n;if(t.nodeType||t instanceof Y){for(i=t.nodeType?[t]:t,a=0;a<i.length;a+=1)if(i[a]===r)return!0;return!1}return!1}function Wt(){for(var t,n=Ie(),o=0;o<arguments.length;o+=1){t=o<0||arguments.length<=o?void 0:arguments[o];for(var r=0;r<this.length;r+=1)if(typeof t=="string"){var i=n.createElement("div");for(i.innerHTML=t;i.firstChild;)this[r].appendChild(i.firstChild)}else if(t instanceof Y)for(var a=0;a<t.length;a+=1)this[r].appendChild(t[a]);else this[r].appendChild(t)}return this}function zt(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].parentNode;r;)t?O(r).is(t)&&n.push(r):n.push(r),r=r.parentNode;return O(n)}function Xt(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].querySelectorAll(t),i=0;i<r.length;i+=1)n.push(r[i]);return O(n)}function Ht(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].children,i=0;i<r.length;i+=1)(!t||O(r[i]).is(t))&&n.push(r[i]);return O(n)}var sr="resize scroll".split(" ");function qt(t){function n(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];if(typeof r[0]>"u"){for(var a=0;a<this.length;a+=1)sr.indexOf(t)<0&&(t in this[a]?this[a][t]():O(this[a]).trigger(t));return this}return this.on.apply(this,[t].concat(r))}return n}var Yt=qt("click"),Qt=qt("focus");Ft&&(O.fn.hide=Ft),Wt&&(O.fn.append=Wt),Yt&&(O.fn.click=Yt),Pt&&(O.fn.on=Pt),Ut&&(O.fn.off=Ut),Qt&&(O.fn.focus=Qt),Dt&&(O.fn.attr=Dt),Lt&&(O.fn.val=Lt),jt&&(O.fn.html=jt),At&&(O.fn.dataset=At),Rt&&(O.fn.addClass=Rt),$t&&(O.fn.removeClass=$t),Ht&&(O.fn.children=Ht),Gt&&(O.fn.each=Gt),Xt&&(O.fn.find=Xt),Kt&&(O.fn.is=Kt),zt&&(O.fn.parents=zt);const cr=globalThis.Node,dr=globalThis.Comment,ur=globalThis.Element,fr=globalThis.Text,pr=globalThis.Range,mr=globalThis.Selection,hr=globalThis.StaticRange;function Zt(t,n,o,r,i){O("body").on("click",`#${r}-${n}`,Zo(a=>{a.preventDefault();const l=gr(t,o,r);return l&&i(l)}))}function U(t,n,o,r){return Zt(t,"close",n,o,r)}function _r(t,n,o,r){return Zt(t,"play",n,o,r)}function gr(t,n,o){const[r]=E.SlateEditor.nodes(t,{at:[],match:i=>!E.SlateElement.isElement(i)||!E.DomEditor.checkNodeType(i,n)?!1:i.domId===o});return r}function de(t,n,o){const r=E.SlateEditor.previous(t,{at:n[1],match:i=>E.SlateText.isText(i)});r!=null&&(E.SlateTransforms.insertText(t,o(n[0]),{at:E.SlateEditor.end(t,r[1])}),E.SlateTransforms.delete(t,{at:E.SlatePath.next(r[1])}))}let br=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,o)=>(o&=63,o<36?n+=o.toString(36):o<62?n+=(o-26).toString(36).toUpperCase():o>62?n+="-":n+="_",n),"");function Jt(t="r"){return`${t}-${br()}`}function Re(t){if(window.navigator.userAgent.toLowerCase().indexOf("ie")>=0){const o=`<embed name="embedPlay" src="${t}"></embed>`;O("body").find("embed").length<=0&&O("body").append(o);const r=document.embedPlay;r.volume=50}else{const o=`<audio id='audioPlay' src='${t}' hidden='true'>`;O("body").find("audio").length<=0&&O("body").append(o),document.getElementById("audioPlay").play()}}class F{constructor(n){A(this,"oldSelection",null);A(this,"editor");this.editor=n}genDomID(){return Jt(`w-e-dom-${this.key}`)}selection(){const{selection:n}=this.editor;return n??this.oldSelection}getValue(){const n=this.selection();return n==null?"":E.SlateEditor.string(this.editor,n)}record(){this.oldSelection=this.editor.selection}restore(){this.oldSelection&&this.editor.select(this.oldSelection)}isDisabled(){return this.selection()==null?(v.emit(S.ERROR,"未选中编辑器"),!0):!1}}class yr extends F{constructor(o){super(o);A(this,"key","speaker")}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();if(E.SlateRange.isCollapsed(o))return v.emit(S.ERROR,"请选中文本"),!0;const r=this.getValue();return r.length!=1?!0:/^[\u4E00-\u9FA5]+$/gi.test(r)?!1:(v.emit(S.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0)}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-p",domId:this.genDomID(),word:r,phoneme:o.value,remark:o.label,bgColor:"speaker",children:[{text:""}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),this.editor.move(1),U(this.editor,"ssml-p",i.domId,a=>{de(this.editor,a,l=>l.word)})}}const $e=e.defineComponent({setup(){const t=e.inject(X.EDITORCONFIG),n=e.shallowRef(),o=e.ref([]),r=e.ref(!1);function i(){r.value||(r.value=!0)}function a(){r.value&&(r.value=!1)}async function l(c){var m;if(n.value??(n.value=new yr(c)),(m=n.value)!=null&&m.isDisabled())return;const s=n.value.getValue();if(s?o.value=await t.fetchSpeaker(s):o.value=[],o.value.length==0)return v.emit(S.ERROR,"选中的字符没有不是多音字");i()}return()=>e.createVNode(I.ElPopover,{visible:r.value,"onUpdate:visible":c=>r.value=c,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(R,{text:"多音字",icon:"speaker",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[o.value.map(({label:c,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:c,value:s}),a()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[c]))])})}});class wr extends F{constructor(o){super(o);A(this,"key","continuous")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isCollapsed(o)?(v.emit(S.ERROR,"请选择多个中文字符或者多个多个英文单词"),!0):E.SlateEditor.string(this.editor,o).length<2}exec(){if(this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-w",domId:this.genDomID(),children:[{text:o}],remark:"连读",bgColor:"continuous"};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,r),U(this.editor,"ssml-w",r.domId,i=>{E.SlateTransforms.unwrapNodes(this.editor,{at:i[1]})})}}const De=e.defineComponent({setup(){const t=e.shallowRef();function n(o){t.value??(t.value=new wr(o)),t.value.exec()}return()=>e.createVNode(R,{text:"连读",icon:"continuous",onClick:n},null)}});class xr extends F{constructor(){super(...arguments);A(this,"key","read")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return o==null?!0:E.SlateRange.isCollapsed(o)?(v.emit(S.ERROR,"请先选择文本"),!0):!1}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-w",domId:this.genDomID(),phoneme:o.value,remark:o.label,value:r,bgColor:"read",children:[{text:r}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),U(this.editor,"ssml-w",i.domId,a=>de(this.editor,a,()=>r))}}const Er=[{label:"重音",value:"重"},{label:"拖音",value:"拖"},{label:"重音+拖音",value:"重+拖"}],Ae=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function i(a){t.value??(t.value=new xr(a)),!t.value.isDisabled()&&o()}return()=>e.createVNode(I.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(R,{text:"重音",icon:"read",onClick:i},null),default:()=>e.createVNode("div",{class:"d-flex flex-column",onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[Er.map(({label:a,value:l})=>e.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:a,value:l}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Nr extends F{constructor(o){super(o);A(this,"key","digital")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();if(E.SlateRange.isCollapsed(o))return v.emit(S.ERROR,"请选择纯数字文本"),!0;const r=E.SlateEditor.string(this.editor,o);return!!(r.length<=0||Number.isNaN(Number(r)))}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-say-as",domId:this.genDomID(),interpretAs:o.value,remark:o.label,bgColor:"digital",children:[{text:r}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),U(this.editor,"ssml-say-as",i.domId,a=>{E.SlateTransforms.unwrapNodes(this.editor,{at:a[1]})})}}const Vr=[{value:"value",label:"读数值"},{value:"digits",label:"读数字"},{value:"telephone",label:"读手机号"}],Le=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value=!n.value}function r(i){t.value??(t.value=new Nr(i)),!t.value.isDisabled()&&o()}return()=>e.createVNode(I.ElPopover,{visible:n.value,"onUpdate:visible":i=>n.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(R,{text:"数字符号",icon:"digital",onClick:r},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Vr.map(({label:i,value:a})=>e.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:i,value:a}),o()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class Cr extends F{constructor(o){super(o);A(this,"key","alias")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isCollapsed(o)?(v.emit(S.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0):E.SlateEditor.string(this.editor,o).length<=0}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-sub",domId:this.genDomID(),remark:`(${o.label})`,alias:o.value,value:r,bgColor:"alias",children:[{text:""}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),U(this.editor,"ssml-sub",i.domId,a=>de(this.editor,a,l=>l.value))}}const Pe=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(),o=e.ref(!1);function r(){o.value||(o.value=!0)}function i(){o.value&&(o.value=!1)}async function a(c){t.value??(t.value=new Cr(c)),!t.value.isDisabled()&&(t.value.record(),r(),n.value.focus())}function l(c){var s,m;i(),c&&((s=t.value)==null||s.restore(),(m=t.value)==null||m.exec({value:c,label:c}))}return()=>e.createVNode(I.ElPopover,{visible:o.value,"onUpdate:visible":c=>o.value=c,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>e.createVNode(R,{text:"别名",icon:"alias",onClick:a},null),default:()=>e.createVNode(te,{ref:n,onSubmit:l},null)})}});function Sr(t){const{selection:n}=t;if(n){const[o,r]=E.SlateRange.edges(n),i=E.SlateEditor.range(t,o,r),a=E.SlateEditor.string(t,i),l=a.trimEnd();if(l!==a){const c=a.length-l.length,s={...r,offset:r.offset-c},m={...n,anchor:o,focus:s};E.SlateTransforms.select(t,m)}}}class vr extends F{constructor(o){super(o);A(this,"key","english")}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();if(E.SlateRange.isCollapsed(o))return!0;const r=E.SlateEditor.string(this.editor,o);return r.length<=0?!0:/^[A-Za-z]+$/gi.test(r)?!1:(v.emit(S.ERROR,"请选择英文单词"),!0)}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-p",domId:this.genDomID(),word:r,phoneme:o.value,remark:o.label,bgColor:"english",children:[{text:""}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),this.editor.move(1),U(this.editor,"ssml-p",i.domId,a=>de(this.editor,a,l=>l.word))}}const Ue=e.defineComponent({setup(){const t=e.shallowRef(),n=e.inject(X.EDITORCONFIG),o=e.ref([]),r=e.ref(!1);function i(){r.value||(r.value=!0)}function a(){r.value&&(r.value=!1)}async function l(c){if(t.value??(t.value=new vr(c)),Sr(c),t.value.isDisabled())return;const s=t.value.getValue();if(s){if(o.value=await n.fetchEnglish(s),o.value.length<=0)return v.emit(S.ERROR,"找不到单词的音标");i()}}return()=>e.createVNode(I.ElPopover,{visible:r.value,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(R,{text:"音标",icon:"english",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[o.value.map(({label:c,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:c,value:s}),a()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[c]))])})}});class Tr extends F{constructor(o){super(o);A(this,"key","changespeed")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return o==null?!0:E.SlateRange.isCollapsed(o)?(v.emit(S.ERROR,"请框选要变音的句子"),!0):!1}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-prosody",domId:this.genDomID(),remark:o.label,rate:o.value,bgColor:"changespeed",children:[{text:r}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),U(this.editor,"ssml-prosody",i.domId,a=>{E.SlateTransforms.unwrapNodes(this.editor,{at:a[1]})})}}const Mr=[{value:"0.1x",label:"0.1x"},{value:"0.15x",label:"0.15x"},{value:"0.2x",label:"0.2x"},{value:"0.25x",label:"0.25x"},{value:"0.3x",label:"0.3x"},{value:"0.35x",label:"0.35x"},{value:"0.4x",label:"0.4x"}],Fe=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}async function i(a){t.value??(t.value=new Tr(a)),!t.value.isDisabled()&&o()}return()=>e.createVNode(I.ElPopover,{style:{padding:"0px"},visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(R,{text:"局部变速",icon:"changespeed",onClick:i},null),default:()=>e.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[Mr.map(({label:a,value:l})=>e.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{var c;(c=t.value)==null||c.exec({label:a,value:l}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Ir extends F{constructor(o){super(o);A(this,"key","rhythm")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isExpanded(o)?(v.emit(S.ERROR,"不能选中文本"),!0):!1}exec(o){if(this.isDisabled())return;const r={type:"ssml-break",domId:this.genDomID(),time:o.value,remark:o.label,bgColor:"rhythm",children:[{text:""}]};E.SlateTransforms.insertNodes(this.editor,r),this.editor.move(1),U(this.editor,"ssml-break",r.domId,i=>{E.SlateTransforms.delete(this.editor,{at:i[1]})})}}const Or=[{value:"200ms",label:"短"},{value:"300ms",label:"中"},{value:"500ms",label:"长"}],Ge=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function i(a){t.value??(t.value=new Ir(a)),!t.value.isDisabled()&&o()}return()=>e.createVNode(I.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(R,{text:"停顿调节",icon:"rhythm",onClick:i},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Or.map(({label:a,value:l})=>e.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:a,value:l}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Br extends F{constructor(o){super(o);A(this,"key","special")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isExpanded(o)?(v.emit(S.ERROR,"不能框选文字"),!0):!1}exec(o){if(this.isDisabled()||this.getValue()==null)return;const i={type:"ssml-audio",domId:this.genDomID(),src:o.value,remark:o.label,bgColor:"special",children:[{text:""}]};E.SlateTransforms.insertNodes(this.editor,i),this.editor.move(1),U(this.editor,"ssml-audio",i.domId,a=>E.SlateTransforms.delete(this.editor,{at:a[1]})),_r(this.editor,"ssml-audio",i.domId,a=>Re(a[0].src))}}const je=e.defineComponent({__name:"special-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:a}=J(n),l=s=>{if(o.value??(o.value=new Br(s)),o.value.isDisabled())return!1;o.value.record(),v.emit(S.SPECIAL_MENU_CLICK,{x:r.value-200,y:i.value+a.value})};function c(s){o.value&&!o.value.isDisabled()&&(o.value.restore(),o.value.exec(s))}return e.onMounted(()=>{v.on(S.SPECIAL_DRAG_BOX_SUBMIT,c)}),e.onUnmounted(()=>{v.off(S.SPECIAL_DRAG_BOX_SUBMIT,c)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(R),{ref_key:"menuRef",ref:n,text:"音效",icon:"special",onClick:l},null,512))}}),Ke=e.defineComponent({__name:"special-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认音效",second:"自定义音效",last:"最近音效"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=e.ref();e.onMounted(()=>{v.on(S.SPECIAL_MENU_CLICK,s)}),e.onUnmounted(()=>{v.off(S.SPECIAL_MENU_CLICK,s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-3s.wav#1",label:`${u.search||"测试"}音效1`},{value:"https://download.samplelib.com/wav/sample-3s.wav#2",label:`${u.menuKey||"测试"}音效2`},{value:"https://download.samplelib.com/wav/sample-3s.wav#3",label:`${u.scene||"测试"}音效3`},{value:"https://download.samplelib.com/wav/sample-3s.wav#4",label:`${u.style||"测试"}音效4`}])}async function s(u){o.value=u,n.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function m(u){n.value=!1,v.emit(S.SPECIAL_DRAG_BOX_SUBMIT,u)}return(u,f)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=h=>n.value=h),position:o.value,"onUpdate:position":f[1]||(f[1]=h=>o.value=h)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}});class kr extends F{constructor(){super(...arguments);A(this,"key","mute")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isExpanded(o)?(v.emit(S.ERROR,"不能选中文本"),!0):!1}exec(o){if(this.isDisabled())return;const r={type:"ssml-break",domId:this.genDomID(),time:o.value,remark:o.label,bgColor:"mute",children:[{text:""}]};E.SlateTransforms.insertNodes(this.editor,r),this.editor.move(1),U(this.editor,"ssml-break",r.domId,i=>{E.SlateTransforms.delete(this.editor,{at:i[1]})})}}const Rr=[{value:"150ms",label:"150ms"},{value:"200ms",label:"200ms"},{value:"300ms",label:"300ms"},{value:"400ms",label:"400ms"},{value:"500ms",label:"500ms"},{value:"600ms",label:"600ms"}],We=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1),o=e.ref();function r(){n.value||(n.value=!0)}function i(){n.value&&(n.value=!1)}function a(c){t.value??(t.value=new kr(c)),!t.value.isDisabled()&&(r(),t.value.record(),o.value.focus())}function l(c){var s,m;i(),c&&((s=t.value)==null||s.restore(),(m=t.value)==null||m.exec({value:c,label:c}))}return()=>e.createVNode(I.ElPopover,{visible:n.value,"onUpdate:visible":c=>n.value=c,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>e.createVNode(R,{text:"插入静音",icon:"mute",onClick:a},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Rr.map(({value:c,label:s})=>e.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>l(c),onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[s])),e.createVNode(te,{type:"number",ref:o,onSubmit:l},null)])})}}),ze=e.defineComponent({__name:"bgm-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:a}=J(n),l=s=>{o.value=s,v.emit(S.BGM_MENU_CLICK,{x:r.value-200,y:i.value+a.value})};function c(s){var m;(m=o.value)==null||m.emit(j.UPDATE_BGM,s)}return e.onMounted(()=>{v.on(S.BGM_DRAG_BOX_SUBMIT,c)}),e.onUnmounted(()=>{v.off(S.BGM_DRAG_BOX_SUBMIT,c)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(R),{ref_key:"menuRef",ref:n,text:"配乐",icon:"bgm",onClick:l},null,512))}}),Xe=e.defineComponent({__name:"bgm-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=e.ref();e.onMounted(()=>{v.on(S.BGM_MENU_CLICK,s)}),e.onUnmounted(()=>{v.off(S.BGM_MENU_CLICK,s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){o.value=u,n.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function m(u){n.value=!1,v.emit(S.BGM_DRAG_BOX_SUBMIT,u)}return(u,f)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=h=>n.value=h),position:o.value,"onUpdate:position":f[1]||(f[1]=h=>o.value=h)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),He=e.defineComponent({__name:"sensitive-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:a}=J(n),l=s=>{o.value=s,v.emit(S.SENSITIVE_MENU_CLICK,{x:r.value-200,y:i.value+a.value})};function c(s){console.log(s)}return e.onMounted(()=>{v.on(S.SENSITIVE_DRAG_BOX_SUBMIT,c)}),e.onUnmounted(()=>{v.off(S.SENSITIVE_DRAG_BOX_SUBMIT,c)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(R),{ref_key:"menuRef",ref:n,text:"敏感词",icon:"sensitive",onClick:l},null,512))}}),qe=e.defineComponent({__name:"sensitive-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=e.ref();e.onMounted(()=>{v.on(S.SENSITIVE_MENU_CLICK,s)}),e.onUnmounted(()=>{v.off(S.SENSITIVE_MENU_CLICK,s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){o.value=u,n.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function m(u){n.value=!1,v.emit(S.SENSITIVE_DRAG_BOX_SUBMIT,u)}return(u,f)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=h=>n.value=h),position:o.value,"onUpdate:position":f[1]||(f[1]=h=>o.value=h)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Ye=e.defineComponent({__name:"management-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:a}=J(n),l=s=>{o.value=s,v.emit(S.MANAGEMENT_MENU_CLICK,{x:r.value-200,y:i.value+a.value})};function c(s){console.log(s)}return e.onMounted(()=>{v.on(S.MANAGEMENT_DRAG_BOX_SUBMIT,c)}),e.onUnmounted(()=>{v.off(S.MANAGEMENT_DRAG_BOX_SUBMIT,c)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(R),{ref_key:"menuRef",ref:n,text:"多人配音",icon:"management",onClick:l},null,512))}}),Qe=e.defineComponent({__name:"management-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=e.ref();e.onMounted(()=>{v.on(S.MANAGEMENT_MENU_CLICK,s)}),e.onUnmounted(()=>{v.off(S.MANAGEMENT_MENU_CLICK,s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){o.value=u,n.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function m(u){n.value=!1,v.emit(S.MANAGEMENT_DRAG_BOX_SUBMIT,u)}return(u,f)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=h=>n.value=h),position:o.value,"onUpdate:position":f[1]||(f[1]=h=>o.value=h)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Ze=e.defineComponent({__name:"conversion-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:a}=J(n),l=s=>{o.value=s,v.emit(S.CONVERSION_MENU_CLICK,{x:r.value-200,y:i.value+a.value})};function c(s){console.log(s)}return e.onMounted(()=>{v.on(S.CONVERSION_DRAG_BOX_SUBMIT,c)}),e.onUnmounted(()=>{v.off(S.CONVERSION_DRAG_BOX_SUBMIT,c)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(R),{ref_key:"menuRef",ref:n,text:"局部变音",icon:"conversion",onClick:l},null,512))}}),Je=e.defineComponent({__name:"conversion-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],a=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],l=e.ref();e.onMounted(()=>{v.on(S.CONVERSION_MENU_CLICK,s)}),e.onUnmounted(()=>{v.off(S.CONVERSION_MENU_CLICK,s)});function c(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function s(u){o.value=u,n.value=!0,l.value??(l.value=await c({search:"",menuKey:"first",scene:"",style:""}))}function m(u){n.value=!1,v.emit(S.CONVERSION_DRAG_BOX_SUBMIT,u)}return(u,f)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=h=>n.value=h),position:o.value,"onUpdate:position":f[1]||(f[1]=h=>o.value=h)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:a,dataList:l.value,fetch:c,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),$r=t=>(e.pushScopeId("data-v-4d512c0b"),t=t(),e.popScopeId(),t),Dr={class:"anchor-avatar d-flex flex-column justify-content-center align-items-center"},Ar=["src"],Lr=$r(()=>e.createElementVNode("div",{class:"anchor-avatar-name text-white"},"膜厚渊",-1)),Pr=e.defineComponent({__name:"try-play-circle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:n}){const o=e.ref(`
  https://mobvoi-speech-public.mobvoi.com/headerImage/4314c841777e4d20901cd5d04a28e91a.png?iopcmd=thumbnail&type=8&width=80&height=80`),r=e.ref(),i=e.ref(0),a=e.ref(0),{style:l}=_e(r,ie(r,{onStart:(u,f)=>m(f.clientX,f.clientY)?!1:void 0}));function c(u){m(u.clientX,u.clientY)&&n("update:visible",!1)}function s(u){i.value=u.clientX,a.value=u.clientY}function m(u,f){return u>i.value-10&&u<i.value+10&&f>a.value-10&&f<a.value+10}return(u,f)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"try-play-circel user-select-none rounded-circle overflow-hidden",style:e.normalizeStyle([e.unref(l),{position:"fixed"}]),onMousedown:s,onMouseup:c},[e.createElementVNode("div",Dr,[e.createElementVNode("img",{src:o.value,class:"rounded-circle"},null,8,Ar),Lr])],36)),[[e.vShow,u.visible]])}}),Qa="",Ur=$(Pr,[["__scopeId","data-v-4d512c0b"]]),Fr=t=>(e.pushScopeId("data-v-e2d2a636"),t=t(),e.popScopeId(),t),Gr={class:"anchor-avatar d-flex flex-column justify-content-center"},jr=["src"],Kr=Fr(()=>e.createElementVNode("div",{class:"anchor-avatar-name text-white"},"膜厚渊",-1)),Wr=e.defineComponent({__name:"anchor-avatar",setup(t){const n=e.ref(`
  https://mobvoi-speech-public.mobvoi.com/headerImage/4314c841777e4d20901cd5d04a28e91a.png?iopcmd=thumbnail&type=8&width=80&height=80`);return(o,r)=>(e.openBlock(),e.createElementBlock("div",Gr,[e.createElementVNode("img",{src:n.value,class:"rounded-circle"},null,8,jr),Kr]))}}),Za="",zr=$(Wr,[["__scopeId","data-v-e2d2a636"]]),Xr={class:"anchor-list w-100 d-flex flex-row flex-wrap justify-content-between align-content-start overflow-x-hidden overflow-y-auto"},Hr=e.defineComponent({__name:"anchor-list",setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",Xr,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(100,(r,i)=>e.createVNode(zr,{key:i})),64))]))}}),Ja="",qr=$(Hr,[["__scopeId","data-v-3c347263"]]),Yr=e.defineComponent({__name:"tag-item",props:{isActivate:{type:Boolean}},setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tag-item p-2 text-white",[n.isActivate?"activate":null]])},[e.renderSlot(n.$slots,"default",{},void 0,!0)],2))}}),el="",V=$(Yr,[["__scopeId","data-v-fe47427c"]]),Qr={class:"tag-list w-100"},Zr={class:"w-100 d-flex flex-row"},Jr={class:"tag-list-body w-100 d-flex flex-row flex-wrap align-items-start overflow-y-auto overflow-x-hidden"},ei=e.defineComponent({__name:"tag-list",setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",Qr,[e.createElementVNode("div",Zr,[e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("男声")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("女声")]),_:1})]),e.createElementVNode("div",Jr,[e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1})])]))}}),tl="",ti=$(ei,[["__scopeId","data-v-4d21bc70"]]),nl="",en=t=>(e.pushScopeId("data-v-e826b02c"),t=t(),e.popScopeId(),t),ni={class:"try-play-header d-flex flex-row justify-content-between align-items-center"},oi={class:"try-play-body w-100 h-100 d-flex flex-row"},ri={class:"try-play-left w-50"},ii={class:"type-list d-flex flex-row border-bottom border-secondary"},ai=en(()=>e.createElementVNode("div",{class:"py-1"},null,-1)),li=en(()=>e.createElementVNode("div",{class:"try-play-right border border-secondary w-50"},"right",-1)),si=e.defineComponent({__name:"try-play-panle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:n}){const o=e.ref(""),r=e.ref(),i=e.ref(),{style:a}=_e(r,ie(i,{onStart:()=>{},onEnd:()=>{}}));function l(){n("update:visible",!1)}return(c,s)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:r,style:e.normalizeStyle([e.unref(a),{position:"fixed"}]),class:"try-play user-select-none card z-3 shadow px-2 pb-2"},[e.createElementVNode("div",ni,[e.createElementVNode("div",{ref_key:"handleRef",ref:i,class:"w-100 h-100"},null,512),e.createElementVNode("div",{onClick:l,class:"px-2 py-1 try-play-menu-close"},[e.createVNode(e.unref(I.ElIcon),{color:"white"},{default:e.withCtx(()=>[e.createVNode(e.unref(ue.Minus))]),_:1})])]),e.createElementVNode("div",null,[e.createElementVNode("div",oi,[e.createElementVNode("div",ri,[e.createElementVNode("div",null,[e.createVNode(e.unref(I.ElForm),{onSubmit:s[1]||(s[1]=e.withModifiers(()=>{},["prevent"]))},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElInput),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=m=>o.value=m),placeholder:"输入名称搜索"},null,8,["modelValue"])]),_:1})]),e.createElementVNode("div",ii,[e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("热榜")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("SVIP")]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createTextVNode("付费")]),_:1})]),e.createVNode(ti),ai,e.createVNode(qr)]),li])])],4)),[[e.vShow,c.visible]])}}),ol="",ci=$(si,[["__scopeId","data-v-e826b02c"]]),et=e.defineComponent({__name:"try-play",setup(t){const n=e.ref(!0);function o(r){r||(n.value=!0)}return(r,i)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(Ur,{visible:n.value,"onUpdate:visible":i[0]||(i[0]=a=>n.value=a)},null,8,["visible"]),e.createVNode(ci,{visible:!n.value,"onUpdate:visible":o},null,8,["visible"])]))}}),rl="",di={install:t=>{t.component("SpeakerMenu",$e),t.component("ContinuousMenu",De),t.component("ReadMenu",Ae),t.component("DigitalMenu",Le),t.component("AliasMenu",Pe),t.component("EnglishMenu",Ue),t.component("ChangespeedMenu",Fe),t.component("RhythmMenu",Ge),t.component("SpecialMenu",je),t.component("SpecialDragBox",Ke),t.component("MuteMenu",We),t.component("BgmMenu",ze),t.component("BgmDragBox",Xe),t.component("SensitiveMenu",He),t.component("SensitiveDragBox",qe),t.component("ManagementMenu",Ye),t.component("ManagementDragBox",Qe),t.component("ConversionMenu",Ze),t.component("ConversionDragBox",Je),t.component("TryPlay",et)}},il="",al="",ll="";var tt={exports:{}},nt={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class o extends Error{constructor(w,C){super(w),this.cause=C}}n.ParsingError=o;let r;function i(){return s(!1)||h()||f()||u()}function a(){return d(/\s*/),s(!0)||f()||m()||c(!1)}function l(){const _=c(!0),w=[];let C,b=a();for(;b;){if(b.node.type==="Element"){if(C)throw new Error("Found multiple root nodes");C=b.node}b.excluded||w.push(b.node),b=a()}if(!C)throw new o("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new o("Failed to parse XML","Not Well-Formed XML");return{declaration:_?_.node:null,root:C,children:w}}function c(_){const w=d(_?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!w)return;const C={name:w[1],type:"ProcessingInstruction",attributes:{}};for(;!(g()||N("?>"));){const b=y();if(b)C.attributes[b.name]=b.value;else return}return d(/\?>/),{excluded:_?!1:r.options.filter(C)===!1,node:C}}function s(_){const w=d(/^<([^?!</>\s]+)\s*/);if(!w)return;const C={type:"Element",name:w[1],attributes:{},children:[]},b=_?!1:r.options.filter(C)===!1;for(;!(g()||N(">")||N("?>")||N("/>"));){const k=y();if(k)C.attributes[k.name]=k.value;else return}if(d(/^\s*\/>/))return C.children=null,{excluded:b,node:C};d(/\??>/);let M=i();for(;M;)M.excluded||C.children.push(M.node),M=i();if(r.options.strictMode){const k=`</${C.name}>`;if(r.xml.startsWith(k))r.xml=r.xml.slice(k.length);else throw new o("Failed to parse XML",`Closing tag not matching "${k}"`)}else d(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:b,node:C}}function m(){const _=d(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||d(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||d(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||d(/^<!DOCTYPE\s+\S+\s*>/);if(_){const w={type:"DocumentType",content:_[0]};return{excluded:r.options.filter(w)===!1,node:w}}}function u(){if(r.xml.startsWith("<![CDATA[")){const _=r.xml.indexOf("]]>");if(_>-1){const w=_+3,C={type:"CDATA",content:r.xml.substring(0,w)};return r.xml=r.xml.slice(w),{excluded:r.options.filter(C)===!1,node:C}}}}function f(){const _=d(/^<!--[\s\S]*?-->/);if(_){const w={type:"Comment",content:_[0]};return{excluded:r.options.filter(w)===!1,node:w}}}function h(){const _=d(/^([^<]+)/);if(_){const w={type:"Text",content:_[1]};return{excluded:r.options.filter(w)===!1,node:w}}}function y(){const _=d(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(_)return{name:_[1].trim(),value:p(_[2].trim())}}function p(_){return _.replace(/^['"]|['"]$/g,"")}function d(_){const w=r.xml.match(_);if(w)return r.xml=r.xml.slice(w[0].length),w}function g(){return r.xml.length===0}function N(_){return r.xml.indexOf(_)===0}function T(_,w={}){_=_.trim();const C=w.filter||(()=>!0);return r={xml:_,options:Object.assign(Object.assign({},w),{filter:C,strictMode:w.strictMode===!0})},l()}t.exports=T,n.default=T})(nt,nt.exports);var ui=nt.exports;(function(t,n){var o=Z&&Z.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(n,"__esModule",{value:!0});const r=o(ui);function i(p){if(!p.options.indentation&&!p.options.lineSeparator)return;p.content+=p.options.lineSeparator;let d;for(d=0;d<p.level;d++)p.content+=p.options.indentation}function a(p){p.content=p.content.replace(/ +$/,"");let d;for(d=0;d<p.level;d++)p.content+=p.options.indentation}function l(p,d){p.content+=d}function c(p,d,g){if(typeof p.content=="string")s(p.content,d,g);else if(p.type==="Element")u(p,d,g);else if(p.type==="ProcessingInstruction")h(p,d);else throw new Error("Unknown node type: "+p.type)}function s(p,d,g){if(!g){const N=p.trim();(d.options.lineSeparator||N.length===0)&&(p=N)}p.length>0&&(!g&&d.content.length>0&&i(d),l(d,p))}function m(p,d){const g="/"+p.join("/"),N=p[p.length-1];return d.includes(N)||d.includes(g)}function u(p,d,g){if(d.path.push(p.name),!g&&d.content.length>0&&i(d),l(d,"<"+p.name),f(d,p.attributes),p.children===null||d.options.forceSelfClosingEmptyTag&&p.children.length===0){const N=d.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";l(d,N)}else if(p.children.length===0)l(d,"></"+p.name+">");else{const N=p.children;l(d,">"),d.level++;let T=p.attributes["xml:space"]==="preserve",_=!1;if(!T&&d.options.ignoredPaths&&(_=m(d.path,d.options.ignoredPaths),T=_),!T&&d.options.collapseContent){let w=!1,C=!1,b=!1;N.forEach(function(M,k){M.type==="Text"?(M.content.includes(`
`)?(C=!0,M.content=M.content.trim()):(k===0||k===N.length-1)&&M.content.trim().length===0&&(M.content=""),M.content.trim().length>0&&(w=!0)):M.type==="CDATA"?w=!0:b=!0}),w&&(!b||!C)&&(T=!0)}N.forEach(function(w){c(w,d,g||T)}),d.level--,!g&&!T&&i(d),_&&a(d),l(d,"</"+p.name+">")}d.path.pop()}function f(p,d){Object.keys(d).forEach(function(g){const N=d[g].replace(/"/g,"&quot;");l(p," "+g+'="'+N+'"')})}function h(p,d){d.content.length>0&&i(d),l(d,"<?"+p.name),f(d,p.attributes),l(d,"?>")}function y(p,d={}){d.indentation="indentation"in d?d.indentation:"    ",d.collapseContent=d.collapseContent===!0,d.lineSeparator="lineSeparator"in d?d.lineSeparator:`\r
`,d.whiteSpaceAtEndOfSelfclosingTag=d.whiteSpaceAtEndOfSelfclosingTag===!0,d.throwOnFailure=d.throwOnFailure!==!1;try{const g=(0,r.default)(p,{filter:d.filter,strictMode:d.strictMode}),N={content:"",level:0,options:d,path:[]};return g.declaration&&h(g.declaration,N),g.children.forEach(function(T){c(T,N,!1)}),d.lineSeparator?N.content.replace(/\r\n/g,`
`).replace(/\n/g,d.lineSeparator):N.content}catch(g){if(d.throwOnFailure)throw g;return p}}y.minify=(p,d={})=>y(p,Object.assign(Object.assign({},d),{indentation:"",lineSeparator:""})),t.exports=y,n.default=y})(tt,tt.exports);var fi=tt.exports;const pi=be(fi),G=t=>(e.pushScopeId("data-v-19dfe013"),t=t(),e.popScopeId(),t),mi={class:"edit-title"},hi={class:"title-wrapper"},_i=G(()=>e.createElementVNode("div",{class:"title-author"},"SSML编辑器",-1)),gi=G(()=>e.createElementVNode("div",{class:"h h-1"},null,-1)),bi={class:"author"},yi=G(()=>e.createElementVNode("div",null,"已保存",-1)),wi=G(()=>e.createElementVNode("div",null,"|",-1)),xi=G(()=>e.createElementVNode("div",{class:"w-2"},null,-1)),Ei=G(()=>e.createElementVNode("span",{class:"iconfont icon-play font-size-12 p1"},null,-1)),Ni=G(()=>e.createElementVNode("div",{class:"inline-block w-1 p-1"},null,-1)),Vi={class:"operation-wrapper"},Ci=G(()=>e.createElementVNode("div",{class:"menu-divider"},null,-1)),Si=G(()=>e.createElementVNode("div",{class:"w w-2"},null,-1)),vi={class:"ssml-code"},Ti={class:"dialog-footer"},Mi=e.defineComponent({__name:"editor-title",props:{characterTotal:{},characterMax:{},bgm:{}},setup(t){const n=e.inject(X.EDITOR),o=e.ref(!1),r=e.ref(""),i=e.computed(()=>pi(r.value,{indentation:"    ",filter:c=>c.type!=="Comment",collapseContent:!1,lineSeparator:`
`})),a=()=>{n&&(r.value=n.value.getHtml(),o.value=!0)},l=()=>{n==null||n.value.emit(j.REMOVE_BGM)};return(c,s)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",mi,[e.createElementVNode("div",hi,[_i,gi,e.createElementVNode("div",bi,[yi,wi,e.createElementVNode("div",null,e.toDisplayString(c.characterTotal)+"/"+e.toDisplayString(c.characterMax)+"字",1),xi,c.bgm?(e.openBlock(),e.createBlock(e.unref(I.ElTag),{key:0,class:"bgm-txt p-2",closable:"",size:"small",onClick:s[0]||(s[0]=()=>c.bgm&&c.bgm.value&&e.unref(Re)(c.bgm.value)),onClose:l},{default:e.withCtx(()=>[Ei,Ni,e.createElementVNode("span",null,e.toDisplayString(c.bgm.label),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Vi,[e.createVNode(e.unref(I.ElButton),{type:"primary",icon:e.unref(ue.Share),disabled:""},{default:e.withCtx(()=>[e.createTextVNode("分享")]),_:1},8,["icon"]),Ci,e.createVNode(e.unref(I.ElButton),{type:"primary",onClick:a},{default:e.withCtx(()=>[e.createTextVNode("查看SSML")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载音频")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载视频")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载字幕")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("声音转换")]),_:1}),Si])]),e.createVNode(e.unref(I.ElDialog),{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=m=>o.value=m),title:"查看SSML",width:"50%"},{footer:e.withCtx(()=>[e.createElementVNode("span",Ti,[e.createVNode(e.unref(I.ElButton),{type:"primary",onClick:s[1]||(s[1]=m=>o.value=!1)},{default:e.withCtx(()=>[e.createTextVNode(" 确定 ")]),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("pre",vi,e.toDisplayString(i.value),1)]),_:1},8,["modelValue"])],64))}}),sl="",Ii=$(Mi,[["__scopeId","data-v-19dfe013"]]),Oi=e.defineComponent({__name:"editor-core",props:{editorConfig:{},defaultHtml:{}},emits:["created","change"],setup(t,{emit:n}){const o=t,r=e.ref(null);e.onMounted(()=>{i()});const i=()=>{r.value&&E.createEditor({selector:r.value,mode:"simple",html:e.toRaw(o.defaultHtml),config:{...e.toRaw(o.editorConfig),onCreated(a){const l=a.getConfig();l.hoverbarKeys=void 0,a.focus(!0),n("created",a)},onChange(a){n("change",a)}}})};return(a,l)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"edit-core",style:{height:"600px","overflow-y":"hidden"}},null,512))}}),Bi={class:"content"},ki=e.defineComponent({__name:"bar-view",setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Bi,[e.createVNode(e.unref(ge),null,{default:e.withCtx(()=>[e.createVNode(e.unref(W),{divider:"green"},{default:e.withCtx(()=>[e.createVNode(e.unref(R),{text:"24K高清音质",icon:"play",disabled:""})]),_:1}),e.createVNode(e.unref(W),{divider:"cyan"},{default:e.withCtx(()=>[e.createVNode(e.unref($e)),e.createVNode(e.unref(Ae)),e.createVNode(e.unref(Le)),e.createVNode(e.unref(De)),e.createVNode(e.unref(Pe)),e.createVNode(e.unref(Ue))]),_:1}),e.createVNode(e.unref(W),{divider:"orange"},{default:e.withCtx(()=>[e.createVNode(e.unref(Fe)),e.createVNode(e.unref(Ye)),e.createVNode(e.unref(Ze))]),_:1}),e.createVNode(e.unref(W),{divider:"purple"},{default:e.withCtx(()=>[e.createVNode(e.unref(Ge)),e.createVNode(e.unref(We))]),_:1}),e.createVNode(e.unref(W),{divider:"yellow"},{default:e.withCtx(()=>[e.createVNode(e.unref(je)),e.createVNode(e.unref(ze))]),_:1}),e.createVNode(e.unref(W),null,{default:e.withCtx(()=>[e.createVNode(e.unref(He))]),_:1})]),_:1})]),e.createVNode(e.unref(Xe)),e.createVNode(e.unref(Ke)),e.createVNode(e.unref(qe)),e.createVNode(e.unref(Qe)),e.createVNode(e.unref(Je)),e.createVNode(e.unref(et))],64))}}),Ri=t=>(e.pushScopeId("data-v-f96fd805"),t=t(),e.popScopeId(),t),$i={class:"edit-view"},Di={class:"edit-box"},Ai=Ri(()=>e.createElementVNode("div",{class:"h h-1"},null,-1)),Li={class:"editor"},Pi=`地球在极其遥远的未来可能面临一些威胁，但目前不太可能突然消失。
The Earth may face some threats in the extremely distant future, but it is currently unlikely to suddenly disappear.
`,Ui=e.defineComponent({__name:"editor-view",emits:["onCreated","onChange"],setup(t,{emit:n}){const o=e.ref(0),r=e.shallowRef(),i=e.ref(null);e.provide(X.EDITOR,r);const a={maxLength:5e3,placeholder:"请输入内容..."};e.onUnmounted(()=>{var s;(s=r.value)==null||s.destroy()});const l=s=>{r.value=s,n("onCreated",s),s.on(j.UPDATE_BGM,m=>{i.value=m}),s.on(j.REMOVE_BGM,()=>{i.value=null})},c=s=>{o.value=s.getText().length,n("onChange",s)};return(s,m)=>(e.openBlock(),e.createElementBlock("div",$i,[e.createVNode(Ii,{bgm:i.value,"character-total":o.value,"character-max":a.maxLength||0},null,8,["bgm","character-total","character-max"]),e.createElementVNode("div",Di,[e.createVNode(ki),Ai,e.createElementVNode("div",Li,[e.createVNode(Oi,{"editor-config":a,"default-html":Pi,onChange:c,onCreated:l})])])]))}}),cl="",tn=$(Ui,[["__scopeId","data-v-f96fd805"]]),Fi={install(t){t.component("EditorView",tn)}};function nn(t,n,o,r,i){const a=n===void 0?void 0:n.key;return{sel:t,data:n,children:o,text:r,elm:i,key:a}}const on=Array.isArray;function ot(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function rn(t,n,o){if(t.ns="http://www.w3.org/2000/svg",o!=="foreignObject"&&n!==void 0)for(let r=0;r<n.length;++r){const i=n[r];if(typeof i=="string")continue;const a=i.data;a!==void 0&&rn(a,i.children,i.sel)}}function B(t,n,o){let r={},i,a,l;if(o!==void 0?(n!==null&&(r=n),on(o)?i=o:ot(o)?a=o.toString():o&&o.sel&&(i=[o])):n!=null&&(on(n)?i=n:ot(n)?a=n.toString():n&&n.sel?i=[n]:r=n),i!==void 0)for(l=0;l<i.length;++l)ot(i[l])&&(i[l]=nn(void 0,void 0,void 0,i[l],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&rn(r,i,t),nn(t,r,i,a,void 0)}const z={style:{userSelect:"none"},contentEditable:!1};function rt(t){return B("span.ssml-wrap",[B(`span.tag.bg-color.${t.bgColor}`,{...z},[B("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),B(`span#${t.domId}-close.btn-close`,B("span.iconfont.icon-roundclosefill",null))]),B(`span.boundary.start.ft-color.${t.bgColor}`,{...z}),B("span",t.plain),B(`span.boundary.end.ft-color.${t.bgColor}`,{...z})])}function it(t,n){return B("span.ssml-wrap",[B(`span.tag.bg-color.${t.bgColor}`,{...z},[B("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),B(`span#${t.domId}-close.btn-close`,B("span.iconfont.icon-roundclosefill",null))]),B(`span.boundary.start.ft-color.${t.bgColor}`,{...z}),B("span",n),B(`span.boundary.end.ft-color.${t.bgColor}`,{...z})])}function Gi(t){return B("span.ssml-wrap",[B(`span.tag.bg-color.${t.bgColor}`,{...z},[B("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),B(`span#${t.domId}-close.btn-close`,B("span.iconfont.icon-roundclosefill",null))])])}function ji(t){return B("span.ssml-wrap",[B(`span.tag.bg-color.${t.bgColor}`,{...z},[B(`span#${t.domId}-play.btn-text`,B("span.iconfont.icon-play",null)),B("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),B(`span#${t.domId}-close.btn-text`,B("span.iconfont.icon-roundclosefill",null))])])}function Ki(t){const n=t;return rt({...n,plain:n.word})}function Wi(t,n){if(n)return it(t,n);const o=t;return rt({...o,plain:o.value})}function zi(t,n){if(!n)throw Error("children is not null");return it(t,n)}function Xi(t){return Gi(t)}function Hi(t){const n=t;return rt({...n,plain:n.value})}function qi(t,n){if(!n)throw Error("children is not null");return it(t,n)}function Yi(t){return ji(t)}const Qi=[{type:"ssml-p",renderElem:Ki},{type:"ssml-w",renderElem:Wi},{type:"ssml-say-as",renderElem:zi},{type:"ssml-break",renderElem:Xi},{type:"ssml-sub",renderElem:Hi},{type:"ssml-prosody",renderElem:qi},{type:"ssml-audio",renderElem:Yi}];function dl(t){return t}function Zi(t,n){return`<s>${n}</s>`}function Ji(t,n){const{phoneme:o,value:r}=t;return o?`<w phoneme="${o}">${r}</w>`:`<w>${n}</w>`}function ea(t){const{word:n,phoneme:o}=t;return`<p ph="${o}">${n}</p>`}function ta(t,n){const{interpretAs:o}=t;return`<say-as interpret-as="${o}">${n}</say-as>`}function na(t){const{time:n}=t;return`<break time="${n}" />`}function oa(t){const{alias:n,value:o}=t;return`<sub alias="${n}">${o}</sub>`}function ra(t,n){const{rate:o}=t;return`<prosody rate="${o}">${n}</prosody>`}function ia(t){const{src:n}=t;return`<audio src="${n}" />`}const aa=[{type:"paragraph",elemToHtml:Zi},{type:"ssml-w",elemToHtml:Ji},{type:"ssml-p",elemToHtml:ea},{type:"ssml-say-as",elemToHtml:ta},{type:"ssml-break",elemToHtml:na},{type:"ssml-sub",elemToHtml:oa},{type:"ssml-prosody",elemToHtml:ra},{type:"ssml-audio",elemToHtml:ia}];function la(t,n){return{type:"paragraph",children:n}}function sa(t,n){const o=t.getAttribute("phoneme");return o?{type:"ssml-w",phoneme:o,value:t.textContent,children:[{text:t.textContent||""}]}:{type:"ssml-w",children:n}}const ca=[{selector:"s",parseElemHtml:la},{selector:"w",parseElemHtml:sa}];function D(t,n){return t===n}function da(t){const{isInline:n,isVoid:o,deleteBackward:r,deleteForward:i,insertBreak:a,getHtml:l,apply:c,normalizeNode:s}=t,m=t;m.isInline=f=>{const h=E.DomEditor.getNodeType(f);return D(h,"ssml-w")||D(h,"ssml-p")||D(h,"ssml-break")||D(h,"ssml-say-as")||D(h,"ssml-sub")||D(h,"ssml-prosody")||D(h,"ssml-audio")?!0:n(f)},m.isVoid=f=>{const h=E.DomEditor.getNodeType(f);if(D(h,"ssml-w")){const{phoneme:y}=f;return!!y}return D(h,"ssml-p")||D(h,"ssml-break")?!0:D(h,"ssml-say-as")?!1:D(h,"ssml-sub")?!0:D(h,"ssml-prosody")?!1:D(h,"ssml-audio")?!0:o(f)},m.deleteBackward=f=>{r(f)},m.deleteForward=f=>{i(f)},m.insertBreak=()=>{a()},m.normalizeNode=f=>{s(f)};const u={voice:"",volume:"",pitch:""};return t.on(j.UPDATE_SPEAK,f=>{Object.assign(u,f)}),t.on(j.UPDATE_BGM,f=>{u.bgm=f.value,u.bgmRemark=f.label}),t.on(j.REMOVE_BGM,()=>{u.bgm=void 0,u.bgmRemark=void 0}),m.getHtml=()=>{const f=[];for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const y=u[h];y&&f.push(`${h}=${y}`)}return`<speak ${f.join(" ")}>${l()}</speak>`},m.apply=f=>{c(f)},m}const ul="",ua={editorPlugin:da,renderElems:Qi,elemsToHtml:aa,parseElemsHtml:ca},fl="",fa={install(t,n){const o=n??{};t.provide(X.EDITORCONFIG,o),v.on(S.ERROR,o.handleError),t.use(Jn),t.use(di),t.use(Fi)}};x.AliasMenu=Pe,x.BarButton=R,x.BarInput=te,x.BarPopover=at,x.BarSearch=H,x.BarWrapper=ge,x.BarWrapperGroup=W,x.BarWrapperItem=_t,x.BgmDragBox=Xe,x.BgmMenu=ze,x.ChangespeedMenu=Fe,x.ContinuousMenu=De,x.ConversionDragBox=Je,x.ConversionMenu=Ze,x.DOMComment=dr,x.DOMElement=ur,x.DOMNode=cr,x.DOMRange=pr,x.DOMSelection=mr,x.DOMStaticRange=hr,x.DOMText=fr,x.DigitalMenu=Le,x.DragBox=q,x.EMITTER_EVENT=S,x.EditorCoreModule=ua,x.EditorView=tn,x.EnglishMenu=Ue,x.FixedPanel=mt,x.ManagementDragBox=Qe,x.ManagementMenu=Ye,x.MuteMenu=We,x.PROVIDER_KEY=X,x.ReadMenu=Ae,x.RhythmMenu=Ge,x.SensitiveDragBox=qe,x.SensitiveMenu=He,x.SpeakerMenu=$e,x.SpecialDragBox=Ke,x.SpecialMenu=je,x.TryPlay=et,x.WANGEDITOR_EVENT=j,x.default=fa,x.genRandomStr=Jt,x.playSound=Re,x.withLimitView=_e,Object.defineProperties(x,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
