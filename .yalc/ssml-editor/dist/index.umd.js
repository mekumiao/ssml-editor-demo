(function(k,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("@wangeditor/editor"),require("vue"),require("element-plus"),require("@element-plus/icons-vue")):typeof define=="function"&&define.amd?define(["exports","@wangeditor/editor","vue","element-plus","@element-plus/icons-vue"],h):(k=typeof globalThis<"u"?globalThis:k||self,h(k.SSMLEditor={},k.wangEditor,k.Vue,k.ElementPlus,k.ElementPlusIconsVue))})(this,function(k,h,e,I,be){"use strict";var Hl=Object.defineProperty;var Kl=(k,h,e)=>h in k?Hl(k,h,{enumerable:!0,configurable:!0,writable:!0,value:e}):k[h]=e;var D=(k,h,e)=>(Kl(k,typeof h!="symbol"?h+"":h,e),e);const F={EDITOR:"ssml-editor",EDITORCONFIG:"ssml-editor-config"},V={ERROR:"emitter-ediror-error",BGM_MENU_CLICK:"emitter-bgm-menu-click",BGM_DRAG_BOX_SUBMIT:"emitter-bgm-drag-box-submit",CONVERSION_MENU_CLICK:"emitter-conversion-menu-click",CONVERSION_DRAG_BOX_SUBMIT:"emitter-conversion-drag-box-submit",MANAGEMENT_MENU_CLICK:"emitter-management-menu-click",MANAGEMENT_DRAG_BOX_SUBMIT:"emitter-management-drag-box-submit",SPECIAL_MENU_CLICK:"emitter-special-menu-click",SPECIAL_DRAG_BOX_SUBMIT:"emitter-special-drag-box-submit",SENSITIVE_MENU_CLICK:"emitter-sensitive-menu-click",SENSITIVE_DRAG_BOX_SUBMIT:"emitter-sensitive-drag-box-submit"},G={UPDATE_BGM:"wangeditor-update-bgm",REMOVE_BGM:"wangeditor-remove-bgm",UPDATE_SPEAK:"wangeditor-update-speak"},un={class:"bar-button-icon"},fn={class:"fw-normal",style:{"font-size":"0.85rem"}},pn=e.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:o}){const n=t,r=e.inject(F.EDITOR),l=()=>{n.disabled||o("click",r.value)};return(i,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["bar-button px-2 py-1",{disabled:i.disabled}]),onClick:l,onMousedown:s[0]||(s[0]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",un,[e.createElementVNode("span",{class:e.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${i.icon}`]])},null,2)]),e.createElementVNode("div",fn,e.toDisplayString(i.text),1)],34))}}),ai="",R=(t,o)=>{const n=t.__vccOpts||t;for(const[r,l]of o)n[r]=l;return n},B=R(pn,[["__scopeId","data-v-7741060a"]]),ci="",di="",ui="",we=e.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(t,{expose:o,emit:n}){const r=e.ref(""),l=e.ref();function i(){l.value.focus()}function s(){n("submit",r.value),r.value=""}return o({focus:i}),(a,c)=>(e.openBlock(),e.createBlock(e.unref(I.ElForm),{class:"flex flex-row",onSubmit:e.withModifiers(s,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElInput),{type:a.type,ref_key:"inputRef",ref:l,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=m=>r.value=m)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}}),fi="",pi="",mn=e.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(t){return(o,n)=>(e.openBlock(),e.createBlock(e.unref(I.ElPopover),{hideAfter:o.hideAfter,width:o.width,visible:o.visible,trigger:o.trigger,"onUpdate:visible":n[0]||(n[0]=r=>o.$emit("update:visible",r))},{reference:e.withCtx(()=>[e.renderSlot(o.$slots,"reference")]),default:e.withCtx(()=>[e.renderSlot(o.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}}),mi="",hi="",_i="",gi="",yi="",bi="",wi="",xi="",Ei="";function re(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function A(t){return typeof t=="function"?t():e.unref(t)}const le=typeof window<"u",hn=t=>t!=null,ie=()=>{};var _n=Object.defineProperty,gn=Object.defineProperties,yn=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,bn=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,He=(t,o,n)=>o in t?_n(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,xn=(t,o)=>{for(var n in o||(o={}))bn.call(o,n)&&He(t,n,o[n]);if(Fe)for(var n of Fe(o))wn.call(o,n)&&He(t,n,o[n]);return t},En=(t,o)=>gn(t,yn(o));function Cn(t,o={}){if(!e.isRef(t))return e.toRefs(t);const n=Array.isArray(t.value)?Array.from({length:t.value.length}):{};for(const r in t.value)n[r]=e.customRef(()=>({get(){return t.value[r]},set(l){var i;if((i=A(o.replaceRef))!=null?i:!0)if(Array.isArray(t.value)){const a=[...t.value];a[r]=l,t.value=a}else{const a=En(xn({},t.value),{[r]:l});Object.setPrototypeOf(a,Object.getPrototypeOf(t.value)),t.value=a}else t.value[r]=l}}));return n}function Ke(t,o=!0){e.getCurrentInstance()?e.onMounted(t):o?t():e.nextTick(t)}function L(t){var o;const n=A(t);return(o=n==null?void 0:n.$el)!=null?o:n}const j=le?window:void 0;function z(...t){let o,n,r,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,l]=t,o=j):[o,n,r,l]=t,!o)return ie;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],s=()=>{i.forEach(u=>u()),i.length=0},a=(u,p,_,w)=>(u.addEventListener(p,_,w),()=>u.removeEventListener(p,_,w)),c=e.watch(()=>[L(o),A(l)],([u,p])=>{s(),u&&i.push(...n.flatMap(_=>r.map(w=>a(u,_,w,p))))},{immediate:!0,flush:"post"}),m=()=>{c(),s()};return re(m),m}function Nn(){const t=e.ref(!1);return e.getCurrentInstance()&&e.onMounted(()=>{t.value=!0}),t}function xe(t){const o=Nn();return e.computed(()=>(o.value,!!t()))}function Vn(t,o={}){const{window:n=j}=o,r=xe(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let l;const i=e.ref(!1),s=m=>{i.value=m.matches},a=()=>{l&&("removeEventListener"in l?l.removeEventListener("change",s):l.removeListener(s))},c=e.watchEffect(()=>{r.value&&(a(),l=n.matchMedia(A(t)),"addEventListener"in l?l.addEventListener("change",s):l.addListener(s),i.value=l.matches)});return re(()=>{c(),a(),l=void 0}),i}var vn=Object.defineProperty,Sn=Object.defineProperties,Tn=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,In=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,ze=(t,o,n)=>o in t?vn(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,On=(t,o)=>{for(var n in o||(o={}))In.call(o,n)&&ze(t,n,o[n]);if(We)for(var n of We(o))Mn.call(o,n)&&ze(t,n,o[n]);return t},$n=(t,o)=>Sn(t,Tn(o));function se(t,o={}){var n,r;const{pointerTypes:l,preventDefault:i,stopPropagation:s,exact:a,onMove:c,onEnd:m,onStart:u,initialValue:p,axis:_="both",draggingElement:w=j,handle:f=t}=o,d=e.ref((n=A(p))!=null?n:{x:0,y:0}),y=e.ref(),E=b=>l?l.includes(b.pointerType):!0,S=b=>{A(i)&&b.preventDefault(),A(s)&&b.stopPropagation()},g=b=>{if(!E(b)||A(a)&&b.target!==A(t))return;const T=A(t).getBoundingClientRect(),$={x:b.clientX-T.left,y:b.clientY-T.top};(u==null?void 0:u($,b))!==!1&&(y.value=$,S(b))},x=b=>{if(!E(b)||!y.value)return;let{x:T,y:$}=d.value;(_==="x"||_==="both")&&(T=b.clientX-y.value.x),(_==="y"||_==="both")&&($=b.clientY-y.value.y),d.value={x:T,y:$},c==null||c(d.value,b),S(b)},N=b=>{E(b)&&y.value&&(y.value=void 0,m==null||m(d.value,b),S(b))};if(le){const b={capture:(r=o.capture)!=null?r:!0};z(f,"pointerdown",g,b),z(w,"pointermove",x,b),z(w,"pointerup",N,b)}return $n(On({},Cn(d)),{position:d,isDragging:e.computed(()=>!!y.value),style:e.computed(()=>`left:${d.value.x}px;top:${d.value.y}px;`)})}var Xe=Object.getOwnPropertySymbols,kn=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable,Rn=(t,o)=>{var n={};for(var r in t)kn.call(t,r)&&o.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Xe)for(var r of Xe(t))o.indexOf(r)<0&&Bn.call(t,r)&&(n[r]=t[r]);return n};function qe(t,o,n={}){const r=n,{window:l=j}=r,i=Rn(r,["window"]);let s;const a=xe(()=>l&&"ResizeObserver"in l),c=()=>{s&&(s.disconnect(),s=void 0)},m=e.computed(()=>Array.isArray(t)?t.map(_=>L(_)):[L(t)]),u=e.watch(m,_=>{if(c(),a.value&&l){s=new ResizeObserver(o);for(const w of _)w&&s.observe(w,i)}},{immediate:!0,flush:"post",deep:!0}),p=()=>{c(),u()};return re(p),{isSupported:a,stop:p}}function ee(t,o={}){const{reset:n=!0,windowResize:r=!0,windowScroll:l=!0,immediate:i=!0}=o,s=e.ref(0),a=e.ref(0),c=e.ref(0),m=e.ref(0),u=e.ref(0),p=e.ref(0),_=e.ref(0),w=e.ref(0);function f(){const d=L(t);if(!d){n&&(s.value=0,a.value=0,c.value=0,m.value=0,u.value=0,p.value=0,_.value=0,w.value=0);return}const y=d.getBoundingClientRect();s.value=y.height,a.value=y.bottom,c.value=y.left,m.value=y.right,u.value=y.top,p.value=y.width,_.value=y.x,w.value=y.y}return qe(t,f),e.watch(()=>L(t),d=>!d&&f()),l&&z("scroll",f,{capture:!0,passive:!0}),r&&z("resize",f,{passive:!0}),Ke(()=>{i&&f()}),{height:s,bottom:a,left:c,right:m,top:u,width:p,x:_,y:w,update:f}}function Ee(t,o={width:0,height:0},n={}){const{window:r=j,box:l="content-box"}=n,i=e.computed(()=>{var c,m;return(m=(c=L(t))==null?void 0:c.namespaceURI)==null?void 0:m.includes("svg")}),s=e.ref(o.width),a=e.ref(o.height);return qe(t,([c])=>{const m=l==="border-box"?c.borderBoxSize:l==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(r&&i.value){const u=L(t);if(u){const p=r.getComputedStyle(u);s.value=Number.parseFloat(p.width),a.value=Number.parseFloat(p.height)}}else if(m){const u=Array.isArray(m)?m:[m];s.value=u.reduce((p,{inlineSize:_})=>p+_,0),a.value=u.reduce((p,{blockSize:_})=>p+_,0)}else s.value=c.contentRect.width,a.value=c.contentRect.height},n),e.watch(()=>L(t),c=>{s.value=c?o.width:0,a.value=c?o.height:0}),{width:s,height:a}}function Dn(t,o,n={}){const{root:r,rootMargin:l="0px",threshold:i=.1,window:s=j,immediate:a=!0}=n,c=xe(()=>s&&"IntersectionObserver"in s),m=e.computed(()=>{const f=A(t);return(Array.isArray(f)?f:[f]).map(L).filter(hn)});let u=ie;const p=e.ref(a),_=c.value?e.watch(()=>[m.value,L(r),p.value],([f,d])=>{if(u(),!p.value||!f.length)return;const y=new IntersectionObserver(o,{root:L(d),rootMargin:l,threshold:i});f.forEach(E=>E&&y.observe(E)),u=()=>{y.disconnect(),u=ie}},{immediate:a,flush:"post"}):ie,w=()=>{u(),_(),p.value=!1};return re(w),{isSupported:c,isActive:p,pause(){u(),p.value=!1},resume(){p.value=!0},stop:w}}function An(t,{window:o=j,scrollTarget:n}={}){const r=e.ref(!1);return Dn(t,([{isIntersecting:l}])=>{r.value=l},{root:n,window:o}),r}function Ce(t={}){const{window:o=j,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:l=!0,includeScrollbar:i=!0}=t,s=e.ref(n),a=e.ref(r),c=()=>{o&&(i?(s.value=o.innerWidth,a.value=o.innerHeight):(s.value=o.document.documentElement.clientWidth,a.value=o.document.documentElement.clientHeight))};if(c(),Ke(c),z("resize",c,{passive:!0}),l){const m=Vn("(orientation: portrait)");e.watch(m,()=>c())}return{width:s,height:a}}const Ln=t=>(e.pushScopeId("data-v-fd90240d"),t=t(),e.popScopeId(),t),Pn={class:"search-content vh-50"},Un={class:"ps-2 w-75"},Gn={class:"menu"},jn={class:"flex flex-row pt-1"},Fn={class:"content-list pt-1 w-90"},Hn=["onClick"],Kn=Ln(()=>e.createElementVNode("span",{class:"iconfont icon-play"},null,-1)),Wn=e.defineComponent({__name:"bar-search",props:{menuItemLabel:{},scenes:{},styles:{},dataList:{},fetch:{type:Function}},emits:["submit"],setup(t,{emit:o}){const n=t,r=e.ref(),l=e.ref(""),i=e.ref(""),s=e.ref(""),a=e.ref(n.dataList||[]),c=e.ref("first"),m=An(r);e.watch(m,w=>{w&&setTimeout(()=>{var f;(f=r.value)==null||f.focus()},100)}),e.onMounted(async()=>{await u()});async function u(){a.value=await n.fetch({search:l.value,menuKey:c.value,scene:i.value,style:s.value})}function p(w){c.value=w,u()}function _(w){o("submit",w)}return(w,f)=>(e.openBlock(),e.createElementBlock("div",Pn,[e.createElementVNode("div",Un,[e.createVNode(e.unref(I.ElForm),{onSubmit:e.withModifiers(u,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElInput),{ref_key:"searchInputRef",ref:r,placeholder:"搜索",modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=d=>l.value=d),"suffix-icon":e.unref(be.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),e.createElementVNode("div",Gn,[e.createVNode(e.unref(I.ElMenu),{mode:"horizontal","default-active":"first",onSelect:f[1]||(f[1]=d=>p(d))},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElMenuItem),{index:"first"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(w.menuItemLabel.first),1)]),_:1}),e.createVNode(e.unref(I.ElMenuItem),{index:"second"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(w.menuItemLabel.second),1)]),_:1}),e.createVNode(e.unref(I.ElMenuItem),{index:"last"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(w.menuItemLabel.last),1)]),_:1})]),_:1})]),e.createElementVNode("div",jn,[e.createVNode(e.unref(I.ElSelect),{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=d=>i.value=d),onChange:u,class:"m-1",size:"large"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.scenes,d=>(e.openBlock(),e.createBlock(e.unref(I.ElOption),{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e.createVNode(e.unref(I.ElSelect),{modelValue:s.value,"onUpdate:modelValue":f[3]||(f[3]=d=>s.value=d),onChange:u,class:"m-1",size:"large"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.styles,d=>(e.openBlock(),e.createBlock(e.unref(I.ElOption),{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e.createElementVNode("div",Fn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(d,y)=>(e.openBlock(),e.createElementBlock("div",{onClick:E=>_(d),class:"content-list-item clickable ps-3",key:y},[Kn,e.createElementVNode("span",null,e.toDisplayString(d.label),1)],8,Hn))),128))])]))}}),Ci="",X=R(Wn,[["__scopeId","data-v-fd90240d"]]),zn=e.defineComponent({__name:"fixed-panel",emits:["dragging"],setup(t,{emit:o}){const n=e.ref(),r=le?window.innerWidth:200,l=le?window.innerHeight:200,{x:i,y:s}=se(n,{initialValue:{x:r-100,y:l/2},preventDefault:!0,onStart:()=>{o("dragging",!0)},onEnd:()=>{o("dragging",!1)}}),{width:a,height:c}=Ee(n),{width:m,height:u}=Ce(),p=e.computed(()=>({x:m.value-a.value,y:u.value-c.value})),_=e.computed(()=>{if(!p.value)return w(i.value,s.value);const f=i.value<5?5:i.value>p.value.x?p.value.x-5:i.value,d=s.value<5?5:s.value>p.value.y?p.value.y-5:s.value;return w(f,d)});function w(f,d){return`left:${f}px;top:${d}px`}return(f,d)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{ref_key:"boxRef",ref:n,class:"fixed-panel z-3 user-select-none",style:e.normalizeStyle([{position:"fixed"},_.value])},[e.renderSlot(f.$slots,"default")],4)]))}});function Ye(t,o){return`left:${t}px;top:${o}px`}function Qe(t,o){const{x:n,y:r}=o,{width:l,height:i}=Ee(t),{width:s,height:a}=Ce(),c=e.computed(()=>({x:s.value-l.value,y:a.value-i.value}));return{style:e.computed(()=>{if(!c.value)return Ye(n.value,r.value);const u=n.value<5?5:n.value>c.value.x?c.value.x-5:n.value,p=r.value<5?5:r.value>c.value.y?c.value.y-5:r.value;return Ye(u,p)})}}const Ni="",Xn={},qn={class:"content"};function Yn(t,o){return e.openBlock(),e.createElementBlock("div",qn,[e.renderSlot(t.$slots,"default",{},void 0,!0)])}const Je=R(Xn,[["render",Yn],["__scopeId","data-v-7beae5b9"]]),Qn={},Jn={class:"bar-wrapper-item"};function Zn(t,o){return e.openBlock(),e.createElementBlock("div",Jn,[e.renderSlot(t.$slots,"default")])}const eo=R(Qn,[["render",Zn]]),to={class:"bar-wrapper-group"},no={class:"group-items"},oo=e.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(t){return(o,n)=>(e.openBlock(),e.createElementBlock("div",to,[e.createElementVNode("div",no,[e.renderSlot(o.$slots,"default",{},void 0,!0)]),e.createElementVNode("div",{class:e.normalizeClass(["divider",[o.divider]])},null,2)]))}}),Vi="",H=R(oo,[["__scopeId","data-v-3a7abad9"]]),ro=e.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},position:{}},emits:["update:visible","update:position"],setup(t,{emit:o}){const n=t,r=e.ref(),{x:l,y:i}=se(r,{initialValue:n.position}),{width:s,height:a}=Ee(r),{width:c,height:m}=Ce();e.watch([l,i],([y,E])=>{o("update:position",{x:y,y:E})});const u=e.computed(()=>({x:c.value-s.value,y:m.value-a.value})),p=e.computed(()=>{const{x:y,y:E}=n.position;if(!u.value)return d(y,E);const S=y<5?5:y>u.value.x?u.value.x-5:y,g=E<5?5:E>u.value.y?u.value.y-5:E;return d(S,g)});e.onMounted(()=>{window.addEventListener("keydown",f)}),e.onUnmounted(()=>{window.addEventListener("keydown",f)});function _(){o("update:visible",!1)}function w(y){const E=y.target;r.value&&!r.value.contains(E)&&n.visible&&o("update:visible",!1)}function f(y){y.code==="Escape"&&n.visible&&_()}function d(y,E){return`left:${y}px;top:${E}px`}return(y,E)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{class:"drag-box-mask user-select-none",onClick:w},[e.createElementVNode("div",{ref_key:"boxRef",ref:r,class:"card shadow brag-box",style:e.normalizeStyle([{position:"fixed"},p.value])},[e.createElementVNode("div",{class:"w-100 text-end me-2"},[e.createElementVNode("span",{onClick:_,class:"btn iconfont icon-close fs-5"})]),e.renderSlot(y.$slots,"default",{},void 0,!0)],4)],512),[[e.vShow,y.visible]])]))}}),vi="",q=R(ro,[["__scopeId","data-v-ca198ced"]]),lo={install(t){t.component("BarButton",B),t.component("BarInput",we),t.component("BarPopover",mn),t.component("BarSearch",X),t.component("FixedPanel",zn),t.component("BarWrapper",Je),t.component("BarWrapperItem",eo),t.component("BarWrapperGroup",H),t.component("DragBox",q)}};var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ne(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ve={exports:{}},Ze={exports:{}},io=void 0,et=function(t){return t!==io&&t!==null},so=et,ao={object:!0,function:!0,undefined:!0},co=function(t){return so(t)?hasOwnProperty.call(ao,typeof t):!1},uo=co,fo=function(t){if(!uo(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},po=fo,mo=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!po(t)},ho=mo,_o=/^\s*class[\s{/}]/,go=Function.prototype.toString,yo=function(t){return!(!ho(t)||_o.test(go.call(t)))},bo=function(){var t=Object.assign,o;return typeof t!="function"?!1:(o={foo:"raz"},t(o,{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")},ve,tt;function wo(){return tt||(tt=1,ve=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),ve}var xo=function(){},Eo=xo(),Se=function(t){return t!==Eo&&t!==null},Te,nt;function Co(){if(nt)return Te;nt=1;var t=Se,o=Object.keys;return Te=function(n){return o(t(n)?Object(n):n)},Te}var Ie,ot;function No(){return ot||(ot=1,Ie=wo()()?Object.keys:Co()),Ie}var Me,rt;function Vo(){if(rt)return Me;rt=1;var t=Se;return Me=function(o){if(!t(o))throw new TypeError("Cannot use null or undefined");return o},Me}var Oe,lt;function vo(){if(lt)return Oe;lt=1;var t=No(),o=Vo(),n=Math.max;return Oe=function(r,l){var i,s,a=n(arguments.length,2),c;for(r=Object(o(r)),c=function(m){try{r[m]=l[m]}catch(u){i||(i=u)}},s=1;s<a;++s)l=arguments[s],t(l).forEach(c);if(i!==void 0)throw i;return r},Oe}var So=bo()?Object.assign:vo(),To=Se,Io=Array.prototype.forEach,Mo=Object.create,Oo=function(t,o){var n;for(n in t)o[n]=t[n]},$o=function(t){var o=Mo(null);return Io.call(arguments,function(n){To(n)&&Oo(Object(n),o)}),o},$e="razdwatrzy",ko=function(){return typeof $e.contains!="function"?!1:$e.contains("dwa")===!0&&$e.contains("foo")===!1},ke,it;function Bo(){if(it)return ke;it=1;var t=String.prototype.indexOf;return ke=function(o){return t.call(this,o,arguments[1])>-1},ke}var Ro=ko()?String.prototype.contains:Bo(),ae=et,st=yo,at=So,ct=$o,te=Ro,Do=Ze.exports=function(t,o){var n,r,l,i,s;return arguments.length<2||typeof t!="string"?(i=o,o=t,t=null):i=arguments[2],ae(t)?(n=te.call(t,"c"),r=te.call(t,"e"),l=te.call(t,"w")):(n=l=!0,r=!1),s={value:o,configurable:n,enumerable:r,writable:l},i?at(ct(i),s):s};Do.gs=function(t,o,n){var r,l,i,s;return typeof t!="string"?(i=n,n=o,o=t,t=null):i=arguments[3],ae(o)?st(o)?ae(n)?st(n)||(i=n,n=void 0):n=void 0:(i=o,o=n=void 0):o=void 0,ae(t)?(r=te.call(t,"c"),l=te.call(t,"e")):(r=!0,l=!1),s={get:o,set:n,configurable:r,enumerable:l},i?at(ct(i),s):s};var Ao=Ze.exports,Lo=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,o){var n=Ao,r=Lo,l=Function.prototype.apply,i=Function.prototype.call,s=Object.create,a=Object.defineProperty,c=Object.defineProperties,m=Object.prototype.hasOwnProperty,u={configurable:!0,enumerable:!1,writable:!0},p,_,w,f,d,y,E;p=function(S,g){var x;return r(g),m.call(this,"__ee__")?x=this.__ee__:(x=u.value=s(null),a(this,"__ee__",u),u.value=null),x[S]?typeof x[S]=="object"?x[S].push(g):x[S]=[x[S],g]:x[S]=g,this},_=function(S,g){var x,N;return r(g),N=this,p.call(this,S,x=function(){w.call(N,S,x),l.call(g,this,arguments)}),x.__eeOnceListener__=g,this},w=function(S,g){var x,N,b,T;if(r(g),!m.call(this,"__ee__"))return this;if(x=this.__ee__,!x[S])return this;if(N=x[S],typeof N=="object")for(T=0;b=N[T];++T)(b===g||b.__eeOnceListener__===g)&&(N.length===2?x[S]=N[T?0:1]:N.splice(T,1));else(N===g||N.__eeOnceListener__===g)&&delete x[S];return this},f=function(S){var g,x,N,b,T;if(m.call(this,"__ee__")&&(b=this.__ee__[S],!!b))if(typeof b=="object"){for(x=arguments.length,T=new Array(x-1),g=1;g<x;++g)T[g-1]=arguments[g];for(b=b.slice(),g=0;N=b[g];++g)l.call(N,this,T)}else switch(arguments.length){case 1:i.call(b,this);break;case 2:i.call(b,this,arguments[1]);break;case 3:i.call(b,this,arguments[1],arguments[2]);break;default:for(x=arguments.length,T=new Array(x-1),g=1;g<x;++g)T[g-1]=arguments[g];l.call(b,this,T)}},d={on:p,once:_,off:w,emit:f},y={on:n(p),once:n(_),off:n(w),emit:n(f)},E=c({},y),t.exports=o=function(S){return S==null?s(E):c(Object(S),y)},o.methods=d})(Ve,Ve.exports);var Po=Ve.exports;const v=Ne(Po)();function P(t,o,n){const[r]=h.SlateEditor.nodes(t,{at:[],match:l=>!h.SlateElement.isElement(l)||!h.DomEditor.checkNodeType(l,o)?!1:l.domId===n});return r}function Q(t,o,n){const r=h.SlateEditor.previous(t,{at:o[1],match:l=>h.SlateText.isText(l)});r!=null&&(h.SlateTransforms.insertText(t,n(o[0]),{at:h.SlateEditor.end(t,r[1])}),h.SlateTransforms.delete(t,{at:h.SlatePath.next(r[1])}))}function dt(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Be(t,o){t===void 0&&(t={}),o===void 0&&(o={}),Object.keys(o).forEach(function(n){typeof t[n]>"u"?t[n]=o[n]:dt(o[n])&&dt(t[n])&&Object.keys(o[n]).length>0&&Be(t[n],o[n])})}var ut={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Re(){var t=typeof document<"u"?document:{};return Be(t,ut),t}var Uo={document:ut,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout>"u"||clearTimeout(t)}};function ft(){var t=typeof window<"u"?window:{};return Be(t,Uo),t}function Go(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o}function De(t){return De=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},De(t)}function ce(t,o){return ce=Object.setPrototypeOf||function(r,l){return r.__proto__=l,r},ce(t,o)}function jo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function de(t,o,n){return jo()?de=Reflect.construct:de=function(l,i,s){var a=[null];a.push.apply(a,i);var c=Function.bind.apply(l,a),m=new c;return s&&ce(m,s.prototype),m},de.apply(null,arguments)}function Fo(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Ae(t){var o=typeof Map=="function"?new Map:void 0;return Ae=function(r){if(r===null||!Fo(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof o<"u"){if(o.has(r))return o.get(r);o.set(r,l)}function l(){return de(r,arguments,De(this).constructor)}return l.prototype=Object.create(r.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),ce(l,r)},Ae(t)}function Ho(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ko(t){var o=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return o},set:function(r){o.__proto__=r}})}var K=function(t){Go(o,t);function o(n){var r;return r=t.call.apply(t,[this].concat(n))||this,Ko(Ho(r)),r}return o}(Ae(Array));function Le(t){t===void 0&&(t=[]);var o=[];return t.forEach(function(n){Array.isArray(n)?o.push.apply(o,Le(n)):o.push(n)}),o}function Wo(t){for(var o=[],n=0;n<t.length;n+=1)o.indexOf(t[n])===-1&&o.push(t[n]);return o}function zo(t){return t.toLowerCase().replace(/-(.)/g,function(o,n){return n.toUpperCase()})}function Xo(t,o){if(typeof t!="string")return[t];for(var n=[],r=o.querySelectorAll(t),l=0;l<r.length;l+=1)n.push(r[l]);return n}function M(t,o){var n=ft(),r=Re(),l=[];if(!o&&t instanceof K)return t;if(!t)return new K(l);if(typeof t=="string"){var i=t.trim();if(i.indexOf("<")>=0&&i.indexOf(">")>=0){var s="div";i.indexOf("<li")===0&&(s="ul"),i.indexOf("<tr")===0&&(s="tbody"),(i.indexOf("<td")===0||i.indexOf("<th")===0)&&(s="tr"),i.indexOf("<tbody")===0&&(s="table"),i.indexOf("<option")===0&&(s="select");var a=r.createElement(s);a.innerHTML=i;for(var c=0;c<a.childNodes.length;c+=1)l.push(a.childNodes[c])}else l=Xo(t.trim(),o||r)}else if(t.nodeType||t===n||t===r)l.push(t);else if(Array.isArray(t)){if(t instanceof K)return t;l=t}return new K(Wo(l))}M.fn=K.prototype;function pt(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var r=Le(o.map(function(l){return l.split(" ")}));return this.forEach(function(l){var i;(i=l.classList).add.apply(i,r)}),this}function mt(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var r=Le(o.map(function(l){return l.split(" ")}));return this.forEach(function(l){var i;(i=l.classList).remove.apply(i,r)}),this}function ht(t,o){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n+=1)if(arguments.length===2)this[n].setAttribute(t,o);else for(var r in t)this[n][r]=t[r],this[n].setAttribute(r,t[r]);return this}function _t(){var t=this[0];if(t){var o={};if(t.dataset)for(var n in t.dataset)o[n]=t.dataset[n];else for(var r=0;r<t.attributes.length;r+=1){var l=t.attributes[r];l.name.indexOf("data-")>=0&&(o[zo(l.name.split("data-")[1])]=l.value)}for(var i in o)o[i]==="false"?o[i]=!1:o[i]==="true"?o[i]=!0:parseFloat(o[i])===o[i]*1&&(o[i]*=1);return o}}function gt(t){if(typeof t>"u"){var o=this[0];if(!o)return;if(o.multiple&&o.nodeName.toLowerCase()==="select"){for(var n=[],r=0;r<o.selectedOptions.length;r+=1)n.push(o.selectedOptions[r].value);return n}return o.value}for(var l=0;l<this.length;l+=1){var i=this[l];if(Array.isArray(t)&&i.multiple&&i.nodeName.toLowerCase()==="select")for(var s=0;s<i.options.length;s+=1)i.options[s].selected=t.indexOf(i.options[s].value)>=0;else i.value=t}return this}function yt(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var r=o[0],l=o[1],i=o[2],s=o[3];typeof o[1]=="function"&&(r=o[0],i=o[1],s=o[2],l=void 0),s||(s=!1);function a(d){var y=d.target;if(y){var E=d.target.dom7EventData||[];if(E.indexOf(d)<0&&E.unshift(d),M(y).is(l))i.apply(y,E);else for(var S=M(y).parents(),g=0;g<S.length;g+=1)M(S[g]).is(l)&&i.apply(S[g],E)}}function c(d){var y=d&&d.target?d.target.dom7EventData||[]:[];y.indexOf(d)<0&&y.unshift(d),i.apply(this,y)}for(var m=r.split(" "),u,p=0;p<this.length;p+=1){var _=this[p];if(l)for(u=0;u<m.length;u+=1){var f=m[u];_.dom7LiveListeners||(_.dom7LiveListeners={}),_.dom7LiveListeners[f]||(_.dom7LiveListeners[f]=[]),_.dom7LiveListeners[f].push({listener:i,proxyListener:a}),_.addEventListener(f,a,s)}else for(u=0;u<m.length;u+=1){var w=m[u];_.dom7Listeners||(_.dom7Listeners={}),_.dom7Listeners[w]||(_.dom7Listeners[w]=[]),_.dom7Listeners[w].push({listener:i,proxyListener:c}),_.addEventListener(w,c,s)}}return this}function bt(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var r=o[0],l=o[1],i=o[2],s=o[3];typeof o[1]=="function"&&(r=o[0],i=o[1],s=o[2],l=void 0),s||(s=!1);for(var a=r.split(" "),c=0;c<a.length;c+=1)for(var m=a[c],u=0;u<this.length;u+=1){var p=this[u],_=void 0;if(!l&&p.dom7Listeners?_=p.dom7Listeners[m]:l&&p.dom7LiveListeners&&(_=p.dom7LiveListeners[m]),_&&_.length)for(var w=_.length-1;w>=0;w-=1){var f=_[w];i&&f.listener===i||i&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===i?(p.removeEventListener(m,f.proxyListener,s),_.splice(w,1)):i||(p.removeEventListener(m,f.proxyListener,s),_.splice(w,1))}}return this}function wt(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function xt(t){return t?(this.forEach(function(o,n){t.apply(o,[o,n])}),this):this}function Et(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(var o=0;o<this.length;o+=1)this[o].innerHTML=t;return this}function Ct(t){var o=ft(),n=Re(),r=this[0],l,i;if(!r||typeof t>"u")return!1;if(typeof t=="string"){if(r.matches)return r.matches(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);for(l=M(t),i=0;i<l.length;i+=1)if(l[i]===r)return!0;return!1}if(t===n)return r===n;if(t===o)return r===o;if(t.nodeType||t instanceof K){for(l=t.nodeType?[t]:t,i=0;i<l.length;i+=1)if(l[i]===r)return!0;return!1}return!1}function Nt(){for(var t,o=Re(),n=0;n<arguments.length;n+=1){t=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if(typeof t=="string"){var l=o.createElement("div");for(l.innerHTML=t;l.firstChild;)this[r].appendChild(l.firstChild)}else if(t instanceof K)for(var i=0;i<t.length;i+=1)this[r].appendChild(t[i]);else this[r].appendChild(t)}return this}function Vt(t){for(var o=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)t?M(r).is(t)&&o.push(r):o.push(r),r=r.parentNode;return M(o)}function vt(t){for(var o=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(t),l=0;l<r.length;l+=1)o.push(r[l]);return M(o)}function St(t){for(var o=[],n=0;n<this.length;n+=1)for(var r=this[n].children,l=0;l<r.length;l+=1)(!t||M(r[l]).is(t))&&o.push(r[l]);return M(o)}var qo="resize scroll".split(" ");function Tt(t){function o(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];if(typeof r[0]>"u"){for(var i=0;i<this.length;i+=1)qo.indexOf(t)<0&&(t in this[i]?this[i][t]():M(this[i]).trigger(t));return this}return this.on.apply(this,[t].concat(r))}return o}var It=Tt("click"),Mt=Tt("focus");wt&&(M.fn.hide=wt),Nt&&(M.fn.append=Nt),It&&(M.fn.click=It),yt&&(M.fn.on=yt),bt&&(M.fn.off=bt),Mt&&(M.fn.focus=Mt),ht&&(M.fn.attr=ht),gt&&(M.fn.val=gt),Et&&(M.fn.html=Et),_t&&(M.fn.dataset=_t),pt&&(M.fn.addClass=pt),mt&&(M.fn.removeClass=mt),St&&(M.fn.children=St),xt&&(M.fn.each=xt),vt&&(M.fn.find=vt),Ct&&(M.fn.is=Ct),Vt&&(M.fn.parents=Vt);let Yo=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((o,n)=>(n&=63,n<36?o+=n.toString(36):n<62?o+=(n-26).toString(36).toUpperCase():n>62?o+="-":o+="_",o),"");function Qo(t="r"){return`${t}-${Yo()}`}function Ot(t){if(window.navigator.userAgent.toLowerCase().indexOf("ie")>=0){const n=`<embed name="embedPlay" src="${t}"></embed>`;M("body").find("embed").length<=0&&M("body").append(n);const r=document.embedPlay;r.volume=50}else{const n=`<audio id='audioPlay' src='${t}' hidden='true'>`;M("body").find("audio").length<=0&&M("body").append(n),document.getElementById("audioPlay").play()}}class U{constructor(o){D(this,"oldSelection",null);D(this,"editor");this.editor=o}genDomID(){return Qo(`w-e-dom-${this.key}`)}selection(){const{selection:o}=this.editor;return o??this.oldSelection}getValue(){const o=this.selection();return o==null?"":h.SlateEditor.string(this.editor,o)}record(){this.oldSelection=this.editor.selection}restore(){this.oldSelection&&this.editor.select(this.oldSelection)}isDisabled(){return this.selection()==null?(v.emit(V.ERROR,"未选中编辑器"),!0):!1}}class ue extends U{constructor(n){super(n);D(this,"key","speaker");n.on("ssml-speaker-close",ue.handleClose)}static handleClose(n,r){const l=P(n,"ssml-speaker",r.domId);l&&Q(n,l,i=>i.word)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();if(h.SlateRange.isCollapsed(n))return v.emit(V.ERROR,"请选中文本"),!0;const r=this.getValue();return r.length!=1?!0:/^[\u4E00-\u9FA5]+$/gi.test(r)?!1:(v.emit(V.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0)}exec(n){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const l={type:"ssml-speaker",domId:this.genDomID(),word:r,phoneme:n.value,remark:n.label,bgColor:"speaker",children:[{text:""}]};h.SlateTransforms.delete(this.editor),h.SlateTransforms.insertNodes(this.editor,l),this.editor.move(1)}}const $t=e.defineComponent({setup(){const t=e.inject(F.EDITORCONFIG),o=e.shallowRef(),n=e.ref([]),r=e.ref(!1);function l(){r.value||(r.value=!0)}function i(){r.value&&(r.value=!1)}async function s(a){var m;if(o.value??(o.value=new ue(a)),(m=o.value)!=null&&m.isDisabled())return;const c=o.value.getValue();if(c?n.value=await t.fetchSpeaker(c):n.value=[],n.value.length==0)return v.emit(V.ERROR,"选中的字符没有不是多音字");l()}return()=>e.createVNode(I.ElPopover,{visible:r.value,"onUpdate:visible":a=>r.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"多音字",icon:"speaker",onClick:s},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[n.value.map(({label:a,value:c})=>e.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{o.value&&!o.value.isDisabled()&&o.value.exec({label:a,value:c}),i()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class fe extends U{constructor(n){super(n);D(this,"key","continuous");n.on("ssml-continuous-close",fe.handleClose)}static handleClose(n,r){const l=P(n,"ssml-continuous",r.domId);l&&Q(n,l,i=>i.value)}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();return h.SlateRange.isCollapsed(n)?(v.emit(V.ERROR,"请选择多个中文字符或者多个多个英文单词"),!0):h.SlateEditor.string(this.editor,n).length<2}exec(){if(this.isDisabled())return;const n=this.getValue();if(n==null)return;const r={type:"ssml-continuous",domId:this.genDomID(),children:[{text:""}],remark:"连读",value:n,bgColor:"continuous"};h.SlateTransforms.delete(this.editor),h.SlateTransforms.insertNodes(this.editor,r),this.editor.move(1)}}const kt=e.defineComponent({setup(){const t=e.shallowRef();function o(n){t.value??(t.value=new fe(n)),t.value.exec()}return()=>e.createVNode(B,{text:"连读",icon:"continuous",onClick:o},null)}});class Bt extends U{constructor(n){super(n);D(this,"key","read")}static handleClose(n,r){const l=P(n,"ssml-read",r.domId);l&&Q(n,l,i=>i.value)}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();return n==null?!0:h.SlateRange.isCollapsed(n)?(v.emit(V.ERROR,"请先选择文本"),!0):!1}exec(n){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const l={type:"ssml-read",domId:this.genDomID(),phoneme:n.value,remark:n.label,value:r,bgColor:"read",children:[{text:""}]};h.SlateTransforms.delete(this.editor),h.SlateTransforms.insertNodes(this.editor,l),this.editor.move(1)}}const Jo=[{label:"重音",value:"重"},{label:"拖音",value:"拖"},{label:"重音+拖音",value:"重+拖"}],Rt=e.defineComponent({setup(){const t=e.shallowRef(),o=e.ref(!1);function n(){o.value||(o.value=!0)}function r(){o.value&&(o.value=!1)}function l(i){t.value??(t.value=new Bt(i)),!t.value.isDisabled()&&n()}return()=>e.createVNode(I.ElPopover,{visible:o.value,"onUpdate:visible":i=>o.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"重音",icon:"read",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column",onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[Jo.map(({label:i,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:i,value:s}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class pe extends U{constructor(n){super(n);D(this,"key","digital");n.on("ssml-digital-close",pe.handleClose)}static handleClose(n,r){const l=P(n,"ssml-digital",r.domId);l&&Q(n,l,i=>i.value)}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();if(h.SlateRange.isCollapsed(n))return v.emit(V.ERROR,"请选择纯数字文本"),!0;const r=h.SlateEditor.string(this.editor,n);return!!(r.length<=0||Number.isNaN(Number(r)))}exec(n){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const l={type:"ssml-digital",domId:this.genDomID(),interpretAs:n.value,remark:n.label,value:r,bgColor:"digital",children:[{text:""}]};h.SlateTransforms.delete(this.editor),h.SlateTransforms.insertNodes(this.editor,l),this.editor.move(1)}}const Zo=[{value:"value",label:"读数值"},{value:"digits",label:"读数字"},{value:"telephone",label:"读手机号"}],Dt=e.defineComponent({setup(){const t=e.shallowRef(),o=e.ref(!1);function n(){o.value=!o.value}function r(l){t.value??(t.value=new pe(l)),!t.value.isDisabled()&&n()}return()=>e.createVNode(I.ElPopover,{visible:o.value,"onUpdate:visible":l=>o.value=l,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"数字符号",icon:"digital",onClick:r},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Zo.map(({label:l,value:i})=>e.createVNode("div",{key:i,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:l,value:i}),n()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[l]))])})}});class At extends U{constructor(n){super(n);D(this,"key","alias")}static handleClose(n,r){const l=P(n,"ssml-alias",r.domId);l&&Q(n,l,i=>i.value)}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();return h.SlateRange.isCollapsed(n)?(v.emit(V.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0):h.SlateEditor.string(this.editor,n).length<=0}exec(n){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const l={type:"ssml-alias",domId:this.genDomID(),remark:`(${n.value})`,alias:n.value,value:r,bgColor:"alias",children:[{text:""}]};h.SlateTransforms.delete(this.editor),h.SlateTransforms.insertNodes(this.editor,l),this.editor.move(1)}}const Lt=e.defineComponent({setup(){const t=e.shallowRef(),o=e.ref(),n=e.ref(!1);function r(){n.value||(n.value=!0)}function l(){n.value&&(n.value=!1)}async function i(a){t.value??(t.value=new At(a)),!t.value.isDisabled()&&(t.value.record(),r(),o.value.focus())}function s(a){var c,m;l(),a&&((c=t.value)==null||c.restore(),(m=t.value)==null||m.exec({value:a,label:a}))}return()=>e.createVNode(I.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>e.createVNode(B,{text:"别名",icon:"alias",onClick:i},null),default:()=>e.createVNode(we,{ref:o,onSubmit:s},null)})}});function er(t){const{selection:o}=t;if(o){const[n,r]=h.SlateRange.edges(o),l=h.SlateEditor.range(t,n,r),i=h.SlateEditor.string(t,l),s=i.trimEnd();if(s!==i){const a=i.length-s.length,c={...r,offset:r.offset-a},m={...o,anchor:n,focus:c};h.SlateTransforms.select(t,m)}}}class me extends U{constructor(n){super(n);D(this,"key","english");n.on("ssml-english-close",me.handleClose)}static handleClose(n,r){const l=P(n,"ssml-english",r.domId);l&&Q(n,l,i=>i.word)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();if(h.SlateRange.isCollapsed(n))return!0;const r=h.SlateEditor.string(this.editor,n);return r.length<=0?!0:/^[A-Za-z]+$/gi.test(r)?!1:(v.emit(V.ERROR,"请选择英文单词"),!0)}exec(n){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const l={type:"ssml-english",domId:this.genDomID(),word:r,phoneme:n.value,remark:n.label,bgColor:"english",children:[{text:""}]};h.SlateTransforms.delete(this.editor),h.SlateTransforms.insertNodes(this.editor,l),this.editor.move(1)}}const Pt=e.defineComponent({setup(){const t=e.shallowRef(),o=e.inject(F.EDITORCONFIG),n=e.ref([]),r=e.ref(!1);function l(){r.value||(r.value=!0)}function i(){r.value&&(r.value=!1)}async function s(a){if(t.value??(t.value=new me(a)),er(a),t.value.isDisabled())return;const c=t.value.getValue();if(c){if(n.value=await o.fetchEnglish(c),n.value.length<=0)return v.emit(V.ERROR,"找不到单词的音标");l()}}return()=>e.createVNode(I.ElPopover,{visible:r.value,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"音标",icon:"english",onClick:s},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[n.value.map(({label:a,value:c})=>e.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:a,value:c}),i()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class he extends U{constructor(n){super(n);D(this,"key","changespeed");n.on("ssml-changespeed-close",he.handleClose)}static handleClose(n,r){const l=P(n,"ssml-changespeed",r.domId);l&&h.SlateTransforms.unwrapNodes(n,{at:l[1]})}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();return n==null?!0:h.SlateRange.isCollapsed(n)?(v.emit(V.ERROR,"请框选要变速的句子"),!0):!1}exec(n){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const l={type:"ssml-changespeed",domId:this.genDomID(),remark:n.label,rate:n.value,bgColor:"changespeed",children:[{text:r}]};h.SlateTransforms.delete(this.editor),h.SlateTransforms.insertNodes(this.editor,l)}}const tr=[{value:"0.1x",label:"0.1x"},{value:"0.15x",label:"0.15x"},{value:"0.2x",label:"0.2x"},{value:"0.25x",label:"0.25x"},{value:"0.3x",label:"0.3x"},{value:"0.35x",label:"0.35x"},{value:"0.4x",label:"0.4x"}],Ut=e.defineComponent({setup(){const t=e.shallowRef(),o=e.ref(!1);function n(){o.value||(o.value=!0)}function r(){o.value&&(o.value=!1)}async function l(i){t.value??(t.value=new he(i)),!t.value.isDisabled()&&n()}return()=>e.createVNode(I.ElPopover,{style:{padding:"0px"},visible:o.value,"onUpdate:visible":i=>o.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"局部变速",icon:"changespeed",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[tr.map(({label:i,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{var a;(a=t.value)==null||a.exec({label:i,value:s}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class _e extends U{constructor(n){super(n);D(this,"key","rhythm");n.on("ssml-rhythm-close",_e.handleClose)}static handleClose(n,r){const l=P(n,"ssml-rhythm",r.domId);l&&h.SlateTransforms.delete(n,{at:l[1]})}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();return h.SlateRange.isExpanded(n)?(v.emit(V.ERROR,"不能选中文本"),!0):!1}exec(n){if(this.isDisabled())return;const r={type:"ssml-rhythm",domId:this.genDomID(),time:n.value,remark:n.label,bgColor:"rhythm",children:[{text:""}]};h.SlateTransforms.insertNodes(this.editor,r),this.editor.move(1)}}const nr=[{value:"200ms",label:"短"},{value:"300ms",label:"中"},{value:"500ms",label:"长"}],Gt=e.defineComponent({setup(){const t=e.shallowRef(),o=e.ref(!1);function n(){o.value||(o.value=!0)}function r(){o.value&&(o.value=!1)}function l(i){t.value??(t.value=new _e(i)),!t.value.isDisabled()&&n()}return()=>e.createVNode(I.ElPopover,{visible:o.value,"onUpdate:visible":i=>o.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"停顿调节",icon:"rhythm",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[nr.map(({label:i,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:i,value:s}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class ne extends U{constructor(n){super(n);D(this,"key","special");n.on("ssml-special-close",ne.handleClose),n.on("ssml-special-play",ne.handlePlay)}static handleClose(n,r){const l=P(n,"ssml-special",r.domId);l&&h.SlateTransforms.delete(n,{at:l[1]})}static handlePlay(n,r){Ot(r.src)}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();return h.SlateRange.isExpanded(n)?(v.emit(V.ERROR,"不能框选文字"),!0):!1}exec(n){if(this.isDisabled()||this.getValue()==null)return;const l={type:"ssml-special",domId:this.genDomID(),src:n.value,remark:n.label,bgColor:"special",children:[{text:""}]};h.SlateTransforms.insertNodes(this.editor,l),this.editor.move(1)}}const jt=e.defineComponent({__name:"special-menu",setup(t){const o=e.ref(),n=e.shallowRef(),{x:r,y:l,height:i}=ee(o),s=c=>{if(n.value??(n.value=new ne(c)),n.value.isDisabled())return!1;n.value.record(),v.emit(V.SPECIAL_MENU_CLICK,{x:r.value-200,y:l.value+i.value})};function a(c){n.value&&!n.value.isDisabled()&&(n.value.restore(),n.value.exec(c))}return e.onMounted(()=>{v.on(V.SPECIAL_DRAG_BOX_SUBMIT,a)}),e.onUnmounted(()=>{v.off(V.SPECIAL_DRAG_BOX_SUBMIT,a)}),(c,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:o,text:"音效",icon:"special",onClick:s},null,512))}}),Ft=e.defineComponent({__name:"special-drag-box",setup(t){const o=e.ref(!1),n=e.ref({x:20,y:20}),r={first:"默认音效",second:"自定义音效",last:"最近音效"},l=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],i=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=e.ref();e.onMounted(()=>{v.on(V.SPECIAL_MENU_CLICK,c)}),e.onUnmounted(()=>{v.off(V.SPECIAL_MENU_CLICK,c)});function a(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-3s.wav#1",label:`${u.search||"测试"}音效1`},{value:"https://download.samplelib.com/wav/sample-3s.wav#2",label:`${u.menuKey||"测试"}音效2`},{value:"https://download.samplelib.com/wav/sample-3s.wav#3",label:`${u.scene||"测试"}音效3`},{value:"https://download.samplelib.com/wav/sample-3s.wav#4",label:`${u.style||"测试"}音效4`}])}async function c(u){n.value=u,o.value=!0,s.value??(s.value=await a({search:"",menuKey:"first",scene:"",style:""}))}function m(u){o.value=!1,v.emit(V.SPECIAL_DRAG_BOX_SUBMIT,u)}return(u,p)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:o.value,"onUpdate:visible":p[0]||(p[0]=_=>o.value=_),position:n.value,"onUpdate:position":p[1]||(p[1]=_=>n.value=_)},{default:e.withCtx(()=>[e.createVNode(e.unref(X),{menuItemLabel:r,scenes:l,styles:i,dataList:s.value,fetch:a,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}});class ge extends U{constructor(n){super(n);D(this,"key","mute");n.on("ssml-mute-close",ge.handleClose)}static handleClose(n,r){const l=P(n,"ssml-mute",r.domId);l&&h.SlateTransforms.delete(n,{at:l[1]})}isDisabled(){if(super.isDisabled())return!0;const n=this.selection();return h.SlateRange.isExpanded(n)?(v.emit(V.ERROR,"不能选中文本"),!0):!1}exec(n){if(this.isDisabled())return;const r={type:"ssml-mute",domId:this.genDomID(),time:n.value,remark:n.label,bgColor:"mute",children:[{text:""}]};h.SlateTransforms.insertNodes(this.editor,r),this.editor.move(1)}}const or=[{value:"150ms",label:"150ms"},{value:"200ms",label:"200ms"},{value:"300ms",label:"300ms"},{value:"400ms",label:"400ms"},{value:"500ms",label:"500ms"},{value:"600ms",label:"600ms"}],Ht=e.defineComponent({setup(){const t=e.shallowRef(),o=e.ref(!1),n=e.ref();function r(){o.value||(o.value=!0)}function l(){o.value&&(o.value=!1)}function i(a){t.value??(t.value=new ge(a)),!t.value.isDisabled()&&(r(),t.value.record(),n.value.focus())}function s(a){var c,m;l(),a&&((c=t.value)==null||c.restore(),(m=t.value)==null||m.exec({value:a,label:a}))}return()=>e.createVNode(I.ElPopover,{visible:o.value,"onUpdate:visible":a=>o.value=a,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>e.createVNode(B,{text:"插入静音",icon:"mute",onClick:i},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[or.map(({value:a,label:c})=>e.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>s(a),onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[c])),e.createVNode(we,{type:"number",ref:n,onSubmit:s},null)])})}}),Kt=e.defineComponent({__name:"bgm-menu",setup(t){const o=e.ref(),n=e.shallowRef(),{x:r,y:l,height:i}=ee(o),s=c=>{n.value=c,v.emit(V.BGM_MENU_CLICK,{x:r.value-200,y:l.value+i.value})};function a(c){var m;(m=n.value)==null||m.emit(G.UPDATE_BGM,c)}return e.onMounted(()=>{v.on(V.BGM_DRAG_BOX_SUBMIT,a)}),e.onUnmounted(()=>{v.off(V.BGM_DRAG_BOX_SUBMIT,a)}),(c,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:o,text:"配乐",icon:"bgm",onClick:s},null,512))}}),Wt=e.defineComponent({__name:"bgm-drag-box",setup(t){const o=e.ref(!1),n=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},l=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],i=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=e.ref();e.onMounted(()=>{v.on(V.BGM_MENU_CLICK,c)}),e.onUnmounted(()=>{v.off(V.BGM_MENU_CLICK,c)});function a(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function c(u){n.value=u,o.value=!0,s.value??(s.value=await a({search:"",menuKey:"first",scene:"",style:""}))}function m(u){o.value=!1,v.emit(V.BGM_DRAG_BOX_SUBMIT,u)}return(u,p)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:o.value,"onUpdate:visible":p[0]||(p[0]=_=>o.value=_),position:n.value,"onUpdate:position":p[1]||(p[1]=_=>n.value=_)},{default:e.withCtx(()=>[e.createVNode(e.unref(X),{menuItemLabel:r,scenes:l,styles:i,dataList:s.value,fetch:a,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),zt=e.defineComponent({__name:"sensitive-menu",setup(t){const o=e.ref(),n=e.shallowRef(),{x:r,y:l,height:i}=ee(o),s=c=>{n.value=c,v.emit(V.SENSITIVE_MENU_CLICK,{x:r.value-200,y:l.value+i.value})};function a(c){console.log(c)}return e.onMounted(()=>{v.on(V.SENSITIVE_DRAG_BOX_SUBMIT,a)}),e.onUnmounted(()=>{v.off(V.SENSITIVE_DRAG_BOX_SUBMIT,a)}),(c,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:o,text:"敏感词",icon:"sensitive",onClick:s},null,512))}}),Xt=e.defineComponent({__name:"sensitive-drag-box",setup(t){const o=e.ref(!1),n=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},l=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],i=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=e.ref();e.onMounted(()=>{v.on(V.SENSITIVE_MENU_CLICK,c)}),e.onUnmounted(()=>{v.off(V.SENSITIVE_MENU_CLICK,c)});function a(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function c(u){n.value=u,o.value=!0,s.value??(s.value=await a({search:"",menuKey:"first",scene:"",style:""}))}function m(u){o.value=!1,v.emit(V.SENSITIVE_DRAG_BOX_SUBMIT,u)}return(u,p)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:o.value,"onUpdate:visible":p[0]||(p[0]=_=>o.value=_),position:n.value,"onUpdate:position":p[1]||(p[1]=_=>n.value=_)},{default:e.withCtx(()=>[e.createVNode(e.unref(X),{menuItemLabel:r,scenes:l,styles:i,dataList:s.value,fetch:a,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),qt=e.defineComponent({__name:"management-menu",setup(t){const o=e.ref(),n=e.shallowRef(),{x:r,y:l,height:i}=ee(o),s=c=>{n.value=c,v.emit(V.MANAGEMENT_MENU_CLICK,{x:r.value-200,y:l.value+i.value})};function a(c){console.log(c)}return e.onMounted(()=>{v.on(V.MANAGEMENT_DRAG_BOX_SUBMIT,a)}),e.onUnmounted(()=>{v.off(V.MANAGEMENT_DRAG_BOX_SUBMIT,a)}),(c,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:o,text:"多人配音",icon:"management",onClick:s},null,512))}}),Yt=e.defineComponent({__name:"management-drag-box",setup(t){const o=e.ref(!1),n=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},l=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],i=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=e.ref();e.onMounted(()=>{v.on(V.MANAGEMENT_MENU_CLICK,c)}),e.onUnmounted(()=>{v.off(V.MANAGEMENT_MENU_CLICK,c)});function a(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function c(u){n.value=u,o.value=!0,s.value??(s.value=await a({search:"",menuKey:"first",scene:"",style:""}))}function m(u){o.value=!1,v.emit(V.MANAGEMENT_DRAG_BOX_SUBMIT,u)}return(u,p)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:o.value,"onUpdate:visible":p[0]||(p[0]=_=>o.value=_),position:n.value,"onUpdate:position":p[1]||(p[1]=_=>n.value=_)},{default:e.withCtx(()=>[e.createVNode(e.unref(X),{menuItemLabel:r,scenes:l,styles:i,dataList:s.value,fetch:a,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Qt=e.defineComponent({__name:"conversion-menu",setup(t){const o=e.ref(),n=e.shallowRef(),{x:r,y:l,height:i}=ee(o),s=c=>{n.value=c,v.emit(V.CONVERSION_MENU_CLICK,{x:r.value-200,y:l.value+i.value})};function a(c){console.log(c)}return e.onMounted(()=>{v.on(V.CONVERSION_DRAG_BOX_SUBMIT,a)}),e.onUnmounted(()=>{v.off(V.CONVERSION_DRAG_BOX_SUBMIT,a)}),(c,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:o,text:"局部变音",icon:"conversion",onClick:s},null,512))}}),Jt=e.defineComponent({__name:"conversion-drag-box",setup(t){const o=e.ref(!1),n=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},l=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],i=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=e.ref();e.onMounted(()=>{v.on(V.CONVERSION_MENU_CLICK,c)}),e.onUnmounted(()=>{v.off(V.CONVERSION_MENU_CLICK,c)});function a(u){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${u.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${u.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${u.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${u.style||"测试"}背景音乐4`}])}async function c(u){n.value=u,o.value=!0,s.value??(s.value=await a({search:"",menuKey:"first",scene:"",style:""}))}function m(u){o.value=!1,v.emit(V.CONVERSION_DRAG_BOX_SUBMIT,u)}return(u,p)=>(e.openBlock(),e.createBlock(e.unref(q),{visible:o.value,"onUpdate:visible":p[0]||(p[0]=_=>o.value=_),position:n.value,"onUpdate:position":p[1]||(p[1]=_=>n.value=_)},{default:e.withCtx(()=>[e.createVNode(e.unref(X),{menuItemLabel:r,scenes:l,styles:i,dataList:s.value,fetch:a,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),rr=t=>(e.pushScopeId("data-v-93c5e583"),t=t(),e.popScopeId(),t),lr={class:"anchor-avatar d-flex flex-column justify-content-center align-items-center"},ir=["src"],sr=rr(()=>e.createElementVNode("div",{class:"anchor-avatar-name text-white"},"莫厚渊",-1)),ar=e.defineComponent({__name:"try-play-circle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:o}){const n=e.ref(`
  https://mobvoi-speech-public.mobvoi.com/headerImage/4314c841777e4d20901cd5d04a28e91a.png?iopcmd=thumbnail&type=8&width=80&height=80`),r=e.ref(),l=e.ref(0),i=e.ref(0),{style:s}=Qe(r,se(r,{initialValue:{x:window.innerWidth-15,y:window.innerHeight/2-15},onStart:(u,p)=>m(p.clientX,p.clientY)?!1:void 0}));function a(u){m(u.clientX,u.clientY)&&o("update:visible",!1)}function c(u){l.value=u.clientX,i.value=u.clientY}function m(u,p){return u>l.value-10&&u<l.value+10&&p>i.value-10&&p<i.value+10}return(u,p)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"try-play-circel user-select-none rounded-circle overflow-hidden",style:e.normalizeStyle([e.unref(s),{position:"fixed"}]),onMousedown:c,onMouseup:a},[e.createElementVNode("div",lr,[e.createElementVNode("img",{src:n.value,class:"rounded-circle"},null,8,ir),sr])],36)),[[e.vShow,u.visible]])}}),Ti="",cr=R(ar,[["__scopeId","data-v-93c5e583"]]),dr=t=>(e.pushScopeId("data-v-09793f61"),t=t(),e.popScopeId(),t),ur={class:"anchor-avatar d-flex flex-column justify-content-center"},fr=["src"],pr=dr(()=>e.createElementVNode("div",{class:"anchor-avatar-name text-white"},"莫厚渊",-1)),mr=e.defineComponent({__name:"anchor-avatar",setup(t){const o=e.ref(`
  https://mobvoi-speech-public.mobvoi.com/headerImage/4314c841777e4d20901cd5d04a28e91a.png?iopcmd=thumbnail&type=8&width=80&height=80`);return(n,r)=>(e.openBlock(),e.createElementBlock("div",ur,[e.createElementVNode("img",{src:o.value,class:"rounded-circle"},null,8,fr),pr]))}}),Ii="",hr=R(mr,[["__scopeId","data-v-09793f61"]]),_r={class:"anchor-list w-100 d-flex flex-row flex-wrap justify-content-between align-content-start overflow-x-hidden overflow-y-auto"},gr=e.defineComponent({__name:"anchor-list",setup(t){return(o,n)=>(e.openBlock(),e.createElementBlock("div",_r,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(100,(r,l)=>e.createVNode(hr,{key:l})),64))]))}}),Mi="",yr=R(gr,[["__scopeId","data-v-3c347263"]]),br=e.defineComponent({__name:"tag-item",props:{isActivate:{type:Boolean}},setup(t){return(o,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tag-item p-2 text-white",[o.isActivate?"activate":null]])},[e.renderSlot(o.$slots,"default",{},void 0,!0)],2))}}),Oi="",C=R(br,[["__scopeId","data-v-fe47427c"]]),wr={class:"tag-list w-100"},xr={class:"w-100 d-flex flex-row"},Er={class:"tag-list-body w-100 d-flex flex-row flex-wrap align-items-start overflow-y-auto overflow-x-hidden"},Cr=e.defineComponent({__name:"tag-list",setup(t){return(o,n)=>(e.openBlock(),e.createElementBlock("div",wr,[e.createElementVNode("div",xr,[e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("男声")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("女声")]),_:1})]),e.createElementVNode("div",Er,[e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1})])]))}}),$i="",Nr=R(Cr,[["__scopeId","data-v-4d21bc70"]]),ki="",Zt=t=>(e.pushScopeId("data-v-f75c8d40"),t=t(),e.popScopeId(),t),Vr={class:"px-2 pb-2"},vr={class:"try-play-header d-flex flex-row justify-content-between align-items-center"},Sr={class:"try-play-body w-100 h-100 d-flex flex-row"},Tr={class:"try-play-left w-50"},Ir={class:"type-list d-flex flex-row border-bottom border-secondary"},Mr=Zt(()=>e.createElementVNode("div",{class:"py-1"},null,-1)),Or=Zt(()=>e.createElementVNode("div",{class:"try-play-right border border-secondary w-50"},"right",-1)),$r=e.defineComponent({__name:"try-play-panle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:o}){const n=t,r=e.ref(),l=e.ref(""),i=e.ref(),s=e.ref();e.onMounted(()=>{window.addEventListener("keydown",a)}),e.onUnmounted(()=>{window.addEventListener("keydown",a)}),e.watch(()=>n.visible,p=>{p&&setTimeout(()=>{u()},200)});function a(p){p.code==="Escape"&&n.visible&&m()}const{style:c}=Qe(i,se(s,{initialValue:{x:200,y:200}}));function m(){o("update:visible",!1)}function u(){var p;(p=r.value)==null||p.focus()}return(p,_)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:i,style:e.normalizeStyle([e.unref(c),{position:"fixed"}]),class:"try-play user-select-none card z-3 shadow"},[e.createElementVNode("div",Vr,[e.createElementVNode("div",vr,[e.createElementVNode("div",{ref_key:"handleRef",ref:s,class:"w-100 h-100"},null,512),e.createElementVNode("div",{onClick:m,class:"px-2 py-1 try-play-menu-close"},[e.createVNode(e.unref(I.ElIcon),{color:"white"},{default:e.withCtx(()=>[e.createVNode(e.unref(be.Minus))]),_:1})])]),e.createElementVNode("div",null,[e.createElementVNode("div",Sr,[e.createElementVNode("div",Tr,[e.createElementVNode("div",null,[e.createVNode(e.unref(I.ElForm),{onSubmit:_[1]||(_[1]=e.withModifiers(()=>{},["prevent"]))},{default:e.withCtx(()=>[e.createVNode(e.unref(I.ElInput),{ref_key:"searchInputRef",ref:r,modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=w=>l.value=w),placeholder:"输入名称搜索"},null,8,["modelValue"])]),_:1})]),e.createElementVNode("div",Ir,[e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("热榜")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("SVIP")]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createTextVNode("付费")]),_:1})]),e.createVNode(Nr),Mr,e.createVNode(yr)]),Or])])])],4)),[[e.vShow,p.visible]])}}),Bi="",kr=R($r,[["__scopeId","data-v-f75c8d40"]]),en=e.defineComponent({__name:"try-play",setup(t){const o=e.ref(!0);function n(r){r||(o.value=!0)}return(r,l)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(cr,{visible:o.value,"onUpdate:visible":l[0]||(l[0]=i=>o.value=i)},null,8,["visible"]),e.createVNode(kr,{visible:!o.value,"onUpdate:visible":n},null,8,["visible"])]))}}),Ri="",Br={install:t=>{t.component("SpeakerMenu",$t),t.component("ContinuousMenu",kt),t.component("ReadMenu",Rt),t.component("DigitalMenu",Dt),t.component("AliasMenu",Lt),t.component("EnglishMenu",Pt),t.component("ChangespeedMenu",Ut),t.component("RhythmMenu",Gt),t.component("SpecialMenu",jt),t.component("SpecialDragBox",Ft),t.component("MuteMenu",Ht),t.component("BgmMenu",Kt),t.component("BgmDragBox",Wt),t.component("SensitiveMenu",zt),t.component("SensitiveDragBox",Xt),t.component("ManagementMenu",qt),t.component("ManagementDragBox",Yt),t.component("ConversionMenu",Qt),t.component("ConversionDragBox",Jt),t.component("TryPlay",en)}},Di="",Ai="",Li="";var Pe={exports:{}},Ue={exports:{}};(function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.ParsingError=void 0;class n extends Error{constructor(x,N){super(x),this.cause=N}}o.ParsingError=n;let r;function l(){return c(!1)||_()||p()||u()}function i(){return d(/\s*/),c(!0)||p()||m()||a(!1)}function s(){const g=a(!0),x=[];let N,b=i();for(;b;){if(b.node.type==="Element"){if(N)throw new Error("Found multiple root nodes");N=b.node}b.excluded||x.push(b.node),b=i()}if(!N)throw new n("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new n("Failed to parse XML","Not Well-Formed XML");return{declaration:g?g.node:null,root:N,children:x}}function a(g){const x=d(g?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!x)return;const N={name:x[1],type:"ProcessingInstruction",attributes:{}};for(;!(y()||E("?>"));){const b=w();if(b)N.attributes[b.name]=b.value;else return}return d(/\?>/),{excluded:g?!1:r.options.filter(N)===!1,node:N}}function c(g){const x=d(/^<([^?!</>\s]+)\s*/);if(!x)return;const N={type:"Element",name:x[1],attributes:{},children:[]},b=g?!1:r.options.filter(N)===!1;for(;!(y()||E(">")||E("?>")||E("/>"));){const $=w();if($)N.attributes[$.name]=$.value;else return}if(d(/^\s*\/>/))return N.children=null,{excluded:b,node:N};d(/\??>/);let T=l();for(;T;)T.excluded||N.children.push(T.node),T=l();if(r.options.strictMode){const $=`</${N.name}>`;if(r.xml.startsWith($))r.xml=r.xml.slice($.length);else throw new n("Failed to parse XML",`Closing tag not matching "${$}"`)}else d(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:b,node:N}}function m(){const g=d(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||d(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||d(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||d(/^<!DOCTYPE\s+\S+\s*>/);if(g){const x={type:"DocumentType",content:g[0]};return{excluded:r.options.filter(x)===!1,node:x}}}function u(){if(r.xml.startsWith("<![CDATA[")){const g=r.xml.indexOf("]]>");if(g>-1){const x=g+3,N={type:"CDATA",content:r.xml.substring(0,x)};return r.xml=r.xml.slice(x),{excluded:r.options.filter(N)===!1,node:N}}}}function p(){const g=d(/^<!--[\s\S]*?-->/);if(g){const x={type:"Comment",content:g[0]};return{excluded:r.options.filter(x)===!1,node:x}}}function _(){const g=d(/^([^<]+)/);if(g){const x={type:"Text",content:g[1]};return{excluded:r.options.filter(x)===!1,node:x}}}function w(){const g=d(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(g)return{name:g[1].trim(),value:f(g[2].trim())}}function f(g){return g.replace(/^['"]|['"]$/g,"")}function d(g){const x=r.xml.match(g);if(x)return r.xml=r.xml.slice(x[0].length),x}function y(){return r.xml.length===0}function E(g){return r.xml.indexOf(g)===0}function S(g,x={}){g=g.trim();const N=x.filter||(()=>!0);return r={xml:g,options:Object.assign(Object.assign({},x),{filter:N,strictMode:x.strictMode===!0})},s()}t.exports=S,o.default=S})(Ue,Ue.exports);var Rr=Ue.exports;(function(t,o){var n=Y&&Y.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(o,"__esModule",{value:!0});const r=n(Rr);function l(f){if(!f.options.indentation&&!f.options.lineSeparator)return;f.content+=f.options.lineSeparator;let d;for(d=0;d<f.level;d++)f.content+=f.options.indentation}function i(f){f.content=f.content.replace(/ +$/,"");let d;for(d=0;d<f.level;d++)f.content+=f.options.indentation}function s(f,d){f.content+=d}function a(f,d,y){if(typeof f.content=="string")c(f.content,d,y);else if(f.type==="Element")u(f,d,y);else if(f.type==="ProcessingInstruction")_(f,d);else throw new Error("Unknown node type: "+f.type)}function c(f,d,y){if(!y){const E=f.trim();(d.options.lineSeparator||E.length===0)&&(f=E)}f.length>0&&(!y&&d.content.length>0&&l(d),s(d,f))}function m(f,d){const y="/"+f.join("/"),E=f[f.length-1];return d.includes(E)||d.includes(y)}function u(f,d,y){if(d.path.push(f.name),!y&&d.content.length>0&&l(d),s(d,"<"+f.name),p(d,f.attributes),f.children===null||d.options.forceSelfClosingEmptyTag&&f.children.length===0){const E=d.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";s(d,E)}else if(f.children.length===0)s(d,"></"+f.name+">");else{const E=f.children;s(d,">"),d.level++;let S=f.attributes["xml:space"]==="preserve",g=!1;if(!S&&d.options.ignoredPaths&&(g=m(d.path,d.options.ignoredPaths),S=g),!S&&d.options.collapseContent){let x=!1,N=!1,b=!1;E.forEach(function(T,$){T.type==="Text"?(T.content.includes(`
`)?(N=!0,T.content=T.content.trim()):($===0||$===E.length-1)&&T.content.trim().length===0&&(T.content=""),T.content.trim().length>0&&(x=!0)):T.type==="CDATA"?x=!0:b=!0}),x&&(!b||!N)&&(S=!0)}E.forEach(function(x){a(x,d,y||S)}),d.level--,!y&&!S&&l(d),g&&i(d),s(d,"</"+f.name+">")}d.path.pop()}function p(f,d){Object.keys(d).forEach(function(y){const E=d[y].replace(/"/g,"&quot;");s(f," "+y+'="'+E+'"')})}function _(f,d){d.content.length>0&&l(d),s(d,"<?"+f.name),p(d,f.attributes),s(d,"?>")}function w(f,d={}){d.indentation="indentation"in d?d.indentation:"    ",d.collapseContent=d.collapseContent===!0,d.lineSeparator="lineSeparator"in d?d.lineSeparator:`\r
`,d.whiteSpaceAtEndOfSelfclosingTag=d.whiteSpaceAtEndOfSelfclosingTag===!0,d.throwOnFailure=d.throwOnFailure!==!1;try{const y=(0,r.default)(f,{filter:d.filter,strictMode:d.strictMode}),E={content:"",level:0,options:d,path:[]};return y.declaration&&_(y.declaration,E),y.children.forEach(function(S){a(S,E,!1)}),d.lineSeparator?E.content.replace(/\r\n/g,`
`).replace(/\n/g,d.lineSeparator):E.content}catch(y){if(d.throwOnFailure)throw y;return f}}w.minify=(f,d={})=>w(f,Object.assign(Object.assign({},d),{indentation:"",lineSeparator:""})),t.exports=w,o.default=w})(Pe,Pe.exports);var Dr=Pe.exports;const Ar=Ne(Dr),W=t=>(e.pushScopeId("data-v-71fe7760"),t=t(),e.popScopeId(),t),Lr={class:"editor-title d-flex flex-row align-item-center justify-content-between"},Pr={class:"title-wrapper d-flex flex-column justify-content-center ps-3"},Ur=W(()=>e.createElementVNode("div",{class:"title-author pb-1"},"SSML编辑器",-1)),Gr={class:"author d-flex flex-row align-items-center justify-content-start"},jr=W(()=>e.createElementVNode("div",null,"已保存",-1)),Fr=W(()=>e.createElementVNode("div",null,"|",-1)),Hr=W(()=>e.createElementVNode("span",{class:"iconfont icon-play font-size-12 p-1"},null,-1)),Kr=W(()=>e.createElementVNode("div",{class:"d-inline-block"},null,-1)),Wr={class:"operation-wrapper d-flex flex-row justify-content-center align-items-center"},zr=W(()=>e.createElementVNode("div",{class:"menu-divider"},null,-1)),Xr=W(()=>e.createElementVNode("div",{class:"px-1"},null,-1)),qr={class:"ssml-code"},Yr={class:"dialog-footer"},Qr=e.defineComponent({__name:"editor-title",props:{characterTotal:{},characterMax:{},bgm:{}},setup(t){const o=e.inject(F.EDITOR),n=e.ref(!1),r=e.ref(""),l=e.computed(()=>Ar(r.value,{indentation:"    ",filter:a=>a.type!=="Comment",collapseContent:!1,lineSeparator:`
`})),i=()=>{o&&(r.value=o.value.getHtml(),n.value=!0)},s=()=>{o==null||o.value.emit(G.REMOVE_BGM)};return(a,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Lr,[e.createElementVNode("div",Pr,[Ur,e.createElementVNode("div",Gr,[jr,Fr,e.createElementVNode("div",null,e.toDisplayString(a.characterTotal)+"/"+e.toDisplayString(a.characterMax)+"字",1),a.bgm?(e.openBlock(),e.createBlock(e.unref(I.ElTag),{key:0,class:"bgm-txt ms-2",closable:"",size:"small",onClick:c[0]||(c[0]=()=>a.bgm&&a.bgm.value&&e.unref(Ot)(a.bgm.value)),onClose:s},{default:e.withCtx(()=>[Hr,Kr,e.createElementVNode("span",null,e.toDisplayString(a.bgm.label),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Wr,[e.createVNode(e.unref(I.ElButton),{type:"primary",icon:e.unref(be.Share),disabled:""},{default:e.withCtx(()=>[e.createTextVNode("分享")]),_:1},8,["icon"]),zr,e.createVNode(e.unref(I.ElButton),{type:"primary",onClick:i},{default:e.withCtx(()=>[e.createTextVNode("查看SSML")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载音频")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载视频")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载字幕")]),_:1}),e.createVNode(e.unref(I.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("声音转换")]),_:1}),Xr])]),e.createVNode(e.unref(I.ElDialog),{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=m=>n.value=m),title:"查看SSML",width:"50%"},{footer:e.withCtx(()=>[e.createElementVNode("span",Yr,[e.createVNode(e.unref(I.ElButton),{type:"primary",onClick:c[1]||(c[1]=m=>n.value=!1)},{default:e.withCtx(()=>[e.createTextVNode(" 确定 ")]),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("pre",qr,e.toDisplayString(l.value),1)]),_:1},8,["modelValue"])],64))}}),Pi="",Jr=R(Qr,[["__scopeId","data-v-71fe7760"]]),tn="--editor-vdata";function Zr(t){const o=JSON.stringify(t);window.localStorage.setItem(tn,o)}function el(){const t=window.localStorage.getItem(tn);if(t){const o=JSON.parse(t);if(o instanceof Array)return o}}const tl=t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-alias"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-alias"?!0:n(l),r};function nn(t,o,n,r,l){const i=o===void 0?void 0:o.key;return{sel:t,data:o,children:n,text:r,elm:l,key:i}}const on=Array.isArray;function Ge(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function rn(t,o,n){if(t.ns="http://www.w3.org/2000/svg",n!=="foreignObject"&&o!==void 0)for(let r=0;r<o.length;++r){const l=o[r];if(typeof l=="string")continue;const i=l.data;i!==void 0&&rn(i,l.children,l.sel)}}function O(t,o,n){let r={},l,i,s;if(n!==void 0?(o!==null&&(r=o),on(n)?l=n:Ge(n)?i=n.toString():n&&n.sel&&(l=[n])):o!=null&&(on(o)?l=o:Ge(o)?i=o.toString():o&&o.sel?l=[o]:r=o),l!==void 0)for(s=0;s<l.length;++s)Ge(l[s])&&(l[s]=nn(void 0,void 0,void 0,l[s],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&rn(r,l,t),nn(t,r,l,i,void 0)}var ln="Expected a function",sn=0/0,nl="[object Symbol]",ol=/^\s+|\s+$/g,rl=/^[-+]0x[0-9a-f]+$/i,ll=/^0b[01]+$/i,il=/^0o[0-7]+$/i,sl=parseInt,al=typeof Y=="object"&&Y&&Y.Object===Object&&Y,cl=typeof self=="object"&&self&&self.Object===Object&&self,dl=al||cl||Function("return this")(),ul=Object.prototype,fl=ul.toString,pl=Math.max,ml=Math.min,je=function(){return dl.Date.now()};function hl(t,o,n){var r,l,i,s,a,c,m=0,u=!1,p=!1,_=!0;if(typeof t!="function")throw new TypeError(ln);o=an(o)||0,ye(n)&&(u=!!n.leading,p="maxWait"in n,i=p?pl(an(n.maxWait)||0,o):i,_="trailing"in n?!!n.trailing:_);function w(b){var T=r,$=l;return r=l=void 0,m=b,s=t.apply($,T),s}function f(b){return m=b,a=setTimeout(E,o),u?w(b):s}function d(b){var T=b-c,$=b-m,dn=o-T;return p?ml(dn,i-$):dn}function y(b){var T=b-c,$=b-m;return c===void 0||T>=o||T<0||p&&$>=i}function E(){var b=je();if(y(b))return S(b);a=setTimeout(E,d(b))}function S(b){return a=void 0,_&&r?w(b):(r=l=void 0,s)}function g(){a!==void 0&&clearTimeout(a),m=0,r=c=l=a=void 0}function x(){return a===void 0?s:S(je())}function N(){var b=je(),T=y(b);if(r=arguments,l=this,c=b,T){if(a===void 0)return f(c);if(p)return a=setTimeout(E,o),w(c)}return a===void 0&&(a=setTimeout(E,o)),s}return N.cancel=g,N.flush=x,N}function _l(t,o,n){var r=!0,l=!0;if(typeof t!="function")throw new TypeError(ln);return ye(n)&&(r="leading"in n?!!n.leading:r,l="trailing"in n?!!n.trailing:l),hl(t,o,{leading:r,maxWait:o,trailing:l})}function ye(t){var o=typeof t;return!!t&&(o=="object"||o=="function")}function gl(t){return!!t&&typeof t=="object"}function yl(t){return typeof t=="symbol"||gl(t)&&fl.call(t)==nl}function an(t){if(typeof t=="number")return t;if(yl(t))return sn;if(ye(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=ye(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=t.replace(ol,"");var n=ll.test(t);return n||il.test(t)?sl(t.slice(2),n?2:8):rl.test(t)?sn:+t}var bl=_l;const oe=Ne(bl),J={style:{userSelect:"none"},contentEditable:!1};function Z(t,o){return O("span.ssml-wrap",{...J},[O(`span.tag.bg-color.${t.bgColor}`,[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O("span.btn-close",{on:{click:oe(n=>{n.preventDefault(),o()})}},O("span.iconfont.icon-roundclosefill"))]),O(`span.boundary.start.ft-color.${t.bgColor}`),O("span",t.plain),O(`span.boundary.end.ft-color.${t.bgColor}`)])}function wl(t,o,n){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...J},[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O("span.btn-close",{on:{click:oe(r=>{r.preventDefault(),n()})}},O("span.iconfont.icon-roundclosefill",null))]),O(`span.boundary.start.ft-color.${t.bgColor}`,{...J}),O("span",o),O(`span.boundary.end.ft-color.${t.bgColor}`,{...J})])}function cn(t,o){return O("span.ssml-wrap",{...J},[O(`span.tag.bg-color.${t.bgColor}`,[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O("span.btn-close",{on:{click:oe(n=>{n.preventDefault(),o()})}},O("span.iconfont.icon-roundclosefill",null))])])}function xl(t,o){return O("span.ssml-wrap",{...J},[O(`span.tag.bg-color.${t.bgColor}`,[O("span.btn-text",{on:{click:oe(n=>{n.preventDefault(),o==null||o.play()})}},O("span.iconfont.icon-play",null)),O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O("span.btn-text",{on:{click:oe(n=>{n.preventDefault(),o==null||o.close()})}},O("span.iconfont.icon-roundclosefill",null))])])}const El={editorPlugin:tl,renderElems:[{type:"ssml-alias",renderElem:(t,o,n)=>{const r=t;return Z({...r,plain:r.value},()=>n.emit("ssml-alias-close",n,r))}}],elemsToHtml:[{type:"ssml-alias",elemToHtml:t=>{const{alias:o,value:n}=t;return`<sub alias="${o}">${n}</sub>`}}]},Cl={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-changespeed"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-changespeed"?!1:n(l),r},renderElems:[{type:"ssml-changespeed",renderElem:(t,o,n)=>{const r=t;return wl(r,o,()=>n.emit("ssml-changespeed-close",n,r))}}],elemsToHtml:[{type:"ssml-changespeed",elemToHtml:(t,o)=>{const{rate:n}=t;return`<prosody rate="${n}">${o}</prosody>`}}]},Nl={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-continuous"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-continuous"?!0:n(l),r},renderElems:[{type:"ssml-continuous",renderElem:(t,o,n)=>{const r=t;return Z({...r,plain:r.value},()=>n.emit("ssml-continuous-close",n,r))}}],elemsToHtml:[{type:"ssml-continuous",elemToHtml:(t,o)=>`<w>${o}</w>`}]},Vl={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-digital"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-digital"?!0:n(l),r},renderElems:[{type:"ssml-digital",renderElem:(t,o,n)=>{const r=t;return Z({...r,plain:r.value},()=>n.emit("ssml-digital-close",n,r))}}],elemsToHtml:[{type:"ssml-digital",elemToHtml:(t,o)=>{const{interpretAs:n}=t;return`<say-as interpret-as="${n}">${o}</say-as>`}}]},vl={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-english"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-english"?!0:n(l),r},renderElems:[{type:"ssml-english",renderElem:(t,o,n)=>{const r=t;return Z({...r,plain:r.word},()=>n.emit("ssml-english-close",n,r))}}],elemsToHtml:[{type:"ssml-english",elemToHtml:t=>{const{phoneme:o,word:n}=t;return`<p ph="${o}">${n}</p>`}}]},Sl={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-mute"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-mute"?!0:n(l),r},renderElems:[{type:"ssml-mute",renderElem:(t,o,n)=>{const r=t;return cn(r,()=>n.emit("ssml-mute-close",n,r))}}],elemsToHtml:[{type:"ssml-mute",elemToHtml:t=>{const{time:o}=t;return`<break time="${o}" />`}}]},Tl={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-read"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-read"?!0:n(l),r},renderElems:[{type:"ssml-read",renderElem:(t,o,n)=>{const r=t;return Z({...r,plain:r.value},()=>{n.emit("ssml-read-close",n,r)})}}],elemsToHtml:[{type:"ssml-read",elemToHtml:t=>{const{phoneme:o,value:n}=t;return`<w phoneme="${o}">${n}</w>`}}]},Il={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-rhythm"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-rhythm"?!0:n(l),r},renderElems:[{type:"ssml-rhythm",renderElem:(t,o,n)=>{const r=t;return cn(r,()=>n.emit("ssml-rhythm-close",n,r))}}],elemsToHtml:[{type:"ssml-rhythm",elemToHtml:t=>{const{time:o}=t;return`<break time="${o}" />`}}]},Ml={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-speaker"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-speaker"?!0:n(l),r},renderElems:[{type:"ssml-speaker",renderElem:(t,o,n)=>{const r=t;return Z({...r,plain:r.word},()=>n.emit("ssml-speaker-close",n,r))}}],elemsToHtml:[{type:"ssml-speaker",elemToHtml:t=>{const{phoneme:o,word:n}=t;return`<p ph="${o}">${n}</p>`}}]},Ol={editorPlugin:t=>{const{isInline:o,isVoid:n}=t,r=t;return r.isInline=l=>h.DomEditor.getNodeType(l)==="ssml-special"?!0:o(l),r.isVoid=l=>h.DomEditor.getNodeType(l)==="ssml-special"?!0:n(l),r},renderElems:[{type:"ssml-special",renderElem:(t,o,n)=>{const r=t;return xl(r,{close:()=>n.emit("ssml-special-close",n,r),play:()=>n.emit("ssml-special-play",n,r)})}}],elemsToHtml:[{type:"ssml-special",elemToHtml:t=>{const{src:o}=t;return`<audio src="${o}" />`}}]},$l={editorPlugin:t=>{const{getHtml:o}=t,n=t,r={volume:"",pitch:"",rate:"",voice:"",bgm:"",bgmRemark:"",backgroundMusicVolume:""};return t.on(G.UPDATE_SPEAK,l=>{Object.assign(r,l)}),t.on(G.UPDATE_BGM,l=>{r.bgm=l.value,r.bgmRemark=l.label}),t.on(G.REMOVE_BGM,()=>{r.bgm=void 0,r.bgmRemark=void 0}),n.getHtml=()=>{const l=["bgmRemark"],i=[];for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)){const a=r[s];a&&!l.includes(s)&&i.push(`${s}=${a}`)}return`<speak ${i.join(" ")}>${o()}</speak>`},n}};function kl(t){t.on("ssml-alias-close",At.handleClose),t.on("ssml-changespeed-close",he.handleClose),t.on("ssml-continuous-close",fe.handleClose),t.on("ssml-digital-close",pe.handleClose),t.on("ssml-english-close",me.handleClose),t.on("ssml-mute-close",ge.handleClose),t.on("ssml-read-close",Bt.handleClose),t.on("ssml-rhythm-close",_e.handleClose),t.on("ssml-speaker-close",ue.handleClose),t.on("ssml-special-close",ne.handleClose)}const _s="",Bl=e.defineComponent({__name:"editor-core",props:{editorConfig:{}},emits:["created","change"],setup(t,{emit:o}){const n=t,r=e.ref(null);e.onMounted(()=>{l()});const l=()=>{if(!r.value)return;const i=el();h.createEditor({selector:r.value,mode:"simple",content:i??[],config:{...e.toRaw(n.editorConfig),onCreated(s){kl(s),o("created",s),s.focus(!0);const a=s.getConfig();a.hoverbarKeys=void 0},onChange(s){o("change",s),Zr(s.children)}}})};return(i,s)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"edit-core",style:{height:"70vh","overflow-y":"hidden"}},null,512))}}),Rl={class:"bar-view border-bottom border-1"},Dl=e.defineComponent({__name:"bar-view",setup(t){return(o,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Rl,[e.createVNode(e.unref(Je),null,{default:e.withCtx(()=>[e.createVNode(e.unref(H),{divider:"green"},{default:e.withCtx(()=>[e.createVNode(e.unref(B),{text:"24K高清音质",icon:"play",disabled:""})]),_:1}),e.createVNode(e.unref(H),{divider:"cyan"},{default:e.withCtx(()=>[e.createVNode(e.unref($t)),e.createVNode(e.unref(Rt)),e.createVNode(e.unref(Dt)),e.createVNode(e.unref(kt)),e.createVNode(e.unref(Lt)),e.createVNode(e.unref(Pt))]),_:1}),e.createVNode(e.unref(H),{divider:"orange"},{default:e.withCtx(()=>[e.createVNode(e.unref(Ut)),e.createVNode(e.unref(qt)),e.createVNode(e.unref(Qt))]),_:1}),e.createVNode(e.unref(H),{divider:"purple"},{default:e.withCtx(()=>[e.createVNode(e.unref(Gt)),e.createVNode(e.unref(Ht))]),_:1}),e.createVNode(e.unref(H),{divider:"yellow"},{default:e.withCtx(()=>[e.createVNode(e.unref(jt)),e.createVNode(e.unref(Kt))]),_:1}),e.createVNode(e.unref(H),null,{default:e.withCtx(()=>[e.createVNode(e.unref(zt))]),_:1})]),_:1})]),e.createVNode(e.unref(Wt)),e.createVNode(e.unref(Ft)),e.createVNode(e.unref(Xt)),e.createVNode(e.unref(Yt)),e.createVNode(e.unref(Jt)),e.createVNode(e.unref(en))],64))}}),Al={class:"editor-view"},Ll={class:"editor-box"},Pl={class:"editor-core-container shadow pt-1"},Ul=e.defineComponent({__name:"editor-view",emits:["onCreated","onChange"],setup(t,{emit:o}){const n=e.ref(0),r=e.shallowRef(),l=e.ref(null);e.provide(F.EDITOR,r);const i={maxLength:5e3,placeholder:"请输入内容..."};e.onUnmounted(()=>{var c;(c=r.value)==null||c.destroy()});const s=c=>{r.value=c,o("onCreated",c),c.on(G.UPDATE_BGM,m=>{l.value=m}),c.on(G.REMOVE_BGM,()=>{l.value=null})},a=c=>{n.value=c.getText().length,o("onChange",c)};return(c,m)=>(e.openBlock(),e.createElementBlock("div",Al,[e.createVNode(Jr,{bgm:l.value,"character-total":n.value,"character-max":i.maxLength||0},null,8,["bgm","character-total","character-max"]),e.createElementVNode("div",Ll,[e.createVNode(Dl),e.createElementVNode("div",Pl,[e.createVNode(Bl,{"editor-config":i,onChange:a,onCreated:s})])])]))}}),gs="",Gl=R(Ul,[["__scopeId","data-v-bc09f735"]]),jl={install(t){t.component("EditorView",Gl)}},ys="",Fl={install(t,o){const n=o??{};t.provide(F.EDITORCONFIG,n),v.on(V.ERROR,n.handleError),h.Boot.registerModule(El),h.Boot.registerModule(Cl),h.Boot.registerModule(Nl),h.Boot.registerModule(Vl),h.Boot.registerModule(vl),h.Boot.registerModule(Sl),h.Boot.registerModule(Tl),h.Boot.registerModule(Il),h.Boot.registerModule(Ml),h.Boot.registerModule(Ol),h.Boot.registerModule($l),t.use(lo),t.use(Br),t.use(jl)}};k.EMITTER_EVENT=V,k.PROVIDER_KEY=F,k.WANGEDITOR_EVENT=G,k.default=Fl,Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
