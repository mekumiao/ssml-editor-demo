(function(D,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("@wangeditor/editor"),require("element-plus"),require("@element-plus/icons-vue")):typeof define=="function"&&define.amd?define(["exports","vue","@wangeditor/editor","element-plus","@element-plus/icons-vue"],t):(D=typeof globalThis<"u"?globalThis:D||self,t(D.SSMLEditor={},D.Vue,D.wangEditor,D.ElementPlus,D.ElementPlusIconsVue))})(this,function(D,t,y,$,ue){"use strict";var Ic=Object.defineProperty;var Pc=(D,t,y)=>t in D?Ic(D,t,{enumerable:!0,configurable:!0,writable:!0,value:y}):D[t]=y;var U=(D,t,y)=>(Pc(D,typeof t!="symbol"?t+"":t,y),y);const Mc="",Lc="";var $t=!1;function Ce(e,n,r){return Array.isArray(e)?(e.length=Math.max(e.length,n),e.splice(n,1,r),r):(e[n]=r,r)}function Ue(e,n){if(Array.isArray(e)){e.splice(n,1);return}delete e[n]}function xr(){return Tt().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Tt(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const vr=typeof Proxy=="function",kr="devtools-plugin:setup",Sr="plugin:settings:set";let fe,ze;function Nr(){var e;return fe!==void 0||(typeof window<"u"&&window.performance?(fe=!0,ze=window.performance):typeof global<"u"&&(!((e=global.perf_hooks)===null||e===void 0)&&e.performance)?(fe=!0,ze=global.perf_hooks.performance):fe=!1),fe}function Vr(){return Nr()?ze.now():Date.now()}class Cr{constructor(n,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=n,this.hook=r;const o={};if(n.settings)for(const l in n.settings){const i=n.settings[l];o[l]=i.defaultValue}const a=`__vue-devtools-plugin-settings__${n.id}`;let s=Object.assign({},o);try{const l=localStorage.getItem(a),i=JSON.parse(l);Object.assign(s,i)}catch{}this.fallbacks={getSettings(){return s},setSettings(l){try{localStorage.setItem(a,JSON.stringify(l))}catch{}s=l},now(){return Vr()}},r&&r.on(Sr,(l,i)=>{l===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(l,i)=>this.target?this.target.on[i]:(...c)=>{this.onQueue.push({method:i,args:c})}}),this.proxiedTarget=new Proxy({},{get:(l,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...c)=>(this.targetQueue.push({method:i,args:c,resolve:()=>{}}),this.fallbacks[i](...c)):(...c)=>new Promise(d=>{this.targetQueue.push({method:i,args:c,resolve:d})})})}async setRealTarget(n){this.target=n;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function Dt(e,n){const r=e,o=Tt(),a=xr(),s=vr&&r.enableEarlyProxy;if(a&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))a.emit(kr,e,n);else{const l=s?new Cr(r,a):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:n,proxy:l}),l&&n(l.proxiedTarget)}}/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let ve;const ke=e=>ve=e,Rt=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function ae(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var te;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(te||(te={}));const $e=typeof window<"u",Se=(process.env.NODE_ENV!=="production"||!1)&&process.env.NODE_ENV!=="test"&&$e,Ot=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function $r(e,{autoBom:n=!1}={}){return n&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function We(e,n,r){const o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){Pt(o.response,n,r)},o.onerror=function(){console.error("could not download file")},o.send()}function Bt(e){const n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Te(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const De=typeof navigator=="object"?navigator:{userAgent:""},It=(()=>/Macintosh/.test(De.userAgent)&&/AppleWebKit/.test(De.userAgent)&&!/Safari/.test(De.userAgent))(),Pt=$e?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!It?Tr:"msSaveOrOpenBlob"in De?Dr:Rr:()=>{};function Tr(e,n="download",r){const o=document.createElement("a");o.download=n,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?Bt(o.href)?We(e,n,r):(o.target="_blank",Te(o)):Te(o)):(o.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(o.href)},4e4),setTimeout(function(){Te(o)},0))}function Dr(e,n="download",r){if(typeof e=="string")if(Bt(e))We(e,n,r);else{const o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){Te(o)})}else navigator.msSaveOrOpenBlob($r(e,r),n)}function Rr(e,n,r,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return We(e,n,r);const a=e.type==="application/octet-stream",s=/constructor/i.test(String(Ot.HTMLElement))||"safari"in Ot,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s||It)&&typeof FileReader<"u"){const i=new FileReader;i.onloadend=function(){let c=i.result;if(typeof c!="string")throw o=null,new Error("Wrong reader.result type");c=l?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=c:location.assign(c),o=null},i.readAsDataURL(e)}else{const i=URL.createObjectURL(e);o?o.location.assign(i):location.href=i,o=null,setTimeout(function(){URL.revokeObjectURL(i)},4e4)}}function A(e,n){const r="🍍 "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,n):n==="error"?console.error(r):n==="warn"?console.warn(r):console.log(r)}function Ge(e){return"_a"in e&&"install"in e}function Mt(){if(!("clipboard"in navigator))return A("Your browser doesn't support the Clipboard API","error"),!0}function Lt(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(A('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Or(e){if(!Mt())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),A("Global state copied to clipboard.")}catch(n){if(Lt(n))return;A("Failed to serialize the state. Check the console for more details.","error"),console.error(n)}}async function Br(e){if(!Mt())try{At(e,JSON.parse(await navigator.clipboard.readText())),A("Global state pasted from clipboard.")}catch(n){if(Lt(n))return;A("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(n)}}async function Ir(e){try{Pt(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(n){A("Failed to export the state as JSON. Check the console for more details.","error"),console.error(n)}}let ne;function Pr(){ne||(ne=document.createElement("input"),ne.type="file",ne.accept=".json");function e(){return new Promise((n,r)=>{ne.onchange=async()=>{const o=ne.files;if(!o)return n(null);const a=o.item(0);return n(a?{text:await a.text(),file:a}:null)},ne.oncancel=()=>n(null),ne.onerror=r,ne.click()})}return e}async function Mr(e){try{const r=await Pr()();if(!r)return;const{text:o,file:a}=r;At(e,JSON.parse(o)),A(`Global state imported from "${a.name}".`)}catch(n){A("Failed to import the state from JSON. Check the console for more details.","error"),console.error(n)}}function At(e,n){for(const r in n){const o=e.state.value[r];o&&Object.assign(o,n[r])}}function J(e){return{_custom:{display:e}}}const Ft="🍍 Pinia (root)",qe="_root";function Lr(e){return Ge(e)?{id:qe,label:Ft}:{id:e.$id,label:e.$id}}function Ar(e){if(Ge(e)){const r=Array.from(e._s.keys()),o=e._s;return{state:r.map(s=>({editable:!0,key:s,value:e.state.value[s]})),getters:r.filter(s=>o.get(s)._getters).map(s=>{const l=o.get(s);return{editable:!1,key:s,value:l._getters.reduce((i,c)=>(i[c]=l[c],i),{})}})}}const n={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(n.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(n.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),n}function Fr(e){return e?Array.isArray(e)?e.reduce((n,r)=>(n.keys.push(r.key),n.operations.push(r.type),n.oldValue[r.key]=r.oldValue,n.newValue[r.key]=r.newValue,n),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:J(e.type),key:J(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function Hr(e){switch(e){case te.direct:return"mutation";case te.patchFunction:return"$patch";case te.patchObject:return"$patch";default:return"unknown"}}let pe=!0;const Re=[],se="pinia:mutations",F="pinia",{assign:jr}=Object,Oe=e=>"🍍 "+e;function Ur(e,n){Dt({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Re,app:e},r=>{typeof r.now!="function"&&A("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:se,label:"Pinia 🍍",color:15064968}),r.addInspector({id:F,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Or(n)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Br(n),r.sendInspectorTree(F),r.sendInspectorState(F)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{Ir(n)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Mr(n),r.sendInspectorTree(F),r.sendInspectorState(F)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:o=>{const a=n._s.get(o);a?typeof a.$reset!="function"?A(`Cannot reset "${o}" store because it doesn't have a "$reset" method implemented.`,"warn"):(a.$reset(),A(`Store "${o}" reset.`)):A(`Cannot reset "${o}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((o,a)=>{const s=o.componentInstance&&o.componentInstance.proxy;if(s&&s._pStores){const l=o.componentInstance.proxy._pStores;Object.values(l).forEach(i=>{o.instanceData.state.push({type:Oe(i.$id),key:"state",editable:!0,value:i._isOptionsAPI?{_custom:{value:t.toRaw(i.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>i.$reset()}]}}:Object.keys(i.$state).reduce((c,d)=>(c[d]=i.$state[d],c),{})}),i._getters&&i._getters.length&&o.instanceData.state.push({type:Oe(i.$id),key:"getters",editable:!1,value:i._getters.reduce((c,d)=>{try{c[d]=i[d]}catch(h){c[d]=h}return c},{})})})}}),r.on.getInspectorTree(o=>{if(o.app===e&&o.inspectorId===F){let a=[n];a=a.concat(Array.from(n._s.values())),o.rootNodes=(o.filter?a.filter(s=>"$id"in s?s.$id.toLowerCase().includes(o.filter.toLowerCase()):Ft.toLowerCase().includes(o.filter.toLowerCase())):a).map(Lr)}}),r.on.getInspectorState(o=>{if(o.app===e&&o.inspectorId===F){const a=o.nodeId===qe?n:n._s.get(o.nodeId);if(!a)return;a&&(o.state=Ar(a))}}),r.on.editInspectorState((o,a)=>{if(o.app===e&&o.inspectorId===F){const s=o.nodeId===qe?n:n._s.get(o.nodeId);if(!s)return A(`store "${o.nodeId}" not found`,"error");const{path:l}=o;Ge(s)?l.unshift("state"):(l.length!==1||!s._customProperties.has(l[0])||l[0]in s.$state)&&l.unshift("$state"),pe=!1,o.set(s,l,o.state.value),pe=!0}}),r.on.editComponentState(o=>{if(o.type.startsWith("🍍")){const a=o.type.replace(/^🍍\s*/,""),s=n._s.get(a);if(!s)return A(`store "${a}" not found`,"error");const{path:l}=o;if(l[0]!=="state")return A(`Invalid path for store "${a}":
${l}
Only state can be modified.`);l[0]="$state",pe=!1,o.set(s,l,o.state.value),pe=!0}})})}function zr(e,n){Re.includes(Oe(n.$id))||Re.push(Oe(n.$id)),Dt({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Re,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const o=typeof r.now=="function"?r.now.bind(r):Date.now;n.$onAction(({after:l,onError:i,name:c,args:d})=>{const h=Ht++;r.addTimelineEvent({layerId:se,event:{time:o(),title:"🛫 "+c,subtitle:"start",data:{store:J(n.$id),action:J(c),args:d},groupId:h}}),l(p=>{re=void 0,r.addTimelineEvent({layerId:se,event:{time:o(),title:"🛬 "+c,subtitle:"end",data:{store:J(n.$id),action:J(c),args:d,result:p},groupId:h}})}),i(p=>{re=void 0,r.addTimelineEvent({layerId:se,event:{time:o(),logType:"error",title:"💥 "+c,subtitle:"end",data:{store:J(n.$id),action:J(c),args:d,error:p},groupId:h}})})},!0),n._customProperties.forEach(l=>{t.watch(()=>t.unref(n[l]),(i,c)=>{r.notifyComponentUpdate(),r.sendInspectorState(F),pe&&r.addTimelineEvent({layerId:se,event:{time:o(),title:"Change",subtitle:l,data:{newValue:i,oldValue:c},groupId:re}})},{deep:!0})}),n.$subscribe(({events:l,type:i},c)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(F),!pe)return;const d={time:o(),title:Hr(i),data:jr({store:J(n.$id)},Fr(l)),groupId:re};i===te.patchFunction?d.subtitle="⤵️":i===te.patchObject?d.subtitle="🧩":l&&!Array.isArray(l)&&(d.subtitle=l.type),l&&(d.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:l}}),r.addTimelineEvent({layerId:se,event:d})},{detached:!0,flush:"sync"});const a=n._hotUpdate;n._hotUpdate=t.markRaw(l=>{a(l),r.addTimelineEvent({layerId:se,event:{time:o(),title:"🔥 "+n.$id,subtitle:"HMR update",data:{store:J(n.$id),info:J("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(F),r.sendInspectorState(F)});const{$dispose:s}=n;n.$dispose=()=>{s(),r.notifyComponentUpdate(),r.sendInspectorTree(F),r.sendInspectorState(F),r.getSettings().logStoreChanges&&A(`Disposed "${n.$id}" store 🗑`)},r.notifyComponentUpdate(),r.sendInspectorTree(F),r.sendInspectorState(F),r.getSettings().logStoreChanges&&A(`"${n.$id}" store installed 🆕`)})}let Ht=0,re;function jt(e,n,r){const o=n.reduce((a,s)=>(a[s]=t.toRaw(e)[s],a),{});for(const a in o)e[a]=function(){const s=Ht,l=r?new Proxy(e,{get(...c){return re=s,Reflect.get(...c)},set(...c){return re=s,Reflect.set(...c)}}):e;re=s;const i=o[a].apply(l,arguments);return re=void 0,i}}function Wr({app:e,store:n,options:r}){if(n.$id.startsWith("__hot:"))return;n._isOptionsAPI=!!r.state,jt(n,Object.keys(r.actions),n._isOptionsAPI);const o=n._hotUpdate;t.toRaw(n)._hotUpdate=function(a){o.apply(this,arguments),jt(n,Object.keys(a._hmrPayload.actions),!!n._isOptionsAPI)},zr(e,n)}function Gr(){const e=t.effectScope(!0),n=e.run(()=>t.ref({}));let r=[],o=[];const a=t.markRaw({install(s){ke(a),a._a=s,s.provide(Rt,a),s.config.globalProperties.$pinia=a,Se&&Ur(s,a),o.forEach(l=>r.push(l)),o=[]},use(s){return!this._a&&!$t?o.push(s):r.push(s),this},_p:r,_a:null,_e:e,_s:new Map,state:n});return Se&&typeof Proxy<"u"&&a.use(Wr),a}function Ut(e,n){for(const r in n){const o=n[r];if(!(r in e))continue;const a=e[r];ae(a)&&ae(o)&&!t.isRef(o)&&!t.isReactive(o)?e[r]=Ut(a,o):e[r]=o}return e}const zt=()=>{};function Wt(e,n,r,o=zt){e.push(n);const a=()=>{const s=e.indexOf(n);s>-1&&(e.splice(s,1),o())};return!r&&t.getCurrentScope()&&t.onScopeDispose(a),a}function me(e,...n){e.slice().forEach(r=>{r(...n)})}const qr=e=>e();function Ye(e,n){e instanceof Map&&n instanceof Map&&n.forEach((r,o)=>e.set(o,r)),e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const r in n){if(!n.hasOwnProperty(r))continue;const o=n[r],a=e[r];ae(a)&&ae(o)&&e.hasOwnProperty(r)&&!t.isRef(o)&&!t.isReactive(o)?e[r]=Ye(a,o):e[r]=o}return e}const Yr=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function Kr(e){return!ae(e)||!e.hasOwnProperty(Yr)}const{assign:q}=Object;function Gt(e){return!!(t.isRef(e)&&e.effect)}function qt(e,n,r,o){const{state:a,actions:s,getters:l}=n,i=r.state.value[e];let c;function d(){!i&&(process.env.NODE_ENV==="production"||!o)&&(r.state.value[e]=a?a():{});const h=process.env.NODE_ENV!=="production"&&o?t.toRefs(t.ref(a?a():{}).value):t.toRefs(r.state.value[e]);return q(h,s,Object.keys(l||{}).reduce((p,m)=>(process.env.NODE_ENV!=="production"&&m in h&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${m}" in store "${e}".`),p[m]=t.markRaw(t.computed(()=>{ke(r);const g=r._s.get(e);return l[m].call(g,g)})),p),{}))}return c=Ke(e,d,n,r,o,!0),c}function Ke(e,n,r={},o,a,s){let l;const i=q({actions:{}},r);if(process.env.NODE_ENV!=="production"&&!o._e.active)throw new Error("Pinia destroyed");const c={deep:!0};process.env.NODE_ENV!=="production"&&!$t&&(c.onTrigger=V=>{d?g=V:d==!1&&!E._hotUpdating&&(Array.isArray(g)?g.push(V):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let d,h,p=[],m=[],g;const f=o.state.value[e];!s&&!f&&(process.env.NODE_ENV==="production"||!a)&&(o.state.value[e]={});const u=t.ref({});let _;function S(V){let k;d=h=!1,process.env.NODE_ENV!=="production"&&(g=[]),typeof V=="function"?(V(o.state.value[e]),k={type:te.patchFunction,storeId:e,events:g}):(Ye(o.state.value[e],V),k={type:te.patchObject,payload:V,storeId:e,events:g});const T=_=Symbol();t.nextTick().then(()=>{_===T&&(d=!0)}),h=!0,me(p,k,o.state.value[e])}const N=s?function(){const{state:k}=r,T=k?k():{};this.$patch(P=>{q(P,T)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`🍍: Store "${e}" is built using the setup syntax and does not implement $reset().`)}:zt;function b(){l.stop(),p=[],m=[],o._s.delete(e)}function w(V,k){return function(){ke(o);const T=Array.from(arguments),P=[],ee=[];function Nt(B){P.push(B)}function Vt(B){ee.push(B)}me(m,{args:T,name:V,store:E,after:Nt,onError:Vt});let de;try{de=k.apply(this&&this.$id===e?this:E,T)}catch(B){throw me(ee,B),B}return de instanceof Promise?de.then(B=>(me(P,B),B)).catch(B=>(me(ee,B),Promise.reject(B))):(me(P,de),de)}}const C=t.markRaw({actions:{},getters:{},state:[],hotState:u}),v={_p:o,$id:e,$onAction:Wt.bind(null,m),$patch:S,$reset:N,$subscribe(V,k={}){const T=Wt(p,V,k.detached,()=>P()),P=l.run(()=>t.watch(()=>o.state.value[e],ee=>{(k.flush==="sync"?h:d)&&V({storeId:e,type:te.direct,events:g},ee)},q({},c,k)));return T},$dispose:b},E=t.reactive(process.env.NODE_ENV!=="production"||Se?q({_hmrPayload:C,_customProperties:t.markRaw(new Set)},v):v);o._s.set(e,E);const R=o._a&&o._a.runWithContext||qr,L=o._e.run(()=>(l=t.effectScope(),R(()=>l.run(n))));for(const V in L){const k=L[V];if(t.isRef(k)&&!Gt(k)||t.isReactive(k))process.env.NODE_ENV!=="production"&&a?Ce(u.value,V,t.toRef(L,V)):s||(f&&Kr(k)&&(t.isRef(k)?k.value=f[V]:Ye(k,f[V])),o.state.value[e][V]=k),process.env.NODE_ENV!=="production"&&C.state.push(V);else if(typeof k=="function"){const T=process.env.NODE_ENV!=="production"&&a?k:w(V,k);L[V]=T,process.env.NODE_ENV!=="production"&&(C.actions[V]=k),i.actions[V]=k}else process.env.NODE_ENV!=="production"&&Gt(k)&&(C.getters[V]=s?r.getters[V]:k,$e&&(L._getters||(L._getters=t.markRaw([]))).push(V))}if(q(E,L),q(t.toRaw(E),L),Object.defineProperty(E,"$state",{get:()=>process.env.NODE_ENV!=="production"&&a?u.value:o.state.value[e],set:V=>{if(process.env.NODE_ENV!=="production"&&a)throw new Error("cannot set hotState");S(k=>{q(k,V)})}}),process.env.NODE_ENV!=="production"&&(E._hotUpdate=t.markRaw(V=>{E._hotUpdating=!0,V._hmrPayload.state.forEach(k=>{if(k in E.$state){const T=V.$state[k],P=E.$state[k];typeof T=="object"&&ae(T)&&ae(P)?Ut(T,P):V.$state[k]=P}Ce(E,k,t.toRef(V.$state,k))}),Object.keys(E.$state).forEach(k=>{k in V.$state||Ue(E,k)}),d=!1,h=!1,o.state.value[e]=t.toRef(V._hmrPayload,"hotState"),h=!0,t.nextTick().then(()=>{d=!0});for(const k in V._hmrPayload.actions){const T=V[k];Ce(E,k,w(k,T))}for(const k in V._hmrPayload.getters){const T=V._hmrPayload.getters[k],P=s?t.computed(()=>(ke(o),T.call(E,E))):T;Ce(E,k,P)}Object.keys(E._hmrPayload.getters).forEach(k=>{k in V._hmrPayload.getters||Ue(E,k)}),Object.keys(E._hmrPayload.actions).forEach(k=>{k in V._hmrPayload.actions||Ue(E,k)}),E._hmrPayload=V._hmrPayload,E._getters=V._getters,E._hotUpdating=!1})),Se){const V={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(k=>{Object.defineProperty(E,k,q({value:E[k]},V))})}return o._p.forEach(V=>{if(Se){const k=l.run(()=>V({store:E,app:o._a,pinia:o,options:i}));Object.keys(k||{}).forEach(T=>E._customProperties.add(T)),q(E,k)}else q(E,l.run(()=>V({store:E,app:o._a,pinia:o,options:i})))}),process.env.NODE_ENV!=="production"&&E.$state&&typeof E.$state=="object"&&typeof E.$state.constructor=="function"&&!E.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${E.$id}".`),f&&s&&r.hydrate&&r.hydrate(E.$state,f),d=!0,h=!0,E}function Be(e,n,r){let o,a;const s=typeof n=="function";if(typeof e=="string")o=e,a=s?r:n;else if(a=e,o=e.id,process.env.NODE_ENV!=="production"&&typeof o!="string")throw new Error('[🍍]: "defineStore()" must be passed a store id as its first argument.');function l(i,c){const d=t.hasInjectionContext();if(i=(process.env.NODE_ENV==="test"&&ve&&ve._testing?null:i)||(d?t.inject(Rt,null):null),i&&ke(i),process.env.NODE_ENV!=="production"&&!ve)throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);i=ve,i._s.has(o)||(s?Ke(o,n,a,i):qt(o,a,i),process.env.NODE_ENV!=="production"&&(l._pinia=i));const h=i._s.get(o);if(process.env.NODE_ENV!=="production"&&c){const p="__hot:"+o,m=s?Ke(p,n,a,i,!0):qt(p,q({},a),i,!0);c._hotUpdate(m),delete i.state.value[p],i._s.delete(p)}if(process.env.NODE_ENV!=="production"&&$e){const p=t.getCurrentInstance();if(p&&p.proxy&&!c){const m=p.proxy,g="_pStores"in m?m._pStores:m._pStores={};g[o]=h}}return h}return l.$id=o,l}function Yt(e){{e=t.toRaw(e);const n={};for(const r in e){const o=e[r];(t.isRef(o)||t.isReactive(o))&&(n[r]=t.toRef(e,r))}return n}}function Kt(){return{id:"",src:""}}function Y(){return()=>Promise.resolve([])}function Xe(e){const n=(e==null?void 0:e.editorConfig)||{maxLength:5e3,placeholder:"请输入内容..."},r=(e==null?void 0:e.handleError)||(()=>{}),o=(e==null?void 0:e.pinyin)||{fetchData:Y()},a=(e==null?void 0:e.english)||{fetchData:Y()},s=(e==null?void 0:e.special)||{fetchData:Y(),fetchScene:Y(),fetchStyle:Y()},l=(e==null?void 0:e.bgm)||{fetchData:Y(),fetchScene:Y(),fetchStyle:Y()},i=(e==null?void 0:e.tryPlay)||{fetchData:Y(),featchTag:Y(),fetchStar:Y()},c=(e==null?void 0:e.conversion)||{timeoutMilliseconds:2e4,audioUpload:()=>Kt(),transfer:()=>Kt(),fetchSpeaker:Y()},d=s,h=l,p=i;return d.menus??(d.menus=[{label:"默认音效",value:""},{label:"自定义音效",value:"custom"},{label:"最近音效",value:"history"}]),h.menus??(h.menus=[{label:"默认配乐",value:""},{label:"自定义配乐",value:"custom"},{label:"最近配乐",value:"history"}]),p.gender??(p.gender=[{label:"全部",value:""},{label:"男声",value:"Male"},{label:"女声",value:"Female"}]),p.topFlag??(p.topFlag=[{label:"热榜",value:""},{label:"SVIP",value:"SVIP"},{label:"付费",value:"付费"}]),p.category??(p.category=[{label:"常用",value:"常用"},{label:"已购",value:"已购"},{label:"收藏",value:"收藏"},{label:"我的",value:"我的"}]),{editorConfig:n,handleError:r,pinyin:o,english:a,bgm:h,special:d,tryPlay:p,conversion:c}}const Xt=()=>({0:"0",.1:"0.1",.2:"0.2",.3:"0.3",.4:"0.4",.5:"0.5",.6:"0.6",.7:"0.7",.8:"0.8",.9:"0.9",1:"1.0",1.1:"1.1",1.2:"1.2",1.4:"1.4",1.5:"1.5",1.75:"1.75",2:"2.0"}),Jt=()=>({0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10","-1":"-1","-2":"-2","-3":"-3","-4":"-4","-5":"-5","-6":"-6","-7":"-7","-8":"-8","-9":"-9","-10":"-10"}),he=()=>"https://img.sdaxia.top/upload/4314c841777e4d20901cd5d04a28e91a.png",z=Be("--editor-config",()=>{const e=t.shallowRef(),n=t.shallowRef(),r=t.computed(()=>e.value),o=t.computed(()=>{if(n.value)return n.value;throw Error("请设置GlobalEditorConfig")});return{editor:r,globalEditConfig:o,setEditor:l=>{e.value=l},setGlobalEditConfig:l=>{n.value=l??Xe()}}}),Xr=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-audio"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-audio"?!y.SlateNode.string(a):r(a),o};function Qt(e,n,r,o,a){const s=n===void 0?void 0:n.key;return{sel:e,data:n,children:r,text:o,elm:a,key:s}}const Zt=Array.isArray;function Je(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function en(e,n,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&n!==void 0)for(let o=0;o<n.length;++o){const a=n[o];if(typeof a=="string")continue;const s=a.data;s!==void 0&&en(s,a.children,a.sel)}}function x(e,n,r){let o={},a,s,l;if(r!==void 0?(n!==null&&(o=n),Zt(r)?a=r:Je(r)?s=r.toString():r&&r.sel&&(a=[r])):n!=null&&(Zt(n)?a=n:Je(n)?s=n.toString():n&&n.sel?a=[n]:o=n),a!==void 0)for(l=0;l<a.length;++l)Je(a[l])&&(a[l]=Qt(void 0,void 0,void 0,a[l],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&en(o,a,e),Qt(e,o,a,s,void 0)}var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tn="Expected a function",nn=0/0,Jr="[object Symbol]",Qr=/^\s+|\s+$/g,Zr=/^[-+]0x[0-9a-f]+$/i,eo=/^0b[01]+$/i,to=/^0o[0-7]+$/i,no=parseInt,ro=typeof ye=="object"&&ye&&ye.Object===Object&&ye,oo=typeof self=="object"&&self&&self.Object===Object&&self,ao=ro||oo||Function("return this")(),so=Object.prototype,lo=so.toString,io=Math.max,co=Math.min,Ze=function(){return ao.Date.now()};function uo(e,n,r){var o,a,s,l,i,c,d=0,h=!1,p=!1,m=!0;if(typeof e!="function")throw new TypeError(tn);n=rn(n)||0,Ie(r)&&(h=!!r.leading,p="maxWait"in r,s=p?io(rn(r.maxWait)||0,n):s,m="trailing"in r?!!r.trailing:m);function g(v){var E=o,R=a;return o=a=void 0,d=v,l=e.apply(R,E),l}function f(v){return d=v,i=setTimeout(S,n),h?g(v):l}function u(v){var E=v-c,R=v-d,L=n-E;return p?co(L,s-R):L}function _(v){var E=v-c,R=v-d;return c===void 0||E>=n||E<0||p&&R>=s}function S(){var v=Ze();if(_(v))return N(v);i=setTimeout(S,u(v))}function N(v){return i=void 0,m&&o?g(v):(o=a=void 0,l)}function b(){i!==void 0&&clearTimeout(i),d=0,o=c=a=i=void 0}function w(){return i===void 0?l:N(Ze())}function C(){var v=Ze(),E=_(v);if(o=arguments,a=this,c=v,E){if(i===void 0)return f(c);if(p)return i=setTimeout(S,n),g(c)}return i===void 0&&(i=setTimeout(S,n)),l}return C.cancel=b,C.flush=w,C}function fo(e,n,r){var o=!0,a=!0;if(typeof e!="function")throw new TypeError(tn);return Ie(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),uo(e,n,{leading:o,maxWait:n,trailing:a})}function Ie(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function po(e){return!!e&&typeof e=="object"}function mo(e){return typeof e=="symbol"||po(e)&&lo.call(e)==Jr}function rn(e){if(typeof e=="number")return e;if(mo(e))return nn;if(Ie(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Ie(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(Qr,"");var r=eo.test(e);return r||to.test(e)?no(e.slice(2),r?2:8):Zr.test(e)?nn:+e}var ho=fo;const H=Qe(ho);function on(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function et(e,n){e===void 0&&(e={}),n===void 0&&(n={}),Object.keys(n).forEach(function(r){typeof e[r]>"u"?e[r]=n[r]:on(n[r])&&on(e[r])&&Object.keys(n[r]).length>0&&et(e[r],n[r])})}var an={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function tt(){var e=typeof document<"u"?document:{};return et(e,an),e}var yo={document:an,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){typeof setTimeout>"u"||clearTimeout(e)}};function sn(){var e=typeof window<"u"?window:{};return et(e,yo),e}function go(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},nt(e)}function Pe(e,n){return Pe=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},Pe(e,n)}function bo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Me(e,n,r){return bo()?Me=Reflect.construct:Me=function(a,s,l){var i=[null];i.push.apply(i,s);var c=Function.bind.apply(a,i),d=new c;return l&&Pe(d,l.prototype),d},Me.apply(null,arguments)}function _o(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function rt(e){var n=typeof Map=="function"?new Map:void 0;return rt=function(o){if(o===null||!_o(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(o))return n.get(o);n.set(o,a)}function a(){return Me(o,arguments,nt(this).constructor)}return a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Pe(a,o)},rt(e)}function wo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eo(e){var n=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return n},set:function(o){n.__proto__=o}})}var le=function(e){go(n,e);function n(r){var o;return o=e.call.apply(e,[this].concat(r))||this,Eo(wo(o)),o}return n}(rt(Array));function ot(e){e===void 0&&(e=[]);var n=[];return e.forEach(function(r){Array.isArray(r)?n.push.apply(n,ot(r)):n.push(r)}),n}function xo(e){for(var n=[],r=0;r<e.length;r+=1)n.indexOf(e[r])===-1&&n.push(e[r]);return n}function vo(e){return e.toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()})}function ko(e,n){if(typeof e!="string")return[e];for(var r=[],o=n.querySelectorAll(e),a=0;a<o.length;a+=1)r.push(o[a]);return r}function I(e,n){var r=sn(),o=tt(),a=[];if(!n&&e instanceof le)return e;if(!e)return new le(a);if(typeof e=="string"){var s=e.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";s.indexOf("<li")===0&&(l="ul"),s.indexOf("<tr")===0&&(l="tbody"),(s.indexOf("<td")===0||s.indexOf("<th")===0)&&(l="tr"),s.indexOf("<tbody")===0&&(l="table"),s.indexOf("<option")===0&&(l="select");var i=o.createElement(l);i.innerHTML=s;for(var c=0;c<i.childNodes.length;c+=1)a.push(i.childNodes[c])}else a=ko(e.trim(),n||o)}else if(e.nodeType||e===r||e===o)a.push(e);else if(Array.isArray(e)){if(e instanceof le)return e;a=e}return new le(xo(a))}I.fn=le.prototype;function ln(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=ot(n.map(function(a){return a.split(" ")}));return this.forEach(function(a){var s;(s=a.classList).add.apply(s,o)}),this}function cn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=ot(n.map(function(a){return a.split(" ")}));return this.forEach(function(a){var s;(s=a.classList).remove.apply(s,o)}),this}function dn(e,n){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(var r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(e,n);else for(var o in e)this[r][o]=e[o],this[r].setAttribute(o,e[o]);return this}function un(){var e=this[0];if(e){var n={};if(e.dataset)for(var r in e.dataset)n[r]=e.dataset[r];else for(var o=0;o<e.attributes.length;o+=1){var a=e.attributes[o];a.name.indexOf("data-")>=0&&(n[vo(a.name.split("data-")[1])]=a.value)}for(var s in n)n[s]==="false"?n[s]=!1:n[s]==="true"?n[s]=!0:parseFloat(n[s])===n[s]*1&&(n[s]*=1);return n}}function fn(e){if(typeof e>"u"){var n=this[0];if(!n)return;if(n.multiple&&n.nodeName.toLowerCase()==="select"){for(var r=[],o=0;o<n.selectedOptions.length;o+=1)r.push(n.selectedOptions[o].value);return r}return n.value}for(var a=0;a<this.length;a+=1){var s=this[a];if(Array.isArray(e)&&s.multiple&&s.nodeName.toLowerCase()==="select")for(var l=0;l<s.options.length;l+=1)s.options[l].selected=e.indexOf(s.options[l].value)>=0;else s.value=e}return this}function pn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],a=n[1],s=n[2],l=n[3];typeof n[1]=="function"&&(o=n[0],s=n[1],l=n[2],a=void 0),l||(l=!1);function i(u){var _=u.target;if(_){var S=u.target.dom7EventData||[];if(S.indexOf(u)<0&&S.unshift(u),I(_).is(a))s.apply(_,S);else for(var N=I(_).parents(),b=0;b<N.length;b+=1)I(N[b]).is(a)&&s.apply(N[b],S)}}function c(u){var _=u&&u.target?u.target.dom7EventData||[]:[];_.indexOf(u)<0&&_.unshift(u),s.apply(this,_)}for(var d=o.split(" "),h,p=0;p<this.length;p+=1){var m=this[p];if(a)for(h=0;h<d.length;h+=1){var f=d[h];m.dom7LiveListeners||(m.dom7LiveListeners={}),m.dom7LiveListeners[f]||(m.dom7LiveListeners[f]=[]),m.dom7LiveListeners[f].push({listener:s,proxyListener:i}),m.addEventListener(f,i,l)}else for(h=0;h<d.length;h+=1){var g=d[h];m.dom7Listeners||(m.dom7Listeners={}),m.dom7Listeners[g]||(m.dom7Listeners[g]=[]),m.dom7Listeners[g].push({listener:s,proxyListener:c}),m.addEventListener(g,c,l)}}return this}function mn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],a=n[1],s=n[2],l=n[3];typeof n[1]=="function"&&(o=n[0],s=n[1],l=n[2],a=void 0),l||(l=!1);for(var i=o.split(" "),c=0;c<i.length;c+=1)for(var d=i[c],h=0;h<this.length;h+=1){var p=this[h],m=void 0;if(!a&&p.dom7Listeners?m=p.dom7Listeners[d]:a&&p.dom7LiveListeners&&(m=p.dom7LiveListeners[d]),m&&m.length)for(var g=m.length-1;g>=0;g-=1){var f=m[g];s&&f.listener===s||s&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===s?(p.removeEventListener(d,f.proxyListener,l),m.splice(g,1)):s||(p.removeEventListener(d,f.proxyListener,l),m.splice(g,1))}}return this}function hn(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function yn(e){return e?(this.forEach(function(n,r){e.apply(n,[n,r])}),this):this}function gn(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(var n=0;n<this.length;n+=1)this[n].innerHTML=e;return this}function bn(e){var n=sn(),r=tt(),o=this[0],a,s;if(!o||typeof e>"u")return!1;if(typeof e=="string"){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(a=I(e),s=0;s<a.length;s+=1)if(a[s]===o)return!0;return!1}if(e===r)return o===r;if(e===n)return o===n;if(e.nodeType||e instanceof le){for(a=e.nodeType?[e]:e,s=0;s<a.length;s+=1)if(a[s]===o)return!0;return!1}return!1}function _n(){for(var e,n=tt(),r=0;r<arguments.length;r+=1){e=r<0||arguments.length<=r?void 0:arguments[r];for(var o=0;o<this.length;o+=1)if(typeof e=="string"){var a=n.createElement("div");for(a.innerHTML=e;a.firstChild;)this[o].appendChild(a.firstChild)}else if(e instanceof le)for(var s=0;s<e.length;s+=1)this[o].appendChild(e[s]);else this[o].appendChild(e)}return this}function wn(e){for(var n=[],r=0;r<this.length;r+=1)for(var o=this[r].parentNode;o;)e?I(o).is(e)&&n.push(o):n.push(o),o=o.parentNode;return I(n)}function En(e){for(var n=[],r=0;r<this.length;r+=1)for(var o=this[r].querySelectorAll(e),a=0;a<o.length;a+=1)n.push(o[a]);return I(n)}function xn(e){for(var n=[],r=0;r<this.length;r+=1)for(var o=this[r].children,a=0;a<o.length;a+=1)(!e||I(o[a]).is(e))&&n.push(o[a]);return I(n)}var So="resize scroll".split(" ");function vn(e){function n(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(typeof o[0]>"u"){for(var s=0;s<this.length;s+=1)So.indexOf(e)<0&&(e in this[s]?this[s][e]():I(this[s]).trigger(e));return this}return this.on.apply(this,[e].concat(o))}return n}var kn=vn("click"),Sn=vn("focus");hn&&(I.fn.hide=hn),_n&&(I.fn.append=_n),kn&&(I.fn.click=kn),pn&&(I.fn.on=pn),mn&&(I.fn.off=mn),Sn&&(I.fn.focus=Sn),dn&&(I.fn.attr=dn),fn&&(I.fn.val=fn),gn&&(I.fn.html=gn),un&&(I.fn.dataset=un),ln&&(I.fn.addClass=ln),cn&&(I.fn.removeClass=cn),xn&&(I.fn.children=xn),yn&&(I.fn.each=yn),En&&(I.fn.find=En),bn&&(I.fn.is=bn),wn&&(I.fn.parents=wn);const No=globalThis.Node,Vo=globalThis.Comment,Co=globalThis.Element,$o=globalThis.Text,To=globalThis.Range,Do=globalThis.Selection,Ro=globalThis.StaticRange;let Oo=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,r)=>(r&=63,r<36?n+=r.toString(36):r<62?n+=(r-26).toString(36).toUpperCase():r>62?n+="-":n+="_",n),"");function Bo(e="r"){return`${e}-${Oo()}`}let Nn=class{constructor(){U(this,"audio");U(this,"src");this.audio=null,this.src=null}removeAudioElement(){this.audio&&(document.body.removeChild(this.audio),this.audio=null,this.src=null)}play(n){this.stop(),this.audio=document.createElement("audio"),this.audio.hidden=!0,this.audio.volume=.5,this.audio.src=n,this.src=n,document.body.appendChild(this.audio),this.audio.play()}stop(n){n&&n!==this.src||this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.removeAudioElement())}};const ie=new Nn;function at(e){const n=Math.floor(e/60),r=e%60,o=String(n).padStart(2,"0"),a=String(r).padStart(2,"0");return`${o}:${a}`}class Vn{constructor(n,r){U(this,"id");U(this,"accept");U(this,"dom");U(this,"isdestroy",!1);U(this,"resolve");U(this,"reject");this.id=`--editor-input-file-${n}`,this.accept=r,this.dom=null,this.resolve=null,this.reject=null}createInputElement(){const n=document.createElement("input");return n.type="file",n.accept=this.accept,n.hidden=!0,n}change(n){var r,o;if(this.dom&&this.dom.files&&this.dom.files.length>0){const a=this.dom.files.item(0);if(a){(r=this.resolve)==null||r.call(this,a),this.dom.value="";return}this.dom.value=""}return(o=this.reject)==null?void 0:o.call(this,n)}cancel(n){var r;return this.dom&&(this.dom.value=""),(r=this.reject)==null?void 0:r.call(this,n)}open(){if(this.isdestroy)throw Error("对象已经销毁");this.dom||(this.dom=this.createInputElement(),this.dom.addEventListener("change",this.change.bind(this)),this.dom.addEventListener("cancel",this.cancel.bind(this)),document.body.appendChild(this.dom)),this.dom.click();const n=this;return new Promise((r,o)=>{n.resolve=r,n.reject=o})}destroy(){this.isdestroy||(this.dom&&document.body.removeChild(this.dom),this.dom=null,this.isdestroy=!0)}}class Cn{constructor(n){U(this,"cancelled",!1);U(this,"timeoutId",null);this.timeoutMilliseconds=n}get token(){return{isCancellationRequested:()=>this.cancelled}}cancel(){this.cancelled=!0,this.clearTimeout()}clearTimeout(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}startTimeout(){this.timeoutId=setTimeout(()=>{this.cancel()},this.timeoutMilliseconds)}}function Io(e){const{selection:n}=e;if(n){const[r,o]=y.SlateRange.edges(n),a=y.SlateEditor.range(e,r,o),s=y.SlateEditor.string(e,a),l=s.trimEnd();if(l!==s){const i=s.length-l.length,c={...o,offset:o.offset-i},d={...n,anchor:r,focus:c};y.SlateTransforms.select(e,d)}}}function $n(e,n){y.SlateEditor.withoutNormalizing(e,()=>{const r=y.SlateEditor.start(e,n),o=y.SlateEditor.end(e,n);y.SlateTransforms.insertText(e," ",{at:r}),y.SlateTransforms.insertText(e," ",{at:{path:o.path,offset:o.offset+1}}),y.SlateTransforms.select(e,{anchor:{path:r.path,offset:r.offset+1},focus:{path:o.path,offset:o.offset+1}})})}function ge(e,n){y.SlateEditor.withoutNormalizing(e,()=>{const r=y.SlateEditor.before(e,n),o=y.SlateEditor.after(e,n);if(!r||!o)return;const a={anchor:{path:r.path,offset:r.offset-1},focus:{path:r.path,offset:r.offset}},s={anchor:{path:o.path,offset:o.offset},focus:{path:o.path,offset:o.offset+1}};y.SlateEditor.string(e,a)===" "&&y.SlateTransforms.delete(e,{at:a}),y.SlateEditor.string(e,s)===" "&&y.SlateTransforms.delete(e,{at:s})})}const Po={type:"ssml-audio",renderElem:(e,n,r)=>n?Mo(e,n,r):Lo(e,r)};function Mo(e,n,r){const{remark:o,src:a}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-audio)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-audio)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-audio)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(s=>{s.preventDefault(),ie.stop(a);const l=y.DomEditor.findPath(r,e);ge(r,l),y.SlateTransforms.unwrapNodes(r,{at:l})})}}),x("span.iconfont.icon-play",{on:{click:H(s=>{s.preventDefault(),ie.play(a)})}}),x("span.data-content",{attrs:{"data-content":o}})])])}function Lo(e,n){const{remark:r,src:o}=e;return x("span.ssml-wrapper.no-line-height",[x("span.remark.left",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-audio)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault(),ie.stop(o);const s=y.DomEditor.findPath(n,e);y.SlateTransforms.delete(n,{at:s})})}}),x("span.iconfont.icon-play",{on:{click:H(a=>{a.preventDefault(),ie.play(o)})}}),x("span.data-content",{attrs:{"data-content":r}})])])}const Ao={editorPlugin:Xr,renderElems:[Po],elemsToHtml:[{type:"ssml-audio",elemToHtml:(e,n)=>{const{remark:r,src:o}=e;return`<span
          data-w-e-type="ssml-audio"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-src="${o}"
          data-ow-remark="${r}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-audio"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-src")||"",o=e.getAttribute("data-ow-remark")||"";return{type:"ssml-audio",src:r,remark:o,children:n}}}]},Fo={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-break"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-break"?!0:r(a),o},renderElems:[{type:"ssml-break",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",{props:{contentEditable:!1}},[x("span.remark",{style:{backgroundColor:"var(--ssml-break)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);y.SlateTransforms.delete(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})]),x("span.data-content",{attrs:{"data-content":"|"},style:{color:"var(--ssml-break)"}})])}}],elemsToHtml:[{type:"ssml-break",elemToHtml:e=>{const{remark:n,time:r,strength:o}=e;return`<span
          data-w-e-type="ssml-break"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-remark="${n}"
          data-ow-time="${r??""}"
          data-ow-strength="${o??"medium"}"
        ></span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-break"]',parseElemHtml:e=>{const n=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-time")||"",o=e.getAttribute("data-ow-strength")||"";return{type:"ssml-break",remark:n,time:r,strength:o,children:[{text:""}]}}}]},Ho={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-emphasis"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-emphasis"?!1:r(a),o},renderElems:[{type:"ssml-emphasis",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-emphasis)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-emphasis)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-emphasis)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-emphasis",elemToHtml:(e,n)=>{const{remark:r,level:o}=e;return`<span
          data-w-e-type="ssml-emphasis"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-level="${o??"none"}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-emphasis"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-level")||"";return{type:"ssml-emphasis",remark:r,level:o,children:n}}}]},jo={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-mstts:express-as"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-mstts:express-as"?!1:r(a),o},renderElems:[{type:"ssml-mstts:express-as",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-mstts--express-as)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-mstts--express-as)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-mstts--express-as)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-mstts:express-as",elemToHtml:(e,n)=>{const{remark:r,style:o,role:a,styledegree:s}=e;return`<span
          data-w-e-type="ssml-mstts:express-as"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-style="${o}"
          data-ow-styledegree="${s??""}"
          data-ow-role="${a??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-mstts:express-as"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-style")||"",a=e.getAttribute("data-ow-styledegree")||"",s=e.getAttribute("data-ow-role")||"";return{type:"ssml-mstts:express-as",style:o,remark:r,styledegree:a,role:s,children:n}}}]},Uo={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-p"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-p"?!1:r(a),o},renderElems:[{type:"ssml-p",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-p)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-p)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-p)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-p",elemToHtml:(e,n)=>{const{remark:r}=e;return`<span
          data-w-e-type="ssml-p"
          data-w-e-is-inline
          data-ow-remark="${r}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-p"]',parseElemHtml:(e,n)=>({type:"ssml-p",remark:e.getAttribute("data-ow-remark")||"",children:n})}]},zo={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-phoneme"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-phoneme"?!1:r(a),o},renderElems:[{type:"ssml-phoneme",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-phoneme)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-phoneme)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-phoneme)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);ge(r,s),y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-phoneme",elemToHtml:(e,n)=>{const{remark:r,alphabet:o,ph:a}=e;return`<span
          data-w-e-type="ssml-phoneme"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-alphabet="${o??""}"
          data-ow-ph="${a}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-phoneme"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-alphabet")||"",a=e.getAttribute("data-ow-ph")||"";return{type:"ssml-phoneme",remark:r,alphabet:o,ph:a,children:n}}}]},Wo={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-prosody"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-prosody"?!1:r(a),o},renderElems:[{type:"ssml-prosody",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-prosody)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-prosody)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-prosody)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);ge(r,s),y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-prosody",elemToHtml:(e,n)=>{const{remark:r,contour:o,pitch:a,range:s,rate:l,volume:i}=e;return`<span
          data-w-e-type="ssml-prosody"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-contour="${o??""}"
          data-ow-pitch="${a??""}"
          data-ow-range="${s??""}"
          data-ow-rate="${l??""}"
          data-ow-volume="${i??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-prosody"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-contour")||"",a=e.getAttribute("data-ow-pitch ")||"",s=e.getAttribute("data-ow-range")||"",l=e.getAttribute("data-ow-rate")||void 0,i=e.getAttribute("data-ow-volume")||"";return{type:"ssml-prosody",remark:r,contour:o,pitch:a,range:s,rate:l,volume:i,children:n}}}]},Go={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-s"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-s"?!1:r(a),o},renderElems:[{type:"ssml-s",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-s)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-s)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-s)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-s",elemToHtml:(e,n)=>{const{remark:r}=e;return`<span
          data-w-e-type="ssml-s"
          data-w-e-is-inline
          data-ow-remark="${r}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-s"]',parseElemHtml:(e,n)=>({type:"ssml-s",remark:e.getAttribute("data-ow-remark")||"",children:n})}]},qo={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-say-as"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-say-as"?!1:r(a),o},renderElems:[{type:"ssml-say-as",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-say-as)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-say-as)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-say-as)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);ge(r,s),y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-say-as",elemToHtml:(e,n)=>{const{remark:r,interpretAs:o,detail:a,format:s}=e;return`<span
          data-w-e-type="ssml-say-as"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-interpretAs="${o}"
          data-ow-detail="${a??""}"
          data-ow-format="${s??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-say-as"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-interpretAs")||"",a=e.getAttribute("data-ow-format")||"",s=e.getAttribute("data-ow-detail")||"";return{type:"ssml-say-as",remark:r,interpretAs:o,detail:s,format:a,children:n}}}]},Yo={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-sub"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-sub"?!1:r(a),o},renderElems:[{type:"ssml-sub",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-sub)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-sub)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-sub)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);ge(r,s),y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-sub",elemToHtml:(e,n)=>{const{remark:r,alias:o}=e;return`<span
          data-w-e-type="ssml-sub"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-alias="${o}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-sub"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-alias")||"";return{type:"ssml-sub",remark:r,alias:o,children:n}}}]},Ko={editorPlugin:e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-voice"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-voice"?!1:r(a),o},renderElems:[{type:"ssml-voice",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-voice)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-voice)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-voice)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"ssml-voice",elemToHtml:(e,n)=>{const{remark:r,name:o,effect:a}=e;return`<span
          data-w-e-type="ssml-voice"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-name="${o}"
          data-ow-effect="${a??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-voice"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-name")||"",a=e.getAttribute("data-ow-effect")||"";return{type:"ssml-voice",remark:r,name:o,effect:a,children:n}}}]},Xo=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=a=>y.DomEditor.getNodeType(a)==="custom-management"?!0:n(a),o.isVoid=a=>y.DomEditor.getNodeType(a)==="custom-management"?!1:r(a),o},M={ERROR:"wangeditor-error",SSML_ELEMENT_CLICK:"ssml-element-click"},W={ERROR:"emitter-error",VIEW_CLICK:"emitter-view-click",VIEW_KEYDOWN:"emitter-view-keydown",EDITOR_CREATED:"emitter-editor-created"},Jo={editorPlugin:Xo,renderElems:[{type:"custom-management",renderElem:(e,n,r)=>{const{remark:o}=e;return x("span.ssml-wrapper",[x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{{"},style:{color:"var(--custom-management)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}}"},style:{color:"var(--custom-management)"}}),x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--custom-management)"},on:{mousedown:a=>a.preventDefault(),click:H(a=>{a.preventDefault(),r.select(y.DomEditor.findPath(r,e)),r.emit(M.SSML_ELEMENT_CLICK,r,e)})}},[x("span.iconfont.icon-roundclosefill",{on:{click:H(a=>{a.preventDefault();const s=y.DomEditor.findPath(r,e);ge(r,s),y.SlateTransforms.unwrapNodes(r,{at:s})})}}),x("span.data-content",{attrs:{"data-content":o}})])])}}],elemsToHtml:[{type:"custom-management",elemToHtml:(e,n)=>{const{remark:r,style:o,role:a,name:s,pitch:l,rate:i,custom:c}=e;return`<span
          data-w-e-type="custom-management"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-style="${o}"
          data-ow-name="${s}"
          data-ow-role="${a}"
          data-ow-pitch="${l}"
          data-ow-rate="${i}"
          data-ow-custom="${JSON.stringify(c)}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="custom-management"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-name")||"",a=e.getAttribute("data-ow-role")||"",s=e.getAttribute("data-ow-style")||"",l=e.getAttribute("data-ow-pitch")||"",i=e.getAttribute("data-ow-rate")||"",c=e.getAttribute("data-ow-custom")||"{}";return{type:"custom-management",remark:r,name:o,role:a,style:s,pitch:l,rate:i,custom:JSON.parse(c),children:n}}}]},Qo=e=>{const{deleteBackward:n,deleteForward:r,insertBreak:o,apply:a,normalizeNode:s,insertText:l,insertData:i,setFragmentData:c,insertNode:d}=e,h=e;h.deleteBackward=m=>{n(m)},h.deleteForward=m=>{r(m)},h.insertBreak=()=>{o()},h.normalizeNode=m=>{s(m)},h.apply=m=>{a(m)},h.insertData=m=>(m.types.includes("application/x-slate-fragment")||m.setData("text/html",m.getData("text/plain").trim()),i(m)),h.setFragmentData=m=>{c(m);const g=m.getData("text/plain").replaceAll(/[\s]/gi,"");m.setData("text/plain",g)},h.insertText=m=>{l(m)};const p=["ssml-prosody","ssml-sub","custom-management","ssml-phoneme","ssml-say-as"];return h.insertNode=m=>{const g=y.DomEditor.getNodeType(m);return p.includes(g)||g==="ssml-audio"&&y.SlateNode.string(m)?(e.selection&&$n(e,e.selection),y.SlateTransforms.insertNodes(e,m)):d(m)},h},Pd="",Zo={install(){y.Boot.registerModule(Ao),y.Boot.registerModule(Fo),y.Boot.registerModule(Ho),y.Boot.registerModule(jo),y.Boot.registerModule(Uo),y.Boot.registerModule(zo),y.Boot.registerModule(Wo),y.Boot.registerModule(Go),y.Boot.registerModule(qo),y.Boot.registerModule(Yo),y.Boot.registerModule(Ko),y.Boot.registerModule(Jo),y.Boot.registerPlugin(Qo)}},ce=Be("--editor-ssml",()=>{const e=t.shallowReactive({type:"ssml-speak",version:"1.0",xmlLang:"zh-CN",xmlns:"http://www.w3.org/2001/10/synthesis","xmlns:mstts":"http://www.w3.org/2001/mstts","xmlns:emo":"http://www.w3.org/2009/10/emotionml",remark:"",children:[]}),n=t.shallowReactive({name:"zh-CN-XiaomoNeural",type:"ssml-voice",remark:"Xiaomo-晓墨",effect:"",children:[]}),r=t.shallowReactive({type:"ssml-mstts:backgroundaudio",src:"",remark:"",children:[]}),o=t.shallowReactive({type:"ssml-mstts:express-as",style:"",role:"",remark:"",children:[]}),a=t.shallowReactive({type:"ssml-prosody",remark:"",children:[]});return{rootSpeak:e,rootVoice:n,rootBackgroundaudio:r,rootExpressAs:o,rootProsody:a}});function ea(){return{label:"",value:""}}function Tn(){return{id:"",category:"",avatar:"",isFree:!1,isStar:!1,isSupper24K:!1,roles:[],styles:[],name:"",displayName:""}}function Le(){return{word:"",topFlag:"",category:"",gender:"",tag:""}}const st=Be("--editor-try-play",()=>{const e=ce(),n=t.ref(Tn());return{speaker:t.computed(()=>n.value),setSpeaker:a=>{n.value=a,e.rootVoice.name=a.name}}}),ta=()=>[{value:"0.5",label:"0.5x"},{value:"0.6",label:"0.6x"},{value:"0.7",label:"0.7x"},{value:"0.8",label:"0.8x"},{value:"0.9",label:"0.9x"},{value:"1.0",label:"1.0x"},{value:"1.1",label:"1.1x"},{value:"1.2",label:"1.2x"},{value:"1.4",label:"1.4x"},{value:"1.5",label:"1.5x"},{value:"1.75",label:"1.75x"},{value:"2.0",label:"2.0x"}],na=()=>[{value:"-10",label:"-10"},{value:"-9",label:"-9"},{value:"-8",label:"-8"},{value:"-7",label:"-7"},{value:"-6",label:"-6"},{value:"-5",label:"-5"},{value:"-4",label:"-4"},{value:"-3",label:"-3"},{value:"-2",label:"-2"},{value:"-1",label:"-1"},{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"}];function ra(e){return`${(.05*e*100).toFixed(0)}%`}function oa(e){return`${((e-1)*100).toFixed(0)}%`}function aa(){return{category:"",name:"",role:"",style:"",speed:"1.0",pitch:"0"}}const Dn=Be("--editor-management-menu",()=>({contentData:t.reactive(aa())})),sa={class:"bar-button-icon"},la={class:"fw-normal",style:{"font-size":"0.85rem"}},ia=t.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const r=e,o=()=>{if(!r.disabled){const{editor:a}=z();a&&n("click",a)}};return(a,s)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["bar-button px-2 py-1",{disabled:a.disabled}]),onClick:o,onMousedown:s[0]||(s[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",sa,[t.createElementVNode("span",{class:t.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${a.icon}`]])},null,2)]),t.createElementVNode("div",la,t.toDisplayString(a.text),1)],34))}}),Md="",G=(e,n)=>{const r=e.__vccOpts||e;for(const[o,a]of n)r[o]=a;return r},j=G(ia,[["__scopeId","data-v-2da9a7ca"]]),Ld="",Ad="",Fd="",lt=t.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(e,{expose:n,emit:r}){const o=t.ref(""),a=t.ref();function s(){a.value.focus()}function l(){r("submit",o.value),o.value=""}return n({focus:s}),(i,c)=>(t.openBlock(),t.createBlock(t.unref($.ElForm),{onSubmit:t.withModifiers(l,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{type:i.type,ref_key:"inputRef",ref:a,modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=d=>o.value=d)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}}),Hd="",jd="",ca=t.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(e){return(n,r)=>(t.openBlock(),t.createBlock(t.unref($.ElPopover),{hideAfter:n.hideAfter,width:n.width,visible:n.visible,trigger:n.trigger,"onUpdate:visible":r[0]||(r[0]=o=>n.$emit("update:visible",o))},{reference:t.withCtx(()=>[t.renderSlot(n.$slots,"reference")]),default:t.withCtx(()=>[t.renderSlot(n.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}}),Ud="",zd="",Wd="",Gd="",qd="",Yd="",Kd="",Xd="",Jd="";function Ae(e){return t.getCurrentScope()?(t.onScopeDispose(e),!0):!1}function Q(e){return typeof e=="function"?e():t.unref(e)}const Rn=typeof window<"u",da=e=>e!=null,Fe=()=>{};var ua=Object.defineProperty,fa=Object.defineProperties,pa=Object.getOwnPropertyDescriptors,On=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,ha=Object.prototype.propertyIsEnumerable,Bn=(e,n,r)=>n in e?ua(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,ya=(e,n)=>{for(var r in n||(n={}))ma.call(n,r)&&Bn(e,r,n[r]);if(On)for(var r of On(n))ha.call(n,r)&&Bn(e,r,n[r]);return e},ga=(e,n)=>fa(e,pa(n));function ba(e,n={}){if(!t.isRef(e))return t.toRefs(e);const r=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)r[o]=t.customRef(()=>({get(){return e.value[o]},set(a){var s;if((s=Q(n.replaceRef))!=null?s:!0)if(Array.isArray(e.value)){const i=[...e.value];i[o]=a,e.value=i}else{const i=ga(ya({},e.value),{[o]:a});Object.setPrototypeOf(i,Object.getPrototypeOf(e.value)),e.value=i}else e.value[o]=a}}));return r}function In(e,n=!0){t.getCurrentInstance()?t.onMounted(e):n?e():t.nextTick(e)}function Z(e){var n;const r=Q(e);return(n=r==null?void 0:r.$el)!=null?n:r}const oe=Rn?window:void 0;function be(...e){let n,r,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,o,a]=e,n=oe):[n,r,o,a]=e,!n)return Fe;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const s=[],l=()=>{s.forEach(h=>h()),s.length=0},i=(h,p,m,g)=>(h.addEventListener(p,m,g),()=>h.removeEventListener(p,m,g)),c=t.watch(()=>[Z(n),Q(a)],([h,p])=>{l(),h&&s.push(...r.flatMap(m=>o.map(g=>i(h,m,g,p))))},{immediate:!0,flush:"post"}),d=()=>{c(),l()};return Ae(d),d}function _a(){const e=t.ref(!1);return t.getCurrentInstance()&&t.onMounted(()=>{e.value=!0}),e}function it(e){const n=_a();return t.computed(()=>(n.value,!!e()))}function wa(e,n={}){const{window:r=oe}=n,o=it(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let a;const s=t.ref(!1),l=d=>{s.value=d.matches},i=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",l):a.removeListener(l))},c=t.watchEffect(()=>{o.value&&(i(),a=r.matchMedia(Q(e)),"addEventListener"in a?a.addEventListener("change",l):a.addListener(l),s.value=a.matches)});return Ae(()=>{c(),i(),a=void 0}),s}var Ea=Object.defineProperty,xa=Object.defineProperties,va=Object.getOwnPropertyDescriptors,Pn=Object.getOwnPropertySymbols,ka=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,Mn=(e,n,r)=>n in e?Ea(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,Na=(e,n)=>{for(var r in n||(n={}))ka.call(n,r)&&Mn(e,r,n[r]);if(Pn)for(var r of Pn(n))Sa.call(n,r)&&Mn(e,r,n[r]);return e},Va=(e,n)=>xa(e,va(n));function ct(e,n={}){var r,o;const{pointerTypes:a,preventDefault:s,stopPropagation:l,exact:i,onMove:c,onEnd:d,onStart:h,initialValue:p,axis:m="both",draggingElement:g=oe,handle:f=e}=n,u=t.ref((r=Q(p))!=null?r:{x:0,y:0}),_=t.ref(),S=v=>a?a.includes(v.pointerType):!0,N=v=>{Q(s)&&v.preventDefault(),Q(l)&&v.stopPropagation()},b=v=>{if(!S(v)||Q(i)&&v.target!==Q(e))return;const E=Q(e).getBoundingClientRect(),R={x:v.clientX-E.left,y:v.clientY-E.top};(h==null?void 0:h(R,v))!==!1&&(_.value=R,N(v))},w=v=>{if(!S(v)||!_.value)return;let{x:E,y:R}=u.value;(m==="x"||m==="both")&&(E=v.clientX-_.value.x),(m==="y"||m==="both")&&(R=v.clientY-_.value.y),u.value={x:E,y:R},c==null||c(u.value,v),N(v)},C=v=>{S(v)&&_.value&&(_.value=void 0,d==null||d(u.value,v),N(v))};if(Rn){const v={capture:(o=n.capture)!=null?o:!0};be(f,"pointerdown",b,v),be(g,"pointermove",w,v),be(g,"pointerup",C,v)}return Va(Na({},ba(u)),{position:u,isDragging:t.computed(()=>!!_.value),style:t.computed(()=>`left:${u.value.x}px;top:${u.value.y}px;`)})}var Ln=Object.getOwnPropertySymbols,Ca=Object.prototype.hasOwnProperty,$a=Object.prototype.propertyIsEnumerable,Ta=(e,n)=>{var r={};for(var o in e)Ca.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&Ln)for(var o of Ln(e))n.indexOf(o)<0&&$a.call(e,o)&&(r[o]=e[o]);return r};function An(e,n,r={}){const o=r,{window:a=oe}=o,s=Ta(o,["window"]);let l;const i=it(()=>a&&"ResizeObserver"in a),c=()=>{l&&(l.disconnect(),l=void 0)},d=t.computed(()=>Array.isArray(e)?e.map(m=>Z(m)):[Z(e)]),h=t.watch(d,m=>{if(c(),i.value&&a){l=new ResizeObserver(n);for(const g of m)g&&l.observe(g,s)}},{immediate:!0,flush:"post",deep:!0}),p=()=>{c(),h()};return Ae(p),{isSupported:i,stop:p}}function Ne(e,n={}){const{reset:r=!0,windowResize:o=!0,windowScroll:a=!0,immediate:s=!0}=n,l=t.ref(0),i=t.ref(0),c=t.ref(0),d=t.ref(0),h=t.ref(0),p=t.ref(0),m=t.ref(0),g=t.ref(0);function f(){const u=Z(e);if(!u){r&&(l.value=0,i.value=0,c.value=0,d.value=0,h.value=0,p.value=0,m.value=0,g.value=0);return}const _=u.getBoundingClientRect();l.value=_.height,i.value=_.bottom,c.value=_.left,d.value=_.right,h.value=_.top,p.value=_.width,m.value=_.x,g.value=_.y}return An(e,f),t.watch(()=>Z(e),u=>!u&&f()),a&&be("scroll",f,{capture:!0,passive:!0}),o&&be("resize",f,{passive:!0}),In(()=>{s&&f()}),{height:l,bottom:i,left:c,right:d,top:h,width:p,x:m,y:g,update:f}}function Da(e,n={width:0,height:0},r={}){const{window:o=oe,box:a="content-box"}=r,s=t.computed(()=>{var c,d;return(d=(c=Z(e))==null?void 0:c.namespaceURI)==null?void 0:d.includes("svg")}),l=t.ref(n.width),i=t.ref(n.height);return An(e,([c])=>{const d=a==="border-box"?c.borderBoxSize:a==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(o&&s.value){const h=Z(e);if(h){const p=o.getComputedStyle(h);l.value=Number.parseFloat(p.width),i.value=Number.parseFloat(p.height)}}else if(d){const h=Array.isArray(d)?d:[d];l.value=h.reduce((p,{inlineSize:m})=>p+m,0),i.value=h.reduce((p,{blockSize:m})=>p+m,0)}else l.value=c.contentRect.width,i.value=c.contentRect.height},r),t.watch(()=>Z(e),c=>{l.value=c?n.width:0,i.value=c?n.height:0}),{width:l,height:i}}function Ra(e,n,r={}){const{root:o,rootMargin:a="0px",threshold:s=.1,window:l=oe,immediate:i=!0}=r,c=it(()=>l&&"IntersectionObserver"in l),d=t.computed(()=>{const f=Q(e);return(Array.isArray(f)?f:[f]).map(Z).filter(da)});let h=Fe;const p=t.ref(i),m=c.value?t.watch(()=>[d.value,Z(o),p.value],([f,u])=>{if(h(),!p.value||!f.length)return;const _=new IntersectionObserver(n,{root:Z(u),rootMargin:a,threshold:s});f.forEach(S=>S&&_.observe(S)),h=()=>{_.disconnect(),h=Fe}},{immediate:i,flush:"post"}):Fe,g=()=>{h(),m(),p.value=!1};return Ae(g),{isSupported:c,isActive:p,pause(){h(),p.value=!1},resume(){p.value=!0},stop:g}}function dt(e,{window:n=oe,scrollTarget:r}={}){const o=t.ref(!1);return Ra(e,([{isIntersecting:a}])=>{o.value=a},{root:r,window:n}),o}function Oa(e={}){const{window:n=oe,initialWidth:r=Number.POSITIVE_INFINITY,initialHeight:o=Number.POSITIVE_INFINITY,listenOrientation:a=!0,includeScrollbar:s=!0}=e,l=t.ref(r),i=t.ref(o),c=()=>{n&&(s?(l.value=n.innerWidth,i.value=n.innerHeight):(l.value=n.document.documentElement.clientWidth,i.value=n.document.documentElement.clientHeight))};if(c(),In(c),be("resize",c,{passive:!0}),a){const d=wa("(orientation: portrait)");t.watch(d,()=>c())}return{width:l,height:i}}const Ba={class:"search-content w-100"},Ia={class:"ps-2 w-75"},Pa={class:"menu ps-2"},Ma={class:"flex flex-row pt-1"},La={class:"content-list overflow-x-hidden overflow-y-auto py-2",style:{height:"250px"}},Aa=["onClick"],Fa=t.createElementVNode("span",{class:"iconfont icon-play"},null,-1),Ha={class:"ps-2"},ut=t.defineComponent({__name:"bar-search",props:{menus:{},fetchScene:{type:Function},fetchStyle:{type:Function},fetchData:{type:Function},sceneList:{},styleList:{},dataList:{}},emits:["submit"],setup(e,{emit:n}){const r=e,o=t.ref(),a=t.ref(""),s=t.ref(""),l=t.ref(""),i=t.ref(""),c=t.ref(r.dataList||[]),d=t.ref(r.sceneList||[]),h=t.ref(r.styleList||[]),p=dt(o);t.watch(p,u=>{u&&setTimeout(()=>{var _;(_=o.value)==null||_.focus()},100)}),t.onMounted(async()=>{c.value.length||await m(),d.value.length||(d.value=await r.fetchScene()),h.value.length||(h.value=await r.fetchStyle())});async function m(){c.value=await r.fetchData({word:a.value,menu:i.value,scene:s.value,style:l.value})}function g(u){i.value=u,m()}function f(u){n("submit",u)}return(u,_)=>(t.openBlock(),t.createElementBlock("div",Ba,[t.createElementVNode("div",Ia,[t.createVNode(t.unref($.ElForm),{onSubmit:t.withModifiers(m,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{ref_key:"searchInputRef",ref:o,placeholder:"搜索",modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=S=>a.value=S),"suffix-icon":t.unref(ue.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),t.createElementVNode("div",Pa,[t.createVNode(t.unref($.ElMenu),{mode:"horizontal","default-active":u.menus.length>0?u.menus[0].value:"",onSelect:_[1]||(_[1]=S=>g(S))},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.menus,(S,N)=>(t.openBlock(),t.createBlock(t.unref($.ElMenuItem),{index:S.value,key:N},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(S.label),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),t.createElementVNode("div",Ma,[t.createVNode(t.unref($.ElSelect),{modelValue:s.value,"onUpdate:modelValue":_[2]||(_[2]=S=>s.value=S),onChange:m,class:"m-1",size:"default"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.value,S=>(t.openBlock(),t.createBlock(t.unref($.ElOption),{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t.createVNode(t.unref($.ElSelect),{modelValue:l.value,"onUpdate:modelValue":_[3]||(_[3]=S=>l.value=S),onChange:m,class:"m-1",size:"default"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(h.value,S=>(t.openBlock(),t.createBlock(t.unref($.ElOption),{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t.createElementVNode("ul",La,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(c.value,(S,N)=>(t.openBlock(),t.createElementBlock("li",{onClick:b=>f(t.toRaw(S)),class:"content-list-item clickable ps-2 py-2",key:N},[Fa,t.createElementVNode("span",Ha,t.toDisplayString(S.label),1)],8,Aa))),128))])]))}}),Qd="",ja={},Ua={class:"content"};function za(e,n){return t.openBlock(),t.createElementBlock("div",Ua,[t.renderSlot(e.$slots,"default",{},void 0,!0)])}const Fn=G(ja,[["render",za],["__scopeId","data-v-7beae5b9"]]),Wa={},Ga={class:"bar-wrapper-item"};function qa(e,n){return t.openBlock(),t.createElementBlock("div",Ga,[t.renderSlot(e.$slots,"default")])}const Ya=G(Wa,[["render",qa]]),Ka={class:"bar-wrapper-group"},Xa={class:"group-items"},Ja=t.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock("div",Ka,[t.createElementVNode("div",Xa,[t.renderSlot(n.$slots,"default",{},void 0,!0)]),t.createElementVNode("div",{class:t.normalizeClass(["divider",[n.divider]])},null,2)]))}}),Zd="",_e=G(Ja,[["__scopeId","data-v-be31f837"]]);function Qa(e,n){return`left:${e}px;top:${n}px`}function ft(e,n){const{width:r,height:o}=Da(e),{width:a,height:s}=Oa(),l=t.computed(()=>({x:a.value-r.value,y:s.value-o.value}));return{style:t.computed(()=>{const c=n.value.x,d=n.value.y,h=c<5?5:c>l.value.x?l.value.x-5:c,p=d<5?5:d>l.value.y?l.value.y-5:d;return Qa(h,p)})}}var pt={exports:{}},Hn={exports:{}},Za=void 0,jn=function(e){return e!==Za&&e!==null},es=jn,ts={object:!0,function:!0,undefined:!0},ns=function(e){return es(e)?hasOwnProperty.call(ts,typeof e):!1},rs=ns,os=function(e){if(!rs(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch{return!1}},as=os,ss=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch{return!1}return!as(e)},ls=ss,is=/^\s*class[\s{/}]/,cs=Function.prototype.toString,ds=function(e){return!(!ls(e)||is.test(cs.call(e)))},us=function(){var e=Object.assign,n;return typeof e!="function"?!1:(n={foo:"raz"},e(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")},mt,Un;function fs(){return Un||(Un=1,mt=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),mt}var ps=function(){},ms=ps(),ht=function(e){return e!==ms&&e!==null},yt,zn;function hs(){if(zn)return yt;zn=1;var e=ht,n=Object.keys;return yt=function(r){return n(e(r)?Object(r):r)},yt}var gt,Wn;function ys(){return Wn||(Wn=1,gt=fs()()?Object.keys:hs()),gt}var bt,Gn;function gs(){if(Gn)return bt;Gn=1;var e=ht;return bt=function(n){if(!e(n))throw new TypeError("Cannot use null or undefined");return n},bt}var _t,qn;function bs(){if(qn)return _t;qn=1;var e=ys(),n=gs(),r=Math.max;return _t=function(o,a){var s,l,i=r(arguments.length,2),c;for(o=Object(n(o)),c=function(d){try{o[d]=a[d]}catch(h){s||(s=h)}},l=1;l<i;++l)a=arguments[l],e(a).forEach(c);if(s!==void 0)throw s;return o},_t}var _s=us()?Object.assign:bs(),ws=ht,Es=Array.prototype.forEach,xs=Object.create,vs=function(e,n){var r;for(r in e)n[r]=e[r]},ks=function(e){var n=xs(null);return Es.call(arguments,function(r){ws(r)&&vs(Object(r),n)}),n},wt="razdwatrzy",Ss=function(){return typeof wt.contains!="function"?!1:wt.contains("dwa")===!0&&wt.contains("foo")===!1},Et,Yn;function Ns(){if(Yn)return Et;Yn=1;var e=String.prototype.indexOf;return Et=function(n){return e.call(this,n,arguments[1])>-1},Et}var Vs=Ss()?String.prototype.contains:Ns(),He=jn,Kn=ds,Xn=_s,Jn=ks,Ve=Vs,Cs=Hn.exports=function(e,n){var r,o,a,s,l;return arguments.length<2||typeof e!="string"?(s=n,n=e,e=null):s=arguments[2],He(e)?(r=Ve.call(e,"c"),o=Ve.call(e,"e"),a=Ve.call(e,"w")):(r=a=!0,o=!1),l={value:n,configurable:r,enumerable:o,writable:a},s?Xn(Jn(s),l):l};Cs.gs=function(e,n,r){var o,a,s,l;return typeof e!="string"?(s=r,r=n,n=e,e=null):s=arguments[3],He(n)?Kn(n)?He(r)?Kn(r)||(s=r,r=void 0):r=void 0:(s=n,n=r=void 0):n=void 0,He(e)?(o=Ve.call(e,"c"),a=Ve.call(e,"e")):(o=!0,a=!1),l={get:n,set:r,configurable:o,enumerable:a},s?Xn(Jn(s),l):l};var $s=Hn.exports,Ts=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e};(function(e,n){var r=$s,o=Ts,a=Function.prototype.apply,s=Function.prototype.call,l=Object.create,i=Object.defineProperty,c=Object.defineProperties,d=Object.prototype.hasOwnProperty,h={configurable:!0,enumerable:!1,writable:!0},p,m,g,f,u,_,S;p=function(N,b){var w;return o(b),d.call(this,"__ee__")?w=this.__ee__:(w=h.value=l(null),i(this,"__ee__",h),h.value=null),w[N]?typeof w[N]=="object"?w[N].push(b):w[N]=[w[N],b]:w[N]=b,this},m=function(N,b){var w,C;return o(b),C=this,p.call(this,N,w=function(){g.call(C,N,w),a.call(b,this,arguments)}),w.__eeOnceListener__=b,this},g=function(N,b){var w,C,v,E;if(o(b),!d.call(this,"__ee__"))return this;if(w=this.__ee__,!w[N])return this;if(C=w[N],typeof C=="object")for(E=0;v=C[E];++E)(v===b||v.__eeOnceListener__===b)&&(C.length===2?w[N]=C[E?0:1]:C.splice(E,1));else(C===b||C.__eeOnceListener__===b)&&delete w[N];return this},f=function(N){var b,w,C,v,E;if(d.call(this,"__ee__")&&(v=this.__ee__[N],!!v))if(typeof v=="object"){for(w=arguments.length,E=new Array(w-1),b=1;b<w;++b)E[b-1]=arguments[b];for(v=v.slice(),b=0;C=v[b];++b)a.call(C,this,E)}else switch(arguments.length){case 1:s.call(v,this);break;case 2:s.call(v,this,arguments[1]);break;case 3:s.call(v,this,arguments[1],arguments[2]);break;default:for(w=arguments.length,E=new Array(w-1),b=1;b<w;++b)E[b-1]=arguments[b];a.call(v,this,E)}},u={on:p,once:m,off:g,emit:f},_={on:r(p),once:r(m),off:r(g),emit:r(f)},S=c({},_),e.exports=n=function(N){return N==null?l(S):c(Object(N),_)},n.methods=u})(pt,pt.exports);var Ds=pt.exports;const K=Qe(Ds)(),Rs={class:"w-100 d-flex flex-row align-items-center"},we=t.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},initialValue:{}},emits:["update:visible","close"],setup(e,{expose:n,emit:r}){const o=e,a=t.ref(),s=t.ref(),l=t.ref(),{position:i}=ct(s,{initialValue:o.initialValue}),{style:c}=ft(a,i);function d(f){i.value=f}n({setPosition:d}),t.onMounted(()=>{K.on(W.VIEW_CLICK,h),document.addEventListener("keydown",g)}),t.onUnmounted(()=>{K.off(W.VIEW_CLICK,h),document.removeEventListener("keydown",g)});function h(f){p(f)&&m()}function p(f){const u=f.target;return!(!a.value||!l.value||l.value.contains(u)||a.value.contains(u))}function m(){r("update:visible",!1),r("close")}function g(f){f.code==="Escape"&&m()}return(f,u)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",{ref_key:"referenceRef",ref:l,onMousedown:u[0]||(u[0]=t.withModifiers(()=>{},["prevent"]))},[t.renderSlot(f.$slots,"reference")],544),(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.withDirectives(t.createElementVNode("div",{ref_key:"boxRef",ref:a,class:"demotestname card shadow brag-box user-select-none z-2",style:t.normalizeStyle([{position:"fixed"},t.unref(c)]),onMousedown:u[1]||(u[1]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",Rs,[t.createElementVNode("div",{ref_key:"dragRef",ref:s,class:"w-100",style:{height:"40px",cursor:"move"}},null,512),t.createElementVNode("span",{onClick:m,class:"btn iconfont icon-close fs-5"})]),t.renderSlot(f.$slots,"default")],36),[[t.vShow,f.visible]])]))],64))}}),Os={install(e){e.component("BarButton",j),e.component("BarInput",lt),e.component("BarPopover",ca),e.component("BarSearch",ut),e.component("BarWrapper",Fn),e.component("BarWrapperItem",Ya),e.component("BarWrapperGroup",_e),e.component("DragBox",we)}};class X{constructor(n){U(this,"editor");this.editor=n}getValue(){const{selection:n}=this.editor;return n==null?"":y.SlateEditor.string(this.editor,n)}isDisabled(){const{selection:n}=this.editor;return n==null?(this.editor.emit(M.ERROR,"未选中编辑器"),!0):!1}}class Bs extends X{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(M.ERROR,"请选中文本"),!0;const r=this.getValue();return r.length!=1?!0:/^[\u4E00-\u9FA5]+$/gi.test(r)?!1:(this.editor.emit(M.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-phoneme",alphabet:"sapi",ph:n.value,remark:n.label,children:[{text:r}]};this.editor.insertNode(o)}}const Qn=t.defineComponent({setup(){const{globalEditConfig:e}=z(),n=t.shallowRef(),r=t.ref([]),o=t.ref(!1);function a(){o.value||(o.value=!0)}function s(){o.value&&(o.value=!1)}async function l(i){var d;if(n.value??(n.value=new Bs(i)),(d=n.value)!=null&&d.isDisabled())return;const c=n.value.getValue();if(c?r.value=await e.pinyin.fetchData(c):r.value=[],r.value.length==0)return i.emit(M.ERROR,"选中的字符没有不是多音字");a()}return()=>t.createVNode($.ElPopover,{visible:o.value,"onUpdate:visible":i=>o.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(j,{text:"多音字",icon:"speaker",onClick:l},null),default:()=>t.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-auto",style:"max-height: 300px"},[r.value.map(({label:i,value:c})=>t.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),s()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class Is extends X{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请选择多个中文字符或者多个多个英文单词"),!0):y.SlateEditor.string(this.editor,n).length<2:!0}exec(){if(this.isDisabled())return;const n=this.getValue();if(n==null)return;const r={type:"ssml-prosody",rate:"medium",remark:"连读",children:[{text:n}]};this.editor.insertNode(r)}}const Zn=t.defineComponent({setup(){const e=t.shallowRef();function n(r){e.value??(e.value=new Is(r)),!e.value.isDisabled()&&e.value.exec()}return()=>t.createVNode(j,{text:"连读",icon:"continuous",onClick:n},null)}}),Ps=[{label:"重音",value:"z"},{label:"拖音",value:"t"},{label:"重音+拖音",value:"z+t"}],Ms={z:{pitch:"x-high",rate:void 0},t:{pitch:void 0,rate:"medium"},"z+t":{pitch:"x-high",rate:"medium"}};class Ls extends X{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return!n||n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请先选择文本"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const{pitch:o,rate:a}=Ms[n.value],s={type:"ssml-prosody",remark:n.label,pitch:o,rate:a,children:[{text:r}]};this.editor.insertNode(s)}}const er=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value||(n.value=!0)}function o(){n.value&&(n.value=!1)}function a(s){e.value??(e.value=new Ls(s)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(j,{text:"重音",icon:"read",onClick:a},null),default:()=>t.createVNode("div",{class:"d-flex flex-column",onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[Ps.map(({label:s,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:s,value:l}),o()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class As extends X{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(M.ERROR,"请选择纯数字"),!0;const r=y.SlateEditor.string(this.editor,n);return r.length<=0?!0:Number.isNaN(Number(r))?(this.editor.emit(M.ERROR,"请选择纯数字"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-say-as",interpretAs:n.value,remark:n.label,children:[{text:r}]};this.editor.insertNode(o)}}const Fs=[{value:"cardinal",label:"读数值"},{value:"characters",label:"读数字"},{value:"telephone",label:"读手机号"}],tr=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value=!n.value}function o(a){e.value??(e.value=new As(a)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(j,{text:"数字符号",icon:"digital",onClick:o},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[Fs.map(({label:a,value:s})=>t.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:a,value:s}),r()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Hs extends X{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0):this.getValue().length<=0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-sub",remark:n.value,alias:n.value,children:[{text:r}]};this.editor.insertNode(o)}}const nr=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(),r=t.ref(!1);function o(){r.value||(r.value=!0)}function a(){r.value&&(r.value=!1)}async function s(i){e.value??(e.value=new Hs(i)),!e.value.isDisabled()&&(o(),n.value.focus())}function l(i){var c;a(),i&&((c=e.value)==null||c.exec({value:i,label:i}))}return()=>t.createVNode($.ElPopover,{visible:r.value,"onUpdate:visible":i=>r.value=i,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>t.createVNode(j,{text:"别名",icon:"alias",onClick:s},null),default:()=>t.createVNode(lt,{ref:n,onSubmit:l},null)})}});class js extends X{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(M.ERROR,"请选择英文单词"),!0;const r=y.SlateEditor.string(this.editor,n);return r.length<=0?!0:/^[A-Za-z]+$/gi.test(r)?!1:(this.editor.emit(M.ERROR,"请选择英文单词"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-phoneme",alphabet:"ipa",ph:n.value,remark:n.label,children:[{text:r}]};this.editor.insertNode(o)}}const rr=t.defineComponent({setup(){const{globalEditConfig:e}=z(),n=t.shallowRef(),r=t.ref([]),o=t.ref(!1);function a(){o.value||(o.value=!0)}function s(){o.value&&(o.value=!1)}async function l(i){if(n.value??(n.value=new js(i)),Io(i),n.value.isDisabled())return;const c=n.value.getValue();if(c){if(r.value=await e.english.fetchData(c),r.value.length<=0)return i.emit(M.ERROR,"找不到单词的音标");a()}}return()=>t.createVNode($.ElPopover,{visible:o.value,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(j,{text:"音标",icon:"english",onClick:l},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[r.value.map(({label:i,value:c})=>t.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),s()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class Us extends X{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请框选要变速的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-prosody",remark:n.label,rate:n.value,children:[{text:r}]};this.editor.insertNode(o)}}function O(e){return`${((e-1)*100).toFixed(0)}%`}const zs=[{value:O(.5),label:"0.5x"},{value:O(.55),label:"0.55x"},{value:O(.6),label:"0.6x"},{value:O(.65),label:"0.65x"},{value:O(.7),label:"0.7x"},{value:O(.75),label:"0.75x"},{value:O(.8),label:"0.8x"},{value:O(.85),label:"0.85x"},{value:O(.9),label:"0.9x"},{value:O(.95),label:"0.95x"},{value:O(1),label:"1x"},{value:O(1.05),label:"1.05x"},{value:O(1.1),label:"1.1x"},{value:O(1.15),label:"1.15x"},{value:O(1.2),label:"1.2x"},{value:O(1.25),label:"1.25x"},{value:O(1.3),label:"1.3x"},{value:O(1.35),label:"1.35x"},{value:O(1.4),label:"1.4x"},{value:O(1.45),label:"1.45x"},{value:O(1.5),label:"1.5x"},{value:O(1.55),label:"1.55x"},{value:O(1.6),label:"1.6x"},{value:O(1.65),label:"1.65x"},{value:O(1.7),label:"1.7x"},{value:O(1.75),label:"1.75x"},{value:O(1.8),label:"1.8x"},{value:O(1.85),label:"1.85x"},{value:O(1.9),label:"1.9x"},{value:O(1.95),label:"1.95x"},{value:O(2),label:"2x"}],or=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value||(n.value=!0)}function o(){n.value&&(n.value=!1)}async function a(s){e.value??(e.value=new Us(s)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{style:{padding:"0px"},visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(j,{text:"局部变速",icon:"changespeed",onClick:a},null),default:()=>t.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[zs.map(({label:s,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{var i;(i=e.value)==null||i.exec({label:s,value:l}),o()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class Ws extends X{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(M.ERROR,"不能选中文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r={type:"ssml-break",strength:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(r)}}const Gs=[{value:"weak",label:"短"},{value:"medium",label:"中"},{value:"strong",label:"长"}],ar=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value||(n.value=!0)}function o(){n.value&&(n.value=!1)}function a(s){e.value??(e.value=new Ws(s)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(j,{text:"停顿调节",icon:"rhythm",onClick:a},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[Gs.map(({label:s,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:s,value:l}),o()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class qs extends X{constructor(n){super(n)}restoreSelection(){this.editor.restoreSelection()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(M.ERROR,"不能框选文字"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled()||this.getValue()==null)return;const o={type:"ssml-audio",src:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(o)}}const sr=t.defineComponent({__name:"special-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),{globalEditConfig:a}=z(),{special:s}=a,l=t.ref(!1),{x:i,y:c,height:d}=Ne(r),h=m=>{o.value??(o.value=new qs(m)),!o.value.isDisabled()&&(n.value.setPosition({x:i.value-200,y:c.value+d.value}),l.value=!0)};function p(m){var g;(g=o.value)==null||g.restoreSelection(),o.value&&!o.value.isDisabled()&&o.value.exec(m),l.value=!1}return(m,g)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":g[0]||(g[0]=f=>l.value=f)},{reference:t.withCtx(()=>[t.createVNode(t.unref(j),{ref_key:"menuRef",ref:r,text:"音效",icon:"special",onClick:h},null,512)]),default:t.withCtx(()=>[t.createVNode(t.unref(ut),{menus:t.unref(s).menus,fetchScene:t.unref(s).fetchScene,fetchStyle:t.unref(s).fetchStyle,fetchData:t.unref(s).fetchData,onSubmit:p},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}});class Ys extends X{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(M.ERROR,"不能选中文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r={type:"ssml-break",time:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(r)}}const Ks=[{value:"150ms",label:"150ms"},{value:"200ms",label:"200ms"},{value:"300ms",label:"300ms"},{value:"400ms",label:"400ms"},{value:"500ms",label:"500ms"},{value:"600ms",label:"600ms"}],lr=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1),r=t.ref();function o(){n.value||(n.value=!0)}function a(){n.value&&(n.value=!1)}function s(i){e.value??(e.value=new Ys(i)),!e.value.isDisabled()&&(o(),r.value.focus())}function l(i){var c;a(),i&&((c=e.value)==null||c.exec({value:i,label:i}))}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":i=>n.value=i,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>t.createVNode(j,{text:"插入静音",icon:"mute",onClick:s},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[Ks.map(({value:i,label:c})=>t.createVNode("div",{key:i,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>l(i),onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[c])),t.createVNode(lt,{type:"text",ref:r,onSubmit:l},null)])})}}),ir=t.defineComponent({__name:"bgm-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),{globalEditConfig:a}=z(),{bgm:s}=a,l=t.ref(!1),{x:i,y:c,height:d}=Ne(r),h=async m=>{const g={x:i.value-300,y:c.value+d.value};o.value=m,n.value.setPosition(g),l.value=!0};function p(m){const{rootBackgroundaudio:g}=ce();g.src=m.value,g.remark=m.label,l.value=!1}return(m,g)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":g[0]||(g[0]=f=>l.value=f)},{reference:t.withCtx(()=>[t.createVNode(t.unref(j),{ref_key:"menuRef",ref:r,text:"配乐",icon:"bgm",onClick:h},null,512)]),default:t.withCtx(()=>[t.createVNode(t.unref(ut),{menus:t.unref(s).menus,fetchScene:t.unref(s).fetchScene,fetchStyle:t.unref(s).fetchStyle,fetchData:t.unref(s).fetchData,onSubmit:p},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}}),cr=t.defineComponent({__name:"sensitive-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),a=t.ref(!1),{x:s,y:l,height:i}=Ne(r),c=d=>{o.value=d,n.value.setPosition({x:s.value-200,y:l.value+i.value}),a.value=!0};return(d,h)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:a.value,"onUpdate:visible":h[0]||(h[0]=p=>a.value=p)},{reference:t.withCtx(()=>[t.createVNode(t.unref(j),{ref_key:"menuRef",ref:r,text:"敏感词",icon:"sensitive",onClick:c},null,512)]),default:t.withCtx(()=>[t.createVNode(cr)]),_:1},8,["visible"]))}}),tu="",Xs={class:"select-list",style:{width:"120px"}},Js={class:"text-center d-flex flex-column justify-content-center fs-6",style:{height:"60px"}},Qs=["onClick"],Zs=t.defineComponent({__name:"select-list",props:{modelValue:{},dataList:{}},emits:["update:modelValue"],setup(e,{expose:n,emit:r}){const o=e,a=t.ref();function s(i){r("update:modelValue",i.value)}function l(){var i;if(a.value){for(let c=0;c<o.dataList.length;c++)if(o.dataList[c].value===o.modelValue){(i=a.value.children[c])==null||i.scrollIntoView({behavior:"smooth"});return}}}return n({scrollIntoViewTheItem:l}),(i,c)=>(t.openBlock(),t.createElementBlock("div",Xs,[t.createElementVNode("div",Js,[t.renderSlot(i.$slots,"default",{},void 0,!0)]),t.createElementVNode("ul",{ref_key:"listRef",ref:a,class:"text-center w-100 border-start border-top border-bottom border-secondary-subtle overflow-y-auto overflow-x-hidden scrollbar-none",style:{height:"180px"}},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.dataList,(d,h)=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(["clickable select-item py-1",{activate:d.value===i.modelValue}]),key:h,onClick:p=>s(d)},t.toDisplayString(d.label),11,Qs))),128))],512)]))}}),nu="",Ee=G(Zs,[["__scopeId","data-v-e0f0259e"]]),el={style:{width:"600px",height:"360px"},class:"position-relative px-2 pb-2"},tl={class:"position-relative"},nl={class:"position-absolute top-0 end-0"},rl=t.createElementVNode("li",null,[t.createElementVNode("span",{class:"text-nowrap"},"近期使用:")],-1),ol=t.createElementVNode("span",{class:"my-3"},"类型",-1),al=t.createElementVNode("span",{class:"my-3"},"配音师",-1),sl=t.createElementVNode("span",{class:"my-3"},"角色",-1),ll=t.createElementVNode("span",{class:"my-3"},"风格",-1),il=t.createElementVNode("span",{class:"my-3"},"语速",-1),cl=t.createElementVNode("span",{class:"my-3"},"语调",-1),dl={class:"position-absolute bottom-0 end-0 d-flex flex-row justify-content-end me-4 mb-3"},ul=t.defineComponent({__name:"management-content",emits:["submit"],setup(e,{emit:n}){const{globalEditConfig:r}=z(),{tryPlay:o}=r,a=t.ref(!1),s=t.ref(""),l=Dn(),{contentData:i}=Yt(l),c=t.shallowRef([]),d=t.ref([{label:"全部类型",value:""},...o.category]),h=t.ref([]),p=t.ref([]),m=t.ref([]),g=t.ref(ta()),f=t.ref(na());t.onMounted(async()=>{i.value.category=d.value[0].value,await u()}),t.watch(()=>i.value.category,async()=>{await u()});async function u(){const N=await o.fetchData({...Le(),...i});c.value=N,h.value=N.map(b=>({label:b.displayName,value:b.name})),N.length>0&&(p.value=N[0].roles,m.value=N[0].styles,i.value.name=N[0].name),p.value.length>0&&(i.value.role=p.value[0].value),m.value.length>0&&(i.value.style=m.value[0].value)}function _(N){const b=c.value.find(w=>w.name===N);b&&(p.value=b.roles,m.value=b.styles,p.value.length>0&&(i.value.role=p.value[0].value),m.value.length>0&&(i.value.style=m.value[0].value))}function S(){var E,R,L,V;const N=((E=h.value.find(k=>k.value===i.value.name))==null?void 0:E.label)||"",b=((R=p.value.find(k=>k.value===i.value.role))==null?void 0:R.label)||"",w=((L=m.value.find(k=>k.value===i.value.style))==null?void 0:L.label)||"",C=((V=g.value.find(k=>k.value===i.value.speed))==null?void 0:V.label)||"",v={category:i.value.category,name:i.value.name,label:`${N}|${b}|${w}|${C}`,value:i.value.name,role:i.value.role,style:i.value.style,speed:oa(Number(i.value.speed)),pitch:ra(Number(i.value.pitch))};n("submit",v)}return(N,b)=>(t.openBlock(),t.createElementBlock("div",el,[t.createVNode(t.unref($.ElForm),{onSubmit:t.withModifiers(u,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=w=>s.value=w),placeholder:"请输入名称快速查找配音师"},null,8,["modelValue"])]),_:1},8,["onSubmit"]),t.createElementVNode("div",tl,[t.createElementVNode("div",nl,[t.createVNode(t.unref($.ElButton),{size:"small",icon:t.unref(ue.More),onClick:b[1]||(b[1]=()=>a.value=!a.value)},null,8,["icon"])]),t.createElementVNode("ul",{class:t.normalizeClass(["d-flex flex-row row-gap-1 column-gap-2 overflow-x-hidden",{"flex-wrap":a.value}])},[rl,t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})])],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass({"d-flex flex-row":!a.value})},[t.createVNode(Ee,{modelValue:t.unref(i).category,"onUpdate:modelValue":b[2]||(b[2]=w=>t.unref(i).category=w),dataList:d.value},{default:t.withCtx(()=>[ol]),_:1},8,["modelValue","dataList"]),t.createVNode(Ee,{"onUpdate:modelValue":[_,b[3]||(b[3]=w=>t.unref(i).name=w)],modelValue:t.unref(i).name,dataList:h.value},{default:t.withCtx(()=>[al]),_:1},8,["modelValue","dataList"]),t.createVNode(Ee,{modelValue:t.unref(i).role,"onUpdate:modelValue":b[4]||(b[4]=w=>t.unref(i).role=w),dataList:p.value},{default:t.withCtx(()=>[sl]),_:1},8,["modelValue","dataList"]),t.createVNode(Ee,{modelValue:t.unref(i).style,"onUpdate:modelValue":b[5]||(b[5]=w=>t.unref(i).style=w),dataList:m.value},{default:t.withCtx(()=>[ll]),_:1},8,["modelValue","dataList"]),t.createVNode(Ee,{modelValue:t.unref(i).speed,"onUpdate:modelValue":b[6]||(b[6]=w=>t.unref(i).speed=w),dataList:g.value},{default:t.withCtx(()=>[il]),_:1},8,["modelValue","dataList"]),t.createVNode(Ee,{modelValue:t.unref(i).pitch,"onUpdate:modelValue":b[7]||(b[7]=w=>t.unref(i).pitch=w),dataList:f.value},{default:t.withCtx(()=>[cl]),_:1},8,["modelValue","dataList"])],2),[[t.vShow,!a.value]])]),t.createElementVNode("div",dl,[t.withDirectives(t.createVNode(t.unref($.ElButton),{onClick:S,type:"primary"},{default:t.withCtx(()=>[t.createTextVNode("确定")]),_:1},512),[[t.vShow,!a.value]]),t.withDirectives(t.createVNode(t.unref($.ElButton),{type:"primary"},{default:t.withCtx(()=>[t.createTextVNode("全部清空")]),_:1},512),[[t.vShow,a.value]])])]))}});class dr extends X{constructor(r){super(r);U(this,"contentData")}isDisabled(){if(super.isDisabled())return!0;const{selection:r}=this.editor;if(r==null)return!0;if(y.DomEditor.getSelectedNodeByType(this.editor,"custom-management"))return!1;if(y.SlateRange.isCollapsed(r))return this.editor.emit(M.ERROR,"请框选句子"),!0;const[o]=y.SlateEditor.node(this.editor,r),a=this.editor.getParentNode(o);return!a||!y.DomEditor.checkNodeType(a,"paragraph")?(this.editor.emit(M.ERROR,"多人配音需要在最外层使用"),!0):!1}exec(r){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const a=y.DomEditor.getSelectedNodeByType(this.editor,"custom-management");if(a)y.SlateTransforms.setNodes(this.editor,{custom:{contentData:this.contentData||{}},remark:r.label,name:r.value,role:r.role,style:r.style,rate:r.speed,pitch:r.pitch},{at:y.DomEditor.findPath(this.editor,a)});else{const s={type:"custom-management",custom:{contentData:this.contentData||{}},remark:r.label,name:r.value,role:r.role,style:r.style,rate:r.speed,pitch:r.pitch,children:[{text:o}]};this.editor.insertNode(s)}}}const ur=t.defineComponent({__name:"management-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.ref(!1),a=t.shallowRef(),s=Dn(),{contentData:l}=Yt(s),{x:i,y:c,height:d}=Ne(r);t.onMounted(()=>{K.on(W.EDITOR_CREATED,f=>{f.on(M.SSML_ELEMENT_CLICK,(u,_)=>{var S;if(_.type==="custom-management"){a.value??(a.value=new dr(u));const b=((S=_.custom)==null?void 0:S.contentData)||{};b&&(l.value.category=b.category,l.value.name=b.name,l.value.pitch=b.pitch,l.value.role=b.role,l.value.speed=b.speed,l.value.style=b.style),setTimeout(()=>{h()},200)}})})});function h(){var u;const f={x:i.value-200,y:c.value+d.value};(u=n.value)==null||u.setPosition(f),o.value=!0}function p(){o.value=!1}function m(f){a.value??(a.value=new dr(f)),!a.value.isDisabled()&&h()}function g(f){var u;a.value&&!a.value.isDisabled()&&(a.value.contentData={...l.value},(u=a.value)==null||u.exec(f)),p()}return(f,u)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:o.value,"onUpdate:visible":u[0]||(u[0]=_=>o.value=_)},{reference:t.withCtx(()=>[t.createVNode(t.unref(j),{ref_key:"menuRef",ref:r,text:"多人配音",icon:"management",onClick:m},null,512)]),default:t.withCtx(()=>[t.createVNode(ul,{onSubmit:g})]),_:1},8,["visible"]))}}),fl={class:"speaker-head"},pl=["src"],ml={class:"speaker-name"},hl=t.defineComponent({__name:"speaker-item",props:{label:{},value:{},avatar:{},activated:{type:Boolean}},emits:["click"],setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock("div",{class:"speaker-item",onClick:r[0]||(r[0]=o=>n.$emit("click",n.value||""))},[t.createElementVNode("div",fl,[t.createElementVNode("img",{src:n.avatar||t.unref(he)(),class:t.normalizeClass([{"border border-warning":n.activated},"rounded-circle"]),style:{height:"40px"}},null,10,pl)]),t.createElementVNode("div",ml,t.toDisplayString(n.label),1)]))}}),ru="",yl=G(hl,[["__scopeId","data-v-b043c1a6"]]);class gl{constructor(){U(this,"mediaRecorder",null)}get state(){var n;return(n=this.mediaRecorder)==null?void 0:n.state}async start(){if(navigator.mediaDevices.getUserMedia){const n=[];try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),o=new MediaRecorder(r);return new Promise((a,s)=>{o.ondataavailable=l=>{n.push(l.data)},o.onstop=()=>{const l=new Blob(n,{type:"audio/wav"});a(l)},o.onerror=l=>{s(l)},o.start()})}catch(r){throw console.error(r),new Error("授权失败！",{cause:r})}}throw Error("浏览器不支持 getUserMedia")}stop(){this.mediaRecorder&&this.mediaRecorder.stop()}}class bl{constructor(){U(this,"audio");U(this,"isPlaying",t.ref(!1));this.audio=new Audio,this.audio.addEventListener("play",()=>{this.isPlaying.value=!0}),this.audio.addEventListener("pause",()=>{this.isPlaying.value=!1})}load(n){this.audio.src=n,this.audio.load()}play(){this.audio.play()}pause(){this.audio.pause()}togglePlayPause(){this.isPlaying.value?this.pause():this.play()}get playState(){return t.computed(()=>this.isPlaying.value?"playing":"paused")}}const _l={class:"d-flex flex-row justify-content-between border rounded-pill border-secondary my-3 py-1 px-2"},wl={class:"text-secondary d-flex flex-row align-items-center",style:{"font-size":"0.5rem"}},El={key:0,class:"iconfont icon-pause"},xl={key:1,class:"iconfont icon-play"},vl=[t.createElementVNode("span",{class:"iconfont icon-delete"},null,-1)],kl={key:1,style:{"font-size":"0.5rem"}},Sl=t.createElementVNode("p",null,"选择需要转换的配音师",-1),Nl={class:"speakers-container border rounded d-flex flex-row flex-wrap row-gap-1 column-gap-2 overflow-y-auto overflow-x-hidden",style:{height:"150px"}},Vl=["disabled"],Cl=t.defineComponent({__name:"audio-upload",emits:["submit"],setup(e,{expose:n,emit:r}){const{globalEditConfig:o}=z(),{audioUpload:a,transfer:s,fetchSpeaker:l,timeoutMilliseconds:i}=o.conversion,c=t.ref(),d=t.ref(),h=t.ref(),p=t.ref(!0),m=t.ref([]),g=t.ref(),f=t.shallowRef(),u=t.shallowRef(),_=new bl,S=_.playState;let N;const b=new gl,w=new Vn("audio-conversion","audio/*"),C=t.computed(()=>b.state),v=dt(c),E=t.inject("reopen");t.watch(v,B=>{B||R()}),t.onMounted(async()=>{m.value=await l()}),t.watch(v,B=>{B||(p.value=!0,N==null||N.cancel())}),n({openInputFile:P});function R(){p.value=!0,L()}function L(){_.pause(),d.value=void 0,h.value=void 0,g.value=void 0,f.value=void 0,u.value=void 0,N==null||N.cancel()}function V(){b.stop()}async function k(){try{f.value=await b.start()}catch(B){K.emit(W.ERROR,`${B}`,B)}}function T(){if(S.value==="playing")_.pause();else if(f.value){const B=window.URL.createObjectURL(f.value);_.load(B),_.play()}else if(u.value){const B=window.URL.createObjectURL(u.value);_.load(B),_.play()}}async function P(){try{return u.value=await w.open(),p.value=!1,!0}catch{return!1}}async function ee(){try{if(N=new Cn(i),p.value&&f.value)N.startTimeout(),d.value=await a(f.value,N.token);else if(!p.value&&u.value)N.startTimeout(),d.value=await a(u.value,N.token);else throw new Error("请选则文件或实时录音")}catch(B){K.emit(W.ERROR,`${B}`,B)}}async function Nt(B){try{d.value?(g.value=B,h.value=await s({audioId:d.value.id,speakerId:B.id})):K.emit(W.ERROR,"请先上传音频文件")}catch(Ct){K.emit(W.ERROR,`${Ct}`,Ct)}}function Vt(){h.value&&g.value&&(r("submit",{label:g.value.displayName,value:h.value.src}),R())}function de(){N==null||N.cancel(),E==null||E()}return(B,Ct)=>{var _r,wr;return t.openBlock(),t.createElementBlock("div",{class:"audio-upload",ref_key:"boxRef",ref:c},[t.createElementVNode("div",_l,[t.createElementVNode("div",wl,[f.value||u.value?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:T,class:"btn btn-sm rounded-pill"},[t.unref(S)==="playing"?(t.openBlock(),t.createElementBlock("span",El)):(t.openBlock(),t.createElementBlock("span",xl))])):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(((_r=u.value)==null?void 0:_r.name)||((wr=f.value)==null?void 0:wr.name)),1)]),t.createElementVNode("div",null,[!d.value&&(f.value||u.value)?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:L,class:"btn btn-sm rounded-pill"},vl)):t.createCommentVNode("",!0),d.value?(t.openBlock(),t.createElementBlock("span",kl,"已上传")):t.createCommentVNode("",!0),p.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[C.value==="recording"?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:V,class:"btn btn-primary btn-sm rounded-pill"}," 结束录音 ")):(t.openBlock(),t.createElementBlock("button",{key:1,onClick:k,class:"btn btn-primary btn-sm rounded-pill"}," 开始录音 "))],64)):t.createCommentVNode("",!0),!p.value&&!u.value?(t.openBlock(),t.createElementBlock("button",{key:3,onClick:P,class:"btn btn-primary btn-sm rounded-pill"}," 选择文件 ")):t.createCommentVNode("",!0),d.value?(t.openBlock(),t.createElementBlock("button",{key:4,onClick:de,class:"btn btn-primary btn-sm rounded-pill"}," 重传音频 ")):t.createCommentVNode("",!0),!d.value&&(u.value||f.value)?(t.openBlock(),t.createElementBlock("button",{key:5,onClick:ee,class:"btn btn-primary btn-sm rounded-pill"}," 上传音频 ")):t.createCommentVNode("",!0)])]),t.createElementVNode("div",null,[Sl,t.createElementVNode("div",Nl,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.value,(je,Bc)=>{var Er;return t.openBlock(),t.createBlock(yl,{onClick:bu=>Nt(je),key:Bc,label:je.displayName,avatar:je.avatar,activated:je.name===((Er=g.value)==null?void 0:Er.name)},null,8,["onClick","label","avatar","activated"])}),128))])]),t.createElementVNode("button",{class:"btn btn-primary mt-1",onClick:Vt,disabled:!h.value}," 完成录音并上传完成后，可选择配音师转换 ",8,Vl)],512)}}}),$l={class:"fw-bold",style:{"font-size":"0.5rem"}},Tl=t.createElementVNode("p",{class:"text-start text-danger"},"请在安静的环境中进行录音，以需要转换的风格，读出以下文案",-1),Dl={class:"border border-secondary rounded p-2 w-100",style:{height:"100px"}},Rl={class:"mt-2"},Ol=t.createElementVNode("p",{class:"mt-2 text-secondary",style:{"font-size":"0.5rem"}}," 录音内容需要和滑选一致，音频限制60秒，滑选文案限制60个字 ",-1),Bl=t.defineComponent({__name:"conversion-content",props:{text:{}},emits:["submit"],setup(e){const n=t.ref(),r=t.ref(),o=t.ref(!0),a=t.ref(!1),s=dt(n);t.provide("reopen",()=>{o.value=!0,a.value=!1}),t.watch(s,c=>{c||(o.value=!0,a.value=!1)});function l(){o.value=!0,a.value=!0}async function i(){var c;await((c=r.value)==null?void 0:c.openInputFile())&&(o.value=!1,a.value=!0)}return(c,d)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:n,class:"px-2 py-1",style:{width:"410px"}},[t.withDirectives(t.createElementVNode("section",$l,[Tl,t.createElementVNode("div",Dl,t.toDisplayString(c.text),1)],512),[[t.vShow,o.value]]),t.withDirectives(t.createElementVNode("section",Rl,[t.createElementVNode("div",{class:"w-100 d-flex flex-column row-gap-1"},[t.createElementVNode("button",{onClick:l,class:"btn btn-success"},"实时录音"),t.createElementVNode("button",{onClick:i,class:"btn btn-primary"},"上传录音")]),Ol],512),[[t.vShow,!a.value]]),t.withDirectives(t.createElementVNode("section",null,[t.createVNode(Cl,{ref_key:"audioUploadRef",ref:r,onSubmit:d[0]||(d[0]=h=>c.$emit("submit",h))},null,512)],512),[[t.vShow,a.value]])],512))}});class Il extends X{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请框选要变音的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-audio",remark:n.label,src:n.value,children:[{text:r}]};this.editor.insertNode(o)}}const fr=t.defineComponent({__name:"conversion-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),a=t.shallowRef(),s=t.ref(!1),l=t.ref(""),{x:i,y:c,height:d}=Ne(r),h=m=>{if(a.value??(a.value=new Il(m)),a.value.isDisabled())return;l.value=a.value.getValue();const g={x:i.value-200,y:c.value+d.value};o.value=m,n.value.setPosition(g),s.value=!0};function p(m){var g;(g=a.value)==null||g.exec(m),s.value=!1}return(m,g)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:s.value,"onUpdate:visible":g[0]||(g[0]=f=>s.value=f)},{reference:t.withCtx(()=>[t.createVNode(t.unref(j),{ref_key:"menuRef",ref:r,text:"局部变音",icon:"conversion",onClick:h},null,512)]),default:t.withCtx(()=>[t.createVNode(Bl,{text:l.value,onSubmit:p},null,8,["text"])]),_:1},8,["visible"]))}}),Pl={class:"anchor-avatar d-flex flex-column justify-content-center align-items-center"},Ml=["src"],Ll={class:"anchor-avatar-name text-white"},Al=t.defineComponent({__name:"try-play-circle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:n}){const r=t.ref(),o=t.ref(0),a=t.ref(0),s=st(),{position:l}=ct(r,{initialValue:{x:window.innerWidth-15,y:window.innerHeight/2-15},onStart:(p,m)=>h(m.clientX,m.clientY)?!1:void 0}),{style:i}=ft(r,l);function c(p){h(p.clientX,p.clientY)&&n("update:visible",!1)}function d(p){o.value=p.clientX,a.value=p.clientY}function h(p,m){return p>o.value-10&&p<o.value+10&&m>a.value-10&&m<a.value+10}return(p,m)=>t.withDirectives((t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"try-play-circel user-select-none rounded-circle overflow-hidden",style:t.normalizeStyle([t.unref(i),{position:"fixed"}]),onMousedown:d,onMouseup:c},[t.createElementVNode("div",Pl,[t.createElementVNode("img",{src:t.unref(s).speaker.avatar||t.unref(he)(),class:"rounded-circle"},null,8,Ml),t.createElementVNode("div",Ll,t.toDisplayString(t.unref(s).speaker.displayName),1)])],36)),[[t.vShow,p.visible]])}}),au="",Fl=G(Al,[["__scopeId","data-v-daadb844"]]),Hl={key:0,class:"position-absolute top-0 start-100 translate-middle text-bg-danger text-nowrap rounded px-1",style:{"font-size":"0.5rem"}},jl=["src"],Ul={class:"anchor-avatar-name text-white"},zl=t.defineComponent({__name:"anchor-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(e){return(n,r)=>{var o,a,s;return t.openBlock(),t.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:r[0]||(r[0]=l=>{var i;return n.$emit("click",(i=n.data)==null?void 0:i.value)})},[(o=n.data)!=null&&o.isFree?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("span",Hl,"付费")),t.createElementVNode("img",{src:((a=n.data)==null?void 0:a.src)??t.unref(he)(),class:t.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"40px"}},null,10,jl),t.createElementVNode("div",Ul,t.toDisplayString((s=n.data)==null?void 0:s.label),1)])}}}),su="",pr=G(zl,[["__scopeId","data-v-845325c9"]]),Wl={style:{height:"170px"},class:"w-100 d-flex flex-row flex-wrap justify-content-start overflow-x-hidden overflow-y-auto scrollbar-none"},Gl=t.defineComponent({__name:"anchor-list",props:{filter:{}},setup(e){const n=e,{globalEditConfig:r}=z(),{fetchData:o}=r.tryPlay,a=st(),s=t.ref([]),l=t.shallowRef([]);t.watch(()=>n.filter,async c=>{const d=await o(t.toRaw(c));l.value=d,s.value=d.map(h=>({label:h.displayName,value:h.name}))});function i(c){const d=l.value.find(h=>h.name===c);d&&a.setSpeaker(d)}return t.onMounted(async()=>{const c=await o(t.toRaw(n.filter));l.value=c,s.value=c.map(d=>({label:d.displayName,value:d.name})),s.value.length>0&&i(s.value[0].value)}),(c,d)=>(t.openBlock(),t.createElementBlock("div",Wl,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(s.value,(h,p)=>(t.openBlock(),t.createElementBlock("div",{class:"m-3",key:p},[t.createVNode(pr,{data:h,activate:h.value===t.unref(a).speaker.name,onClick:m=>i(h.value)},null,8,["data","activate","onClick"])]))),128))]))}}),xt=t.defineComponent({__name:"tag-item",props:{activate:{type:Boolean},value:{}},emits:["click"],setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(["tag-item d-inline-block text-white text-center text-nowrap text-truncate",{"border border-white rounded-pill":n.activate}]),onClick:r[0]||(r[0]=o=>n.$emit("click",n.value)),style:{height:"20px","min-width":"60px","max-width":"160px","font-size":"0.5rem",cursor:"pointer"}},[t.renderSlot(n.$slots,"default")],2))}}),ql={class:"tag-list w-100"},Yl={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},Kl={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},Xl={style:{height:"100px"},class:"w-100 pt-2 d-flex flex-row flex-wrap align-content-start row-gap-2 overflow-y-auto overflow-x-hidden scrollbar-none"},Jl=t.defineComponent({__name:"tag-list",props:{filter:{}},emits:["update:filter"],setup(e,{emit:n}){const r=e,{globalEditConfig:o}=z(),{topFlag:a,gender:s,featchTag:l}=o.tryPlay,i=t.ref([]);t.onMounted(async()=>{i.value=await l()});function c(p){n("update:filter",{...t.toRaw(r.filter),topFlag:p})}function d(p){n("update:filter",{...t.toRaw(r.filter),gender:p})}function h(p){n("update:filter",{...t.toRaw(r.filter),tag:p})}return(p,m)=>(t.openBlock(),t.createElementBlock("div",ql,[t.createElementVNode("div",Yl,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(a),(g,f)=>(t.openBlock(),t.createBlock(xt,{onClick:c,key:f,value:g.value,activate:p.filter.topFlag===g.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(g.label),1)]),_:2},1032,["value","activate"]))),128))]),t.createElementVNode("div",Kl,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(g,f)=>(t.openBlock(),t.createBlock(xt,{onClick:d,key:f,value:g.value,activate:p.filter.gender===g.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(g.label),1)]),_:2},1032,["value","activate"]))),128))]),t.createElementVNode("div",Xl,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.value,(g,f)=>(t.openBlock(),t.createBlock(xt,{onClick:h,key:f,value:g.value,activate:p.filter.tag===g.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(g.label),1)]),_:2},1032,["value","activate"]))),128))])]))}}),lu="",iu="",cu="",Ql=["src"],Zl={class:"anchor-avatar-name text-white",style:{"font-size":"0.5rem"}},ei=t.defineComponent({__name:"style-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(e){return(n,r)=>{var o,a;return t.openBlock(),t.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:r[0]||(r[0]=s=>{var l;return n.$emit("click",(l=n.data)==null?void 0:l.value)})},[t.createElementVNode("img",{src:((o=n.data)==null?void 0:o.src)||t.unref(he)(),class:t.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"30px"}},null,10,Ql),t.createElementVNode("div",Zl,t.toDisplayString((a=n.data)==null?void 0:a.label),1)])}}}),du="",ti=G(ei,[["__scopeId","data-v-71aedb65"]]);function ni(e){return`${(.05*e*100).toFixed(0)}%`}function ri(e){return`${((e-1)*100).toFixed(0)}%`}const vt=e=>(t.pushScopeId("data-v-0210af00"),e=e(),t.popScopeId(),e),oi={class:"slider-panle w-100 px-3 text-white",style:{"font-size":"0.5rem"}},ai={class:"mt-2 d-flex text-center justify-content-between align-items-center"},si={class:"me-auto d-flex flex-row align-items-center"},li=["src"],ii={class:"ms-2 d-flex flex-column justify-content-between",style:{height:"50px"}},ci={class:"d-flex dlex-row column-gap-2 align-items-end"},di={class:"fs-6"},ui={style:{"font-size":"0.5rem"}},fi={class:"d-flex flex-row column-gap-2 align-items-center"},pi={key:0,class:"badge text-bg-primary px-2"},mi={class:"d-flex flex-column align-items-end"},hi=vt(()=>t.createElementVNode("div",{class:"text-info"},"音频时长，请以生成后的为准",-1)),yi={class:"mt-1"},gi=vt(()=>t.createElementVNode("span",null,"/",-1)),bi={class:"role-list mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-2 column-gap-3"},_i=["onClick"],wi={class:"audio-mood mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-1 column-gap-2"},Ei=["onClick"],xi=vt(()=>t.createElementVNode("div",{class:"my-3"},[t.createElementVNode("span",{class:"border rounded-pill p-1"},"配音师详情")],-1)),vi={class:"slider-box"},ki={class:"slider-box"},Si={class:"d-flex flex-row gap-3 my-3"},Ni=["onClick"],Vi={class:"d-flex flex-row flex-wrap row-gap-2 column-gap-3 mb-3",style:{"min-height":"100px"}},Ci=["onClick"],$i=t.defineComponent({__name:"slider-panle",setup(e){const{globalEditConfig:n}=z(),{rootProsody:r,rootExpressAs:o}=ce(),{fetchStar:a,category:s,fetchData:l}=n.tryPlay,i=st(),c=t.ref(i.speaker.isStar),d=t.ref(10),h=t.ref(0),p=t.ref([0,2]),m=t.ref(1),g=t.ref([-10,10]),f=t.ref(0),u=t.computed(()=>at(d.value)),_=t.computed(()=>at(h.value)),S=t.reactive(Xt()),N=t.reactive(Jt()),b=t.ref(""),w=t.ref([]);t.onMounted(async()=>{await R(s[0].value)}),t.watch(()=>i.speaker,V=>{V.roles.length>0&&v(V.roles[0].value),V.styles.length>0&&E(V.styles[0].value)},{immediate:!0}),t.watch(f,V=>{r.pitch=ni(V)},{immediate:!0}),t.watch(m,V=>{r.rate=ri(V)},{immediate:!0});async function C(){c.value=await a(i.speaker.name,!c.value)}function v(V){o.role=V}function E(V){o.style=V}async function R(V){b.value=V;try{w.value=await l({...Le(),category:V})}catch(k){K.emit(W.ERROR,`${k}`,k)}}function L(V){i.setSpeaker(t.toRaw(V))}return(V,k)=>(t.openBlock(),t.createElementBlock("div",oi,[t.createElementVNode("div",ai,[t.createElementVNode("div",si,[t.createElementVNode("img",{src:t.unref(he)(),class:"rounded-circle",style:{height:"50px"}},null,8,li),t.createElementVNode("div",ii,[t.createElementVNode("div",ci,[t.createElementVNode("span",di,t.toDisplayString(t.unref(i).speaker.displayName),1),t.createElementVNode("span",ui,t.toDisplayString(m.value)+"x",1)]),t.createElementVNode("div",fi,[t.createVNode(t.unref($.ElIcon),{onClick:C,class:"fs-6",style:t.normalizeStyle({color:c.value?"red":"white"})},{default:t.withCtx(()=>[c.value?(t.openBlock(),t.createBlock(t.unref(ue.StarFilled),{key:0})):(t.openBlock(),t.createBlock(t.unref(ue.Star),{key:1}))]),_:1},8,["style"]),t.unref(i).speaker.isSupper24K?(t.openBlock(),t.createElementBlock("span",pi," 24K ")):t.createCommentVNode("",!0)])])]),t.createElementVNode("div",mi,[hi,t.createElementVNode("div",yi,[t.createElementVNode("span",null,t.toDisplayString(_.value),1),gi,t.createElementVNode("span",null,t.toDisplayString(u.value),1)]),t.createVNode(t.unref($.ElSlider),{max:d.value,modelValue:h.value,"onUpdate:modelValue":k[0]||(k[0]=T=>h.value=T),size:"small"},null,8,["max","modelValue"])])]),t.createElementVNode("div",bi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(i).speaker.roles,(T,P)=>(t.openBlock(),t.createElementBlock("div",{onClick:ee=>v(T.value),key:P,class:t.normalizeClass(["rounded-pill px-1",{border:T.value===(t.unref(o).role||"")}])},t.toDisplayString(T.label),11,_i))),128))]),t.createElementVNode("ul",wi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(i).speaker.styles,(T,P)=>(t.openBlock(),t.createElementBlock("li",{class:"mx-2",onClick:ee=>E(T.value),key:P},[t.createVNode(ti,{activate:T.value===(t.unref(o).style||""),data:T},null,8,["activate","data"])],8,Ei))),128))]),xi,t.createElementVNode("div",vi,[t.createElementVNode("div",null,[t.createElementVNode("span",null,"语速："+t.toDisplayString(m.value)+"x",1)]),t.createVNode(t.unref($.ElSlider),{modelValue:m.value,"onUpdate:modelValue":k[1]||(k[1]=T=>m.value=T),min:p.value[0],max:p.value[1],step:.05,marks:S},null,8,["modelValue","min","max","marks"])]),t.createElementVNode("div",ki,[t.createElementVNode("div",null,[t.createElementVNode("span",null,"语调："+t.toDisplayString(f.value),1)]),t.createVNode(t.unref($.ElSlider),{modelValue:f.value,"onUpdate:modelValue":k[2]||(k[2]=T=>f.value=T),min:g.value[0],max:g.value[1],step:.2,marks:N},null,8,["modelValue","min","max","marks"])]),t.createElementVNode("div",null,[t.createElementVNode("ul",Si,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(T,P)=>(t.openBlock(),t.createElementBlock("li",{onClick:ee=>R(T.value),key:P,class:t.normalizeClass(["rounded-pill px-1",{border:T.value===b.value}])},t.toDisplayString(T.label),11,Ni))),128))]),t.createElementVNode("ul",Vi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(w.value,(T,P)=>(t.openBlock(),t.createElementBlock("li",{onClick:ee=>L(T),key:P},[t.createVNode(pr,{activate:T.name===t.unref(i).speaker.name,data:{...T,label:T.displayName,value:T.name}},null,8,["activate","data"])],8,Ci))),128))])])]))}}),uu="",Ti=G($i,[["__scopeId","data-v-0210af00"]]),Di=e=>(t.pushScopeId("data-v-f0208c5e"),e=e(),t.popScopeId(),e),Ri={class:"box ms-2"},Oi={class:"try-play-header text-center d-flex flex-row justify-content-between"},Bi={class:"try-play-body d-flex flex-row"},Ii={class:"try-play-left w-50 border-right border-secondary"},Pi={class:"pe-1"},Mi=Di(()=>t.createElementVNode("div",{class:"py-1 border-top border-secondary"},null,-1)),Li={class:"try-play-right w-50 border-start rounded border-top border-secondary overflow-x-hidden overflow-y-auto scrollbar-none"},Ai=t.defineComponent({__name:"try-play-panle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:n}){const r=e,o=t.ref(),a=t.ref(""),s=t.ref(),l=t.ref(),i=t.ref(Le());t.onMounted(()=>{window.addEventListener("keydown",c)}),t.onUnmounted(()=>{window.addEventListener("keydown",c)}),t.watch(()=>r.visible,f=>{f&&setTimeout(()=>{m()},200)});function c(f){f.code==="Escape"&&r.visible&&p()}const{position:d}=ct(l,{initialValue:{x:40,y:40}}),{style:h}=ft(s,d);t.onMounted(()=>{d.value.x=(window.innerWidth-890)/2,d.value.y=(window.innerHeight-390)/2});function p(){n("update:visible",!1)}function m(){var f;(f=o.value)==null||f.focus()}function g(){i.value={...i.value,word:a.value}}return(f,u)=>t.withDirectives((t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:s,style:t.normalizeStyle([t.unref(h),{position:"fixed"}]),class:"try-play user-select-none card z-3 shadow"},[t.createElementVNode("div",Ri,[t.createElementVNode("div",Oi,[t.createElementVNode("div",{ref_key:"handleRef",ref:l,class:"col-11 try-play-move"},null,512),t.createElementVNode("div",{onClick:p,class:"col-1 try-play-menu-close"},[t.createVNode(t.unref($.ElIcon),{color:"white"},{default:t.withCtx(()=>[t.createVNode(t.unref(ue.Minus))]),_:1})])]),t.createElementVNode("div",Bi,[t.createElementVNode("div",Ii,[t.createElementVNode("div",Pi,[t.createVNode(t.unref($.ElForm),{onSubmit:t.withModifiers(g,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{"input-style":{color:"white"},ref_key:"searchInputRef",ref:o,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=_=>a.value=_),placeholder:"输入名称搜索"},null,8,["modelValue"])]),_:1},8,["onSubmit"])]),t.createVNode(Jl,{filter:i.value,"onUpdate:filter":u[1]||(u[1]=_=>i.value=_)},null,8,["filter"]),Mi,t.createVNode(Gl,{filter:i.value},null,8,["filter"])]),t.createElementVNode("div",Li,[t.createVNode(Ti)])])])],4)),[[t.vShow,f.visible]])}}),fu="",Fi=G(Ai,[["__scopeId","data-v-f0208c5e"]]),mr=t.defineComponent({__name:"try-play",setup(e){const n=t.ref(!0);function r(o){o||(n.value=!0)}return(o,a)=>(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.createVNode(Fl,{visible:n.value,"onUpdate:visible":a[0]||(a[0]=s=>n.value=s)},null,8,["visible"]),t.createVNode(Fi,{visible:!n.value,"onUpdate:visible":r},null,8,["visible"])]))}}),pu="",Hi={install:e=>{e.component("PinyinMenu",Qn),e.component("ContinuousMenu",Zn),e.component("ReadMenu",er),e.component("DigitalMenu",tr),e.component("AliasMenu",nr),e.component("EnglishMenu",rr),e.component("ChangespeedMenu",or),e.component("RhythmMenu",ar),e.component("SpecialMenu",sr),e.component("MuteMenu",lr),e.component("BgmMenu",ir),e.component("SensitiveMenu",cr),e.component("ManagementMenu",ur),e.component("ConversionMenu",fr),e.component("TryPlay",mr)}},mu="",hu="";var kt={exports:{}},St={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class r extends Error{constructor(w,C){super(w),this.cause=C}}n.ParsingError=r;let o;function a(){return c(!1)||m()||p()||h()}function s(){return u(/\s*/),c(!0)||p()||d()||i(!1)}function l(){const b=i(!0),w=[];let C,v=s();for(;v;){if(v.node.type==="Element"){if(C)throw new Error("Found multiple root nodes");C=v.node}v.excluded||w.push(v.node),v=s()}if(!C)throw new r("Failed to parse XML","Root Element not found");if(o.xml.length!==0)throw new r("Failed to parse XML","Not Well-Formed XML");return{declaration:b?b.node:null,root:C,children:w}}function i(b){const w=u(b?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!w)return;const C={name:w[1],type:"ProcessingInstruction",attributes:{}};for(;!(_()||S("?>"));){const v=g();if(v)C.attributes[v.name]=v.value;else return}return u(/\?>/),{excluded:b?!1:o.options.filter(C)===!1,node:C}}function c(b){const w=u(/^<([^?!</>\s]+)\s*/);if(!w)return;const C={type:"Element",name:w[1],attributes:{},children:[]},v=b?!1:o.options.filter(C)===!1;for(;!(_()||S(">")||S("?>")||S("/>"));){const R=g();if(R)C.attributes[R.name]=R.value;else return}if(u(/^\s*\/>/))return C.children=null,{excluded:v,node:C};u(/\??>/);let E=a();for(;E;)E.excluded||C.children.push(E.node),E=a();if(o.options.strictMode){const R=`</${C.name}>`;if(o.xml.startsWith(R))o.xml=o.xml.slice(R.length);else throw new r("Failed to parse XML",`Closing tag not matching "${R}"`)}else u(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:v,node:C}}function d(){const b=u(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||u(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||u(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||u(/^<!DOCTYPE\s+\S+\s*>/);if(b){const w={type:"DocumentType",content:b[0]};return{excluded:o.options.filter(w)===!1,node:w}}}function h(){if(o.xml.startsWith("<![CDATA[")){const b=o.xml.indexOf("]]>");if(b>-1){const w=b+3,C={type:"CDATA",content:o.xml.substring(0,w)};return o.xml=o.xml.slice(w),{excluded:o.options.filter(C)===!1,node:C}}}}function p(){const b=u(/^<!--[\s\S]*?-->/);if(b){const w={type:"Comment",content:b[0]};return{excluded:o.options.filter(w)===!1,node:w}}}function m(){const b=u(/^([^<]+)/);if(b){const w={type:"Text",content:b[1]};return{excluded:o.options.filter(w)===!1,node:w}}}function g(){const b=u(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(b)return{name:b[1].trim(),value:f(b[2].trim())}}function f(b){return b.replace(/^['"]|['"]$/g,"")}function u(b){const w=o.xml.match(b);if(w)return o.xml=o.xml.slice(w[0].length),w}function _(){return o.xml.length===0}function S(b){return o.xml.indexOf(b)===0}function N(b,w={}){b=b.trim();const C=w.filter||(()=>!0);return o={xml:b,options:Object.assign(Object.assign({},w),{filter:C,strictMode:w.strictMode===!0})},l()}e.exports=N,n.default=N})(St,St.exports);var ji=St.exports;(function(e,n){var r=ye&&ye.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(n,"__esModule",{value:!0});const o=r(ji);function a(f){if(!f.options.indentation&&!f.options.lineSeparator)return;f.content+=f.options.lineSeparator;let u;for(u=0;u<f.level;u++)f.content+=f.options.indentation}function s(f){f.content=f.content.replace(/ +$/,"");let u;for(u=0;u<f.level;u++)f.content+=f.options.indentation}function l(f,u){f.content+=u}function i(f,u,_){if(typeof f.content=="string")c(f.content,u,_);else if(f.type==="Element")h(f,u,_);else if(f.type==="ProcessingInstruction")m(f,u);else throw new Error("Unknown node type: "+f.type)}function c(f,u,_){if(!_){const S=f.trim();(u.options.lineSeparator||S.length===0)&&(f=S)}f.length>0&&(!_&&u.content.length>0&&a(u),l(u,f))}function d(f,u){const _="/"+f.join("/"),S=f[f.length-1];return u.includes(S)||u.includes(_)}function h(f,u,_){if(u.path.push(f.name),!_&&u.content.length>0&&a(u),l(u,"<"+f.name),p(u,f.attributes),f.children===null||u.options.forceSelfClosingEmptyTag&&f.children.length===0){const S=u.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";l(u,S)}else if(f.children.length===0)l(u,"></"+f.name+">");else{const S=f.children;l(u,">"),u.level++;let N=f.attributes["xml:space"]==="preserve",b=!1;if(!N&&u.options.ignoredPaths&&(b=d(u.path,u.options.ignoredPaths),N=b),!N&&u.options.collapseContent){let w=!1,C=!1,v=!1;S.forEach(function(E,R){E.type==="Text"?(E.content.includes(`
`)?(C=!0,E.content=E.content.trim()):(R===0||R===S.length-1)&&E.content.trim().length===0&&(E.content=""),E.content.trim().length>0&&(w=!0)):E.type==="CDATA"?w=!0:v=!0}),w&&(!v||!C)&&(N=!0)}S.forEach(function(w){i(w,u,_||N)}),u.level--,!_&&!N&&a(u),b&&s(u),l(u,"</"+f.name+">")}u.path.pop()}function p(f,u){Object.keys(u).forEach(function(_){const S=u[_].replace(/"/g,"&quot;");l(f," "+_+'="'+S+'"')})}function m(f,u){u.content.length>0&&a(u),l(u,"<?"+f.name),p(u,f.attributes),l(u,"?>")}function g(f,u={}){u.indentation="indentation"in u?u.indentation:"    ",u.collapseContent=u.collapseContent===!0,u.lineSeparator="lineSeparator"in u?u.lineSeparator:`\r
`,u.whiteSpaceAtEndOfSelfclosingTag=u.whiteSpaceAtEndOfSelfclosingTag===!0,u.throwOnFailure=u.throwOnFailure!==!1;try{const _=(0,o.default)(f,{filter:u.filter,strictMode:u.strictMode}),S={content:"",level:0,options:u,path:[]};return _.declaration&&m(_.declaration,S),_.children.forEach(function(N){i(N,S,!1)}),u.lineSeparator?S.content.replace(/\r\n/g,`
`).replace(/\n/g,u.lineSeparator):S.content}catch(_){if(u.throwOnFailure)throw _;return f}}g.minify=(f,u={})=>g(f,Object.assign(Object.assign({},u),{indentation:"",lineSeparator:""})),e.exports=g,n.default=g})(kt,kt.exports);var Ui=kt.exports;const zi=Qe(Ui);function Wi(e){return e.replaceAll(/[&]/gi,"&amp;").replaceAll(/[<]/gi,"&lt;").replaceAll(/[>]/gi,"&gt;")}function Gi(e,n){return n?`<audio src="${e.src}">${n}</audio>`:`<audio src="${e.src}"/>`}function qi(e){return e.time?`<break time="${e.time}"/>`:e.strength?`<break strength="${e.strength}"/>`:"<break/>"}function Yi(e,n){return e.level?`<emphasis level="${e.level}">${n}</emphasis>`:`<emphasis>${n}</emphasis>`}function Ki(e,n){if(!e.style)return n;const r=e.role?` role="${e.role}"`:"",o=e.styledegree?` styledegree="${e.styledegree}"`:"";return`<mstts:express-as style="${e.style}"${r}${o}>${n}</mstts:express-as>`}function Xi(e){if(!e.src)return"";const n=e.volume?` volume="${e.volume}"`:"",r=e.fadein?` fadein="${e.fadein}"`:"",o=e.fadeout?` fadeout="${e.fadeout}"`:"";return`<mstts:backgroundaudio src="${e.src}"${n}${r}${o}/>`}function Ji(e){return!e.attrType||!e.value?"":`<mstts:silence type="${e.attrType}" value="${e.value}"/>`}function Qi(e,n){return`<p>${n}</p>`}function Zi(e,n){const r=e.alphabet?`alphabet="${e.alphabet}"`:"";return`<phoneme ph="${e.ph}"${r}>${n}</phoneme>`}function ec(e,n){if(!e.contour&&!e.pitch&&!e.range&&!e.rate&&!e.volume)return n;const r=e.contour?` contour="${e.contour}"`:"",o=e.pitch?` pitch="${e.pitch}"`:"",a=e.range?` range="${e.range}"`:"",s=e.volume?` volume="${e.volume}"`:"",l=e.rate?` rate="${e.rate}"`:"";return`<prosody${r}${o}${a}${s}${l}>${n}</prosody>`}function tc(e,n){const r=e.interpretAs?` interpret-as="${e.interpretAs}"`:"",o=e.format?` format="${e.format}"`:"",a=e.detail?` detail="${e.detail}"`:"";return`<say-as${r}${o}${a}>${n}</say-as>`}function nc(e,n){return`<s>${n}</s>`}function rc(e,n){return`<sub alias="${e.alias}">${n}</sub>`}function oc(e,n){const r=e.effect?` effect="${e.effect}"`:"";return`<voice name="${e.name}${r}">${n}</voice>`}function ac(e,n){return`<speak version="${e.version}" xml:lang="${e.xmlLang}" xmlns="${e.xmlns}" xmlns:mstts="${e["xmlns:mstts"]}" xmlns:emo="${e["xmlns:emo"]}">${n}</speak>`}function hr(e){if(y.SlateText.isText(e))return Wi(e.text.trim());if(y.SlateElement.isElement(e)){const n=e.children.map(o=>hr(o)).join("");switch(y.DomEditor.getNodeType(e)){case"paragraph":return`<p>${n}</p>`;case"ssml-speak":return ac(e,n);case"ssml-mstts:backgroundaudio":return Xi(e);case"ssml-audio":return Gi(e,n);case"ssml-break":return qi(e);case"ssml-emphasis":return Yi(e,n);case"ssml-mstts:express-as":return Ki(e,n);case"ssml-p":return Qi(e,n);case"ssml-phoneme":return Zi(e,n);case"ssml-prosody":return ec(e,n);case"ssml-s":return nc(e,n);case"ssml-say-as":return tc(e,n);case"ssml-sub":return rc(e,n);case"ssml-voice":return oc(e,n);case"ssml-mstts:silence":return Ji(e);default:return n}}return""}function sc(e,n){const r={type:"ssml-voice",remark:"",name:n.name,children:[]},o=yr(),a={type:"ssml-mstts:express-as",remark:"",style:n.style,role:n.role,children:[]},s=()=>({type:"ssml-prosody",remark:"",rate:n.rate,pitch:n.pitch,children:[]});r.children.push(...o),r.children.push(a);function l(){const c=s();a.children.push(c);function d(h){c.children.push(h)}return{prosody:c,pushNode:d}}let i;for(let c=0;c<n.children.length;c++){const d=n.children[c];if(!(y.SlateText.isText(d)&&!d.text.trim()))if(y.SlateText.isText(d)){i??(i=l()),i.pushNode(d);continue}else if(y.SlateEditor.isVoid(e,d)){i=void 0,a.children.push(d);continue}else{const h=y.DomEditor.findPath(e,d),[p]=y.SlateEditor.nodes(e,{at:h,mode:"lowest",voids:!1,match:m=>y.DomEditor.checkNodeType(m,"ssml-prosody")});if(p){i=void 0,a.children.push(d);continue}else i??(i=l()),i.pushNode(d)}}return r}function yr(){return[{type:"ssml-mstts:silence",attrType:"comma-exact",value:"200ms",remark:"逗号静音",children:[]},{type:"ssml-mstts:silence",attrType:"semicolon-exact",value:"200ms",remark:"分号静音",children:[]},{type:"ssml-mstts:silence",attrType:"enumerationcomma-exact",value:"200ms",remark:"顿号静音",children:[]}]}function lc(){const{rootVoice:e,rootExpressAs:n}=ce(),r={...e,children:[]},o=yr(),a={...n,children:[]};r.children.push(...o),r.children.push(a);function s(l){a.children.push(l)}return{voice:r,pushNode:s}}function gr(e){const{rootProsody:n}=ce(),r={...n,children:[]};e(r);function o(a){r.children.push(a)}return{prosody:r,pushNode:o}}function ic(){return{type:"ssml-break",time:"200ms",children:[{text:""}],remark:"paragraphBreak"}}function cc(e){const n=e.children.filter(r=>y.DomEditor.checkNodeType(r,"paragraph")).filter(r=>!!y.SlateNode.string(r).trim()).map((r,o,a)=>{const l=r.children;return o<a.length-1?l.concat([ic()]):l});return[].concat(...n)}function dc(e){const n=cc(e),r=[];let o,a;for(let s=0;s<n.length;s++){const l=n[s];if(!(y.SlateText.isText(l)&&!l.text.trim())){if(y.DomEditor.checkNodeType(l,"custom-management")){o&&(r.push(o.voice),o=void 0,a=void 0),r.push(sc(e,l));continue}if(o??(o=lc()),y.SlateText.isText(l)){a??(a=gr(o.pushNode)),a.pushNode(l);continue}else if(y.SlateEditor.isVoid(e,l)){a=void 0,o.pushNode(l);continue}else{const i=y.DomEditor.findPath(e,l),[c]=y.SlateEditor.nodes(e,{at:i,mode:"lowest",voids:!1,match:d=>y.DomEditor.checkNodeType(d,"ssml-prosody")});if(c){a=void 0,o.pushNode(l);continue}else{a??(a=gr(o.pushNode)),a.pushNode(l);continue}}}}return o&&r.push(o.voice),r}function uc(){const{editor:e}=z();if(!e)throw Error("没有找到 editor 对象");const{rootSpeak:n,rootBackgroundaudio:r}=ce(),o={...n,children:[]},a={...r};return o.children.push(a,...dc(e)),hr(o)}const xe=e=>(t.pushScopeId("data-v-fb2870b0"),e=e(),t.popScopeId(),e),fc={class:"editor-title d-flex flex-row align-item-center justify-content-between"},pc={class:"title-wrapper d-flex flex-column justify-content-center ps-3"},mc=xe(()=>t.createElementVNode("div",{class:"title-author pb-1"},"SSML编辑器",-1)),hc={class:"author d-flex flex-row align-items-center justify-content-start"},yc=xe(()=>t.createElementVNode("div",null,"未保存",-1)),gc=xe(()=>t.createElementVNode("span",{class:"iconfont icon-play font-size-12 p-1"},null,-1)),bc=xe(()=>t.createElementVNode("div",{class:"d-inline-block"},null,-1)),_c={class:"operation-wrapper d-flex flex-row justify-content-center align-items-center"},wc=xe(()=>t.createElementVNode("div",{class:"menu-divider"},null,-1)),Ec=xe(()=>t.createElementVNode("div",{class:"px-1"},null,-1)),xc={class:"ssml-code border border-secondary-subtle rounded-2 px-2",style:{"white-space":"pre-wrap","max-height":"50vh"}},vc={class:"dialog-footer"},kc=t.defineComponent({__name:"editor-title",setup(e){const n=t.ref(!1),r=t.ref(""),{rootBackgroundaudio:o}=ce(),a=t.computed(()=>zi(r.value,{indentation:"    ",filter:d=>d.type!=="Comment",collapseContent:!0,lineSeparator:`
`})),s=()=>{r.value=uc(),n.value=!0},l=()=>{o.src&&ie.play(o.src)},i=()=>{ie.stop(o.src),o.src="",o.remark=""};async function c(d){await navigator.clipboard.writeText(d?a.value:r.value),n.value=!1}return(d,h)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",fc,[t.createElementVNode("div",pc,[mc,t.createElementVNode("div",hc,[yc,t.unref(o).src?(t.openBlock(),t.createBlock(t.unref($.ElTag),{key:0,class:"bgm-txt ms-2",closable:"",size:"small",onClick:l,onClose:i},{default:t.withCtx(()=>[gc,bc,t.createElementVNode("span",null,t.toDisplayString(t.unref(o).remark),1)]),_:1})):t.createCommentVNode("",!0)])]),t.createElementVNode("div",_c,[t.createVNode(t.unref($.ElButton),{type:"primary",icon:t.unref(ue.Share),disabled:""},{default:t.withCtx(()=>[t.createTextVNode("分享")]),_:1},8,["icon"]),wc,t.createVNode(t.unref($.ElButton),{type:"primary",onClick:s},{default:t.withCtx(()=>[t.createTextVNode("查看SSML")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载音频")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载视频")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载字幕")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("声音转换")]),_:1}),Ec])]),t.createVNode(t.unref($.ElDialog),{modelValue:n.value,"onUpdate:modelValue":h[4]||(h[4]=p=>n.value=p),title:"查看SSML",width:"80%"},{header:t.withCtx(()=>[t.createVNode(t.unref($.ElButton),{type:"info",onClick:h[0]||(h[0]=p=>c(!0))},{default:t.withCtx(()=>[t.createTextVNode("复制+关闭")]),_:1}),t.createVNode(t.unref($.ElButton),{type:"primary",onClick:h[1]||(h[1]=p=>c(!1))},{default:t.withCtx(()=>[t.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})]),footer:t.withCtx(()=>[t.createElementVNode("span",vc,[t.createVNode(t.unref($.ElButton),{type:"info",onClick:h[2]||(h[2]=p=>c(!0))},{default:t.withCtx(()=>[t.createTextVNode("复制+关闭")]),_:1}),t.createVNode(t.unref($.ElButton),{type:"primary",onClick:h[3]||(h[3]=p=>c(!1))},{default:t.withCtx(()=>[t.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})])]),default:t.withCtx(()=>[t.createElementVNode("pre",xc,t.toDisplayString(a.value),1)]),_:1},8,["modelValue"])],64))}}),yu="",Sc=G(kc,[["__scopeId","data-v-fb2870b0"]]),Nc=t.defineComponent({__name:"editor-core",emits:["created","change"],setup(e,{emit:n}){const{editor:r,setEditor:o,globalEditConfig:a}=z(),s=t.ref(null);t.onMounted(()=>{l()}),t.onUnmounted(()=>{r==null||r.destroy()});function l(){if(!s.value)return;const i=y.createEditor({selector:s.value,mode:"simple",config:{...t.toRaw(a.editorConfig),onCreated(c){n("created",c),K.emit(W.EDITOR_CREATED,c)},onChange(c){n("change",c)}}});o(i),i.on(M.ERROR,a.handleError)}return(i,c)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:s,class:"edit-core",style:{height:"70vh","overflow-y":"hidden"}},null,512))}}),Vc={class:"bar-view border-bottom border-1"},Cc=t.defineComponent({__name:"bar-view",setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",Vc,[t.createVNode(t.unref(Fn),null,{default:t.withCtx(()=>[t.createVNode(t.unref(_e),{divider:"green"},{default:t.withCtx(()=>[t.createVNode(t.unref(j),{text:"24K高清音质",icon:"play",disabled:""})]),_:1}),t.createVNode(t.unref(_e),{divider:"cyan"},{default:t.withCtx(()=>[t.createVNode(t.unref(Qn)),t.createVNode(t.unref(er)),t.createVNode(t.unref(tr)),t.createVNode(t.unref(Zn)),t.createVNode(t.unref(nr)),t.createVNode(t.unref(rr))]),_:1}),t.createVNode(t.unref(_e),{divider:"orange"},{default:t.withCtx(()=>[t.createVNode(t.unref(or)),t.createVNode(t.unref(ur)),t.createVNode(t.unref(fr))]),_:1}),t.createVNode(t.unref(_e),{divider:"purple"},{default:t.withCtx(()=>[t.createVNode(t.unref(ar)),t.createVNode(t.unref(lr))]),_:1}),t.createVNode(t.unref(_e),{divider:"yellow"},{default:t.withCtx(()=>[t.createVNode(t.unref(sr)),t.createVNode(t.unref(ir))]),_:1})]),_:1})]),t.createVNode(t.unref(mr))],64))}}),$c={class:"editor-box"},Tc={class:"editor-core-container shadow pt-1"},Dc=t.defineComponent({__name:"editor-view",emits:["created","change"],setup(e,{emit:n}){const r=l=>{n("created",l)},o=l=>{n("change",l)};function a(l){K.emit(W.VIEW_CLICK,l)}function s(l){K.emit(W.VIEW_KEYDOWN,l)}return(l,i)=>(t.openBlock(),t.createElementBlock("div",{class:"editor-view",onClick:a,onKeydown:s},[t.createVNode(Sc),t.createElementVNode("div",$c,[t.createVNode(Cc),t.createElementVNode("div",Tc,[t.createVNode(Nc,{onChange:o,onCreated:r})])])],32))}}),gu="",br=G(Dc,[["__scopeId","data-v-c398e700"]]),Rc={install(e){e.component("EditorView",br)}},Oc={install(e,n){e.use(Gr()),e.use(()=>{const{setGlobalEditConfig:r}=z(),o=Xe(n);r(o),K.on(W.ERROR,o.handleError)}),e.use(Zo),e.use(Os),e.use(Hi),e.use(Rc)}};D.AudioPlayer=Nn,D.CancellationTokenSource=Cn,D.DOMComment=Vo,D.DOMElement=Co,D.DOMNode=No,D.DOMRange=To,D.DOMSelection=Do,D.DOMStaticRange=Ro,D.DOMText=$o,D.EMITTER_EVENT=W,D.EditorView=br,D.FileSelector=Vn,D.WANGEDITOR_EVENT=M,D.audioPlayer=ie,D.createGlobalEditorConfig=Xe,D.default=Oc,D.defaultFilterSpeaker=Le,D.defaultLabelValue=ea,D.defaultSpeaker=Tn,D.demoAvatar=he,D.formatTime=at,D.genRandomStr=Bo,D.pitch=Jt,D.speed=Xt,Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
