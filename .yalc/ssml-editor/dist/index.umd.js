(function(R,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("@wangeditor/editor"),require("element-plus"),require("@element-plus/icons-vue")):typeof define=="function"&&define.amd?define(["exports","vue","@wangeditor/editor","element-plus","@element-plus/icons-vue"],e):(R=typeof globalThis<"u"?globalThis:R||self,e(R.SSMLEditor={},R.Vue,R.wangEditor,R.ElementPlus,R.ElementPlusIconsVue))})(this,function(R,e,y,T,se){"use strict";var Vc=Object.defineProperty;var $c=(R,e,y)=>e in R?Vc(R,e,{enumerable:!0,configurable:!0,writable:!0,value:y}):R[e]=y;var P=(R,e,y)=>($c(R,typeof e!="symbol"?e+"":e,y),y);const Tc="",Rc="";var Dt=!1;function $e(t,n,o){return Array.isArray(t)?(t.length=Math.max(t.length,n),t.splice(n,1,o),o):(t[n]=o,o)}function qe(t,n){if(Array.isArray(t)){t.splice(n,1);return}delete t[n]}function ko(){return Ot().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Ot(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const vo=typeof Proxy=="function",So="devtools-plugin:setup",No="plugin:settings:set";let pe,Ye;function Co(){var t;return pe!==void 0||(typeof window<"u"&&window.performance?(pe=!0,Ye=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(pe=!0,Ye=global.perf_hooks.performance):pe=!1),pe}function Vo(){return Co()?Ye.now():Date.now()}class $o{constructor(n,o){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=n,this.hook=o;const r={};if(n.settings)for(const l in n.settings){const i=n.settings[l];r[l]=i.defaultValue}const a=`__vue-devtools-plugin-settings__${n.id}`;let s=Object.assign({},r);try{const l=localStorage.getItem(a),i=JSON.parse(l);Object.assign(s,i)}catch{}this.fallbacks={getSettings(){return s},setSettings(l){try{localStorage.setItem(a,JSON.stringify(l))}catch{}s=l},now(){return Vo()}},o&&o.on(No,(l,i)=>{l===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(l,i)=>this.target?this.target.on[i]:(...c)=>{this.onQueue.push({method:i,args:c})}}),this.proxiedTarget=new Proxy({},{get:(l,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...c)=>(this.targetQueue.push({method:i,args:c,resolve:()=>{}}),this.fallbacks[i](...c)):(...c)=>new Promise(d=>{this.targetQueue.push({method:i,args:c,resolve:d})})})}async setRealTarget(n){this.target=n;for(const o of this.onQueue)this.target.on[o.method](...o.args);for(const o of this.targetQueue)o.resolve(await this.target[o.method](...o.args))}}function Bt(t,n){const o=t,r=Ot(),a=ko(),s=vo&&o.enableEarlyProxy;if(a&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))a.emit(So,t,n);else{const l=s?new $o(o,a):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:o,setupFn:n,proxy:l}),l&&n(l.proxiedTarget)}}/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let ve;const Se=t=>ve=t,It=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function le(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ne;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ne||(ne={}));const Te=typeof window<"u",Ne=(process.env.NODE_ENV!=="production"||!1)&&process.env.NODE_ENV!=="test"&&Te,Lt=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function To(t,{autoBom:n=!1}={}){return n&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function Ke(t,n,o){const r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){At(r.response,n,o)},r.onerror=function(){console.error("could not download file")},r.send()}function Mt(t){const n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Re(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(o)}}const De=typeof navigator=="object"?navigator:{userAgent:""},Pt=(()=>/Macintosh/.test(De.userAgent)&&/AppleWebKit/.test(De.userAgent)&&!/Safari/.test(De.userAgent))(),At=Te?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!Pt?Ro:"msSaveOrOpenBlob"in De?Do:Oo:()=>{};function Ro(t,n="download",o){const r=document.createElement("a");r.download=n,r.rel="noopener",typeof t=="string"?(r.href=t,r.origin!==location.origin?Mt(r.href)?Ke(t,n,o):(r.target="_blank",Re(r)):Re(r)):(r.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(r.href)},4e4),setTimeout(function(){Re(r)},0))}function Do(t,n="download",o){if(typeof t=="string")if(Mt(t))Ke(t,n,o);else{const r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Re(r)})}else navigator.msSaveOrOpenBlob(To(t,o),n)}function Oo(t,n,o,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Ke(t,n,o);const a=t.type==="application/octet-stream",s=/constructor/i.test(String(Lt.HTMLElement))||"safari"in Lt,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s||Pt)&&typeof FileReader<"u"){const i=new FileReader;i.onloadend=function(){let c=i.result;if(typeof c!="string")throw r=null,new Error("Wrong reader.result type");c=l?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location.assign(c),r=null},i.readAsDataURL(t)}else{const i=URL.createObjectURL(t);r?r.location.assign(i):location.href=i,r=null,setTimeout(function(){URL.revokeObjectURL(i)},4e4)}}function A(t,n){const o="🍍 "+t;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(o,n):n==="error"?console.error(o):n==="warn"?console.warn(o):console.log(o)}function Xe(t){return"_a"in t&&"install"in t}function Ft(){if(!("clipboard"in navigator))return A("Your browser doesn't support the Clipboard API","error"),!0}function Ht(t){return t instanceof Error&&t.message.toLowerCase().includes("document is not focused")?(A('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Bo(t){if(!Ft())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),A("Global state copied to clipboard.")}catch(n){if(Ht(n))return;A("Failed to serialize the state. Check the console for more details.","error"),console.error(n)}}async function Io(t){if(!Ft())try{jt(t,JSON.parse(await navigator.clipboard.readText())),A("Global state pasted from clipboard.")}catch(n){if(Ht(n))return;A("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(n)}}async function Lo(t){try{At(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(n){A("Failed to export the state as JSON. Check the console for more details.","error"),console.error(n)}}let oe;function Mo(){oe||(oe=document.createElement("input"),oe.type="file",oe.accept=".json");function t(){return new Promise((n,o)=>{oe.onchange=async()=>{const r=oe.files;if(!r)return n(null);const a=r.item(0);return n(a?{text:await a.text(),file:a}:null)},oe.oncancel=()=>n(null),oe.onerror=o,oe.click()})}return t}async function Po(t){try{const o=await Mo()();if(!o)return;const{text:r,file:a}=o;jt(t,JSON.parse(r)),A(`Global state imported from "${a.name}".`)}catch(n){A("Failed to import the state from JSON. Check the console for more details.","error"),console.error(n)}}function jt(t,n){for(const o in n){const r=t.state.value[o];r&&Object.assign(r,n[o])}}function Z(t){return{_custom:{display:t}}}const Ut="🍍 Pinia (root)",Je="_root";function Ao(t){return Xe(t)?{id:Je,label:Ut}:{id:t.$id,label:t.$id}}function Fo(t){if(Xe(t)){const o=Array.from(t._s.keys()),r=t._s;return{state:o.map(s=>({editable:!0,key:s,value:t.state.value[s]})),getters:o.filter(s=>r.get(s)._getters).map(s=>{const l=r.get(s);return{editable:!1,key:s,value:l._getters.reduce((i,c)=>(i[c]=l[c],i),{})}})}}const n={state:Object.keys(t.$state).map(o=>({editable:!0,key:o,value:t.$state[o]}))};return t._getters&&t._getters.length&&(n.getters=t._getters.map(o=>({editable:!1,key:o,value:t[o]}))),t._customProperties.size&&(n.customProperties=Array.from(t._customProperties).map(o=>({editable:!0,key:o,value:t[o]}))),n}function Ho(t){return t?Array.isArray(t)?t.reduce((n,o)=>(n.keys.push(o.key),n.operations.push(o.type),n.oldValue[o.key]=o.oldValue,n.newValue[o.key]=o.newValue,n),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Z(t.type),key:Z(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function jo(t){switch(t){case ne.direct:return"mutation";case ne.patchFunction:return"$patch";case ne.patchObject:return"$patch";default:return"unknown"}}let me=!0;const Oe=[],ie="pinia:mutations",H="pinia",{assign:Uo}=Object,Be=t=>"🍍 "+t;function zo(t,n){Bt({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Oe,app:t},o=>{typeof o.now!="function"&&A("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),o.addTimelineLayer({id:ie,label:"Pinia 🍍",color:15064968}),o.addInspector({id:H,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Bo(n)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Io(n),o.sendInspectorTree(H),o.sendInspectorState(H)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{Lo(n)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Po(n),o.sendInspectorTree(H),o.sendInspectorState(H)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:r=>{const a=n._s.get(r);a?typeof a.$reset!="function"?A(`Cannot reset "${r}" store because it doesn't have a "$reset" method implemented.`,"warn"):(a.$reset(),A(`Store "${r}" reset.`)):A(`Cannot reset "${r}" store because it wasn't found.`,"warn")}}]}),o.on.inspectComponent((r,a)=>{const s=r.componentInstance&&r.componentInstance.proxy;if(s&&s._pStores){const l=r.componentInstance.proxy._pStores;Object.values(l).forEach(i=>{r.instanceData.state.push({type:Be(i.$id),key:"state",editable:!0,value:i._isOptionsAPI?{_custom:{value:e.toRaw(i.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>i.$reset()}]}}:Object.keys(i.$state).reduce((c,d)=>(c[d]=i.$state[d],c),{})}),i._getters&&i._getters.length&&r.instanceData.state.push({type:Be(i.$id),key:"getters",editable:!1,value:i._getters.reduce((c,d)=>{try{c[d]=i[d]}catch(p){c[d]=p}return c},{})})})}}),o.on.getInspectorTree(r=>{if(r.app===t&&r.inspectorId===H){let a=[n];a=a.concat(Array.from(n._s.values())),r.rootNodes=(r.filter?a.filter(s=>"$id"in s?s.$id.toLowerCase().includes(r.filter.toLowerCase()):Ut.toLowerCase().includes(r.filter.toLowerCase())):a).map(Ao)}}),o.on.getInspectorState(r=>{if(r.app===t&&r.inspectorId===H){const a=r.nodeId===Je?n:n._s.get(r.nodeId);if(!a)return;a&&(r.state=Fo(a))}}),o.on.editInspectorState((r,a)=>{if(r.app===t&&r.inspectorId===H){const s=r.nodeId===Je?n:n._s.get(r.nodeId);if(!s)return A(`store "${r.nodeId}" not found`,"error");const{path:l}=r;Xe(s)?l.unshift("state"):(l.length!==1||!s._customProperties.has(l[0])||l[0]in s.$state)&&l.unshift("$state"),me=!1,r.set(s,l,r.state.value),me=!0}}),o.on.editComponentState(r=>{if(r.type.startsWith("🍍")){const a=r.type.replace(/^🍍\s*/,""),s=n._s.get(a);if(!s)return A(`store "${a}" not found`,"error");const{path:l}=r;if(l[0]!=="state")return A(`Invalid path for store "${a}":
${l}
Only state can be modified.`);l[0]="$state",me=!1,r.set(s,l,r.state.value),me=!0}})})}function Wo(t,n){Oe.includes(Be(n.$id))||Oe.push(Be(n.$id)),Bt({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Oe,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},o=>{const r=typeof o.now=="function"?o.now.bind(o):Date.now;n.$onAction(({after:l,onError:i,name:c,args:d})=>{const p=zt++;o.addTimelineEvent({layerId:ie,event:{time:r(),title:"🛫 "+c,subtitle:"start",data:{store:Z(n.$id),action:Z(c),args:d},groupId:p}}),l(m=>{re=void 0,o.addTimelineEvent({layerId:ie,event:{time:r(),title:"🛬 "+c,subtitle:"end",data:{store:Z(n.$id),action:Z(c),args:d,result:m},groupId:p}})}),i(m=>{re=void 0,o.addTimelineEvent({layerId:ie,event:{time:r(),logType:"error",title:"💥 "+c,subtitle:"end",data:{store:Z(n.$id),action:Z(c),args:d,error:m},groupId:p}})})},!0),n._customProperties.forEach(l=>{e.watch(()=>e.unref(n[l]),(i,c)=>{o.notifyComponentUpdate(),o.sendInspectorState(H),me&&o.addTimelineEvent({layerId:ie,event:{time:r(),title:"Change",subtitle:l,data:{newValue:i,oldValue:c},groupId:re}})},{deep:!0})}),n.$subscribe(({events:l,type:i},c)=>{if(o.notifyComponentUpdate(),o.sendInspectorState(H),!me)return;const d={time:r(),title:jo(i),data:Uo({store:Z(n.$id)},Ho(l)),groupId:re};i===ne.patchFunction?d.subtitle="⤵️":i===ne.patchObject?d.subtitle="🧩":l&&!Array.isArray(l)&&(d.subtitle=l.type),l&&(d.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:l}}),o.addTimelineEvent({layerId:ie,event:d})},{detached:!0,flush:"sync"});const a=n._hotUpdate;n._hotUpdate=e.markRaw(l=>{a(l),o.addTimelineEvent({layerId:ie,event:{time:r(),title:"🔥 "+n.$id,subtitle:"HMR update",data:{store:Z(n.$id),info:Z("HMR update")}}}),o.notifyComponentUpdate(),o.sendInspectorTree(H),o.sendInspectorState(H)});const{$dispose:s}=n;n.$dispose=()=>{s(),o.notifyComponentUpdate(),o.sendInspectorTree(H),o.sendInspectorState(H),o.getSettings().logStoreChanges&&A(`Disposed "${n.$id}" store 🗑`)},o.notifyComponentUpdate(),o.sendInspectorTree(H),o.sendInspectorState(H),o.getSettings().logStoreChanges&&A(`"${n.$id}" store installed 🆕`)})}let zt=0,re;function Wt(t,n,o){const r=n.reduce((a,s)=>(a[s]=e.toRaw(t)[s],a),{});for(const a in r)t[a]=function(){const s=zt,l=o?new Proxy(t,{get(...c){return re=s,Reflect.get(...c)},set(...c){return re=s,Reflect.set(...c)}}):t;re=s;const i=r[a].apply(l,arguments);return re=void 0,i}}function Go({app:t,store:n,options:o}){if(n.$id.startsWith("__hot:"))return;n._isOptionsAPI=!!o.state,Wt(n,Object.keys(o.actions),n._isOptionsAPI);const r=n._hotUpdate;e.toRaw(n)._hotUpdate=function(a){r.apply(this,arguments),Wt(n,Object.keys(a._hmrPayload.actions),!!n._isOptionsAPI)},Wo(t,n)}function qo(){const t=e.effectScope(!0),n=t.run(()=>e.ref({}));let o=[],r=[];const a=e.markRaw({install(s){Se(a),a._a=s,s.provide(It,a),s.config.globalProperties.$pinia=a,Ne&&zo(s,a),r.forEach(l=>o.push(l)),r=[]},use(s){return!this._a&&!Dt?r.push(s):o.push(s),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return Ne&&typeof Proxy<"u"&&a.use(Go),a}function Gt(t,n){for(const o in n){const r=n[o];if(!(o in t))continue;const a=t[o];le(a)&&le(r)&&!e.isRef(r)&&!e.isReactive(r)?t[o]=Gt(a,r):t[o]=r}return t}const qt=()=>{};function Yt(t,n,o,r=qt){t.push(n);const a=()=>{const s=t.indexOf(n);s>-1&&(t.splice(s,1),r())};return!o&&e.getCurrentScope()&&e.onScopeDispose(a),a}function he(t,...n){t.slice().forEach(o=>{o(...n)})}const Yo=t=>t();function Qe(t,n){t instanceof Map&&n instanceof Map&&n.forEach((o,r)=>t.set(r,o)),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const r=n[o],a=t[o];le(a)&&le(r)&&t.hasOwnProperty(o)&&!e.isRef(r)&&!e.isReactive(r)?t[o]=Qe(a,r):t[o]=r}return t}const Ko=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function Xo(t){return!le(t)||!t.hasOwnProperty(Ko)}const{assign:Y}=Object;function Kt(t){return!!(e.isRef(t)&&t.effect)}function Xt(t,n,o,r){const{state:a,actions:s,getters:l}=n,i=o.state.value[t];let c;function d(){!i&&(process.env.NODE_ENV==="production"||!r)&&(o.state.value[t]=a?a():{});const p=process.env.NODE_ENV!=="production"&&r?e.toRefs(e.ref(a?a():{}).value):e.toRefs(o.state.value[t]);return Y(p,s,Object.keys(l||{}).reduce((m,h)=>(process.env.NODE_ENV!=="production"&&h in p&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${t}".`),m[h]=e.markRaw(e.computed(()=>{Se(o);const g=o._s.get(t);return l[h].call(g,g)})),m),{}))}return c=Ze(t,d,n,o,r,!0),c}function Ze(t,n,o={},r,a,s){let l;const i=Y({actions:{}},o);if(process.env.NODE_ENV!=="production"&&!r._e.active)throw new Error("Pinia destroyed");const c={deep:!0};process.env.NODE_ENV!=="production"&&!Dt&&(c.onTrigger=S=>{d?g=S:d==!1&&!_._hotUpdating&&(Array.isArray(g)?g.push(S):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let d,p,m=[],h=[],g;const u=r.state.value[t];!s&&!u&&(process.env.NODE_ENV==="production"||!a)&&(r.state.value[t]={});const f=e.ref({});let E;function x(S){let N;d=p=!1,process.env.NODE_ENV!=="production"&&(g=[]),typeof S=="function"?(S(r.state.value[t]),N={type:ne.patchFunction,storeId:t,events:g}):(Qe(r.state.value[t],S),N={type:ne.patchObject,payload:S,storeId:t,events:g});const $=E=Symbol();e.nextTick().then(()=>{E===$&&(d=!0)}),p=!0,he(m,N,r.state.value[t])}const v=s?function(){const{state:N}=o,$=N?N():{};this.$patch(M=>{Y(M,$)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`🍍: Store "${t}" is built using the setup syntax and does not implement $reset().`)}:qt;function b(){l.stop(),m=[],h=[],r._s.delete(t)}function w(S,N){return function(){Se(r);const $=Array.from(arguments),M=[],te=[];function We(G){M.push(G)}function Tt(G){te.push(G)}he(h,{args:$,name:S,store:_,after:We,onError:Tt});let fe;try{fe=N.apply(this&&this.$id===t?this:_,$)}catch(G){throw he(te,G),G}return fe instanceof Promise?fe.then(G=>(he(M,G),G)).catch(G=>(he(te,G),Promise.reject(G))):(he(M,fe),fe)}}const C=e.markRaw({actions:{},getters:{},state:[],hotState:f}),V={_p:r,$id:t,$onAction:Yt.bind(null,h),$patch:x,$reset:v,$subscribe(S,N={}){const $=Yt(m,S,N.detached,()=>M()),M=l.run(()=>e.watch(()=>r.state.value[t],te=>{(N.flush==="sync"?p:d)&&S({storeId:t,type:ne.direct,events:g},te)},Y({},c,N)));return $},$dispose:b},_=e.reactive(process.env.NODE_ENV!=="production"||Ne?Y({_hmrPayload:C,_customProperties:e.markRaw(new Set)},V):V);r._s.set(t,_);const D=r._a&&r._a.runWithContext||Yo,L=r._e.run(()=>(l=e.effectScope(),D(()=>l.run(n))));for(const S in L){const N=L[S];if(e.isRef(N)&&!Kt(N)||e.isReactive(N))process.env.NODE_ENV!=="production"&&a?$e(f.value,S,e.toRef(L,S)):s||(u&&Xo(N)&&(e.isRef(N)?N.value=u[S]:Qe(N,u[S])),r.state.value[t][S]=N),process.env.NODE_ENV!=="production"&&C.state.push(S);else if(typeof N=="function"){const $=process.env.NODE_ENV!=="production"&&a?N:w(S,N);L[S]=$,process.env.NODE_ENV!=="production"&&(C.actions[S]=N),i.actions[S]=N}else process.env.NODE_ENV!=="production"&&Kt(N)&&(C.getters[S]=s?o.getters[S]:N,Te&&(L._getters||(L._getters=e.markRaw([]))).push(S))}if(Y(_,L),Y(e.toRaw(_),L),Object.defineProperty(_,"$state",{get:()=>process.env.NODE_ENV!=="production"&&a?f.value:r.state.value[t],set:S=>{if(process.env.NODE_ENV!=="production"&&a)throw new Error("cannot set hotState");x(N=>{Y(N,S)})}}),process.env.NODE_ENV!=="production"&&(_._hotUpdate=e.markRaw(S=>{_._hotUpdating=!0,S._hmrPayload.state.forEach(N=>{if(N in _.$state){const $=S.$state[N],M=_.$state[N];typeof $=="object"&&le($)&&le(M)?Gt($,M):S.$state[N]=M}$e(_,N,e.toRef(S.$state,N))}),Object.keys(_.$state).forEach(N=>{N in S.$state||qe(_,N)}),d=!1,p=!1,r.state.value[t]=e.toRef(S._hmrPayload,"hotState"),p=!0,e.nextTick().then(()=>{d=!0});for(const N in S._hmrPayload.actions){const $=S[N];$e(_,N,w(N,$))}for(const N in S._hmrPayload.getters){const $=S._hmrPayload.getters[N],M=s?e.computed(()=>(Se(r),$.call(_,_))):$;$e(_,N,M)}Object.keys(_._hmrPayload.getters).forEach(N=>{N in S._hmrPayload.getters||qe(_,N)}),Object.keys(_._hmrPayload.actions).forEach(N=>{N in S._hmrPayload.actions||qe(_,N)}),_._hmrPayload=S._hmrPayload,_._getters=S._getters,_._hotUpdating=!1})),Ne){const S={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(N=>{Object.defineProperty(_,N,Y({value:_[N]},S))})}return r._p.forEach(S=>{if(Ne){const N=l.run(()=>S({store:_,app:r._a,pinia:r,options:i}));Object.keys(N||{}).forEach($=>_._customProperties.add($)),Y(_,N)}else Y(_,l.run(()=>S({store:_,app:r._a,pinia:r,options:i})))}),process.env.NODE_ENV!=="production"&&_.$state&&typeof _.$state=="object"&&typeof _.$state.constructor=="function"&&!_.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${_.$id}".`),u&&s&&o.hydrate&&o.hydrate(_.$state,u),d=!0,p=!0,_}function Ie(t,n,o){let r,a;const s=typeof n=="function";if(typeof t=="string")r=t,a=s?o:n;else if(a=t,r=t.id,process.env.NODE_ENV!=="production"&&typeof r!="string")throw new Error('[🍍]: "defineStore()" must be passed a store id as its first argument.');function l(i,c){const d=e.hasInjectionContext();if(i=(process.env.NODE_ENV==="test"&&ve&&ve._testing?null:i)||(d?e.inject(It,null):null),i&&Se(i),process.env.NODE_ENV!=="production"&&!ve)throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);i=ve,i._s.has(r)||(s?Ze(r,n,a,i):Xt(r,a,i),process.env.NODE_ENV!=="production"&&(l._pinia=i));const p=i._s.get(r);if(process.env.NODE_ENV!=="production"&&c){const m="__hot:"+r,h=s?Ze(m,n,a,i,!0):Xt(m,Y({},a),i,!0);c._hotUpdate(h),delete i.state.value[m],i._s.delete(m)}if(process.env.NODE_ENV!=="production"&&Te){const m=e.getCurrentInstance();if(m&&m.proxy&&!c){const h=m.proxy,g="_pStores"in h?h._pStores:h._pStores={};g[r]=p}}return p}return l.$id=r,l}function Jt(t){{t=e.toRaw(t);const n={};for(const o in t){const r=t[o];(e.isRef(r)||e.isReactive(r))&&(n[o]=e.toRef(t,o))}return n}}function Qt(){return{id:"",src:""}}function K(){return()=>Promise.resolve([])}function et(t){const n=(t==null?void 0:t.editorConfig)||{maxLength:5e3,placeholder:"请输入内容..."},o=(t==null?void 0:t.handleError)||(()=>{}),r=(t==null?void 0:t.pinyin)||{fetchData:K()},a=(t==null?void 0:t.english)||{fetchData:K()},s=(t==null?void 0:t.special)||{fetchData:K(),fetchScene:K(),fetchStyle:K()},l=(t==null?void 0:t.bgm)||{fetchData:K(),fetchScene:K(),fetchStyle:K()},i=(t==null?void 0:t.tryPlay)||{play:()=>Promise,fetchData:K(),featchTag:K(),fetchStar:K()},c=(t==null?void 0:t.conversion)||{timeoutMilliseconds:2e4,audioUpload:()=>Qt(),transfer:()=>Qt(),fetchSpeaker:K()},d=s,p=l,m=i;return d.menus??(d.menus=[{label:"默认音效",value:""},{label:"自定义音效",value:"custom"},{label:"最近音效",value:"history"}]),p.menus??(p.menus=[{label:"默认配乐",value:""},{label:"自定义配乐",value:"custom"},{label:"最近配乐",value:"history"}]),m.gender??(m.gender=[{label:"全部",value:""},{label:"男声",value:"Male"},{label:"女声",value:"Female"}]),m.topFlag??(m.topFlag=[{label:"热榜",value:""},{label:"SVIP",value:"SVIP"},{label:"付费",value:"付费"}]),m.category??(m.category=[{label:"常用",value:"常用"},{label:"已购",value:"已购"},{label:"收藏",value:"收藏"},{label:"我的",value:"我的"}]),{editorConfig:n,handleError:o,pinyin:r,english:a,bgm:p,special:d,tryPlay:m,conversion:c}}const Zt=()=>({0:"0",.1:"0.1",.2:"0.2",.3:"0.3",.4:"0.4",.5:"0.5",.6:"0.6",.7:"0.7",.8:"0.8",.9:"0.9",1:"1.0",1.1:"1.1",1.2:"1.2",1.4:"1.4",1.5:"1.5",1.75:"1.75",2:"2.0"}),en=()=>({0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10","-1":"-1","-2":"-2","-3":"-3","-4":"-4","-5":"-5","-6":"-6","-7":"-7","-8":"-8","-9":"-9","-10":"-10"}),ye=()=>"https://img.sdaxia.top/upload/4314c841777e4d20901cd5d04a28e91a.png",U=Ie("--editor-config",()=>{const t=e.shallowRef(),n=e.shallowRef(),o=e.computed(()=>t.value),r=e.computed(()=>{if(n.value)return n.value;throw Error("请设置GlobalEditorConfig")});return{editor:o,globalEditConfig:r,setEditor:l=>{t.value=l},setGlobalEditConfig:l=>{n.value=l??et()}}}),Jo=t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-audio"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-audio"?!y.SlateNode.string(a):o(a),r};function tn(t,n,o,r,a){const s=n===void 0?void 0:n.key;return{sel:t,data:n,children:o,text:r,elm:a,key:s}}const nn=Array.isArray;function tt(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function on(t,n,o){if(t.ns="http://www.w3.org/2000/svg",o!=="foreignObject"&&n!==void 0)for(let r=0;r<n.length;++r){const a=n[r];if(typeof a=="string")continue;const s=a.data;s!==void 0&&on(s,a.children,a.sel)}}function k(t,n,o){let r={},a,s,l;if(o!==void 0?(n!==null&&(r=n),nn(o)?a=o:tt(o)?s=o.toString():o&&o.sel&&(a=[o])):n!=null&&(nn(n)?a=n:tt(n)?s=n.toString():n&&n.sel?a=[n]:r=n),a!==void 0)for(l=0;l<a.length;++l)tt(a[l])&&(a[l]=tn(void 0,void 0,void 0,a[l],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&on(r,a,t),tn(t,r,a,s,void 0)}var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rn="Expected a function",an=0/0,Qo="[object Symbol]",Zo=/^\s+|\s+$/g,er=/^[-+]0x[0-9a-f]+$/i,tr=/^0b[01]+$/i,nr=/^0o[0-7]+$/i,or=parseInt,rr=typeof ge=="object"&&ge&&ge.Object===Object&&ge,ar=typeof self=="object"&&self&&self.Object===Object&&self,sr=rr||ar||Function("return this")(),lr=Object.prototype,ir=lr.toString,cr=Math.max,dr=Math.min,ot=function(){return sr.Date.now()};function ur(t,n,o){var r,a,s,l,i,c,d=0,p=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError(rn);n=sn(n)||0,Le(o)&&(p=!!o.leading,m="maxWait"in o,s=m?cr(sn(o.maxWait)||0,n):s,h="trailing"in o?!!o.trailing:h);function g(V){var _=r,D=a;return r=a=void 0,d=V,l=t.apply(D,_),l}function u(V){return d=V,i=setTimeout(x,n),p?g(V):l}function f(V){var _=V-c,D=V-d,L=n-_;return m?dr(L,s-D):L}function E(V){var _=V-c,D=V-d;return c===void 0||_>=n||_<0||m&&D>=s}function x(){var V=ot();if(E(V))return v(V);i=setTimeout(x,f(V))}function v(V){return i=void 0,h&&r?g(V):(r=a=void 0,l)}function b(){i!==void 0&&clearTimeout(i),d=0,r=c=a=i=void 0}function w(){return i===void 0?l:v(ot())}function C(){var V=ot(),_=E(V);if(r=arguments,a=this,c=V,_){if(i===void 0)return u(c);if(m)return i=setTimeout(x,n),g(c)}return i===void 0&&(i=setTimeout(x,n)),l}return C.cancel=b,C.flush=w,C}function fr(t,n,o){var r=!0,a=!0;if(typeof t!="function")throw new TypeError(rn);return Le(o)&&(r="leading"in o?!!o.leading:r,a="trailing"in o?!!o.trailing:a),ur(t,n,{leading:r,maxWait:n,trailing:a})}function Le(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function pr(t){return!!t&&typeof t=="object"}function mr(t){return typeof t=="symbol"||pr(t)&&ir.call(t)==Qo}function sn(t){if(typeof t=="number")return t;if(mr(t))return an;if(Le(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Le(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(Zo,"");var o=tr.test(t);return o||nr.test(t)?or(t.slice(2),o?2:8):er.test(t)?an:+t}var hr=fr;const j=nt(hr);function ln(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function rt(t,n){t===void 0&&(t={}),n===void 0&&(n={}),Object.keys(n).forEach(function(o){typeof t[o]>"u"?t[o]=n[o]:ln(n[o])&&ln(t[o])&&Object.keys(n[o]).length>0&&rt(t[o],n[o])})}var cn={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function at(){var t=typeof document<"u"?document:{};return rt(t,cn),t}var yr={document:cn,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout>"u"||clearTimeout(t)}};function dn(){var t=typeof window<"u"?window:{};return rt(t,yr),t}function gr(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},st(t)}function Me(t,n){return Me=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Me(t,n)}function br(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Pe(t,n,o){return br()?Pe=Reflect.construct:Pe=function(a,s,l){var i=[null];i.push.apply(i,s);var c=Function.bind.apply(a,i),d=new c;return l&&Me(d,l.prototype),d},Pe.apply(null,arguments)}function _r(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function lt(t){var n=typeof Map=="function"?new Map:void 0;return lt=function(r){if(r===null||!_r(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(r))return n.get(r);n.set(r,a)}function a(){return Pe(r,arguments,st(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Me(a,r)},lt(t)}function wr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Er(t){var n=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return n},set:function(r){n.__proto__=r}})}var ce=function(t){gr(n,t);function n(o){var r;return r=t.call.apply(t,[this].concat(o))||this,Er(wr(r)),r}return n}(lt(Array));function it(t){t===void 0&&(t=[]);var n=[];return t.forEach(function(o){Array.isArray(o)?n.push.apply(n,it(o)):n.push(o)}),n}function xr(t){for(var n=[],o=0;o<t.length;o+=1)n.indexOf(t[o])===-1&&n.push(t[o]);return n}function kr(t){return t.toLowerCase().replace(/-(.)/g,function(n,o){return o.toUpperCase()})}function vr(t,n){if(typeof t!="string")return[t];for(var o=[],r=n.querySelectorAll(t),a=0;a<r.length;a+=1)o.push(r[a]);return o}function B(t,n){var o=dn(),r=at(),a=[];if(!n&&t instanceof ce)return t;if(!t)return new ce(a);if(typeof t=="string"){var s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";s.indexOf("<li")===0&&(l="ul"),s.indexOf("<tr")===0&&(l="tbody"),(s.indexOf("<td")===0||s.indexOf("<th")===0)&&(l="tr"),s.indexOf("<tbody")===0&&(l="table"),s.indexOf("<option")===0&&(l="select");var i=r.createElement(l);i.innerHTML=s;for(var c=0;c<i.childNodes.length;c+=1)a.push(i.childNodes[c])}else a=vr(t.trim(),n||r)}else if(t.nodeType||t===o||t===r)a.push(t);else if(Array.isArray(t)){if(t instanceof ce)return t;a=t}return new ce(xr(a))}B.fn=ce.prototype;function un(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=it(n.map(function(a){return a.split(" ")}));return this.forEach(function(a){var s;(s=a.classList).add.apply(s,r)}),this}function fn(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=it(n.map(function(a){return a.split(" ")}));return this.forEach(function(a){var s;(s=a.classList).remove.apply(s,r)}),this}function pn(t,n){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var o=0;o<this.length;o+=1)if(arguments.length===2)this[o].setAttribute(t,n);else for(var r in t)this[o][r]=t[r],this[o].setAttribute(r,t[r]);return this}function mn(){var t=this[0];if(t){var n={};if(t.dataset)for(var o in t.dataset)n[o]=t.dataset[o];else for(var r=0;r<t.attributes.length;r+=1){var a=t.attributes[r];a.name.indexOf("data-")>=0&&(n[kr(a.name.split("data-")[1])]=a.value)}for(var s in n)n[s]==="false"?n[s]=!1:n[s]==="true"?n[s]=!0:parseFloat(n[s])===n[s]*1&&(n[s]*=1);return n}}function hn(t){if(typeof t>"u"){var n=this[0];if(!n)return;if(n.multiple&&n.nodeName.toLowerCase()==="select"){for(var o=[],r=0;r<n.selectedOptions.length;r+=1)o.push(n.selectedOptions[r].value);return o}return n.value}for(var a=0;a<this.length;a+=1){var s=this[a];if(Array.isArray(t)&&s.multiple&&s.nodeName.toLowerCase()==="select")for(var l=0;l<s.options.length;l+=1)s.options[l].selected=t.indexOf(s.options[l].value)>=0;else s.value=t}return this}function yn(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n[0],a=n[1],s=n[2],l=n[3];typeof n[1]=="function"&&(r=n[0],s=n[1],l=n[2],a=void 0),l||(l=!1);function i(f){var E=f.target;if(E){var x=f.target.dom7EventData||[];if(x.indexOf(f)<0&&x.unshift(f),B(E).is(a))s.apply(E,x);else for(var v=B(E).parents(),b=0;b<v.length;b+=1)B(v[b]).is(a)&&s.apply(v[b],x)}}function c(f){var E=f&&f.target?f.target.dom7EventData||[]:[];E.indexOf(f)<0&&E.unshift(f),s.apply(this,E)}for(var d=r.split(" "),p,m=0;m<this.length;m+=1){var h=this[m];if(a)for(p=0;p<d.length;p+=1){var u=d[p];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[u]||(h.dom7LiveListeners[u]=[]),h.dom7LiveListeners[u].push({listener:s,proxyListener:i}),h.addEventListener(u,i,l)}else for(p=0;p<d.length;p+=1){var g=d[p];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[g]||(h.dom7Listeners[g]=[]),h.dom7Listeners[g].push({listener:s,proxyListener:c}),h.addEventListener(g,c,l)}}return this}function gn(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n[0],a=n[1],s=n[2],l=n[3];typeof n[1]=="function"&&(r=n[0],s=n[1],l=n[2],a=void 0),l||(l=!1);for(var i=r.split(" "),c=0;c<i.length;c+=1)for(var d=i[c],p=0;p<this.length;p+=1){var m=this[p],h=void 0;if(!a&&m.dom7Listeners?h=m.dom7Listeners[d]:a&&m.dom7LiveListeners&&(h=m.dom7LiveListeners[d]),h&&h.length)for(var g=h.length-1;g>=0;g-=1){var u=h[g];s&&u.listener===s||s&&u.listener&&u.listener.dom7proxy&&u.listener.dom7proxy===s?(m.removeEventListener(d,u.proxyListener,l),h.splice(g,1)):s||(m.removeEventListener(d,u.proxyListener,l),h.splice(g,1))}}return this}function bn(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function _n(t){return t?(this.forEach(function(n,o){t.apply(n,[n,o])}),this):this}function wn(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(var n=0;n<this.length;n+=1)this[n].innerHTML=t;return this}function En(t){var n=dn(),o=at(),r=this[0],a,s;if(!r||typeof t>"u")return!1;if(typeof t=="string"){if(r.matches)return r.matches(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);for(a=B(t),s=0;s<a.length;s+=1)if(a[s]===r)return!0;return!1}if(t===o)return r===o;if(t===n)return r===n;if(t.nodeType||t instanceof ce){for(a=t.nodeType?[t]:t,s=0;s<a.length;s+=1)if(a[s]===r)return!0;return!1}return!1}function xn(){for(var t,n=at(),o=0;o<arguments.length;o+=1){t=o<0||arguments.length<=o?void 0:arguments[o];for(var r=0;r<this.length;r+=1)if(typeof t=="string"){var a=n.createElement("div");for(a.innerHTML=t;a.firstChild;)this[r].appendChild(a.firstChild)}else if(t instanceof ce)for(var s=0;s<t.length;s+=1)this[r].appendChild(t[s]);else this[r].appendChild(t)}return this}function kn(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].parentNode;r;)t?B(r).is(t)&&n.push(r):n.push(r),r=r.parentNode;return B(n)}function vn(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].querySelectorAll(t),a=0;a<r.length;a+=1)n.push(r[a]);return B(n)}function Sn(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].children,a=0;a<r.length;a+=1)(!t||B(r[a]).is(t))&&n.push(r[a]);return B(n)}var Sr="resize scroll".split(" ");function Nn(t){function n(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];if(typeof r[0]>"u"){for(var s=0;s<this.length;s+=1)Sr.indexOf(t)<0&&(t in this[s]?this[s][t]():B(this[s]).trigger(t));return this}return this.on.apply(this,[t].concat(r))}return n}var Cn=Nn("click"),Vn=Nn("focus");bn&&(B.fn.hide=bn),xn&&(B.fn.append=xn),Cn&&(B.fn.click=Cn),yn&&(B.fn.on=yn),gn&&(B.fn.off=gn),Vn&&(B.fn.focus=Vn),pn&&(B.fn.attr=pn),hn&&(B.fn.val=hn),wn&&(B.fn.html=wn),mn&&(B.fn.dataset=mn),un&&(B.fn.addClass=un),fn&&(B.fn.removeClass=fn),Sn&&(B.fn.children=Sn),_n&&(B.fn.each=_n),vn&&(B.fn.find=vn),En&&(B.fn.is=En),kn&&(B.fn.parents=kn);const Nr=globalThis.Node,Cr=globalThis.Comment,Vr=globalThis.Element,$r=globalThis.Text,Tr=globalThis.Range,Rr=globalThis.Selection,Dr=globalThis.StaticRange;let Or=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,o)=>(o&=63,o<36?n+=o.toString(36):o<62?n+=(o-26).toString(36).toUpperCase():o>62?n+="-":n+="_",n),"");function Br(t="r"){return`${t}-${Or()}`}let $n=class{constructor(){P(this,"audio");P(this,"src");this.audio=null,this.src=null}removeAudioElement(){this.audio&&(document.body.removeChild(this.audio),this.audio=null,this.src=null)}play(n){this.stop(),this.audio=document.createElement("audio"),this.audio.hidden=!0,this.audio.volume=.5,this.audio.src=n,this.src=n,document.body.appendChild(this.audio),this.audio.play()}stop(n){n&&n!==this.src||this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.removeAudioElement())}};const de=new $n;function ct(t){const n=Math.floor(t/60),o=t%60,r=String(n).padStart(2,"0"),a=String(o).padStart(2,"0");return`${r}:${a}`}class Tn{constructor(n){P(this,"accept");P(this,"dom");P(this,"isdestroy",!1);P(this,"resolve");P(this,"reject");this.accept=n,this.dom=null,this.resolve=null,this.reject=null}createInputElement(){const n=document.createElement("input");return n.type="file",n.accept=this.accept,n.hidden=!0,n}change(n){var o,r;if(this.dom&&this.dom.files&&this.dom.files.length>0){const a=this.dom.files.item(0);if(a){(o=this.resolve)==null||o.call(this,a),this.dom.value="";return}this.dom.value=""}return(r=this.reject)==null?void 0:r.call(this,n)}cancel(n){var o;return this.dom&&(this.dom.value=""),(o=this.reject)==null?void 0:o.call(this,n)}open(){if(this.isdestroy)throw Error("对象已经销毁");this.dom||(this.dom=this.createInputElement(),this.dom.addEventListener("change",this.change.bind(this)),this.dom.addEventListener("cancel",this.cancel.bind(this)),document.body.appendChild(this.dom)),this.dom.click();const n=this;return new Promise((o,r)=>{n.resolve=o,n.reject=r})}destroy(){this.isdestroy||(this.dom&&document.body.removeChild(this.dom),this.dom=null,this.isdestroy=!0)}}class dt{constructor(n){P(this,"cancelled",!1);P(this,"timeoutId",null);this.timeoutMilliseconds=n}get token(){return{isCancellationRequested:()=>this.cancelled,throwIfRequested:()=>{if(this.cancelled)throw new Error("Operation canceled")}}}cancel(){this.cancelled=!0,this.clearTimeout()}clearTimeout(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}startTimeout(){this.timeoutId=setTimeout(()=>{this.cancel()},this.timeoutMilliseconds)}}class Rn{constructor(n=60){P(this,"isStop",!1);P(this,"count",e.ref(0));P(this,"timeoutId",null);this.timeoutSeconds=n}clearTimeout(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}get state(){return e.computed(()=>this.count.value)}start(n){n&&(this.timeoutSeconds=n),this.isStop=!1,this.count.value=0,this.clearTimeout(),this.timeoutId=setInterval(()=>{!this.isStop&&this.count.value<this.timeoutSeconds?this.count.value++:this.clearTimeout()},1e3)}stop(){this.isStop=!0,this.clearTimeout()}}function Ir(t){const{selection:n}=t;if(n){const[o,r]=y.SlateRange.edges(n),a=y.SlateEditor.range(t,o,r),s=y.SlateEditor.string(t,a),l=s.trimEnd();if(l!==s){const i=s.length-l.length,c={...r,offset:r.offset-i},d={...n,anchor:o,focus:c};y.SlateTransforms.select(t,d)}}}function Dn(t,n){y.SlateEditor.withoutNormalizing(t,()=>{const o=y.SlateEditor.start(t,n),r=y.SlateEditor.end(t,n);y.SlateTransforms.insertText(t," ",{at:o}),y.SlateTransforms.insertText(t," ",{at:{path:r.path,offset:r.offset+1}}),y.SlateTransforms.select(t,{anchor:{path:o.path,offset:o.offset+1},focus:{path:r.path,offset:r.offset+1}})})}function be(t,n){y.SlateEditor.withoutNormalizing(t,()=>{const o=y.SlateEditor.before(t,n),r=y.SlateEditor.after(t,n);if(!o||!r)return;const a={anchor:{path:o.path,offset:o.offset-1},focus:{path:o.path,offset:o.offset}},s={anchor:{path:r.path,offset:r.offset},focus:{path:r.path,offset:r.offset+1}};y.SlateEditor.string(t,a)===" "&&y.SlateTransforms.delete(t,{at:a}),y.SlateEditor.string(t,s)===" "&&y.SlateTransforms.delete(t,{at:s})})}const Lr={type:"ssml-audio",renderElem:(t,n,o)=>n?Mr(t,n,o):Pr(t,o)};function Mr(t,n,o){const{remark:r,src:a}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-audio)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault(),de.stop(a);const l=y.DomEditor.findPath(o,t);be(o,l),y.SlateTransforms.unwrapNodes(o,{at:l})})}}),k("span.iconfont.icon-play",{on:{click:j(s=>{s.preventDefault(),de.play(a)})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-audio)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-audio)"}})])}function Pr(t,n){const{remark:o,src:r}=t;return k("span.ssml-wrapper",{props:{contentEditable:!1}},[k("span.remark",{style:{backgroundColor:"var(--ssml-audio)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault(),de.stop(r);const s=y.DomEditor.findPath(n,t);y.SlateTransforms.delete(n,{at:s})})}}),k("span.iconfont.icon-play",{on:{click:j(a=>{a.preventDefault(),de.play(r)})}}),k("span.data-content",{attrs:{"data-content":o}})]),k("span.iconfont.icon-music",{style:{color:"var(--ssml-audio)"}})])}const Ar={editorPlugin:Jo,renderElems:[Lr],elemsToHtml:[{type:"ssml-audio",elemToHtml:(t,n)=>{const{remark:o,src:r}=t;return`<span
          data-w-e-type="ssml-audio"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-src="${r}"
          data-ow-remark="${o}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-audio"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-src")||"",r=t.getAttribute("data-ow-remark")||"";return{type:"ssml-audio",src:o,remark:r,children:n}}}]},Fr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-break"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-break"?!0:o(a),r},renderElems:[{type:"ssml-break",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",{props:{contentEditable:!1}},[k("span.remark",{style:{backgroundColor:"var(--ssml-break)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);y.SlateTransforms.delete(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.iconfont.icon-tingdun",{style:{color:"var(--ssml-break)"}})])}}],elemsToHtml:[{type:"ssml-break",elemToHtml:t=>{const{remark:n,time:o,strength:r}=t;return`<span
          data-w-e-type="ssml-break"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-remark="${n}"
          data-ow-time="${o??""}"
          data-ow-strength="${r??"medium"}"
        ></span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-break"]',parseElemHtml:t=>{const n=t.getAttribute("data-ow-remark")||"",o=t.getAttribute("data-ow-time")||"",r=t.getAttribute("data-ow-strength")||"";return{type:"ssml-break",remark:n,time:o,strength:r,children:[{text:""}]}}}]},Hr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-emphasis"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-emphasis"?!1:o(a),r},renderElems:[{type:"ssml-emphasis",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-emphasis)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-emphasis)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-emphasis)"}})])}}],elemsToHtml:[{type:"ssml-emphasis",elemToHtml:(t,n)=>{const{remark:o,level:r}=t;return`<span
          data-w-e-type="ssml-emphasis"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-level="${r??"none"}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-emphasis"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-level")||"";return{type:"ssml-emphasis",remark:o,level:r,children:n}}}]},jr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-mstts:express-as"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-mstts:express-as"?!1:o(a),r},renderElems:[{type:"ssml-mstts:express-as",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-mstts--express-as)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-mstts--express-as)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-mstts--express-as)"}})])}}],elemsToHtml:[{type:"ssml-mstts:express-as",elemToHtml:(t,n)=>{const{remark:o,style:r,role:a,styledegree:s}=t;return`<span
          data-w-e-type="ssml-mstts:express-as"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-style="${r}"
          data-ow-styledegree="${s??""}"
          data-ow-role="${a??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-mstts:express-as"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-style")||"",a=t.getAttribute("data-ow-styledegree")||"",s=t.getAttribute("data-ow-role")||"";return{type:"ssml-mstts:express-as",style:r,remark:o,styledegree:a,role:s,children:n}}}]},Ur={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-p"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-p"?!1:o(a),r},renderElems:[{type:"ssml-p",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-p)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-p)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-p)"}})])}}],elemsToHtml:[{type:"ssml-p",elemToHtml:(t,n)=>{const{remark:o}=t;return`<span
          data-w-e-type="ssml-p"
          data-w-e-is-inline
          data-ow-remark="${o}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-p"]',parseElemHtml:(t,n)=>({type:"ssml-p",remark:t.getAttribute("data-ow-remark")||"",children:n})}]},zr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-phoneme"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-phoneme"?!1:o(a),r},renderElems:[{type:"ssml-phoneme",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-phoneme)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);be(o,s),y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-phoneme)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-phoneme)"}})])}}],elemsToHtml:[{type:"ssml-phoneme",elemToHtml:(t,n)=>{const{remark:o,alphabet:r,ph:a}=t;return`<span
          data-w-e-type="ssml-phoneme"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-alphabet="${r??""}"
          data-ow-ph="${a}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-phoneme"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-alphabet")||"",a=t.getAttribute("data-ow-ph")||"";return{type:"ssml-phoneme",remark:o,alphabet:r,ph:a,children:n}}}]},Wr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-prosody"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-prosody"?!1:o(a),r},renderElems:[{type:"ssml-prosody",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-prosody)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);be(o,s),y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-prosody)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-prosody)"}})])}}],elemsToHtml:[{type:"ssml-prosody",elemToHtml:(t,n)=>{const{remark:o,contour:r,pitch:a,range:s,rate:l,volume:i}=t;return`<span
          data-w-e-type="ssml-prosody"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-contour="${r??""}"
          data-ow-pitch="${a??""}"
          data-ow-range="${s??""}"
          data-ow-rate="${l??""}"
          data-ow-volume="${i??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-prosody"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-contour")||"",a=t.getAttribute("data-ow-pitch ")||"",s=t.getAttribute("data-ow-range")||"",l=t.getAttribute("data-ow-rate")||void 0,i=t.getAttribute("data-ow-volume")||"";return{type:"ssml-prosody",remark:o,contour:r,pitch:a,range:s,rate:l,volume:i,children:n}}}]},Gr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-s"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-s"?!1:o(a),r},renderElems:[{type:"ssml-s",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-s)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-s)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-s)"}})])}}],elemsToHtml:[{type:"ssml-s",elemToHtml:(t,n)=>{const{remark:o}=t;return`<span
          data-w-e-type="ssml-s"
          data-w-e-is-inline
          data-ow-remark="${o}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-s"]',parseElemHtml:(t,n)=>({type:"ssml-s",remark:t.getAttribute("data-ow-remark")||"",children:n})}]},qr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-say-as"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-say-as"?!1:o(a),r},renderElems:[{type:"ssml-say-as",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-say-as)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);be(o,s),y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-say-as)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-say-as)"}})])}}],elemsToHtml:[{type:"ssml-say-as",elemToHtml:(t,n)=>{const{remark:o,interpretAs:r,detail:a,format:s}=t;return`<span
          data-w-e-type="ssml-say-as"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-interpretAs="${r}"
          data-ow-detail="${a??""}"
          data-ow-format="${s??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-say-as"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-interpretAs")||"",a=t.getAttribute("data-ow-format")||"",s=t.getAttribute("data-ow-detail")||"";return{type:"ssml-say-as",remark:o,interpretAs:r,detail:s,format:a,children:n}}}]},Yr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-sub"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-sub"?!1:o(a),r},renderElems:[{type:"ssml-sub",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-sub)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);be(o,s),y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-sub)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-sub)"}})])}}],elemsToHtml:[{type:"ssml-sub",elemToHtml:(t,n)=>{const{remark:o,alias:r}=t;return`<span
          data-w-e-type="ssml-sub"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-alias="${r}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-sub"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-alias")||"";return{type:"ssml-sub",remark:o,alias:r,children:n}}}]},Kr={editorPlugin:t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="ssml-voice"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="ssml-voice"?!1:o(a),r},renderElems:[{type:"ssml-voice",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-voice)"}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-voice)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-voice)"}})])}}],elemsToHtml:[{type:"ssml-voice",elemToHtml:(t,n)=>{const{remark:o,name:r,effect:a}=t;return`<span
          data-w-e-type="ssml-voice"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-name="${r}"
          data-ow-effect="${a??""}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="ssml-voice"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-name")||"",a=t.getAttribute("data-ow-effect")||"";return{type:"ssml-voice",remark:o,name:r,effect:a,children:n}}}]},Xr=t=>{const{isInline:n,isVoid:o}=t,r=t;return r.isInline=a=>y.DomEditor.getNodeType(a)==="custom-management"?!0:n(a),r.isVoid=a=>y.DomEditor.getNodeType(a)==="custom-management"?!1:o(a),r},I={ERROR:"wangeditor-error",SSML_ELEMENT_CLICK:"ssml-element-click"},q={ERROR:"emitter-error",VIEW_CLICK:"emitter-view-click",VIEW_KEYDOWN:"emitter-view-keydown",EDITOR_CREATED:"emitter-editor-created"},Jr={editorPlugin:Xr,renderElems:[{type:"custom-management",renderElem:(t,n,o)=>{const{remark:r}=t;return k("span.ssml-wrapper",[k("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--custom-management)"},on:{mousedown:a=>a.preventDefault(),click:j(a=>{a.preventDefault(),o.select(y.DomEditor.findPath(o,t)),o.emit(I.SSML_ELEMENT_CLICK,o,t)})}},[k("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault();const s=y.DomEditor.findPath(o,t);be(o,s),y.SlateTransforms.unwrapNodes(o,{at:s})})}}),k("span.data-content",{attrs:{"data-content":r}})]),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{{"},style:{color:"var(--custom-management)"}}),k("span",n),k("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}}"},style:{color:"var(--custom-management)"}})])}}],elemsToHtml:[{type:"custom-management",elemToHtml:(t,n)=>{const{remark:o,style:r,role:a,name:s,pitch:l,rate:i,custom:c}=t;return`<span
          data-w-e-type="custom-management"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-style="${r}"
          data-ow-name="${s}"
          data-ow-role="${a}"
          data-ow-pitch="${l}"
          data-ow-rate="${i}"
          data-ow-custom="${JSON.stringify(c)}"
        >${n}</span>`}}],parseElemsHtml:[{selector:'span[data-w-e-type="custom-management"]',parseElemHtml:(t,n)=>{const o=t.getAttribute("data-ow-remark")||"",r=t.getAttribute("data-ow-name")||"",a=t.getAttribute("data-ow-role")||"",s=t.getAttribute("data-ow-style")||"",l=t.getAttribute("data-ow-pitch")||"",i=t.getAttribute("data-ow-rate")||"",c=t.getAttribute("data-ow-custom")||"{}";return{type:"custom-management",remark:o,name:r,role:a,style:s,pitch:l,rate:i,custom:JSON.parse(c),children:n}}}]},Qr=t=>{const{deleteBackward:n,deleteForward:o,insertBreak:r,apply:a,normalizeNode:s,insertText:l,insertData:i,setFragmentData:c,insertNode:d}=t,p=t;p.deleteBackward=h=>{n(h)},p.deleteForward=h=>{o(h)},p.insertBreak=()=>{r()},p.normalizeNode=h=>{s(h)},p.apply=h=>{a(h)},p.insertData=h=>{if(h.types.includes("application/x-slate-fragment"))return i(h);{const g=new DataTransfer;return g.setData("text/plain",h.getData("text/plain").trim()),i(g)}},p.setFragmentData=h=>{c(h);const g=h.getData("text/plain").replaceAll(/[\s]/gi,"");h.setData("text/plain",g)},p.insertText=h=>{l(h)};const m=["ssml-prosody","ssml-sub","custom-management","ssml-phoneme","ssml-say-as"];return p.insertNode=h=>{const g=y.DomEditor.getNodeType(h);return m.includes(g)||g==="ssml-audio"&&y.SlateNode.string(h)?(t.selection&&Dn(t,t.selection),y.SlateTransforms.insertNodes(t,h)):y.SlateEditor.isVoid(t,h)?(d(h),t.move(1)):d(h)},p},$d="",Zr={install(){y.Boot.registerModule(Ar),y.Boot.registerModule(Fr),y.Boot.registerModule(Hr),y.Boot.registerModule(jr),y.Boot.registerModule(Ur),y.Boot.registerModule(zr),y.Boot.registerModule(Wr),y.Boot.registerModule(Gr),y.Boot.registerModule(qr),y.Boot.registerModule(Yr),y.Boot.registerModule(Kr),y.Boot.registerModule(Jr),y.Boot.registerPlugin(Qr)}},ue=Ie("--editor-ssml",()=>{const t=e.shallowReactive({type:"ssml-speak",version:"1.0",xmlLang:"zh-CN",xmlns:"http://www.w3.org/2001/10/synthesis","xmlns:mstts":"http://www.w3.org/2001/mstts","xmlns:emo":"http://www.w3.org/2009/10/emotionml",remark:"",children:[]}),n=e.shallowReactive({name:"zh-CN-XiaomoNeural",type:"ssml-voice",remark:"Xiaomo-晓墨",effect:"",children:[]}),o=e.shallowReactive({type:"ssml-mstts:backgroundaudio",src:"",remark:"",children:[]}),r=e.shallowReactive({type:"ssml-mstts:express-as",style:"",role:"",remark:"",children:[]}),a=e.shallowReactive({type:"ssml-prosody",remark:"",children:[]});return{rootSpeak:t,rootVoice:n,rootBackgroundaudio:o,rootExpressAs:r,rootProsody:a}});function ea(){return{label:"",value:""}}function On(){return{id:"",category:"",avatar:"",isFree:!1,isStar:!1,isSupper24K:!1,roles:[],styles:[],name:"",displayName:""}}function Ae(){return{word:"",topFlag:"",category:"",gender:"",tag:""}}class Bn{constructor(){P(this,"audio");P(this,"isPlaying",e.ref(!1));P(this,"isLoading",e.ref(!1));P(this,"loadResolve");P(this,"loadReject");this.audio=new Audio,this.audio.addEventListener("canplaythrough",()=>{var n;this.isLoading.value=!1,(n=this.loadResolve)==null||n.call(this)}),this.audio.addEventListener("play",()=>{this.isPlaying.value=!0}),this.audio.addEventListener("pause",()=>{this.isPlaying.value=!1}),this.audio.addEventListener("error",()=>{var n;this.isLoading.value=!1,this.isPlaying.value=!1,(n=this.loadReject)==null||n.call(this)})}load(n){return this.pause(),this.isPlaying.value=!1,this.isLoading.value=!0,this.audio.src=n,this.audio.load(),new Promise((o,r)=>{this.loadResolve=o,this.loadReject=r})}play(){this.audio.play()}pause(){this.audio.pause()}togglePlayPause(){this.isPlaying.value?this.pause():this.play()}get playState(){return e.computed(()=>this.isPlaying.value?"playing":"paused")}get loadState(){return e.computed(()=>this.isLoading.value?"loading":"complete")}}const Fe=Ie("--editor-try-play",()=>{const t=ue(),n=e.shallowRef(new Bn),o=e.ref(On()),r=e.computed(()=>o.value),a=e.computed(()=>n.value);return{speaker:r,setSpeaker:l=>{o.value=l,t.rootVoice.name=l.name},audioPlayer:a}}),ta=()=>[{value:"0.5",label:"0.5x"},{value:"0.6",label:"0.6x"},{value:"0.7",label:"0.7x"},{value:"0.8",label:"0.8x"},{value:"0.9",label:"0.9x"},{value:"1.0",label:"1.0x"},{value:"1.1",label:"1.1x"},{value:"1.2",label:"1.2x"},{value:"1.4",label:"1.4x"},{value:"1.5",label:"1.5x"},{value:"1.75",label:"1.75x"},{value:"2.0",label:"2.0x"}],na=()=>[{value:"-10",label:"-10"},{value:"-9",label:"-9"},{value:"-8",label:"-8"},{value:"-7",label:"-7"},{value:"-6",label:"-6"},{value:"-5",label:"-5"},{value:"-4",label:"-4"},{value:"-3",label:"-3"},{value:"-2",label:"-2"},{value:"-1",label:"-1"},{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"}];function oa(t){return`${(.05*t*100).toFixed(0)}%`}function ra(t){return`${((t-1)*100).toFixed(0)}%`}function aa(){return{category:"",name:"",role:"",style:"",speed:"1.0",pitch:"0"}}const In=Ie("--editor-management-menu",()=>({contentData:e.reactive(aa())})),sa={class:"bar-button-icon"},la={class:"fw-normal",style:{"font-size":"0.85rem"}},ia=e.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:n}){const o=t,r=()=>{if(!o.disabled){const{editor:a}=U();a&&n("click",a)}};return(a,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["bar-button px-2 py-1",{disabled:a.disabled}]),onClick:r,onMousedown:s[0]||(s[0]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",sa,[e.createElementVNode("span",{class:e.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${a.icon}`]])},null,2)]),e.createElementVNode("div",la,e.toDisplayString(a.text),1)],34))}}),Td="",W=(t,n)=>{const o=t.__vccOpts||t;for(const[r,a]of n)o[r]=a;return o},z=W(ia,[["__scopeId","data-v-2da9a7ca"]]),Rd="",Dd="",Od="",ut=e.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(t,{expose:n,emit:o}){const r=e.ref(""),a=e.ref();function s(){a.value.focus()}function l(){o("submit",r.value),r.value=""}return n({focus:s}),(i,c)=>(e.openBlock(),e.createBlock(e.unref(T.ElForm),{onSubmit:e.withModifiers(l,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(T.ElInput),{type:i.type,ref_key:"inputRef",ref:a,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=d=>r.value=d)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}}),Bd="",Id="",ca=e.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(t){return(n,o)=>(e.openBlock(),e.createBlock(e.unref(T.ElPopover),{hideAfter:n.hideAfter,width:n.width,visible:n.visible,trigger:n.trigger,"onUpdate:visible":o[0]||(o[0]=r=>n.$emit("update:visible",r))},{reference:e.withCtx(()=>[e.renderSlot(n.$slots,"reference")]),default:e.withCtx(()=>[e.renderSlot(n.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}}),Ld="",Md="",Pd="",Ad="",Fd="",Hd="",jd="",Ud="",zd="";function He(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function X(t){return typeof t=="function"?t():e.unref(t)}const Ln=typeof window<"u"&&typeof document<"u",da=t=>t!=null,ua=Object.prototype.toString,fa=t=>ua.call(t)==="[object Object]",je=()=>{};function pa(t,n={}){if(!e.isRef(t))return e.toRefs(t);const o=Array.isArray(t.value)?Array.from({length:t.value.length}):{};for(const r in t.value)o[r]=e.customRef(()=>({get(){return t.value[r]},set(a){var s;if((s=X(n.replaceRef))!=null?s:!0)if(Array.isArray(t.value)){const i=[...t.value];i[r]=a,t.value=i}else{const i={...t.value,[r]:a};Object.setPrototypeOf(i,Object.getPrototypeOf(t.value)),t.value=i}else t.value[r]=a}}));return o}function Mn(t,n=!0){e.getCurrentInstance()?e.onMounted(t):n?t():e.nextTick(t)}function ee(t){var n;const o=X(t);return(n=o==null?void 0:o.$el)!=null?n:o}const ae=Ln?window:void 0;function _e(...t){let n,o,r,a;if(typeof t[0]=="string"||Array.isArray(t[0])?([o,r,a]=t,n=ae):[n,o,r,a]=t,!n)return je;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const s=[],l=()=>{s.forEach(p=>p()),s.length=0},i=(p,m,h,g)=>(p.addEventListener(m,h,g),()=>p.removeEventListener(m,h,g)),c=e.watch(()=>[ee(n),X(a)],([p,m])=>{if(l(),!p)return;const h=fa(m)?{...m}:m;s.push(...o.flatMap(g=>r.map(u=>i(p,g,u,h))))},{immediate:!0,flush:"post"}),d=()=>{c(),l()};return He(d),d}function ma(){const t=e.ref(!1);return e.getCurrentInstance()&&e.onMounted(()=>{t.value=!0}),t}function ft(t){const n=ma();return e.computed(()=>(n.value,!!t()))}function ha(t,n={}){const{window:o=ae}=n,r=ft(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let a;const s=e.ref(!1),l=d=>{s.value=d.matches},i=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",l):a.removeListener(l))},c=e.watchEffect(()=>{r.value&&(i(),a=o.matchMedia(X(t)),"addEventListener"in a?a.addEventListener("change",l):a.addListener(l),s.value=a.matches)});return He(()=>{c(),i(),a=void 0}),s}function pt(t,n={}){var o,r;const{pointerTypes:a,preventDefault:s,stopPropagation:l,exact:i,onMove:c,onEnd:d,onStart:p,initialValue:m,axis:h="both",draggingElement:g=ae,containerElement:u,handle:f=t}=n,E=e.ref((o=X(m))!=null?o:{x:0,y:0}),x=e.ref(),v=_=>a?a.includes(_.pointerType):!0,b=_=>{X(s)&&_.preventDefault(),X(l)&&_.stopPropagation()},w=_=>{var D;if(!v(_)||X(i)&&_.target!==X(t))return;const S=((D=X(u))!=null?D:X(t)).getBoundingClientRect(),N={x:_.clientX-S.left,y:_.clientY-S.top};(p==null?void 0:p(N,_))!==!1&&(x.value=N,b(_))},C=_=>{if(!v(_)||!x.value)return;let{x:D,y:L}=E.value;(h==="x"||h==="both")&&(D=_.clientX-x.value.x),(h==="y"||h==="both")&&(L=_.clientY-x.value.y),E.value={x:D,y:L},c==null||c(E.value,_),b(_)},V=_=>{v(_)&&x.value&&(x.value=void 0,d==null||d(E.value,_),b(_))};if(Ln){const _={capture:(r=n.capture)!=null?r:!0};_e(f,"pointerdown",w,_),_e(g,"pointermove",C,_),_e(g,"pointerup",V,_)}return{...pa(E),position:E,isDragging:e.computed(()=>!!x.value),style:e.computed(()=>`left:${E.value.x}px;top:${E.value.y}px;`)}}function Pn(t,n,o={}){const{window:r=ae,...a}=o;let s;const l=ft(()=>r&&"ResizeObserver"in r),i=()=>{s&&(s.disconnect(),s=void 0)},c=e.computed(()=>Array.isArray(t)?t.map(m=>ee(m)):[ee(t)]),d=e.watch(c,m=>{if(i(),l.value&&r){s=new ResizeObserver(n);for(const h of m)h&&s.observe(h,a)}},{immediate:!0,flush:"post",deep:!0}),p=()=>{i(),d()};return He(p),{isSupported:l,stop:p}}function Ce(t,n={}){const{reset:o=!0,windowResize:r=!0,windowScroll:a=!0,immediate:s=!0}=n,l=e.ref(0),i=e.ref(0),c=e.ref(0),d=e.ref(0),p=e.ref(0),m=e.ref(0),h=e.ref(0),g=e.ref(0);function u(){const f=ee(t);if(!f){o&&(l.value=0,i.value=0,c.value=0,d.value=0,p.value=0,m.value=0,h.value=0,g.value=0);return}const E=f.getBoundingClientRect();l.value=E.height,i.value=E.bottom,c.value=E.left,d.value=E.right,p.value=E.top,m.value=E.width,h.value=E.x,g.value=E.y}return Pn(t,u),e.watch(()=>ee(t),f=>!f&&u()),a&&_e("scroll",u,{capture:!0,passive:!0}),r&&_e("resize",u,{passive:!0}),Mn(()=>{s&&u()}),{height:l,bottom:i,left:c,right:d,top:p,width:m,x:h,y:g,update:u}}function ya(t,n={width:0,height:0},o={}){const{window:r=ae,box:a="content-box"}=o,s=e.computed(()=>{var c,d;return(d=(c=ee(t))==null?void 0:c.namespaceURI)==null?void 0:d.includes("svg")}),l=e.ref(n.width),i=e.ref(n.height);return Pn(t,([c])=>{const d=a==="border-box"?c.borderBoxSize:a==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(r&&s.value){const p=ee(t);if(p){const m=r.getComputedStyle(p);l.value=Number.parseFloat(m.width),i.value=Number.parseFloat(m.height)}}else if(d){const p=Array.isArray(d)?d:[d];l.value=p.reduce((m,{inlineSize:h})=>m+h,0),i.value=p.reduce((m,{blockSize:h})=>m+h,0)}else l.value=c.contentRect.width,i.value=c.contentRect.height},o),e.watch(()=>ee(t),c=>{l.value=c?n.width:0,i.value=c?n.height:0}),{width:l,height:i}}function ga(t,n,o={}){const{root:r,rootMargin:a="0px",threshold:s=.1,window:l=ae,immediate:i=!0}=o,c=ft(()=>l&&"IntersectionObserver"in l),d=e.computed(()=>{const u=X(t);return(Array.isArray(u)?u:[u]).map(ee).filter(da)});let p=je;const m=e.ref(i),h=c.value?e.watch(()=>[d.value,ee(r),m.value],([u,f])=>{if(p(),!m.value||!u.length)return;const E=new IntersectionObserver(n,{root:ee(f),rootMargin:a,threshold:s});u.forEach(x=>x&&E.observe(x)),p=()=>{E.disconnect(),p=je}},{immediate:i,flush:"post"}):je,g=()=>{p(),h(),m.value=!1};return He(g),{isSupported:c,isActive:m,pause(){p(),m.value=!1},resume(){m.value=!0},stop:g}}function mt(t,{window:n=ae,scrollTarget:o}={}){const r=e.ref(!1);return ga(t,([{isIntersecting:a}])=>{r.value=a},{root:o,window:n,threshold:0}),r}function ba(t={}){const{window:n=ae,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:a=!0,includeScrollbar:s=!0}=t,l=e.ref(o),i=e.ref(r),c=()=>{n&&(s?(l.value=n.innerWidth,i.value=n.innerHeight):(l.value=n.document.documentElement.clientWidth,i.value=n.document.documentElement.clientHeight))};if(c(),Mn(c),_e("resize",c,{passive:!0}),a){const d=ha("(orientation: portrait)");e.watch(d,()=>c())}return{width:l,height:i}}const _a={class:"search-content w-100"},wa={class:"ps-2 w-75"},Ea={class:"menu ps-2"},xa={class:"flex flex-row pt-1"},ka={class:"content-list overflow-x-hidden overflow-y-auto py-2",style:{height:"250px"}},va=["onClick"],Sa=e.createElementVNode("span",{class:"iconfont icon-play"},null,-1),Na={class:"ps-2"},ht=e.defineComponent({__name:"bar-search",props:{menus:{},fetchScene:{type:Function},fetchStyle:{type:Function},fetchData:{type:Function},sceneList:{},styleList:{},dataList:{}},emits:["submit"],setup(t,{emit:n}){const o=t,r=e.ref(),a=e.ref(""),s=e.ref(""),l=e.ref(""),i=e.ref(""),c=e.ref(o.dataList||[]),d=e.ref(o.sceneList||[]),p=e.ref(o.styleList||[]),m=mt(r);e.watch(m,f=>{f&&setTimeout(()=>{var E;(E=r.value)==null||E.focus()},100)}),e.onMounted(async()=>{c.value.length||await h(),d.value.length||(d.value=await o.fetchScene()),p.value.length||(p.value=await o.fetchStyle())});async function h(){c.value=await o.fetchData({word:a.value,menu:i.value,scene:s.value,style:l.value})}function g(f){i.value=f,h()}function u(f){n("submit",f)}return(f,E)=>(e.openBlock(),e.createElementBlock("div",_a,[e.createElementVNode("div",wa,[e.createVNode(e.unref(T.ElForm),{onSubmit:e.withModifiers(h,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(T.ElInput),{ref_key:"searchInputRef",ref:r,placeholder:"搜索",modelValue:a.value,"onUpdate:modelValue":E[0]||(E[0]=x=>a.value=x),"suffix-icon":e.unref(se.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),e.createElementVNode("div",Ea,[e.createVNode(e.unref(T.ElMenu),{mode:"horizontal","default-active":f.menus.length>0?f.menus[0].value:"",onSelect:E[1]||(E[1]=x=>g(x))},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.menus,(x,v)=>(e.openBlock(),e.createBlock(e.unref(T.ElMenuItem),{index:x.value,key:v},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(x.label),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),e.createElementVNode("div",xa,[e.createVNode(e.unref(T.ElSelect),{modelValue:s.value,"onUpdate:modelValue":E[2]||(E[2]=x=>s.value=x),onChange:h,class:"m-1",size:"default"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,x=>(e.openBlock(),e.createBlock(e.unref(T.ElOption),{key:x.value,label:x.label,value:x.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e.createVNode(e.unref(T.ElSelect),{modelValue:l.value,"onUpdate:modelValue":E[3]||(E[3]=x=>l.value=x),onChange:h,class:"m-1",size:"default"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,x=>(e.openBlock(),e.createBlock(e.unref(T.ElOption),{key:x.value,label:x.label,value:x.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e.createElementVNode("ul",ka,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(x,v)=>(e.openBlock(),e.createElementBlock("li",{onClick:b=>u(e.toRaw(x)),class:"content-list-item clickable ps-2 py-2",key:v},[Sa,e.createElementVNode("span",Na,e.toDisplayString(x.label),1)],8,va))),128))])]))}}),Wd="",Ca={},Va={class:"content"};function $a(t,n){return e.openBlock(),e.createElementBlock("div",Va,[e.renderSlot(t.$slots,"default",{},void 0,!0)])}const An=W(Ca,[["render",$a],["__scopeId","data-v-7beae5b9"]]),Ta={},Ra={class:"bar-wrapper-item"};function Da(t,n){return e.openBlock(),e.createElementBlock("div",Ra,[e.renderSlot(t.$slots,"default")])}const Oa=W(Ta,[["render",Da]]),Ba={class:"bar-wrapper-group"},Ia={class:"group-items"},La=e.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",Ba,[e.createElementVNode("div",Ia,[e.renderSlot(n.$slots,"default",{},void 0,!0)]),e.createElementVNode("div",{class:e.normalizeClass(["divider",[n.divider]])},null,2)]))}}),Gd="",we=W(La,[["__scopeId","data-v-be31f837"]]);function Ma(t,n){return`left:${t}px;top:${n}px`}function yt(t,n){const{width:o,height:r}=ya(t),{width:a,height:s}=ba(),l=e.computed(()=>({x:a.value-o.value,y:s.value-r.value}));return{style:e.computed(()=>{const c=n.value.x,d=n.value.y,p=c<5?5:c>l.value.x?l.value.x-5:c,m=d<5?5:d>l.value.y?l.value.y-5:d;return Ma(p,m)})}}var gt={exports:{}},Fn={exports:{}},Pa=void 0,Hn=function(t){return t!==Pa&&t!==null},Aa=Hn,Fa={object:!0,function:!0,undefined:!0},Ha=function(t){return Aa(t)?hasOwnProperty.call(Fa,typeof t):!1},ja=Ha,Ua=function(t){if(!ja(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},za=Ua,Wa=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!za(t)},Ga=Wa,qa=/^\s*class[\s{/}]/,Ya=Function.prototype.toString,Ka=function(t){return!(!Ga(t)||qa.test(Ya.call(t)))},Xa=function(){var t=Object.assign,n;return typeof t!="function"?!1:(n={foo:"raz"},t(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")},bt,jn;function Ja(){return jn||(jn=1,bt=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),bt}var Qa=function(){},Za=Qa(),_t=function(t){return t!==Za&&t!==null},wt,Un;function es(){if(Un)return wt;Un=1;var t=_t,n=Object.keys;return wt=function(o){return n(t(o)?Object(o):o)},wt}var Et,zn;function ts(){return zn||(zn=1,Et=Ja()()?Object.keys:es()),Et}var xt,Wn;function ns(){if(Wn)return xt;Wn=1;var t=_t;return xt=function(n){if(!t(n))throw new TypeError("Cannot use null or undefined");return n},xt}var kt,Gn;function os(){if(Gn)return kt;Gn=1;var t=ts(),n=ns(),o=Math.max;return kt=function(r,a){var s,l,i=o(arguments.length,2),c;for(r=Object(n(r)),c=function(d){try{r[d]=a[d]}catch(p){s||(s=p)}},l=1;l<i;++l)a=arguments[l],t(a).forEach(c);if(s!==void 0)throw s;return r},kt}var rs=Xa()?Object.assign:os(),as=_t,ss=Array.prototype.forEach,ls=Object.create,is=function(t,n){var o;for(o in t)n[o]=t[o]},cs=function(t){var n=ls(null);return ss.call(arguments,function(o){as(o)&&is(Object(o),n)}),n},vt="razdwatrzy",ds=function(){return typeof vt.contains!="function"?!1:vt.contains("dwa")===!0&&vt.contains("foo")===!1},St,qn;function us(){if(qn)return St;qn=1;var t=String.prototype.indexOf;return St=function(n){return t.call(this,n,arguments[1])>-1},St}var fs=ds()?String.prototype.contains:us(),Ue=Hn,Yn=Ka,Kn=rs,Xn=cs,Ve=fs,ps=Fn.exports=function(t,n){var o,r,a,s,l;return arguments.length<2||typeof t!="string"?(s=n,n=t,t=null):s=arguments[2],Ue(t)?(o=Ve.call(t,"c"),r=Ve.call(t,"e"),a=Ve.call(t,"w")):(o=a=!0,r=!1),l={value:n,configurable:o,enumerable:r,writable:a},s?Kn(Xn(s),l):l};ps.gs=function(t,n,o){var r,a,s,l;return typeof t!="string"?(s=o,o=n,n=t,t=null):s=arguments[3],Ue(n)?Yn(n)?Ue(o)?Yn(o)||(s=o,o=void 0):o=void 0:(s=n,n=o=void 0):n=void 0,Ue(t)?(r=Ve.call(t,"c"),a=Ve.call(t,"e")):(r=!0,a=!1),l={get:n,set:o,configurable:r,enumerable:a},s?Kn(Xn(s),l):l};var ms=Fn.exports,hs=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,n){var o=ms,r=hs,a=Function.prototype.apply,s=Function.prototype.call,l=Object.create,i=Object.defineProperty,c=Object.defineProperties,d=Object.prototype.hasOwnProperty,p={configurable:!0,enumerable:!1,writable:!0},m,h,g,u,f,E,x;m=function(v,b){var w;return r(b),d.call(this,"__ee__")?w=this.__ee__:(w=p.value=l(null),i(this,"__ee__",p),p.value=null),w[v]?typeof w[v]=="object"?w[v].push(b):w[v]=[w[v],b]:w[v]=b,this},h=function(v,b){var w,C;return r(b),C=this,m.call(this,v,w=function(){g.call(C,v,w),a.call(b,this,arguments)}),w.__eeOnceListener__=b,this},g=function(v,b){var w,C,V,_;if(r(b),!d.call(this,"__ee__"))return this;if(w=this.__ee__,!w[v])return this;if(C=w[v],typeof C=="object")for(_=0;V=C[_];++_)(V===b||V.__eeOnceListener__===b)&&(C.length===2?w[v]=C[_?0:1]:C.splice(_,1));else(C===b||C.__eeOnceListener__===b)&&delete w[v];return this},u=function(v){var b,w,C,V,_;if(d.call(this,"__ee__")&&(V=this.__ee__[v],!!V))if(typeof V=="object"){for(w=arguments.length,_=new Array(w-1),b=1;b<w;++b)_[b-1]=arguments[b];for(V=V.slice(),b=0;C=V[b];++b)a.call(C,this,_)}else switch(arguments.length){case 1:s.call(V,this);break;case 2:s.call(V,this,arguments[1]);break;case 3:s.call(V,this,arguments[1],arguments[2]);break;default:for(w=arguments.length,_=new Array(w-1),b=1;b<w;++b)_[b-1]=arguments[b];a.call(V,this,_)}},f={on:m,once:h,off:g,emit:u},E={on:o(m),once:o(h),off:o(g),emit:o(u)},x=c({},E),t.exports=n=function(v){return v==null?l(x):c(Object(v),E)},n.methods=f})(gt,gt.exports);var ys=gt.exports;const J=nt(ys)(),gs={class:"w-100 d-flex flex-row align-items-center"},Ee=e.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},initialValue:{}},emits:["update:visible","close"],setup(t,{expose:n,emit:o}){const r=t,a=e.ref(),s=e.ref(),l=e.ref(),{position:i}=pt(s,{initialValue:r.initialValue}),{style:c}=yt(a,i);function d(u){i.value=u}n({setPosition:d}),e.onMounted(()=>{J.on(q.VIEW_CLICK,p),document.addEventListener("keydown",g)}),e.onUnmounted(()=>{J.off(q.VIEW_CLICK,p),document.removeEventListener("keydown",g)});function p(u){m(u)&&h()}function m(u){const f=u.target;return!(!a.value||!l.value||l.value.contains(f)||a.value.contains(f))}function h(){o("update:visible",!1),o("close")}function g(u){u.code==="Escape"&&h()}return(u,f)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{ref_key:"referenceRef",ref:l,onMousedown:f[0]||(f[0]=e.withModifiers(()=>{},["prevent"]))},[e.renderSlot(u.$slots,"reference")],544),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{ref_key:"boxRef",ref:a,class:"demotestname card shadow brag-box user-select-none z-2",style:e.normalizeStyle([{position:"fixed"},e.unref(c)]),onMousedown:f[1]||(f[1]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",gs,[e.createElementVNode("div",{ref_key:"dragRef",ref:s,class:"w-100",style:{height:"40px",cursor:"move"}},null,512),e.createElementVNode("span",{onClick:h,class:"btn iconfont icon-close fs-5"})]),e.renderSlot(u.$slots,"default")],36),[[e.vShow,u.visible]])]))],64))}}),bs={install(t){t.component("BarButton",z),t.component("BarInput",ut),t.component("BarPopover",ca),t.component("BarSearch",ht),t.component("BarWrapper",An),t.component("BarWrapperItem",Oa),t.component("BarWrapperGroup",we),t.component("DragBox",Ee)}};function _s(t){return t.replaceAll(/[&]/gi,"&amp;").replaceAll(/[<]/gi,"&lt;").replaceAll(/[>]/gi,"&gt;")}function ws(t,n){return n?`<audio src="${t.src}">${n}</audio>`:`<audio src="${t.src}"/>`}function Es(t){return t.time?`<break time="${t.time}"/>`:t.strength?`<break strength="${t.strength}"/>`:"<break/>"}function xs(t,n){return t.level?`<emphasis level="${t.level}">${n}</emphasis>`:`<emphasis>${n}</emphasis>`}function ks(t,n){if(!t.style)return n;const o=t.role?` role="${t.role}"`:"",r=t.styledegree?` styledegree="${t.styledegree}"`:"";return`<mstts:express-as style="${t.style}"${o}${r}>${n}</mstts:express-as>`}function vs(t){if(!t.src)return"";const n=t.volume?` volume="${t.volume}"`:"",o=t.fadein?` fadein="${t.fadein}"`:"",r=t.fadeout?` fadeout="${t.fadeout}"`:"";return`<mstts:backgroundaudio src="${t.src}"${n}${o}${r}/>`}function Ss(t){return!t.attrType||!t.value?"":`<mstts:silence type="${t.attrType}" value="${t.value}"/>`}function Ns(t,n){return`<p>${n}</p>`}function Cs(t,n){const o=t.alphabet?`alphabet="${t.alphabet}"`:"";return`<phoneme ph="${t.ph}"${o}>${n}</phoneme>`}function Vs(t,n){if(!t.contour&&!t.pitch&&!t.range&&!t.rate&&!t.volume)return n;const o=t.contour?` contour="${t.contour}"`:"",r=t.pitch?` pitch="${t.pitch}"`:"",a=t.range?` range="${t.range}"`:"",s=t.volume?` volume="${t.volume}"`:"",l=t.rate?` rate="${t.rate}"`:"";return`<prosody${o}${r}${a}${s}${l}>${n}</prosody>`}function $s(t,n){const o=t.interpretAs?` interpret-as="${t.interpretAs}"`:"",r=t.format?` format="${t.format}"`:"",a=t.detail?` detail="${t.detail}"`:"";return`<say-as${o}${r}${a}>${n}</say-as>`}function Ts(t,n){return`<s>${n}</s>`}function Rs(t,n){return`<sub alias="${t.alias}">${n}</sub>`}function Ds(t,n){const o=t.effect?` effect="${t.effect}"`:"";return`<voice name="${t.name}${o}">${n}</voice>`}function Os(t,n){return`<speak version="${t.version}" xml:lang="${t.xmlLang}" xmlns="${t.xmlns}" xmlns:mstts="${t["xmlns:mstts"]}" xmlns:emo="${t["xmlns:emo"]}">${n}</speak>`}function Jn(t){if(y.SlateText.isText(t))return _s(t.text.trim());if(y.SlateElement.isElement(t)){const n=t.children.map(r=>Jn(r)).join("");switch(y.DomEditor.getNodeType(t)){case"paragraph":return`<p>${n}</p>`;case"ssml-speak":return Os(t,n);case"ssml-mstts:backgroundaudio":return vs(t);case"ssml-audio":return ws(t,n);case"ssml-break":return Es(t);case"ssml-emphasis":return xs(t,n);case"ssml-mstts:express-as":return ks(t,n);case"ssml-p":return Ns(t,n);case"ssml-phoneme":return Cs(t,n);case"ssml-prosody":return Vs(t,n);case"ssml-s":return Ts(t,n);case"ssml-say-as":return $s(t,n);case"ssml-sub":return Rs(t,n);case"ssml-voice":return Ds(t,n);case"ssml-mstts:silence":return Ss(t);default:return n}}return""}function Bs(t,n){const o={type:"ssml-voice",remark:"",name:n.name,children:[]},r=Qn(),a={type:"ssml-mstts:express-as",remark:"",style:n.style,role:n.role,children:[]},s=()=>({type:"ssml-prosody",remark:"",rate:n.rate,pitch:n.pitch,children:[]});o.children.push(...r),o.children.push(a);function l(){const c=s();a.children.push(c);function d(p){c.children.push(p)}return{prosody:c,pushNode:d}}let i;for(let c=0;c<n.children.length;c++){const d=n.children[c];if(!(y.SlateText.isText(d)&&!d.text.trim()))if(y.SlateText.isText(d)){i??(i=l()),i.pushNode(d);continue}else if(y.SlateEditor.isVoid(t,d)){i=void 0,a.children.push(d);continue}else{const p=y.DomEditor.findPath(t,d),[m]=y.SlateEditor.nodes(t,{at:p,mode:"lowest",voids:!1,match:h=>y.DomEditor.checkNodeType(h,"ssml-prosody")});if(m){i=void 0,a.children.push(d);continue}else i??(i=l()),i.pushNode(d)}}return o}function Qn(){return[{type:"ssml-mstts:silence",attrType:"comma-exact",value:"200ms",remark:"逗号静音",children:[]},{type:"ssml-mstts:silence",attrType:"semicolon-exact",value:"200ms",remark:"分号静音",children:[]},{type:"ssml-mstts:silence",attrType:"enumerationcomma-exact",value:"200ms",remark:"顿号静音",children:[]}]}function Is(){const{rootVoice:t,rootExpressAs:n}=ue(),o={...t,children:[]},r=Qn(),a={...n,children:[]};o.children.push(...r),o.children.push(a);function s(l){a.children.push(l)}return{voice:o,pushNode:s}}function Zn(t){const{rootProsody:n}=ue(),o={...n,children:[]};t(o);function r(a){o.children.push(a)}return{prosody:o,pushNode:r}}function Ls(){return{type:"ssml-break",time:"200ms",children:[{text:""}],remark:"paragraphBreak"}}function Ms(t){const n=t.children.filter(o=>y.DomEditor.checkNodeType(o,"paragraph")).filter(o=>!!y.SlateNode.string(o).trim()).map((o,r,a)=>{const l=o.children;return r<a.length-1?l.concat([Ls()]):l});return[].concat(...n)}function Ps(t){const n=Ms(t),o=[];let r,a;for(let s=0;s<n.length;s++){const l=n[s];if(!(y.SlateText.isText(l)&&!l.text.trim())){if(y.DomEditor.checkNodeType(l,"custom-management")){r&&(o.push(r.voice),r=void 0,a=void 0),o.push(Bs(t,l));continue}if(r??(r=Is()),y.SlateText.isText(l)){a??(a=Zn(r.pushNode)),a.pushNode(l);continue}else if(y.SlateEditor.isVoid(t,l)){a=void 0,r.pushNode(l);continue}else{const i=y.DomEditor.findPath(t,l),[c]=y.SlateEditor.nodes(t,{at:i,mode:"lowest",voids:!1,match:d=>y.DomEditor.checkNodeType(d,"ssml-prosody")});if(c){a=void 0,r.pushNode(l);continue}else{a??(a=Zn(r.pushNode)),a.pushNode(l);continue}}}}return r&&o.push(r.voice),o}function ze(){const{editor:t}=U();if(!t)throw Error("没有找到 editor 对象");const{rootSpeak:n,rootBackgroundaudio:o}=ue(),r={...n,children:[]},a={...o};return r.children.push(a,...Ps(t)),Jn(r)}const Yd="",As=t=>(e.pushScopeId("data-v-f485fb08"),t=t(),e.popScopeId(),t),Fs={class:"play-menu-icon d-flex justify-content-center align-items-center"},Hs={key:0,class:"fs-3 iconfont-moyin moyin-icon_play"},js={key:2,class:"iconfont icon-pause"},Us=As(()=>e.createElementVNode("div",{class:"fw-normal",style:{"font-size":"0.85rem"}},"24K高清音质",-1)),zs=e.defineComponent({__name:"play-menu",props:{disabled:{type:Boolean,default:!1}},setup(t){const n=Fe(),{audioPlayer:o}=n,r=o.playState,a=o.loadState,s=U(),{globalEditConfig:l}=s;async function i(){if(r.value==="playing"){o.pause();return}try{const c=ze(),d=await l.tryPlay.play(c);await o.load(d.src),o.play()}catch{o.pause()}}return(c,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["play-menu px-2 py-1",{disabled:c.disabled}]),onClick:d[0]||(d[0]=p=>!c.disabled&&i()),onMousedown:d[1]||(d[1]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",Fs,[e.unref(a)==="complete"&&e.unref(r)==="paused"?(e.openBlock(),e.createElementBlock("span",Hs)):e.unref(a)==="loading"?(e.openBlock(),e.createBlock(e.unref(T.ElIcon),{key:1,class:"is-loading"},{default:e.withCtx(()=>[e.createVNode(e.unref(se.Loading))]),_:1})):(e.openBlock(),e.createElementBlock("span",js))]),Us],34))}}),Kd="",eo=W(zs,[["__scopeId","data-v-f485fb08"]]);class Q{constructor(n){P(this,"editor");this.editor=n}getValue(){const{selection:n}=this.editor;return n==null?"":y.SlateEditor.string(this.editor,n)}isDisabled(){const{selection:n}=this.editor;return n==null?(this.editor.emit(I.ERROR,"未选中编辑器"),!0):!1}}class Ws extends Q{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(I.ERROR,"请框选一个中文字符"),!0;const o=this.getValue();return o.length!=1?(this.editor.emit(I.ERROR,"请框选一个中文字符"),!0):/^[\u4E00-\u9FA5]$/gi.test(o)?!1:(this.editor.emit(I.ERROR,"请框选一个中文字符"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-phoneme",alphabet:"sapi",ph:n.value,remark:n.label,children:[{text:o}]};this.editor.insertNode(r)}}const to=e.defineComponent({setup(){const{globalEditConfig:t}=U(),n=e.shallowRef(),o=e.ref([]),r=e.ref(!1);function a(){r.value||(r.value=!0)}function s(){r.value&&(r.value=!1)}async function l(i){var d;if(n.value??(n.value=new Ws(i)),(d=n.value)!=null&&d.isDisabled())return;const c=n.value.getValue();if(c?o.value=await t.pinyin.fetchData(c):o.value=[],o.value.length==0)return i.emit(I.ERROR,"选中的字符没有不是多音字");a()}return()=>e.createVNode(T.ElPopover,{visible:r.value,"onUpdate:visible":i=>r.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(z,{text:"多音字",icon:"speaker",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-auto",style:"max-height: 300px"},[o.value.map(({label:i,value:c})=>e.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),s()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class Gs extends Q{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isCollapsed(n)?(this.editor.emit(I.ERROR,"请框选要连读的词或句子"),!0):y.SlateEditor.string(this.editor,n).length<2:!0}exec(){if(this.isDisabled())return;const n=this.getValue();if(n==null)return;const o={type:"ssml-prosody",rate:"medium",remark:"连读",children:[{text:n}]};this.editor.insertNode(o)}}const no=e.defineComponent({setup(){const t=e.shallowRef();function n(o){t.value??(t.value=new Gs(o)),!t.value.isDisabled()&&t.value.exec()}return()=>e.createVNode(z,{text:"连读",icon:"continuous",onClick:n},null)}}),qs=[{label:"重音",value:"z"},{label:"拖音",value:"t"},{label:"重音+拖音",value:"z+t"}],Ys={z:{pitch:"x-high",rate:void 0},t:{pitch:void 0,rate:"medium"},"z+t":{pitch:"x-high",rate:"medium"}};class Ks extends Q{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return!n||n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(I.ERROR,"请框选词或句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const{pitch:r,rate:a}=Ys[n.value],s={type:"ssml-prosody",remark:n.label,pitch:r,rate:a,children:[{text:o}]};this.editor.insertNode(s)}}const oo=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function a(s){t.value??(t.value=new Ks(s)),!t.value.isDisabled()&&o()}return()=>e.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(z,{text:"重音",icon:"read",onClick:a},null),default:()=>e.createVNode("div",{class:"d-flex flex-column",onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[qs.map(({label:s,value:l})=>e.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:s,value:l}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class Xs extends Q{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(I.ERROR,"请框选纯数字"),!0;const o=y.SlateEditor.string(this.editor,n);return o.length<=0?!0:Number.isNaN(Number(o))?(this.editor.emit(I.ERROR,"请框选纯数字"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-say-as",interpretAs:n.value,remark:n.label,children:[{text:o}]};this.editor.insertNode(r)}}const Js=[{value:"cardinal",label:"读数值"},{value:"characters",label:"读数字"},{value:"telephone",label:"读手机号"}],ro=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value=!n.value}function r(a){t.value??(t.value=new Xs(a)),!t.value.isDisabled()&&o()}return()=>e.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(z,{text:"数字符号",icon:"digital",onClick:r},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Js.map(({label:a,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:a,value:s}),o()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Qs extends Q{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(I.ERROR,"请框选要设置别名的词或句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-sub",remark:n.value,alias:n.value,children:[{text:o}]};this.editor.insertNode(r)}}const ao=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(),o=e.ref(!1);function r(){o.value||(o.value=!0)}function a(){o.value&&(o.value=!1)}async function s(i){t.value??(t.value=new Qs(i)),!t.value.isDisabled()&&(r(),n.value.focus())}function l(i){var c;a(),i&&((c=t.value)==null||c.exec({value:i,label:i}))}return()=>e.createVNode(T.ElPopover,{visible:o.value,"onUpdate:visible":i=>o.value=i,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>e.createVNode(z,{text:"别名",icon:"alias",onClick:s},null),default:()=>e.createVNode(ut,{ref:n,onSubmit:l},null)})}});class Zs extends Q{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(I.ERROR,"请框选英文单词"),!0;const o=y.SlateEditor.string(this.editor,n);return o.length<=0?!0:/^[A-Za-z]+$/gi.test(o)?!1:(this.editor.emit(I.ERROR,"请框选英文单词"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-phoneme",alphabet:"ipa",ph:n.value,remark:n.label,children:[{text:o}]};this.editor.insertNode(r)}}const so=e.defineComponent({setup(){const{globalEditConfig:t}=U(),n=e.shallowRef(),o=e.ref([]),r=e.ref(!1);function a(){r.value||(r.value=!0)}function s(){r.value&&(r.value=!1)}async function l(i){if(n.value??(n.value=new Zs(i)),Ir(i),n.value.isDisabled())return;const c=n.value.getValue();if(c){if(o.value=await t.english.fetchData(c),o.value.length<=0)return i.emit(I.ERROR,"找不到单词的音标");a()}}return()=>e.createVNode(T.ElPopover,{visible:r.value,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(z,{text:"音标",icon:"english",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[o.value.map(({label:i,value:c})=>e.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),s()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class el extends Q{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(I.ERROR,"请框选要变速的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-prosody",remark:n.label,rate:n.value,children:[{text:o}]};this.editor.insertNode(r)}}function O(t){return`${((t-1)*100).toFixed(0)}%`}const tl=[{value:O(.5),label:"0.5x"},{value:O(.55),label:"0.55x"},{value:O(.6),label:"0.6x"},{value:O(.65),label:"0.65x"},{value:O(.7),label:"0.7x"},{value:O(.75),label:"0.75x"},{value:O(.8),label:"0.8x"},{value:O(.85),label:"0.85x"},{value:O(.9),label:"0.9x"},{value:O(.95),label:"0.95x"},{value:O(1),label:"1x"},{value:O(1.05),label:"1.05x"},{value:O(1.1),label:"1.1x"},{value:O(1.15),label:"1.15x"},{value:O(1.2),label:"1.2x"},{value:O(1.25),label:"1.25x"},{value:O(1.3),label:"1.3x"},{value:O(1.35),label:"1.35x"},{value:O(1.4),label:"1.4x"},{value:O(1.45),label:"1.45x"},{value:O(1.5),label:"1.5x"},{value:O(1.55),label:"1.55x"},{value:O(1.6),label:"1.6x"},{value:O(1.65),label:"1.65x"},{value:O(1.7),label:"1.7x"},{value:O(1.75),label:"1.75x"},{value:O(1.8),label:"1.8x"},{value:O(1.85),label:"1.85x"},{value:O(1.9),label:"1.9x"},{value:O(1.95),label:"1.95x"},{value:O(2),label:"2x"}],lo=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}async function a(s){t.value??(t.value=new el(s)),!t.value.isDisabled()&&o()}return()=>e.createVNode(T.ElPopover,{style:{padding:"0px"},visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(z,{text:"局部变速",icon:"changespeed",onClick:a},null),default:()=>e.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[tl.map(({label:s,value:l})=>e.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{var i;(i=t.value)==null||i.exec({label:s,value:l}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class nl extends Q{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(I.ERROR,"不能框选文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o={type:"ssml-break",strength:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(o)}}const ol=[{value:"weak",label:"短"},{value:"medium",label:"中"},{value:"strong",label:"长"}],io=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function a(s){t.value??(t.value=new nl(s)),!t.value.isDisabled()&&o()}return()=>e.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(z,{text:"停顿调节",icon:"rhythm",onClick:a},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[ol.map(({label:s,value:l})=>e.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:s,value:l}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class rl extends Q{constructor(n){super(n)}restoreSelection(){this.editor.restoreSelection()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(I.ERROR,"不能框选文字"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled()||this.getValue()==null)return;const r={type:"ssml-audio",src:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(r)}}const co=e.defineComponent({__name:"special-menu",setup(t){const n=e.ref(),o=e.ref(),r=e.shallowRef(),{globalEditConfig:a}=U(),{special:s}=a,l=e.ref(!1),{x:i,y:c,height:d}=Ce(o),p=h=>{r.value??(r.value=new rl(h)),!r.value.isDisabled()&&(n.value.setPosition({x:i.value-200,y:c.value+d.value}),l.value=!0)};function m(h){var g;(g=r.value)==null||g.restoreSelection(),r.value&&!r.value.isDisabled()&&r.value.exec(h),l.value=!1}return(h,g)=>(e.openBlock(),e.createBlock(e.unref(Ee),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":g[0]||(g[0]=u=>l.value=u)},{reference:e.withCtx(()=>[e.createVNode(e.unref(z),{ref_key:"menuRef",ref:o,text:"音效",icon:"special",onClick:p},null,512)]),default:e.withCtx(()=>[e.createVNode(e.unref(ht),{menus:e.unref(s).menus,fetchScene:e.unref(s).fetchScene,fetchStyle:e.unref(s).fetchStyle,fetchData:e.unref(s).fetchData,onSubmit:m},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}});class al extends Q{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(I.ERROR,"不能框选文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o={type:"ssml-break",time:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(o)}}const sl=[{value:"150ms",label:"150ms"},{value:"200ms",label:"200ms"},{value:"300ms",label:"300ms"},{value:"400ms",label:"400ms"},{value:"500ms",label:"500ms"},{value:"600ms",label:"600ms"}],uo=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1),o=e.ref();function r(){n.value||(n.value=!0)}function a(){n.value&&(n.value=!1)}function s(i){t.value??(t.value=new al(i)),!t.value.isDisabled()&&(r(),o.value.focus())}function l(i){var c;a(),i&&((c=t.value)==null||c.exec({value:i,label:i}))}return()=>e.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":i=>n.value=i,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>e.createVNode(z,{text:"插入静音",icon:"mute",onClick:s},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[sl.map(({value:i,label:c})=>e.createVNode("div",{key:i,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>l(i),onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[c])),e.createVNode(ut,{type:"text",ref:o,onSubmit:l},null)])})}}),fo=e.defineComponent({__name:"bgm-menu",setup(t){const n=e.ref(),o=e.ref(),r=e.shallowRef(),{globalEditConfig:a}=U(),{bgm:s}=a,l=e.ref(!1),{x:i,y:c,height:d}=Ce(o),p=async h=>{const g={x:i.value-300,y:c.value+d.value};r.value=h,n.value.setPosition(g),l.value=!0};function m(h){const{rootBackgroundaudio:g}=ue();g.src=h.value,g.remark=h.label,l.value=!1}return(h,g)=>(e.openBlock(),e.createBlock(e.unref(Ee),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":g[0]||(g[0]=u=>l.value=u)},{reference:e.withCtx(()=>[e.createVNode(e.unref(z),{ref_key:"menuRef",ref:o,text:"配乐",icon:"bgm",onClick:p},null,512)]),default:e.withCtx(()=>[e.createVNode(e.unref(ht),{menus:e.unref(s).menus,fetchScene:e.unref(s).fetchScene,fetchStyle:e.unref(s).fetchStyle,fetchData:e.unref(s).fetchData,onSubmit:m},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}}),po=e.defineComponent({__name:"sensitive-menu",setup(t){const n=e.ref(),o=e.ref(),r=e.shallowRef(),a=e.ref(!1),{x:s,y:l,height:i}=Ce(o),c=d=>{r.value=d,n.value.setPosition({x:s.value-200,y:l.value+i.value}),a.value=!0};return(d,p)=>(e.openBlock(),e.createBlock(e.unref(Ee),{ref_key:"dragRef",ref:n,visible:a.value,"onUpdate:visible":p[0]||(p[0]=m=>a.value=m)},{reference:e.withCtx(()=>[e.createVNode(e.unref(z),{ref_key:"menuRef",ref:o,text:"敏感词",icon:"sensitive",onClick:c},null,512)]),default:e.withCtx(()=>[e.createVNode(po)]),_:1},8,["visible"]))}}),Xd="",ll={class:"select-list",style:{width:"120px"}},il={class:"text-center d-flex flex-column justify-content-center fs-6",style:{height:"60px"}},cl=["onClick"],dl=e.defineComponent({__name:"select-list",props:{modelValue:{},dataList:{}},emits:["update:modelValue"],setup(t,{expose:n,emit:o}){const r=t,a=e.ref();function s(i){o("update:modelValue",i.value)}function l(){var i;if(a.value){for(let c=0;c<r.dataList.length;c++)if(r.dataList[c].value===r.modelValue){(i=a.value.children[c])==null||i.scrollIntoView({behavior:"smooth"});return}}}return n({scrollIntoViewTheItem:l}),(i,c)=>(e.openBlock(),e.createElementBlock("div",ll,[e.createElementVNode("div",il,[e.renderSlot(i.$slots,"default",{},void 0,!0)]),e.createElementVNode("ul",{ref_key:"listRef",ref:a,class:"text-center w-100 border-start border-top border-bottom border-secondary-subtle overflow-y-auto overflow-x-hidden scrollbar-none",style:{height:"180px"}},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.dataList,(d,p)=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass(["clickable select-item py-1",{activate:d.value===i.modelValue}]),key:p,onClick:m=>s(d)},e.toDisplayString(d.label),11,cl))),128))],512)]))}}),Jd="",xe=W(dl,[["__scopeId","data-v-e0f0259e"]]),ul={style:{width:"600px",height:"360px"},class:"position-relative px-2 pb-2"},fl={class:"position-relative"},pl={class:"position-absolute top-0 end-0"},ml=e.createElementVNode("li",null,[e.createElementVNode("span",{class:"text-nowrap"},"近期使用:")],-1),hl=e.createElementVNode("span",{class:"my-3"},"类型",-1),yl=e.createElementVNode("span",{class:"my-3"},"配音师",-1),gl=e.createElementVNode("span",{class:"my-3"},"角色",-1),bl=e.createElementVNode("span",{class:"my-3"},"风格",-1),_l=e.createElementVNode("span",{class:"my-3"},"语速",-1),wl=e.createElementVNode("span",{class:"my-3"},"语调",-1),El={class:"position-absolute bottom-0 end-0 d-flex flex-row justify-content-end me-4 mb-3"},xl=e.defineComponent({__name:"management-content",emits:["submit"],setup(t,{emit:n}){const{globalEditConfig:o}=U(),{tryPlay:r}=o,a=e.ref(!1),s=e.ref(""),l=In(),{contentData:i}=Jt(l),c=e.shallowRef([]),d=e.ref([{label:"全部类型",value:""},...r.category]),p=e.ref([]),m=e.ref([]),h=e.ref([]),g=e.ref(ta()),u=e.ref(na());e.onMounted(async()=>{i.value.category=d.value[0].value,await E()});async function f(b){i.value.category=b,await E()}async function E(){const b=await r.fetchData({...Ae(),...i.value});c.value=b,p.value=b.map(w=>({label:w.displayName,value:w.name})),b.length>0&&(m.value=b[0].roles,h.value=b[0].styles,i.value.name=b[0].name),m.value.length>0&&(i.value.role=m.value[0].value),h.value.length>0&&(i.value.style=h.value[0].value)}function x(b){const w=c.value.find(C=>C.name===b);w&&(m.value=w.roles,h.value=w.styles,m.value.length>0&&(i.value.role=m.value[0].value),h.value.length>0&&(i.value.style=h.value[0].value))}function v(){var D,L,S,N;const b=((D=p.value.find($=>$.value===i.value.name))==null?void 0:D.label)||"",w=((L=m.value.find($=>$.value===i.value.role))==null?void 0:L.label)||"",C=((S=h.value.find($=>$.value===i.value.style))==null?void 0:S.label)||"",V=((N=g.value.find($=>$.value===i.value.speed))==null?void 0:N.label)||"",_={category:i.value.category,name:i.value.name,label:`${b}|${w}|${C}|${V}`,value:i.value.name,role:i.value.role,style:i.value.style,speed:ra(Number(i.value.speed)),pitch:oa(Number(i.value.pitch))};n("submit",_)}return(b,w)=>(e.openBlock(),e.createElementBlock("div",ul,[e.createVNode(e.unref(T.ElForm),{onSubmit:e.withModifiers(E,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(T.ElInput),{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=C=>s.value=C),placeholder:"请输入名称快速查找配音师"},null,8,["modelValue"])]),_:1},8,["onSubmit"]),e.createElementVNode("div",fl,[e.createElementVNode("div",pl,[e.createVNode(e.unref(T.ElButton),{size:"small",icon:e.unref(se.More),onClick:w[1]||(w[1]=()=>a.value=!a.value)},null,8,["icon"])]),e.createElementVNode("ul",{class:e.normalizeClass(["d-flex flex-row row-gap-1 column-gap-2 overflow-x-hidden",{"flex-wrap":a.value}])},[ml,e.createElementVNode("li",null,[e.createVNode(e.unref(T.ElTag),{type:"info",closable:""},{default:e.withCtx(()=>[e.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),e.createElementVNode("li",null,[e.createVNode(e.unref(T.ElTag),{type:"info",closable:""},{default:e.withCtx(()=>[e.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),e.createElementVNode("li",null,[e.createVNode(e.unref(T.ElTag),{type:"info",closable:""},{default:e.withCtx(()=>[e.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),e.createElementVNode("li",null,[e.createVNode(e.unref(T.ElTag),{type:"info",closable:""},{default:e.withCtx(()=>[e.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),e.createElementVNode("li",null,[e.createVNode(e.unref(T.ElTag),{type:"info",closable:""},{default:e.withCtx(()=>[e.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),e.createElementVNode("li",null,[e.createVNode(e.unref(T.ElTag),{type:"info",closable:""},{default:e.withCtx(()=>[e.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),e.createElementVNode("li",null,[e.createVNode(e.unref(T.ElTag),{type:"info",closable:""},{default:e.withCtx(()=>[e.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})])],2),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass({"d-flex flex-row":!a.value})},[e.createVNode(xe,{"onUpdate:modelValue":[f,w[2]||(w[2]=C=>e.unref(i).category=C)],modelValue:e.unref(i).category,dataList:d.value},{default:e.withCtx(()=>[hl]),_:1},8,["modelValue","dataList"]),e.createVNode(xe,{"onUpdate:modelValue":[x,w[3]||(w[3]=C=>e.unref(i).name=C)],modelValue:e.unref(i).name,dataList:p.value},{default:e.withCtx(()=>[yl]),_:1},8,["modelValue","dataList"]),e.createVNode(xe,{modelValue:e.unref(i).role,"onUpdate:modelValue":w[4]||(w[4]=C=>e.unref(i).role=C),dataList:m.value},{default:e.withCtx(()=>[gl]),_:1},8,["modelValue","dataList"]),e.createVNode(xe,{modelValue:e.unref(i).style,"onUpdate:modelValue":w[5]||(w[5]=C=>e.unref(i).style=C),dataList:h.value},{default:e.withCtx(()=>[bl]),_:1},8,["modelValue","dataList"]),e.createVNode(xe,{modelValue:e.unref(i).speed,"onUpdate:modelValue":w[6]||(w[6]=C=>e.unref(i).speed=C),dataList:g.value},{default:e.withCtx(()=>[_l]),_:1},8,["modelValue","dataList"]),e.createVNode(xe,{modelValue:e.unref(i).pitch,"onUpdate:modelValue":w[7]||(w[7]=C=>e.unref(i).pitch=C),dataList:u.value},{default:e.withCtx(()=>[wl]),_:1},8,["modelValue","dataList"])],2),[[e.vShow,!a.value]])]),e.createElementVNode("div",El,[e.withDirectives(e.createVNode(e.unref(T.ElButton),{onClick:v,type:"primary"},{default:e.withCtx(()=>[e.createTextVNode("确定")]),_:1},512),[[e.vShow,!a.value]]),e.withDirectives(e.createVNode(e.unref(T.ElButton),{type:"primary"},{default:e.withCtx(()=>[e.createTextVNode("全部清空")]),_:1},512),[[e.vShow,a.value]])])]))}});class mo extends Q{constructor(o){super(o);P(this,"contentData")}isDisabled(){if(super.isDisabled())return!0;const{selection:o}=this.editor;if(o==null)return!0;if(y.DomEditor.getSelectedNodeByType(this.editor,"custom-management"))return!1;if(y.SlateRange.isCollapsed(o))return this.editor.emit(I.ERROR,"请框选句子"),!0;const[r]=y.SlateEditor.node(this.editor,o),a=this.editor.getParentNode(r);return!a||!y.DomEditor.checkNodeType(a,"paragraph")?(this.editor.emit(I.ERROR,"多人配音需要在最外层使用"),!0):!1}exec(o){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const a=y.DomEditor.getSelectedNodeByType(this.editor,"custom-management");if(a)y.SlateTransforms.setNodes(this.editor,{custom:{contentData:this.contentData||{}},remark:o.label,name:o.value,role:o.role,style:o.style,rate:o.speed,pitch:o.pitch},{at:y.DomEditor.findPath(this.editor,a)});else{const s={type:"custom-management",custom:{contentData:this.contentData||{}},remark:o.label,name:o.value,role:o.role,style:o.style,rate:o.speed,pitch:o.pitch,children:[{text:r}]};this.editor.insertNode(s)}}}const ho=e.defineComponent({__name:"management-menu",setup(t){const n=e.ref(),o=e.ref(),r=e.ref(!1),a=e.shallowRef(),s=In(),{contentData:l}=Jt(s),{x:i,y:c,height:d}=Ce(o);e.onMounted(()=>{J.on(q.EDITOR_CREATED,u=>{u.on(I.SSML_ELEMENT_CLICK,(f,E)=>{var x;if(E.type==="custom-management"){a.value??(a.value=new mo(f));const b=((x=E.custom)==null?void 0:x.contentData)||{};b&&(l.value.category=b.category,l.value.name=b.name,l.value.pitch=b.pitch,l.value.role=b.role,l.value.speed=b.speed,l.value.style=b.style),setTimeout(()=>{p()},200)}})})});function p(){var f;const u={x:i.value-200,y:c.value+d.value};(f=n.value)==null||f.setPosition(u),r.value=!0}function m(){r.value=!1}function h(u){a.value??(a.value=new mo(u)),!a.value.isDisabled()&&p()}function g(u){var f;a.value&&!a.value.isDisabled()&&(a.value.contentData={...l.value},(f=a.value)==null||f.exec(u)),m()}return(u,f)=>(e.openBlock(),e.createBlock(e.unref(Ee),{ref_key:"dragRef",ref:n,visible:r.value,"onUpdate:visible":f[0]||(f[0]=E=>r.value=E)},{reference:e.withCtx(()=>[e.createVNode(e.unref(z),{ref_key:"menuRef",ref:o,text:"多人配音",icon:"management",onClick:h},null,512)]),default:e.withCtx(()=>[e.createVNode(xl,{onSubmit:g})]),_:1},8,["visible"]))}}),kl={class:"speaker-head"},vl=["src"],Sl={class:"speaker-name"},Nl=e.defineComponent({__name:"speaker-item",props:{label:{},value:{},avatar:{},activated:{type:Boolean}},emits:["click"],setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",{class:"speaker-item",onClick:o[0]||(o[0]=r=>n.$emit("click",n.value||""))},[e.createElementVNode("div",kl,[e.createElementVNode("img",{src:n.avatar||e.unref(ye)(),class:e.normalizeClass([{"border border-warning":n.activated},"rounded-circle"]),style:{height:"40px"}},null,10,vl)]),e.createElementVNode("div",Sl,e.toDisplayString(n.label),1)]))}}),Qd="",Cl=W(Nl,[["__scopeId","data-v-b043c1a6"]]);class Vl{constructor(){P(this,"mediaRecorder",null);P(this,"isRecording",e.ref(!1))}get recorderState(){return e.computed(()=>this.isRecording.value?"recording":"paused")}async start(n){if(navigator.mediaDevices.getUserMedia){const o=[];try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new MediaRecorder(r);return this.mediaRecorder=a,new Promise((s,l)=>{a.ondataavailable=i=>{n.isCancellationRequested()?(a.stop(),this.isRecording.value=!1,n.throwIfRequested()):o.push(i.data)},a.onstart=()=>{this.isRecording.value=!0},a.onpause=()=>{this.isRecording.value=!1},a.onstop=()=>{this.isRecording.value=!1;const i=new Blob(o,{type:"audio/wav"});s(i)},a.onerror=i=>{this.isRecording.value=!1,l(i)},n.throwIfRequested(),a.start()})}catch(r){throw console.error(r),new Error("授权失败！",{cause:r})}}throw Error("浏览器不支持 getUserMedia")}stop(){this.mediaRecorder&&this.mediaRecorder.stop()}}const $l={class:"d-flex flex-row justify-content-between border rounded-pill border-secondary my-3 py-1 px-2"},Tl={class:"text-secondary d-flex flex-row align-items-center",style:{"font-size":"0.5rem"}},Rl={key:0,class:"iconfont icon-pause"},Dl={key:1,class:"iconfont icon-play"},Ol=[e.createElementVNode("span",{class:"iconfont icon-delete"},null,-1)],Bl={key:1,style:{"font-size":"0.5rem"}},Il=e.createElementVNode("p",null,"选择需要转换的配音师",-1),Ll={class:"speakers-container border rounded d-flex flex-row flex-wrap row-gap-1 column-gap-2 overflow-y-auto overflow-x-hidden",style:{height:"150px"}},Ml=["disabled"],Pl=e.defineComponent({__name:"audio-upload",emits:["submit"],setup(t,{expose:n,emit:o}){const{globalEditConfig:r}=U(),{audioUpload:a,transfer:s,fetchSpeaker:l,timeoutMilliseconds:i}=r.conversion,c=e.ref(),d=e.ref(),p=e.ref(),m=e.ref(!0),h=e.ref([]),g=e.ref(),u=e.shallowRef(),f=e.shallowRef(),E=new Bn,{playState:x}=E;let v;const b=new Vl,w=new Tn("audio/*"),C=new Rn(60),{state:V}=C,{recorderState:_}=b,D=mt(c),L=e.inject("reopen");e.watch(D,F=>{F||S()}),e.onMounted(async()=>{h.value=await l()}),e.watch(D,F=>{F||(m.value=!0,v==null||v.cancel())}),n({openInputFile:We});function S(){m.value=!0,N()}function N(){E.pause(),d.value=void 0,p.value=void 0,g.value=void 0,u.value=void 0,f.value=void 0,v==null||v.cancel()}function $(){b.stop(),C.stop()}async function M(){v=new dt(6e4),C.start();try{v.startTimeout(),u.value=await b.start(v.token)}catch(F){J.emit(q.ERROR,`${F}`,F)}finally{v.cancel(),C.stop()}}function te(){if(x.value==="playing")E.pause();else if(u.value){const F=window.URL.createObjectURL(u.value);E.load(F),E.play()}else if(f.value){const F=window.URL.createObjectURL(f.value);E.load(F),E.play()}}async function We(){try{return f.value=await w.open(),m.value=!1,!0}catch{return!1}}async function Tt(){try{if(v=new dt(i),m.value&&u.value)v.startTimeout(),d.value=await a(u.value,v.token);else if(!m.value&&f.value)v.startTimeout(),d.value=await a(f.value,v.token);else throw new Error("请选则文件或实时录音")}catch(F){J.emit(q.ERROR,`${F}`,F)}}async function fe(F){try{d.value?(g.value=F,p.value=await s({audioId:d.value.id,speakerId:F.id})):J.emit(q.ERROR,"请先上传音频文件")}catch(Rt){J.emit(q.ERROR,`${Rt}`,Rt)}}function G(){p.value&&g.value&&(o("submit",{label:g.value.displayName,value:p.value.src}),S())}function Nc(){v==null||v.cancel(),L==null||L()}return(F,Rt)=>{var wo,Eo;return e.openBlock(),e.createElementBlock("div",{class:"audio-upload",ref_key:"boxRef",ref:c},[e.createElementVNode("div",$l,[e.createElementVNode("div",Tl,[u.value||f.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:te,class:"btn btn-sm rounded-pill"},[e.unref(x)==="playing"||e.unref(_)==="recording"?(e.openBlock(),e.createElementBlock("span",Rl)):(e.openBlock(),e.createElementBlock("span",Dl))])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(((wo=f.value)==null?void 0:wo.name)||((Eo=u.value)==null?void 0:Eo.name)),1)]),e.createElementVNode("div",null,[!d.value&&(u.value||f.value)?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:N,class:"btn btn-sm rounded-pill"},Ol)):e.createCommentVNode("",!0),d.value?(e.openBlock(),e.createElementBlock("span",Bl,"已上传")):e.createCommentVNode("",!0),m.value&&!u.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.unref(_)==="recording"?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:$,class:"btn btn-primary btn-sm rounded-pill"}," 结束录音("+e.toDisplayString(e.unref(V))+")s ",1)):(e.openBlock(),e.createElementBlock("button",{key:1,onClick:M,class:"btn btn-primary btn-sm rounded-pill"}," 开始录音 "))],64)):e.createCommentVNode("",!0),!m.value&&!f.value?(e.openBlock(),e.createElementBlock("button",{key:3,onClick:We,class:"btn btn-primary btn-sm rounded-pill"}," 选择文件 ")):e.createCommentVNode("",!0),d.value?(e.openBlock(),e.createElementBlock("button",{key:4,onClick:Nc,class:"btn btn-primary btn-sm rounded-pill"}," 重传音频 ")):e.createCommentVNode("",!0),!d.value&&(f.value||u.value)?(e.openBlock(),e.createElementBlock("button",{key:5,onClick:Tt,class:"btn btn-primary btn-sm rounded-pill"}," 上传音频 ")):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[Il,e.createElementVNode("div",Ll,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(Ge,Cc)=>{var xo;return e.openBlock(),e.createBlock(Cl,{onClick:fu=>fe(Ge),key:Cc,label:Ge.displayName,avatar:Ge.avatar,activated:Ge.name===((xo=g.value)==null?void 0:xo.name)},null,8,["onClick","label","avatar","activated"])}),128))])]),e.createElementVNode("button",{class:"btn btn-primary mt-1",onClick:G,disabled:!p.value}," 完成录音并上传完成后，可选择配音师转换 ",8,Ml)],512)}}}),Al={class:"fw-bold",style:{"font-size":"0.5rem"}},Fl=e.createElementVNode("p",{class:"text-start text-danger"},"请在安静的环境中进行录音，以需要转换的风格，读出以下文案",-1),Hl={class:"border border-secondary rounded p-2 w-100",style:{height:"100px"}},jl={class:"mt-2"},Ul=e.createElementVNode("p",{class:"mt-2 text-secondary",style:{"font-size":"0.5rem"}}," 录音内容需要和滑选一致，音频限制60秒，滑选文案限制60个字 ",-1),zl=e.defineComponent({__name:"conversion-content",props:{text:{}},emits:["submit"],setup(t){const n=e.ref(),o=e.ref(),r=e.ref(!0),a=e.ref(!1),s=mt(n);e.provide("reopen",()=>{r.value=!0,a.value=!1}),e.watch(s,c=>{c||(r.value=!0,a.value=!1)});function l(){r.value=!0,a.value=!0}async function i(){var c;await((c=o.value)==null?void 0:c.openInputFile())&&(r.value=!1,a.value=!0)}return(c,d)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:n,class:"px-2 py-1",style:{width:"410px"}},[e.withDirectives(e.createElementVNode("section",Al,[Fl,e.createElementVNode("div",Hl,e.toDisplayString(c.text),1)],512),[[e.vShow,r.value]]),e.withDirectives(e.createElementVNode("section",jl,[e.createElementVNode("div",{class:"w-100 d-flex flex-column row-gap-1"},[e.createElementVNode("button",{onClick:l,class:"btn btn-success"},"实时录音"),e.createElementVNode("button",{onClick:i,class:"btn btn-primary"},"上传录音")]),Ul],512),[[e.vShow,!a.value]]),e.withDirectives(e.createElementVNode("section",null,[e.createVNode(Pl,{ref_key:"audioUploadRef",ref:o,onSubmit:d[0]||(d[0]=p=>c.$emit("submit",p))},null,512)],512),[[e.vShow,a.value]])],512))}});class Wl extends Q{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(I.ERROR,"请框选要变音的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-audio",remark:n.label,src:n.value,children:[{text:o}]};this.editor.insertNode(r)}}const yo=e.defineComponent({__name:"conversion-menu",setup(t){const n=e.ref(),o=e.ref(),r=e.shallowRef(),a=e.shallowRef(),s=e.ref(!1),l=e.ref(""),{x:i,y:c,height:d}=Ce(o),p=h=>{if(a.value??(a.value=new Wl(h)),a.value.isDisabled())return;l.value=a.value.getValue();const g={x:i.value-200,y:c.value+d.value};r.value=h,n.value.setPosition(g),s.value=!0};function m(h){var g;(g=a.value)==null||g.exec(h),s.value=!1}return(h,g)=>(e.openBlock(),e.createBlock(e.unref(Ee),{ref_key:"dragRef",ref:n,visible:s.value,"onUpdate:visible":g[0]||(g[0]=u=>s.value=u)},{reference:e.withCtx(()=>[e.createVNode(e.unref(z),{ref_key:"menuRef",ref:o,text:"局部变音",icon:"conversion",onClick:p},null,512)]),default:e.withCtx(()=>[e.createVNode(zl,{text:l.value,onSubmit:m},null,8,["text"])]),_:1},8,["visible"]))}}),Gl={class:"anchor-avatar d-flex flex-column justify-content-center align-items-center"},ql={class:"position-relative"},Yl=["src"],Kl={key:0,class:"iconfont icon-play1"},Xl={key:1,class:"iconfont icon-pause1"},Jl={class:"anchor-avatar-name text-white"},Ql=e.defineComponent({__name:"try-play-circle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:n}){const o=e.ref(),r=e.ref(),a=e.ref(0),s=e.ref(0),l=Fe(),{globalEditConfig:i}=U(),{audioPlayer:c}=l,d=c.playState,{position:p}=pt(o,{initialValue:{x:window.innerWidth-15,y:window.innerHeight/2-15},onStart:(x,v)=>u(v.clientX,v.clientY)?!1:void 0}),{style:m}=yt(o,p);function h(x){if(u(x.clientX,x.clientY))return f(x)?E():n("update:visible",!1)}function g(x){a.value=x.clientX,s.value=x.clientY}function u(x,v){return x>a.value-10&&x<a.value+10&&v>s.value-10&&v<s.value+10}function f(x){var b;const v=x.target;return((b=r.value)==null?void 0:b.contains(v))||!1}async function E(){if(d.value==="playing")c.pause();else try{const x=ze(),v=await i.tryPlay.play(x);c.load(v.src),c.play()}catch{c.pause()}}return(x,v)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:o,class:"try-play-circel user-select-none rounded-circle overflow-hidden",style:e.normalizeStyle([e.unref(m),{position:"fixed"}]),onMousedown:g,onMouseup:h},[e.createElementVNode("div",Gl,[e.createElementVNode("div",ql,[e.createElementVNode("img",{src:e.unref(l).speaker.avatar||e.unref(ye)(),class:"rounded-circle"},null,8,Yl),e.createElementVNode("button",{ref_key:"btnPlayRef",ref:r,class:"btn w-100 h-100 position-absolute top-50 start-50 translate-middle bg-black bg-opacity-50 text-white rounded-circle"},[e.unref(d)==="paused"?(e.openBlock(),e.createElementBlock("span",Kl)):(e.openBlock(),e.createElementBlock("span",Xl))],512)]),e.createElementVNode("div",Jl,e.toDisplayString(e.unref(l).speaker.displayName),1)])],36)),[[e.vShow,x.visible]])}}),eu="",Zl=W(Ql,[["__scopeId","data-v-236e9f7d"]]),ei={key:0,class:"position-absolute top-0 start-100 translate-middle text-bg-danger text-nowrap rounded px-1",style:{"font-size":"0.5rem"}},ti=["src"],ni={class:"anchor-avatar-name text-white"},oi=e.defineComponent({__name:"anchor-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(t){return(n,o)=>{var r,a,s;return e.openBlock(),e.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:o[0]||(o[0]=l=>{var i;return n.$emit("click",(i=n.data)==null?void 0:i.value)})},[(r=n.data)!=null&&r.isFree?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",ei,"付费")),e.createElementVNode("img",{src:((a=n.data)==null?void 0:a.src)??e.unref(ye)(),class:e.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"40px"}},null,10,ti),e.createElementVNode("div",ni,e.toDisplayString((s=n.data)==null?void 0:s.label),1)])}}}),tu="",go=W(oi,[["__scopeId","data-v-845325c9"]]),ri={style:{height:"170px"},class:"w-100 d-flex flex-row flex-wrap justify-content-start overflow-x-hidden overflow-y-auto scrollbar-none"},ai=e.defineComponent({__name:"anchor-list",props:{filter:{}},setup(t){const n=t,{globalEditConfig:o}=U(),{fetchData:r}=o.tryPlay,a=Fe(),s=e.ref([]),l=e.shallowRef([]);e.watch(()=>n.filter,async c=>{const d=await r(e.toRaw(c));l.value=d,s.value=d.map(p=>({label:p.displayName,value:p.name}))});function i(c){const d=l.value.find(p=>p.name===c);d&&a.setSpeaker(d)}return e.onMounted(async()=>{const c=await r(e.toRaw(n.filter));l.value=c,s.value=c.map(d=>({label:d.displayName,value:d.name})),s.value.length>0&&i(s.value[0].value)}),(c,d)=>(e.openBlock(),e.createElementBlock("div",ri,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(p,m)=>(e.openBlock(),e.createElementBlock("div",{class:"m-3",key:m},[e.createVNode(go,{data:p,activate:p.value===e.unref(a).speaker.name,onClick:h=>i(p.value)},null,8,["data","activate","onClick"])]))),128))]))}}),Nt=e.defineComponent({__name:"tag-item",props:{activate:{type:Boolean},value:{}},emits:["click"],setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("span",{class:e.normalizeClass(["tag-item d-inline-block text-white text-center text-nowrap text-truncate",{"border border-white rounded-pill":n.activate}]),onClick:o[0]||(o[0]=r=>n.$emit("click",n.value)),style:{height:"20px","min-width":"60px","max-width":"160px","font-size":"0.5rem",cursor:"pointer"}},[e.renderSlot(n.$slots,"default")],2))}}),si={class:"tag-list w-100"},li={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},ii={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},ci={style:{height:"100px"},class:"w-100 pt-2 d-flex flex-row flex-wrap align-content-start row-gap-2 overflow-y-auto overflow-x-hidden scrollbar-none"},di=e.defineComponent({__name:"tag-list",props:{filter:{}},emits:["update:filter"],setup(t,{emit:n}){const o=t,{globalEditConfig:r}=U(),{topFlag:a,gender:s,featchTag:l}=r.tryPlay,i=e.ref([]);e.onMounted(async()=>{i.value=await l()});function c(m){n("update:filter",{...e.toRaw(o.filter),topFlag:m})}function d(m){n("update:filter",{...e.toRaw(o.filter),gender:m})}function p(m){n("update:filter",{...e.toRaw(o.filter),tag:m})}return(m,h)=>(e.openBlock(),e.createElementBlock("div",si,[e.createElementVNode("div",li,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(g,u)=>(e.openBlock(),e.createBlock(Nt,{onClick:c,key:u,value:g.value,activate:m.filter.topFlag===g.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(g.label),1)]),_:2},1032,["value","activate"]))),128))]),e.createElementVNode("div",ii,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),(g,u)=>(e.openBlock(),e.createBlock(Nt,{onClick:d,key:u,value:g.value,activate:m.filter.gender===g.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(g.label),1)]),_:2},1032,["value","activate"]))),128))]),e.createElementVNode("div",ci,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(g,u)=>(e.openBlock(),e.createBlock(Nt,{onClick:p,key:u,value:g.value,activate:m.filter.tag===g.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(g.label),1)]),_:2},1032,["value","activate"]))),128))])]))}}),nu="",ou="",ui=["src"],fi={class:"anchor-avatar-name text-white",style:{"font-size":"0.5rem"}},pi=e.defineComponent({__name:"style-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(t){return(n,o)=>{var r,a;return e.openBlock(),e.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:o[0]||(o[0]=s=>{var l;return n.$emit("click",(l=n.data)==null?void 0:l.value)})},[e.createElementVNode("img",{src:((r=n.data)==null?void 0:r.src)||e.unref(ye)(),class:e.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"30px"}},null,10,ui),e.createElementVNode("div",fi,e.toDisplayString((a=n.data)==null?void 0:a.label),1)])}}}),ru="",mi=W(pi,[["__scopeId","data-v-71aedb65"]]);function hi(t){return`${(.05*t*100).toFixed(0)}%`}function yi(t){return`${((t-1)*100).toFixed(0)}%`}const Ct=t=>(e.pushScopeId("data-v-0210af00"),t=t(),e.popScopeId(),t),gi={class:"slider-panle w-100 px-3 text-white",style:{"font-size":"0.5rem"}},bi={class:"mt-2 d-flex text-center justify-content-between align-items-center"},_i={class:"me-auto d-flex flex-row align-items-center"},wi=["src"],Ei={class:"ms-2 d-flex flex-column justify-content-between",style:{height:"50px"}},xi={class:"d-flex dlex-row column-gap-2 align-items-end"},ki={class:"fs-6"},vi={style:{"font-size":"0.5rem"}},Si={class:"d-flex flex-row column-gap-2 align-items-center"},Ni={key:0,class:"badge text-bg-primary px-2"},Ci={class:"d-flex flex-column align-items-end"},Vi=Ct(()=>e.createElementVNode("div",{class:"text-info"},"音频时长，请以生成后的为准",-1)),$i={class:"mt-1"},Ti=Ct(()=>e.createElementVNode("span",null,"/",-1)),Ri={class:"role-list mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-2 column-gap-3"},Di=["onClick"],Oi={class:"audio-mood mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-1 column-gap-2"},Bi=["onClick"],Ii=Ct(()=>e.createElementVNode("div",{class:"my-3"},[e.createElementVNode("span",{class:"border rounded-pill p-1"},"配音师详情")],-1)),Li={class:"slider-box"},Mi={class:"slider-box"},Pi={class:"d-flex flex-row gap-3 my-3"},Ai=["onClick"],Fi={class:"d-flex flex-row flex-wrap row-gap-2 column-gap-3 mb-3",style:{"min-height":"100px"}},Hi=["onClick"],ji=e.defineComponent({__name:"slider-panle",setup(t){const{globalEditConfig:n}=U(),{rootProsody:o,rootExpressAs:r}=ue(),{fetchStar:a,category:s,fetchData:l}=n.tryPlay,i=Fe(),c=e.ref(i.speaker.isStar),d=e.ref(10),p=e.ref(0),m=e.ref([0,2]),h=e.ref(1),g=e.ref([-10,10]),u=e.ref(0),f=e.computed(()=>ct(d.value)),E=e.computed(()=>ct(p.value)),x=e.reactive(Zt()),v=e.reactive(en()),b=e.ref(""),w=e.ref([]);e.onMounted(async()=>{await D(s[0].value)}),e.watch(()=>i.speaker,S=>{S.roles.length>0&&V(S.roles[0].value),S.styles.length>0&&_(S.styles[0].value)},{immediate:!0}),e.watch(u,S=>{o.pitch=hi(S)},{immediate:!0}),e.watch(h,S=>{o.rate=yi(S)},{immediate:!0});async function C(){c.value=await a(i.speaker.name,!c.value)}function V(S){r.role=S}function _(S){r.style=S}async function D(S){b.value=S;try{w.value=await l({...Ae(),category:S})}catch(N){J.emit(q.ERROR,`${N}`,N)}}function L(S){i.setSpeaker(e.toRaw(S))}return(S,N)=>(e.openBlock(),e.createElementBlock("div",gi,[e.createElementVNode("div",bi,[e.createElementVNode("div",_i,[e.createElementVNode("img",{src:e.unref(ye)(),class:"rounded-circle",style:{height:"50px"}},null,8,wi),e.createElementVNode("div",Ei,[e.createElementVNode("div",xi,[e.createElementVNode("span",ki,e.toDisplayString(e.unref(i).speaker.displayName),1),e.createElementVNode("span",vi,e.toDisplayString(h.value)+"x",1)]),e.createElementVNode("div",Si,[e.createVNode(e.unref(T.ElIcon),{onClick:C,class:"fs-6",style:e.normalizeStyle({color:c.value?"red":"white"})},{default:e.withCtx(()=>[c.value?(e.openBlock(),e.createBlock(e.unref(se.StarFilled),{key:0})):(e.openBlock(),e.createBlock(e.unref(se.Star),{key:1}))]),_:1},8,["style"]),e.unref(i).speaker.isSupper24K?(e.openBlock(),e.createElementBlock("span",Ni," 24K ")):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Ci,[Vi,e.createElementVNode("div",$i,[e.createElementVNode("span",null,e.toDisplayString(E.value),1),Ti,e.createElementVNode("span",null,e.toDisplayString(f.value),1)]),e.createVNode(e.unref(T.ElSlider),{max:d.value,modelValue:p.value,"onUpdate:modelValue":N[0]||(N[0]=$=>p.value=$),size:"small"},null,8,["max","modelValue"])])]),e.createElementVNode("div",Ri,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).speaker.roles,($,M)=>(e.openBlock(),e.createElementBlock("div",{onClick:te=>V($.value),key:M,class:e.normalizeClass(["rounded-pill px-1",{border:$.value===(e.unref(r).role||"")}])},e.toDisplayString($.label),11,Di))),128))]),e.createElementVNode("ul",Oi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).speaker.styles,($,M)=>(e.openBlock(),e.createElementBlock("li",{class:"mx-2",onClick:te=>_($.value),key:M},[e.createVNode(mi,{activate:$.value===(e.unref(r).style||""),data:$},null,8,["activate","data"])],8,Bi))),128))]),Ii,e.createElementVNode("div",Li,[e.createElementVNode("div",null,[e.createElementVNode("span",null,"语速："+e.toDisplayString(h.value)+"x",1)]),e.createVNode(e.unref(T.ElSlider),{modelValue:h.value,"onUpdate:modelValue":N[1]||(N[1]=$=>h.value=$),min:m.value[0],max:m.value[1],step:.05,marks:x},null,8,["modelValue","min","max","marks"])]),e.createElementVNode("div",Mi,[e.createElementVNode("div",null,[e.createElementVNode("span",null,"语调："+e.toDisplayString(u.value),1)]),e.createVNode(e.unref(T.ElSlider),{modelValue:u.value,"onUpdate:modelValue":N[2]||(N[2]=$=>u.value=$),min:g.value[0],max:g.value[1],step:.2,marks:v},null,8,["modelValue","min","max","marks"])]),e.createElementVNode("div",null,[e.createElementVNode("ul",Pi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),($,M)=>(e.openBlock(),e.createElementBlock("li",{onClick:te=>D($.value),key:M,class:e.normalizeClass(["rounded-pill px-1",{border:$.value===b.value}])},e.toDisplayString($.label),11,Ai))),128))]),e.createElementVNode("ul",Fi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,($,M)=>(e.openBlock(),e.createElementBlock("li",{onClick:te=>L($),key:M},[e.createVNode(go,{activate:$.name===e.unref(i).speaker.name,data:{...$,label:$.displayName,value:$.name}},null,8,["activate","data"])],8,Hi))),128))])])]))}}),au="",Ui=W(ji,[["__scopeId","data-v-0210af00"]]),zi=t=>(e.pushScopeId("data-v-f0208c5e"),t=t(),e.popScopeId(),t),Wi={class:"box ms-2"},Gi={class:"try-play-header text-center d-flex flex-row justify-content-between"},qi={class:"try-play-body d-flex flex-row"},Yi={class:"try-play-left w-50 border-right border-secondary"},Ki={class:"pe-1"},Xi=zi(()=>e.createElementVNode("div",{class:"py-1 border-top border-secondary"},null,-1)),Ji={class:"try-play-right w-50 border-start rounded border-top border-secondary overflow-x-hidden overflow-y-auto scrollbar-none"},Qi=e.defineComponent({__name:"try-play-panle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:n}){const o=t,r=e.ref(),a=e.ref(""),s=e.ref(),l=e.ref(),i=e.ref(Ae());e.onMounted(()=>{window.addEventListener("keydown",c)}),e.onUnmounted(()=>{window.addEventListener("keydown",c)}),e.watch(()=>o.visible,u=>{u&&setTimeout(()=>{h()},200)});function c(u){u.code==="Escape"&&o.visible&&m()}const{position:d}=pt(l,{initialValue:{x:40,y:40}}),{style:p}=yt(s,d);e.onMounted(()=>{d.value.x=(window.innerWidth-890)/2,d.value.y=(window.innerHeight-390)/2});function m(){n("update:visible",!1)}function h(){var u;(u=r.value)==null||u.focus()}function g(){i.value={...i.value,word:a.value}}return(u,f)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:s,style:e.normalizeStyle([e.unref(p),{position:"fixed"}]),class:"try-play user-select-none card z-3 shadow"},[e.createElementVNode("div",Wi,[e.createElementVNode("div",Gi,[e.createElementVNode("div",{ref_key:"handleRef",ref:l,class:"col-11 try-play-move"},null,512),e.createElementVNode("div",{onClick:m,class:"col-1 try-play-menu-close"},[e.createVNode(e.unref(T.ElIcon),{color:"white"},{default:e.withCtx(()=>[e.createVNode(e.unref(se.Minus))]),_:1})])]),e.createElementVNode("div",qi,[e.createElementVNode("div",Yi,[e.createElementVNode("div",Ki,[e.createVNode(e.unref(T.ElForm),{onSubmit:e.withModifiers(g,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(T.ElInput),{"input-style":{color:"white"},ref_key:"searchInputRef",ref:r,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=E=>a.value=E),placeholder:"输入名称搜索"},null,8,["modelValue"])]),_:1},8,["onSubmit"])]),e.createVNode(di,{filter:i.value,"onUpdate:filter":f[1]||(f[1]=E=>i.value=E)},null,8,["filter"]),Xi,e.createVNode(ai,{filter:i.value},null,8,["filter"])]),e.createElementVNode("div",Ji,[e.createVNode(Ui)])])])],4)),[[e.vShow,u.visible]])}}),su="",Zi=W(Qi,[["__scopeId","data-v-f0208c5e"]]),bo=e.defineComponent({__name:"try-play",setup(t){const n=e.ref(!0);function o(r){r||(n.value=!0)}return(r,a)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(Zl,{visible:n.value,"onUpdate:visible":a[0]||(a[0]=s=>n.value=s)},null,8,["visible"]),e.createVNode(Zi,{visible:!n.value,"onUpdate:visible":o},null,8,["visible"])]))}}),lu="",ec={install:t=>{t.component("PlayMenu",eo),t.component("PinyinMenu",to),t.component("ContinuousMenu",no),t.component("ReadMenu",oo),t.component("DigitalMenu",ro),t.component("AliasMenu",ao),t.component("EnglishMenu",so),t.component("ChangespeedMenu",lo),t.component("RhythmMenu",io),t.component("SpecialMenu",co),t.component("MuteMenu",uo),t.component("BgmMenu",fo),t.component("SensitiveMenu",po),t.component("ManagementMenu",ho),t.component("ConversionMenu",yo),t.component("TryPlay",bo)}},iu="",cu="";var Vt={exports:{}},$t={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class o extends Error{constructor(w,C){super(w),this.cause=C}}n.ParsingError=o;let r;function a(){return c(!1)||h()||m()||p()}function s(){return f(/\s*/),c(!0)||m()||d()||i(!1)}function l(){const b=i(!0),w=[];let C,V=s();for(;V;){if(V.node.type==="Element"){if(C)throw new Error("Found multiple root nodes");C=V.node}V.excluded||w.push(V.node),V=s()}if(!C)throw new o("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new o("Failed to parse XML","Not Well-Formed XML");return{declaration:b?b.node:null,root:C,children:w}}function i(b){const w=f(b?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!w)return;const C={name:w[1],type:"ProcessingInstruction",attributes:{}};for(;!(E()||x("?>"));){const V=g();if(V)C.attributes[V.name]=V.value;else return}return f(/\?>/),{excluded:b?!1:r.options.filter(C)===!1,node:C}}function c(b){const w=f(/^<([^?!</>\s]+)\s*/);if(!w)return;const C={type:"Element",name:w[1],attributes:{},children:[]},V=b?!1:r.options.filter(C)===!1;for(;!(E()||x(">")||x("?>")||x("/>"));){const D=g();if(D)C.attributes[D.name]=D.value;else return}if(f(/^\s*\/>/))return C.children=null,{excluded:V,node:C};f(/\??>/);let _=a();for(;_;)_.excluded||C.children.push(_.node),_=a();if(r.options.strictMode){const D=`</${C.name}>`;if(r.xml.startsWith(D))r.xml=r.xml.slice(D.length);else throw new o("Failed to parse XML",`Closing tag not matching "${D}"`)}else f(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:V,node:C}}function d(){const b=f(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||f(/^<!DOCTYPE\s+\S+\s*>/);if(b){const w={type:"DocumentType",content:b[0]};return{excluded:r.options.filter(w)===!1,node:w}}}function p(){if(r.xml.startsWith("<![CDATA[")){const b=r.xml.indexOf("]]>");if(b>-1){const w=b+3,C={type:"CDATA",content:r.xml.substring(0,w)};return r.xml=r.xml.slice(w),{excluded:r.options.filter(C)===!1,node:C}}}}function m(){const b=f(/^<!--[\s\S]*?-->/);if(b){const w={type:"Comment",content:b[0]};return{excluded:r.options.filter(w)===!1,node:w}}}function h(){const b=f(/^([^<]+)/);if(b){const w={type:"Text",content:b[1]};return{excluded:r.options.filter(w)===!1,node:w}}}function g(){const b=f(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(b)return{name:b[1].trim(),value:u(b[2].trim())}}function u(b){return b.replace(/^['"]|['"]$/g,"")}function f(b){const w=r.xml.match(b);if(w)return r.xml=r.xml.slice(w[0].length),w}function E(){return r.xml.length===0}function x(b){return r.xml.indexOf(b)===0}function v(b,w={}){b=b.trim();const C=w.filter||(()=>!0);return r={xml:b,options:Object.assign(Object.assign({},w),{filter:C,strictMode:w.strictMode===!0})},l()}t.exports=v,n.default=v})($t,$t.exports);var tc=$t.exports;(function(t,n){var o=ge&&ge.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(n,"__esModule",{value:!0});const r=o(tc);function a(u){if(!u.options.indentation&&!u.options.lineSeparator)return;u.content+=u.options.lineSeparator;let f;for(f=0;f<u.level;f++)u.content+=u.options.indentation}function s(u){u.content=u.content.replace(/ +$/,"");let f;for(f=0;f<u.level;f++)u.content+=u.options.indentation}function l(u,f){u.content+=f}function i(u,f,E){if(typeof u.content=="string")c(u.content,f,E);else if(u.type==="Element")p(u,f,E);else if(u.type==="ProcessingInstruction")h(u,f);else throw new Error("Unknown node type: "+u.type)}function c(u,f,E){if(!E){const x=u.trim();(f.options.lineSeparator||x.length===0)&&(u=x)}u.length>0&&(!E&&f.content.length>0&&a(f),l(f,u))}function d(u,f){const E="/"+u.join("/"),x=u[u.length-1];return f.includes(x)||f.includes(E)}function p(u,f,E){if(f.path.push(u.name),!E&&f.content.length>0&&a(f),l(f,"<"+u.name),m(f,u.attributes),u.children===null||f.options.forceSelfClosingEmptyTag&&u.children.length===0){const x=f.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";l(f,x)}else if(u.children.length===0)l(f,"></"+u.name+">");else{const x=u.children;l(f,">"),f.level++;let v=u.attributes["xml:space"]==="preserve",b=!1;if(!v&&f.options.ignoredPaths&&(b=d(f.path,f.options.ignoredPaths),v=b),!v&&f.options.collapseContent){let w=!1,C=!1,V=!1;x.forEach(function(_,D){_.type==="Text"?(_.content.includes(`
`)?(C=!0,_.content=_.content.trim()):(D===0||D===x.length-1)&&_.content.trim().length===0&&(_.content=""),_.content.trim().length>0&&(w=!0)):_.type==="CDATA"?w=!0:V=!0}),w&&(!V||!C)&&(v=!0)}x.forEach(function(w){i(w,f,E||v)}),f.level--,!E&&!v&&a(f),b&&s(f),l(f,"</"+u.name+">")}f.path.pop()}function m(u,f){Object.keys(f).forEach(function(E){const x=f[E].replace(/"/g,"&quot;");l(u," "+E+'="'+x+'"')})}function h(u,f){f.content.length>0&&a(f),l(f,"<?"+u.name),m(f,u.attributes),l(f,"?>")}function g(u,f={}){f.indentation="indentation"in f?f.indentation:"    ",f.collapseContent=f.collapseContent===!0,f.lineSeparator="lineSeparator"in f?f.lineSeparator:`\r
`,f.whiteSpaceAtEndOfSelfclosingTag=f.whiteSpaceAtEndOfSelfclosingTag===!0,f.throwOnFailure=f.throwOnFailure!==!1;try{const E=(0,r.default)(u,{filter:f.filter,strictMode:f.strictMode}),x={content:"",level:0,options:f,path:[]};return E.declaration&&h(E.declaration,x),E.children.forEach(function(v){i(v,x,!1)}),f.lineSeparator?x.content.replace(/\r\n/g,`
`).replace(/\n/g,f.lineSeparator):x.content}catch(E){if(f.throwOnFailure)throw E;return u}}g.minify=(u,f={})=>g(u,Object.assign(Object.assign({},f),{indentation:"",lineSeparator:""})),t.exports=g,n.default=g})(Vt,Vt.exports);var nc=Vt.exports;const oc=nt(nc),ke=t=>(e.pushScopeId("data-v-fb2870b0"),t=t(),e.popScopeId(),t),rc={class:"editor-title d-flex flex-row align-item-center justify-content-between"},ac={class:"title-wrapper d-flex flex-column justify-content-center ps-3"},sc=ke(()=>e.createElementVNode("div",{class:"title-author pb-1"},"SSML编辑器",-1)),lc={class:"author d-flex flex-row align-items-center justify-content-start"},ic=ke(()=>e.createElementVNode("div",null,"未保存",-1)),cc=ke(()=>e.createElementVNode("span",{class:"iconfont icon-play font-size-12 p-1"},null,-1)),dc=ke(()=>e.createElementVNode("div",{class:"d-inline-block"},null,-1)),uc={class:"operation-wrapper d-flex flex-row justify-content-center align-items-center"},fc=ke(()=>e.createElementVNode("div",{class:"menu-divider"},null,-1)),pc=ke(()=>e.createElementVNode("div",{class:"px-1"},null,-1)),mc={class:"ssml-code border border-secondary-subtle rounded-2 px-2",style:{"white-space":"pre-wrap","max-height":"50vh"}},hc={class:"dialog-footer"},yc=e.defineComponent({__name:"editor-title",setup(t){const n=e.ref(!1),o=e.ref(""),{rootBackgroundaudio:r}=ue(),a=e.computed(()=>oc(o.value,{indentation:"    ",filter:d=>d.type!=="Comment",collapseContent:!0,lineSeparator:`
`})),s=()=>{o.value=ze(),n.value=!0},l=()=>{r.src&&de.play(r.src)},i=()=>{de.stop(r.src),r.src="",r.remark=""};async function c(d){await navigator.clipboard.writeText(d?a.value:o.value),n.value=!1}return(d,p)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",rc,[e.createElementVNode("div",ac,[sc,e.createElementVNode("div",lc,[ic,e.unref(r).src?(e.openBlock(),e.createBlock(e.unref(T.ElTag),{key:0,class:"bgm-txt ms-2",closable:"",size:"small",onClick:l,onClose:i},{default:e.withCtx(()=>[cc,dc,e.createElementVNode("span",null,e.toDisplayString(e.unref(r).remark),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("div",uc,[e.createVNode(e.unref(T.ElButton),{type:"primary",icon:e.unref(se.Share),disabled:""},{default:e.withCtx(()=>[e.createTextVNode("分享")]),_:1},8,["icon"]),fc,e.createVNode(e.unref(T.ElButton),{type:"primary",onClick:s},{default:e.withCtx(()=>[e.createTextVNode("查看SSML")]),_:1}),e.createVNode(e.unref(T.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载音频")]),_:1}),e.createVNode(e.unref(T.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载视频")]),_:1}),e.createVNode(e.unref(T.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载字幕")]),_:1}),e.createVNode(e.unref(T.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("声音转换")]),_:1}),pc])]),e.createVNode(e.unref(T.ElDialog),{modelValue:n.value,"onUpdate:modelValue":p[4]||(p[4]=m=>n.value=m),title:"查看SSML",width:"80%"},{header:e.withCtx(()=>[e.createVNode(e.unref(T.ElButton),{type:"info",onClick:p[0]||(p[0]=m=>c(!0))},{default:e.withCtx(()=>[e.createTextVNode("复制+关闭")]),_:1}),e.createVNode(e.unref(T.ElButton),{type:"primary",onClick:p[1]||(p[1]=m=>c(!1))},{default:e.withCtx(()=>[e.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})]),footer:e.withCtx(()=>[e.createElementVNode("span",hc,[e.createVNode(e.unref(T.ElButton),{type:"info",onClick:p[2]||(p[2]=m=>c(!0))},{default:e.withCtx(()=>[e.createTextVNode("复制+关闭")]),_:1}),e.createVNode(e.unref(T.ElButton),{type:"primary",onClick:p[3]||(p[3]=m=>c(!1))},{default:e.withCtx(()=>[e.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("pre",mc,e.toDisplayString(a.value),1)]),_:1},8,["modelValue"])],64))}}),du="",gc=W(yc,[["__scopeId","data-v-fb2870b0"]]),bc=e.defineComponent({__name:"editor-core",emits:["created","change"],setup(t,{emit:n}){const{editor:o,setEditor:r,globalEditConfig:a}=U(),s=e.ref(null);e.onMounted(()=>{l()}),e.onUnmounted(()=>{o==null||o.destroy()});function l(){if(!s.value)return;const i=y.createEditor({selector:s.value,mode:"simple",config:{...e.toRaw(a.editorConfig),onCreated(c){n("created",c),J.emit(q.EDITOR_CREATED,c)},onChange(c){n("change",c)}}});r(i),i.on(I.ERROR,a.handleError)}return(i,c)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:s,class:"edit-core",style:{height:"70vh","overflow-y":"hidden"}},null,512))}}),_c={class:"bar-view border-bottom border-1"},wc=e.defineComponent({__name:"bar-view",setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",_c,[e.createVNode(e.unref(An),null,{default:e.withCtx(()=>[e.createVNode(e.unref(we),{divider:"green"},{default:e.withCtx(()=>[e.createVNode(e.unref(eo))]),_:1}),e.createVNode(e.unref(we),{divider:"cyan"},{default:e.withCtx(()=>[e.createVNode(e.unref(to)),e.createVNode(e.unref(oo)),e.createVNode(e.unref(ro)),e.createVNode(e.unref(no)),e.createVNode(e.unref(ao)),e.createVNode(e.unref(so))]),_:1}),e.createVNode(e.unref(we),{divider:"orange"},{default:e.withCtx(()=>[e.createVNode(e.unref(lo)),e.createVNode(e.unref(ho)),e.createVNode(e.unref(yo))]),_:1}),e.createVNode(e.unref(we),{divider:"purple"},{default:e.withCtx(()=>[e.createVNode(e.unref(io)),e.createVNode(e.unref(uo))]),_:1}),e.createVNode(e.unref(we),{divider:"yellow"},{default:e.withCtx(()=>[e.createVNode(e.unref(co)),e.createVNode(e.unref(fo))]),_:1})]),_:1})]),e.createVNode(e.unref(bo))],64))}}),Ec={class:"editor-box"},xc={class:"editor-core-container shadow pt-1"},kc=e.defineComponent({__name:"editor-view",emits:["created","change"],setup(t,{emit:n}){const o=l=>{n("created",l)},r=l=>{n("change",l)};function a(l){J.emit(q.VIEW_CLICK,l)}function s(l){J.emit(q.VIEW_KEYDOWN,l)}return(l,i)=>(e.openBlock(),e.createElementBlock("div",{class:"editor-view",onClick:a,onKeydown:s},[e.renderSlot(l.$slots,"default",{},()=>[e.createVNode(gc)],!0),e.createElementVNode("div",Ec,[e.createVNode(wc),e.createElementVNode("div",xc,[e.createVNode(bc,{onChange:r,onCreated:o})])])],32))}}),uu="",_o=W(kc,[["__scopeId","data-v-b5e6df8c"]]),vc={install(t){t.component("EditorView",_o)}},Sc={install(t,n){t.use(qo()),t.use(()=>{const{setGlobalEditConfig:o}=U(),r=et(n);o(r),J.on(q.ERROR,r.handleError)}),t.use(Zr),t.use(bs),t.use(ec),t.use(vc)}};R.AudioPlayer=$n,R.CancellationTokenSource=dt,R.DOMComment=Cr,R.DOMElement=Vr,R.DOMNode=Nr,R.DOMRange=Tr,R.DOMSelection=Rr,R.DOMStaticRange=Dr,R.DOMText=$r,R.EMITTER_EVENT=q,R.EditorView=_o,R.FileSelector=Tn,R.Timer=Rn,R.WANGEDITOR_EVENT=I,R.audioPlayer=de,R.createGlobalEditorConfig=et,R.default=Sc,R.defaultFilterSpeaker=Ae,R.defaultLabelValue=ea,R.defaultSpeaker=On,R.demoAvatar=ye,R.formatTime=ct,R.genRandomStr=Br,R.pitch=en,R.serializeToSSML=ze,R.speed=Zt,Object.defineProperties(R,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
