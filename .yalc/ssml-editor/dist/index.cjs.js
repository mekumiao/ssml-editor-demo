"use strict";var Qt=Object.defineProperty;var Zt=(t,e,r)=>e in t?Qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var re=(t,e,r)=>(Zt(t,typeof e!="symbol"?e+"":e,r),r);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("vue"),_=require("@wangeditor/editor"),N=require("element-plus"),Bt=require("@element-plus/icons-vue"),Jt={class:"bar-button-icon"},en={class:"fw-normal",style:{"font-size":"0.85rem"}},tn=n.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const r=t,o=n.inject("editor"),i=()=>{!r.disabled&&o&&e("click",o==null?void 0:o.value)};return(l,s)=>(n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["bar-button px-2 py-1",{disabled:l.disabled}]),onClick:i,onMousedown:s[0]||(s[0]=n.withModifiers(()=>{},["prevent"]))},[n.createElementVNode("div",Jt,[n.createElementVNode("span",{class:n.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${l.icon}`]])},null,2)]),n.createElementVNode("div",en,n.toDisplayString(l.text),1)],34))}});const F=(t,e)=>{const r=t.__vccOpts||t;for(const[o,i]of e)r[o]=i;return r},B=F(tn,[["__scopeId","data-v-edb3cf59"]]);const ee=n.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(t,{expose:e,emit:r}){const o=n.ref(""),i=n.ref();function l(){i.value.focus()}function s(){r("submit",o.value),o.value=""}return e({focus:l}),(u,a)=>(n.openBlock(),n.createBlock(n.unref(N.ElForm),{class:"flex flex-row",onSubmit:n.withModifiers(s,["prevent"])},{default:n.withCtx(()=>[n.createVNode(n.unref(N.ElInput),{type:u.type,ref_key:"inputRef",ref:i,modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=d=>o.value=d)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}});const Tt=n.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(t){return(e,r)=>(n.openBlock(),n.createBlock(n.unref(N.ElPopover),{hideAfter:e.hideAfter,width:e.width,visible:e.visible,trigger:e.trigger,"onUpdate:visible":r[0]||(r[0]=o=>e.$emit("update:visible",o))},{reference:n.withCtx(()=>[n.renderSlot(e.$slots,"reference")]),default:n.withCtx(()=>[n.renderSlot(e.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}});function te(t){return n.getCurrentScope()?(n.onScopeDispose(t),!0):!1}function D(t){return typeof t=="function"?t():n.unref(t)}const Dt=typeof window<"u",nn=t=>t!=null,G=()=>{};var rn=Object.defineProperty,on=Object.defineProperties,ln=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,sn=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,Ze=(t,e,r)=>e in t?rn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,un=(t,e)=>{for(var r in e||(e={}))sn.call(e,r)&&Ze(t,r,e[r]);if(Qe)for(var r of Qe(e))an.call(e,r)&&Ze(t,r,e[r]);return t},cn=(t,e)=>on(t,ln(e));function fn(t,e={}){if(!n.isRef(t))return n.toRefs(t);const r=Array.isArray(t.value)?Array.from({length:t.value.length}):{};for(const o in t.value)r[o]=n.customRef(()=>({get(){return t.value[o]},set(i){var l;if((l=D(e.replaceRef))!=null?l:!0)if(Array.isArray(t.value)){const u=[...t.value];u[o]=i,t.value=u}else{const u=cn(un({},t.value),{[o]:i});Object.setPrototypeOf(u,Object.getPrototypeOf(t.value)),t.value=u}else t.value[o]=i}}));return r}function It(t,e=!0){n.getCurrentInstance()?n.onMounted(t):e?t():n.nextTick(t)}function I(t){var e;const r=D(t);return(e=r==null?void 0:r.$el)!=null?e:r}const j=Dt?window:void 0;function q(...t){let e,r,o,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,o,i]=t,e=j):[e,r,o,i]=t,!e)return G;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const l=[],s=()=>{l.forEach(c=>c()),l.length=0},u=(c,m,p,w)=>(c.addEventListener(m,p,w),()=>c.removeEventListener(m,p,w)),a=n.watch(()=>[I(e),D(i)],([c,m])=>{s(),c&&l.push(...r.flatMap(p=>o.map(w=>u(c,p,w,m))))},{immediate:!0,flush:"post"}),d=()=>{a(),s()};return te(d),d}function dn(){const t=n.ref(!1);return n.getCurrentInstance()&&n.onMounted(()=>{t.value=!0}),t}function be(t){const e=dn();return n.computed(()=>(e.value,!!t()))}function mn(t,e={}){const{window:r=j}=e,o=be(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let i;const l=n.ref(!1),s=d=>{l.value=d.matches},u=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",s):i.removeListener(s))},a=n.watchEffect(()=>{o.value&&(u(),i=r.matchMedia(D(t)),"addEventListener"in i?i.addEventListener("change",s):i.addListener(s),l.value=i.matches)});return te(()=>{a(),u(),i=void 0}),l}var pn=Object.defineProperty,vn=Object.defineProperties,hn=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,et=(t,e,r)=>e in t?pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yn=(t,e)=>{for(var r in e||(e={}))gn.call(e,r)&&et(t,r,e[r]);if(Je)for(var r of Je(e))bn.call(e,r)&&et(t,r,e[r]);return t},wn=(t,e)=>vn(t,hn(e));function $t(t,e={}){var r,o;const{pointerTypes:i,preventDefault:l,stopPropagation:s,exact:u,onMove:a,onEnd:d,onStart:c,initialValue:m,axis:p="both",draggingElement:w=j,handle:v=t}=e,f=n.ref((r=D(m))!=null?r:{x:0,y:0}),g=n.ref(),x=b=>i?i.includes(b.pointerType):!0,E=b=>{D(l)&&b.preventDefault(),D(s)&&b.stopPropagation()},h=b=>{if(!x(b)||D(u)&&b.target!==D(t))return;const k=D(t).getBoundingClientRect(),M={x:b.clientX-k.left,y:b.clientY-k.top};(c==null?void 0:c(M,b))!==!1&&(g.value=M,E(b))},y=b=>{if(!x(b)||!g.value)return;let{x:k,y:M}=f.value;(p==="x"||p==="both")&&(k=b.clientX-g.value.x),(p==="y"||p==="both")&&(M=b.clientY-g.value.y),f.value={x:k,y:M},a==null||a(f.value,b),E(b)},S=b=>{x(b)&&g.value&&(g.value=void 0,d==null||d(f.value,b),E(b))};if(Dt){const b={capture:(o=e.capture)!=null?o:!0};q(v,"pointerdown",h,b),q(w,"pointermove",y,b),q(w,"pointerup",S,b)}return wn(yn({},fn(f)),{position:f,isDragging:n.computed(()=>!!g.value),style:n.computed(()=>`left:${f.value.x}px;top:${f.value.y}px;`)})}var tt=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,Sn=(t,e)=>{var r={};for(var o in t)_n.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&tt)for(var o of tt(t))e.indexOf(o)<0&&xn.call(t,o)&&(r[o]=t[o]);return r};function Pt(t,e,r={}){const o=r,{window:i=j}=o,l=Sn(o,["window"]);let s;const u=be(()=>i&&"ResizeObserver"in i),a=()=>{s&&(s.disconnect(),s=void 0)},d=n.computed(()=>Array.isArray(t)?t.map(p=>I(p)):[I(t)]),c=n.watch(d,p=>{if(a(),u.value&&i){s=new ResizeObserver(e);for(const w of p)w&&s.observe(w,l)}},{immediate:!0,flush:"post",deep:!0}),m=()=>{a(),c()};return te(m),{isSupported:u,stop:m}}function X(t,e={}){const{reset:r=!0,windowResize:o=!0,windowScroll:i=!0,immediate:l=!0}=e,s=n.ref(0),u=n.ref(0),a=n.ref(0),d=n.ref(0),c=n.ref(0),m=n.ref(0),p=n.ref(0),w=n.ref(0);function v(){const f=I(t);if(!f){r&&(s.value=0,u.value=0,a.value=0,d.value=0,c.value=0,m.value=0,p.value=0,w.value=0);return}const g=f.getBoundingClientRect();s.value=g.height,u.value=g.bottom,a.value=g.left,d.value=g.right,c.value=g.top,m.value=g.width,p.value=g.x,w.value=g.y}return Pt(t,v),n.watch(()=>I(t),f=>!f&&v()),i&&q("scroll",v,{capture:!0,passive:!0}),o&&q("resize",v,{passive:!0}),It(()=>{l&&v()}),{height:s,bottom:u,left:a,right:d,top:c,width:m,x:p,y:w,update:v}}function Lt(t,e={width:0,height:0},r={}){const{window:o=j,box:i="content-box"}=r,l=n.computed(()=>{var a,d;return(d=(a=I(t))==null?void 0:a.namespaceURI)==null?void 0:d.includes("svg")}),s=n.ref(e.width),u=n.ref(e.height);return Pt(t,([a])=>{const d=i==="border-box"?a.borderBoxSize:i==="content-box"?a.contentBoxSize:a.devicePixelContentBoxSize;if(o&&l.value){const c=I(t);if(c){const m=o.getComputedStyle(c);s.value=Number.parseFloat(m.width),u.value=Number.parseFloat(m.height)}}else if(d){const c=Array.isArray(d)?d:[d];s.value=c.reduce((m,{inlineSize:p})=>m+p,0),u.value=c.reduce((m,{blockSize:p})=>m+p,0)}else s.value=a.contentRect.width,u.value=a.contentRect.height},r),n.watch(()=>I(t),a=>{s.value=a?e.width:0,u.value=a?e.height:0}),{width:s,height:u}}function En(t,e,r={}){const{root:o,rootMargin:i="0px",threshold:l=.1,window:s=j,immediate:u=!0}=r,a=be(()=>s&&"IntersectionObserver"in s),d=n.computed(()=>{const v=D(t);return(Array.isArray(v)?v:[v]).map(I).filter(nn)});let c=G;const m=n.ref(u),p=a.value?n.watch(()=>[d.value,I(o),m.value],([v,f])=>{if(c(),!m.value||!v.length)return;const g=new IntersectionObserver(e,{root:I(f),rootMargin:i,threshold:l});v.forEach(x=>x&&g.observe(x)),c=()=>{g.disconnect(),c=G}},{immediate:u,flush:"post"}):G,w=()=>{c(),p(),m.value=!1};return te(w),{isSupported:a,isActive:m,pause(){c(),m.value=!1},resume(){m.value=!0},stop:w}}function kn(t,{window:e=j,scrollTarget:r}={}){const o=n.ref(!1);return En(t,([{isIntersecting:i}])=>{o.value=i},{root:r,window:e}),o}function At(t={}){const{window:e=j,initialWidth:r=Number.POSITIVE_INFINITY,initialHeight:o=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:l=!0}=t,s=n.ref(r),u=n.ref(o),a=()=>{e&&(l?(s.value=e.innerWidth,u.value=e.innerHeight):(s.value=e.document.documentElement.clientWidth,u.value=e.document.documentElement.clientHeight))};if(a(),It(a),q("resize",a,{passive:!0}),i){const d=mn("(orientation: portrait)");n.watch(d,()=>a())}return{width:s,height:u}}const ye=t=>(n.pushScopeId("data-v-2f9c7bc6"),t=t(),n.popScopeId(),t),Cn={class:"search-content vh-50 user-select-none"},Vn={class:"ps-2 w-75"},Nn={class:"menu"},On=ye(()=>n.createElementVNode("div",{class:"h h-1"},null,-1)),Mn={class:"flex flex-row"},Bn=ye(()=>n.createElementVNode("div",{class:"h-"},null,-1)),Tn={class:"content-list w-90"},Dn=["onClick"],In=ye(()=>n.createElementVNode("span",{class:"iconfont icon-play"},null,-1)),$n=n.defineComponent({__name:"bar-search",props:{menuItemLabel:{},scenes:{},styles:{},dataList:{},fetch:{type:Function}},emits:["submit"],setup(t,{emit:e}){const r=t,o=n.ref(),i=n.ref(""),l=n.ref(""),s=n.ref(""),u=n.ref(r.dataList||[]),a=n.ref("first"),d=kn(o);n.watch(d,w=>{w&&setTimeout(()=>{var v;(v=o.value)==null||v.focus()},100)}),n.onMounted(async()=>{await c()});async function c(){u.value=await r.fetch({search:i.value,menuKey:a.value,scene:l.value,style:s.value})}function m(w){a.value=w,c()}function p(w){e("submit",w)}return(w,v)=>(n.openBlock(),n.createElementBlock("div",Cn,[n.createElementVNode("div",Vn,[n.createVNode(n.unref(N.ElForm),{onSubmit:n.withModifiers(c,["prevent"])},{default:n.withCtx(()=>[n.createVNode(n.unref(N.ElInput),{ref_key:"searchInputRef",ref:o,placeholder:"搜索",modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=f=>i.value=f),"suffix-icon":n.unref(Bt.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),n.createElementVNode("div",Nn,[n.createVNode(n.unref(N.ElMenu),{mode:"horizontal","default-active":"first",onSelect:v[1]||(v[1]=f=>m(f))},{default:n.withCtx(()=>[n.createVNode(n.unref(N.ElMenuItem),{index:"first"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(w.menuItemLabel.first),1)]),_:1}),n.createVNode(n.unref(N.ElMenuItem),{index:"second"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(w.menuItemLabel.second),1)]),_:1}),n.createVNode(n.unref(N.ElMenuItem),{index:"last"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(w.menuItemLabel.last),1)]),_:1})]),_:1})]),On,n.createElementVNode("div",Mn,[n.createVNode(n.unref(N.ElSelect),{modelValue:l.value,"onUpdate:modelValue":v[2]||(v[2]=f=>l.value=f),onChange:c,class:"m m-2",size:"large"},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(w.scenes,f=>(n.openBlock(),n.createBlock(n.unref(N.ElOption),{key:f.value,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n.createVNode(n.unref(N.ElSelect),{modelValue:s.value,"onUpdate:modelValue":v[3]||(v[3]=f=>s.value=f),onChange:c,class:"m m-2",size:"large"},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(w.styles,f=>(n.openBlock(),n.createBlock(n.unref(N.ElOption),{key:f.value,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),Bn,n.createElementVNode("div",Tn,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(u.value,(f,g)=>(n.openBlock(),n.createElementBlock("div",{onClick:x=>p(f),class:"content-list-item clickable ps-3",key:g},[In,n.createElementVNode("span",null,n.toDisplayString(f.label),1)],8,Dn))),128))])]))}});const W=F($n,[["__scopeId","data-v-2f9c7bc6"]]),Pn=n.createElementVNode("div",{class:"w-100 text-end me-2"},[n.createElementVNode("span",{class:"btn iconfont icon-close fs-5"})],-1),we=n.defineComponent({__name:"fixed-panel",setup(t){const e=n.ref(),{x:r,y:o}=$t(e,{initialValue:{x:40,y:40}}),{width:i,height:l}=Lt(e),{width:s,height:u}=At(),a=n.computed(()=>({x:s.value-i.value,y:u.value-l.value})),d=n.computed(()=>{if(!a.value)return c(r.value,o.value);const m=r.value<5?5:r.value>a.value.x?a.value.x-5:r.value,p=o.value<5?5:o.value>a.value.y?a.value.y-5:o.value;return c(m,p)});function c(m,p){return`left:${m}px;top:${p}px`}return(m,p)=>(n.openBlock(),n.createBlock(n.Teleport,{to:"body"},[n.createElementVNode("div",{ref_key:"boxRef",ref:e,class:"card shadow brag-box z-3",style:n.normalizeStyle([{position:"fixed"},d.value])},[Pn,n.renderSlot(m.$slots,"default")],4)]))}});const Ln={},An={class:"content"};function Rn(t,e){return n.openBlock(),n.createElementBlock("div",An,[n.renderSlot(t.$slots,"default",{},void 0,!0)])}const _e=F(Ln,[["render",Rn],["__scopeId","data-v-7beae5b9"]]),Fn={},jn={class:"bar-wrapper-item"};function Un(t,e){return n.openBlock(),n.createElementBlock("div",jn,[n.renderSlot(t.$slots,"default")])}const Rt=F(Fn,[["render",Un]]),Wn={class:"bar-wrapper-group"},zn={class:"group-items"},Hn=n.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(t){return(e,r)=>(n.openBlock(),n.createElementBlock("div",Wn,[n.createElementVNode("div",zn,[n.renderSlot(e.$slots,"default",{},void 0,!0)]),n.createElementVNode("div",{class:n.normalizeClass(["divider",[e.divider]])},null,2)]))}});const A=F(Hn,[["__scopeId","data-v-3a7abad9"]]),qn=n.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},position:{}},emits:["update:visible","update:position"],setup(t,{emit:e}){const r=t,o=n.ref(),{x:i,y:l}=$t(o,{initialValue:r.position}),{width:s,height:u}=Lt(o),{width:a,height:d}=At();n.watch([i,l],([g,x])=>{e("update:position",{x:g,y:x})});const c=n.computed(()=>({x:a.value-s.value,y:d.value-u.value})),m=n.computed(()=>{const{x:g,y:x}=r.position;if(!c.value)return f(g,x);const E=g<5?5:g>c.value.x?c.value.x-5:g,h=x<5?5:x>c.value.y?c.value.y-5:x;return f(E,h)});n.onMounted(()=>{window.addEventListener("keydown",v)}),n.onUnmounted(()=>{window.addEventListener("keydown",v)});function p(){e("update:visible",!1)}function w(g){const x=g.target;o.value&&!o.value.contains(x)&&r.visible&&e("update:visible",!1)}function v(g){g.code==="Escape"&&r.visible&&p()}function f(g,x){return`left:${g}px;top:${x}px`}return(g,x)=>(n.openBlock(),n.createBlock(n.Teleport,{to:"body"},[n.withDirectives(n.createElementVNode("div",{class:"drag-box-mask",onClick:w},[n.createElementVNode("div",{ref_key:"boxRef",ref:o,class:"card shadow brag-box",style:n.normalizeStyle([{position:"fixed"},m.value])},[n.createElementVNode("div",{class:"w-100 text-end me-2"},[n.createElementVNode("span",{onClick:p,class:"btn iconfont icon-close fs-5"})]),n.renderSlot(g.$slots,"default",{},void 0,!0)],4)],512),[[n.vShow,g.visible]])]))}});const z=F(qn,[["__scopeId","data-v-0f200676"]]),Kn={install(t){t.component("BarButton",B),t.component("BarInput",ee),t.component("BarPopover",Tt),t.component("BarSearch",W),t.component("FixedPanel",we),t.component("BarWrapper",_e),t.component("BarWrapperItem",Rt),t.component("BarWrapperGroup",A),t.component("DragBox",z)}};let Xn=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function $(t="r"){return`${t}-${Xn()}`}var H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ft="Expected a function",nt=0/0,Gn="[object Symbol]",Yn=/^\s+|\s+$/g,Qn=/^[-+]0x[0-9a-f]+$/i,Zn=/^0b[01]+$/i,Jn=/^0o[0-7]+$/i,er=parseInt,tr=typeof H=="object"&&H&&H.Object===Object&&H,nr=typeof self=="object"&&self&&self.Object===Object&&self,rr=tr||nr||Function("return this")(),or=Object.prototype,ir=or.toString,lr=Math.max,sr=Math.min,oe=function(){return rr.Date.now()};function ar(t,e,r){var o,i,l,s,u,a,d=0,c=!1,m=!1,p=!0;if(typeof t!="function")throw new TypeError(Ft);e=rt(e)||0,Z(r)&&(c=!!r.leading,m="maxWait"in r,l=m?lr(rt(r.maxWait)||0,e):l,p="trailing"in r?!!r.trailing:p);function w(b){var k=o,M=i;return o=i=void 0,d=b,s=t.apply(M,k),s}function v(b){return d=b,u=setTimeout(x,e),c?w(b):s}function f(b){var k=b-a,M=b-d,Ye=e-k;return m?sr(Ye,l-M):Ye}function g(b){var k=b-a,M=b-d;return a===void 0||k>=e||k<0||m&&M>=l}function x(){var b=oe();if(g(b))return E(b);u=setTimeout(x,f(b))}function E(b){return u=void 0,p&&o?w(b):(o=i=void 0,s)}function h(){u!==void 0&&clearTimeout(u),d=0,o=a=i=u=void 0}function y(){return u===void 0?s:E(oe())}function S(){var b=oe(),k=g(b);if(o=arguments,i=this,a=b,k){if(u===void 0)return v(a);if(m)return u=setTimeout(x,e),w(a)}return u===void 0&&(u=setTimeout(x,e)),s}return S.cancel=h,S.flush=y,S}function ur(t,e,r){var o=!0,i=!0;if(typeof t!="function")throw new TypeError(Ft);return Z(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),ar(t,e,{leading:o,maxWait:e,trailing:i})}function Z(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function cr(t){return!!t&&typeof t=="object"}function fr(t){return typeof t=="symbol"||cr(t)&&ir.call(t)==Gn}function rt(t){if(typeof t=="number")return t;if(fr(t))return nt;if(Z(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Z(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Yn,"");var r=Zn.test(t);return r||Jn.test(t)?er(t.slice(2),r?2:8):Qn.test(t)?nt:+t}var dr=ur;const mr=xe(dr);function ot(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Se(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(function(r){typeof t[r]>"u"?t[r]=e[r]:ot(e[r])&&ot(t[r])&&Object.keys(e[r]).length>0&&Se(t[r],e[r])})}var jt={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ee(){var t=typeof document<"u"?document:{};return Se(t,jt),t}var pr={document:jt,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout>"u"||clearTimeout(t)}};function Ut(){var t=typeof window<"u"?window:{};return Se(t,pr),t}function vr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function me(t){return me=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},me(t)}function J(t,e){return J=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o},J(t,e)}function hr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Y(t,e,r){return hr()?Y=Reflect.construct:Y=function(i,l,s){var u=[null];u.push.apply(u,l);var a=Function.bind.apply(i,u),d=new a;return s&&J(d,s.prototype),d},Y.apply(null,arguments)}function gr(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function pe(t){var e=typeof Map=="function"?new Map:void 0;return pe=function(o){if(o===null||!gr(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(o))return e.get(o);e.set(o,i)}function i(){return Y(o,arguments,me(this).constructor)}return i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),J(i,o)},pe(t)}function br(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yr(t){var e=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return e},set:function(o){e.__proto__=o}})}var U=function(t){vr(e,t);function e(r){var o;return o=t.call.apply(t,[this].concat(r))||this,yr(br(o)),o}return e}(pe(Array));function ke(t){t===void 0&&(t=[]);var e=[];return t.forEach(function(r){Array.isArray(r)?e.push.apply(e,ke(r)):e.push(r)}),e}function wr(t){for(var e=[],r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function _r(t){return t.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function xr(t,e){if(typeof t!="string")return[t];for(var r=[],o=e.querySelectorAll(t),i=0;i<o.length;i+=1)r.push(o[i]);return r}function V(t,e){var r=Ut(),o=Ee(),i=[];if(!e&&t instanceof U)return t;if(!t)return new U(i);if(typeof t=="string"){var l=t.trim();if(l.indexOf("<")>=0&&l.indexOf(">")>=0){var s="div";l.indexOf("<li")===0&&(s="ul"),l.indexOf("<tr")===0&&(s="tbody"),(l.indexOf("<td")===0||l.indexOf("<th")===0)&&(s="tr"),l.indexOf("<tbody")===0&&(s="table"),l.indexOf("<option")===0&&(s="select");var u=o.createElement(s);u.innerHTML=l;for(var a=0;a<u.childNodes.length;a+=1)i.push(u.childNodes[a])}else i=xr(t.trim(),e||o)}else if(t.nodeType||t===r||t===o)i.push(t);else if(Array.isArray(t)){if(t instanceof U)return t;i=t}return new U(wr(i))}V.fn=U.prototype;function it(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=ke(e.map(function(i){return i.split(" ")}));return this.forEach(function(i){var l;(l=i.classList).add.apply(l,o)}),this}function lt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=ke(e.map(function(i){return i.split(" ")}));return this.forEach(function(i){var l;(l=i.classList).remove.apply(l,o)}),this}function st(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(var o in t)this[r][o]=t[o],this[r].setAttribute(o,t[o]);return this}function at(){var t=this[0];if(t){var e={};if(t.dataset)for(var r in t.dataset)e[r]=t.dataset[r];else for(var o=0;o<t.attributes.length;o+=1){var i=t.attributes[o];i.name.indexOf("data-")>=0&&(e[_r(i.name.split("data-")[1])]=i.value)}for(var l in e)e[l]==="false"?e[l]=!1:e[l]==="true"?e[l]=!0:parseFloat(e[l])===e[l]*1&&(e[l]*=1);return e}}function ut(t){if(typeof t>"u"){var e=this[0];if(!e)return;if(e.multiple&&e.nodeName.toLowerCase()==="select"){for(var r=[],o=0;o<e.selectedOptions.length;o+=1)r.push(e.selectedOptions[o].value);return r}return e.value}for(var i=0;i<this.length;i+=1){var l=this[i];if(Array.isArray(t)&&l.multiple&&l.nodeName.toLowerCase()==="select")for(var s=0;s<l.options.length;s+=1)l.options[s].selected=t.indexOf(l.options[s].value)>=0;else l.value=t}return this}function ct(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=e[0],i=e[1],l=e[2],s=e[3];typeof e[1]=="function"&&(o=e[0],l=e[1],s=e[2],i=void 0),s||(s=!1);function u(f){var g=f.target;if(g){var x=f.target.dom7EventData||[];if(x.indexOf(f)<0&&x.unshift(f),V(g).is(i))l.apply(g,x);else for(var E=V(g).parents(),h=0;h<E.length;h+=1)V(E[h]).is(i)&&l.apply(E[h],x)}}function a(f){var g=f&&f.target?f.target.dom7EventData||[]:[];g.indexOf(f)<0&&g.unshift(f),l.apply(this,g)}for(var d=o.split(" "),c,m=0;m<this.length;m+=1){var p=this[m];if(i)for(c=0;c<d.length;c+=1){var v=d[c];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[v]||(p.dom7LiveListeners[v]=[]),p.dom7LiveListeners[v].push({listener:l,proxyListener:u}),p.addEventListener(v,u,s)}else for(c=0;c<d.length;c+=1){var w=d[c];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[w]||(p.dom7Listeners[w]=[]),p.dom7Listeners[w].push({listener:l,proxyListener:a}),p.addEventListener(w,a,s)}}return this}function ft(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=e[0],i=e[1],l=e[2],s=e[3];typeof e[1]=="function"&&(o=e[0],l=e[1],s=e[2],i=void 0),s||(s=!1);for(var u=o.split(" "),a=0;a<u.length;a+=1)for(var d=u[a],c=0;c<this.length;c+=1){var m=this[c],p=void 0;if(!i&&m.dom7Listeners?p=m.dom7Listeners[d]:i&&m.dom7LiveListeners&&(p=m.dom7LiveListeners[d]),p&&p.length)for(var w=p.length-1;w>=0;w-=1){var v=p[w];l&&v.listener===l||l&&v.listener&&v.listener.dom7proxy&&v.listener.dom7proxy===l?(m.removeEventListener(d,v.proxyListener,s),p.splice(w,1)):l||(m.removeEventListener(d,v.proxyListener,s),p.splice(w,1))}}return this}function dt(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function mt(t){return t?(this.forEach(function(e,r){t.apply(e,[e,r])}),this):this}function pt(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function vt(t){var e=Ut(),r=Ee(),o=this[0],i,l;if(!o||typeof t>"u")return!1;if(typeof t=="string"){if(o.matches)return o.matches(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);for(i=V(t),l=0;l<i.length;l+=1)if(i[l]===o)return!0;return!1}if(t===r)return o===r;if(t===e)return o===e;if(t.nodeType||t instanceof U){for(i=t.nodeType?[t]:t,l=0;l<i.length;l+=1)if(i[l]===o)return!0;return!1}return!1}function ht(){for(var t,e=Ee(),r=0;r<arguments.length;r+=1){t=r<0||arguments.length<=r?void 0:arguments[r];for(var o=0;o<this.length;o+=1)if(typeof t=="string"){var i=e.createElement("div");for(i.innerHTML=t;i.firstChild;)this[o].appendChild(i.firstChild)}else if(t instanceof U)for(var l=0;l<t.length;l+=1)this[o].appendChild(t[l]);else this[o].appendChild(t)}return this}function gt(t){for(var e=[],r=0;r<this.length;r+=1)for(var o=this[r].parentNode;o;)t?V(o).is(t)&&e.push(o):e.push(o),o=o.parentNode;return V(e)}function bt(t){for(var e=[],r=0;r<this.length;r+=1)for(var o=this[r].querySelectorAll(t),i=0;i<o.length;i+=1)e.push(o[i]);return V(e)}function yt(t){for(var e=[],r=0;r<this.length;r+=1)for(var o=this[r].children,i=0;i<o.length;i+=1)(!t||V(o[i]).is(t))&&e.push(o[i]);return V(e)}var Sr="resize scroll".split(" ");function Wt(t){function e(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];if(typeof o[0]>"u"){for(var l=0;l<this.length;l+=1)Sr.indexOf(t)<0&&(t in this[l]?this[l][t]():V(this[l]).trigger(t));return this}return this.on.apply(this,[t].concat(o))}return e}var wt=Wt("click"),_t=Wt("focus");dt&&(V.fn.hide=dt);ht&&(V.fn.append=ht);wt&&(V.fn.click=wt);ct&&(V.fn.on=ct);ft&&(V.fn.off=ft);_t&&(V.fn.focus=_t);st&&(V.fn.attr=st);ut&&(V.fn.val=ut);pt&&(V.fn.html=pt);at&&(V.fn.dataset=at);it&&(V.fn.addClass=it);lt&&(V.fn.removeClass=lt);yt&&(V.fn.children=yt);mt&&(V.fn.each=mt);bt&&(V.fn.find=bt);vt&&(V.fn.is=vt);gt&&(V.fn.parents=gt);const Er=globalThis.Node,kr=globalThis.Comment,Cr=globalThis.Element,Vr=globalThis.Text,Nr=globalThis.Range,Or=globalThis.Selection,Mr=globalThis.StaticRange;function zt(t,e,r,o,i){V("body").on("click",`#${o}-${e}`,mr(l=>{l.preventDefault();const s=Tr(t,r,o);return s&&i(s)}))}function P(t,e,r,o){return zt(t,"close",e,r,o)}function Br(t,e,r,o){return zt(t,"play",e,r,o)}function Tr(t,e,r){const[o]=_.SlateEditor.nodes(t,{at:[],match:i=>!_.SlateElement.isElement(i)||!_.DomEditor.checkNodeType(i,e)?!1:i.domId===r});return o}function ne(t,e,r){const o=_.SlateEditor.previous(t,{at:e[1],match:i=>_.SlateText.isText(i)});o!=null&&(_.SlateTransforms.insertText(t,r(e[0]),{at:_.SlateEditor.end(t,o[1])}),_.SlateTransforms.delete(t,{at:_.SlatePath.next(o[1])}))}function Dr(){return $("w-e-dom-speaker")}let Ir=class{getValue(e){const{selection:r}=e;return r==null?null:_.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;if(r==null||_.SlateRange.isCollapsed(r))return!0;const o=_.SlateEditor.string(e,r);return o.length!=1||!/^[\u4E00-\u9FA5]+$/gi.test(o)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const l={type:"ssml-p",domId:Dr(),word:i,phoneme:r,remark:r,bgColor:"speaker",children:[{text:""}]};_.SlateTransforms.delete(e),_.SlateTransforms.insertNodes(e,l),e.move(1),P(e,"ssml-p",l.domId,s=>{ne(e,s,u=>u.word)})}};function $r(t){const e={我:[{id:"1",text:"wo1",remark:"wo1"},{id:"2",text:"wo2",remark:"wo2"},{id:"3",text:"wo3",remark:"wo3"}],的:[{id:"1",text:"de1",remark:"de1"},{id:"2",text:"de2",remark:"de2"},{id:"3",text:"de3",remark:"de3"}]};return Promise.resolve(e[t]||e.我)}const Ce=n.defineComponent({emits:["error"],props:["fetch"],setup(t,{emit:e}){const r=new Ir,o=n.inject("editor"),i=n.ref([]),l=n.ref(!1);function s(){l.value||(l.value=!0)}function u(){l.value&&(l.value=!1)}async function a(d){const c=r.getValue(d);if(c?i.value=await(t.fetch||$r)(c):i.value=[],r.isDisabled(d))return e("error","选中一个中文字符，并且有不能在其他语句之内");if(i.value.length==0)return e("error","选中的字符没有不是多音字");s()}return()=>n.createVNode(N.ElPopover,{visible:l.value,"onUpdate:visible":d=>l.value=d,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(B,{text:"多音字",icon:"speaker",onClick:a},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[i.value.map(({id:d,text:c})=>n.createVNode("div",{key:d,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,c),u()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[c]))])})}});function Pr(){return $("w-e-dom-continuous")}class Lr{getValue(e){const{selection:r}=e;return r==null?"":_.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||_.SlateRange.isCollapsed(r)||_.SlateEditor.string(e,r).length<2)}exec(e){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const o=this.getValue(e);if(o==null)return;const i={type:"ssml-w",domId:Pr(),children:[{text:o}],remark:"连读",bgColor:"continuous"};_.SlateTransforms.delete(e),_.SlateTransforms.insertNodes(e,i),P(e,"ssml-w",i.domId,l=>{_.SlateTransforms.unwrapNodes(e,{at:l[1]})})}}const Ve=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Lr;function o(i){if(r.isDisabled(i))return e("error","请选择多个中文字符或者多个多个英文单词");r.exec(i)}return()=>n.createVNode(B,{text:"连读",icon:"continuous",onClick:o},null)}});function Ar(){return $("w-e-dom-read")}class Rr{getValue(e){const{selection:r}=e;return r==null?"":_.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||_.SlateRange.isCollapsed(r)||_.SlateEditor.string(e,r).length<=0)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const l={type:"ssml-w",domId:Ar(),phoneme:r.id,remark:r.remark,value:i,bgColor:"read",children:[{text:i}]};_.SlateTransforms.delete(e),_.SlateTransforms.insertNodes(e,l),P(e,"ssml-w",l.domId,s=>ne(e,s,()=>i))}}const Fr=[{id:"z",text:"重音",remark:"重"},{id:"t",text:"拖音",remark:"拖"},{id:"all",text:"重音+拖音",remark:"重+拖"}],Ne=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Rr,o=n.inject("editor"),i=n.ref(!1);function l(){i.value||(i.value=!0)}function s(){i.value&&(i.value=!1)}function u(a){if(r.isDisabled(a)){e("error","请先选择文本");return}l()}return()=>n.createVNode(N.ElPopover,{visible:i.value,"onUpdate:visible":a=>i.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(B,{text:"重音",icon:"read",onClick:u},null),default:()=>n.createVNode("div",{class:"d-flex flex-column",onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[Fr.map(({id:a,text:d,remark:c})=>n.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,{id:a,text:d,remark:c}),s()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[d]))])})}});function jr(){return $("w-e-dom-digital")}class Ur{getValue(e){const{selection:r}=e;return r==null?"":_.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;if(r==null||_.SlateRange.isCollapsed(r))return!0;const o=_.SlateEditor.string(e,r);return!!(o.length<=0||Number.isNaN(Number(o)))}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const l={type:"ssml-say-as",domId:jr(),interpretAs:r.id,remark:r.remark,bgColor:"digital",children:[{text:i}]};_.SlateTransforms.delete(e),_.SlateTransforms.insertNodes(e,l),P(e,"ssml-say-as",l.domId,s=>{_.SlateTransforms.unwrapNodes(e,{at:s[1]})})}}const Wr=[{id:"value",text:"读数值",remark:"读数值"},{id:"digits",text:"读数字",remark:"读数字"},{id:"telephone",text:"读手机号",remark:"读手机号"}],Oe=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Ur,o=n.inject("editor"),i=n.ref(!1);function l(){i.value=!i.value}function s(u){if(r.isDisabled(u)){e("error","请选择纯数字文本");return}l()}return()=>n.createVNode(N.ElPopover,{visible:i.value,"onUpdate:visible":u=>i.value=u,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(B,{text:"数字符号",icon:"digital",onClick:s},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[Wr.map(({id:u,text:a,remark:d})=>n.createVNode("div",{key:u,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,{id:u,text:a,remark:d}),l()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});function zr(){return $("w-e-dom-alias")}class Hr{getValue(e){const{selection:r}=e;return r==null?null:_.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||_.SlateRange.isCollapsed(r)||_.SlateEditor.string(e,r).length<=0)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const l={type:"ssml-sub",domId:zr(),remark:`(${r})`,alias:r,value:i,bgColor:"alias",children:[{text:""}]};_.SlateTransforms.delete(e),_.SlateTransforms.insertNodes(e,l),P(e,"ssml-sub",l.domId,s=>ne(e,s,u=>u.value))}}const Me=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Hr,o=n.inject("editor"),i=n.ref(),l=n.ref(!1),s=n.shallowRef();function u(){l.value||(l.value=!0)}function a(){l.value&&(l.value=!1)}async function d(m){if(r.isDisabled(m)){e("error","选中一个中文字符，并且有不能在其他语句之内");return}u(),s.value=m.selection,i.value.focus()}function c(m){a();const p=o==null?void 0:o.value;!p||!m||(p.select(s.value),!r.isDisabled(p)&&r.exec(p,m))}return()=>n.createVNode(N.ElPopover,{visible:l.value,"onUpdate:visible":m=>l.value=m,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>n.createVNode(B,{text:"别名",icon:"alias",onClick:d},null),default:()=>n.createVNode(ee,{ref:i,onSubmit:c},null)})}});function qr(t){const{selection:e}=t;if(e){const[r,o]=_.SlateRange.edges(e),i=_.SlateEditor.range(t,r,o),l=_.SlateEditor.string(t,i),s=l.trimEnd();if(s!==l){const u=l.length-s.length,a={...o,offset:o.offset-u},d={...e,anchor:r,focus:a};_.SlateTransforms.select(t,d)}}}function Kr(){return $("w-e-dom-english")}class Xr{getValue(e){const{selection:r}=e;return r==null?null:_.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;if(r==null||_.SlateRange.isCollapsed(r))return!0;const o=_.SlateEditor.string(e,r);return o.length<=0||!/^[A-Za-z]+$/gi.test(o)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const l={type:"ssml-p",domId:Kr(),word:i,phoneme:r,remark:r,bgColor:"english",children:[{text:""}]};_.SlateTransforms.delete(e),_.SlateTransforms.insertNodes(e,l),e.move(1),P(e,"ssml-p",l.domId,s=>ne(e,s,u=>u.word))}}function Gr(t){const e={translate:[{id:"1",text:"wərd",remark:"wərd"}],global:[{id:"2",text:"ˈɡlōbəl",remark:"ˈɡlōbəl"}]};return Promise.resolve(e[t]||e.translate)}const Be=n.defineComponent({emits:["error"],props:["popover","fetch"],setup(t,{emit:e}){const r=new Xr,o=n.inject("editor"),i=n.ref([]),l=n.ref(!1);function s(){l.value||(l.value=!0)}function u(){l.value&&(l.value=!1)}async function a(d){if(qr(d),r.isDisabled(d))return e("error","请选择英文单词");const c=r.getValue(d);if(c){if(i.value=await(t.fetch||Gr)(c),i.value.length<=0)return e("error","找不到单词的音标");s()}}return()=>n.createVNode(N.ElPopover,{visible:l.value,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(B,{text:"音标",icon:"english",onClick:a},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[i.value.map(({id:d,text:c})=>n.createVNode("div",{key:d,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,c),u()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[c]))])})}});function Yr(){return $("w-e-dom-changespeed")}class Qr{getValue(e){const{selection:r}=e;return r==null?null:_.SlateEditor.string(e,r)}isDisabled(e){const{selection:r}=e;return!!(r==null||_.SlateRange.isCollapsed(r)||_.SlateEditor.string(e,r).length<=1)}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i=this.getValue(e);if(i==null)return;const l={type:"ssml-prosody",domId:Yr(),remark:r,rate:r,bgColor:"changespeed",children:[{text:i}]};_.SlateTransforms.delete(e),_.SlateTransforms.insertNodes(e,l),P(e,"ssml-prosody",l.domId,s=>{_.SlateTransforms.unwrapNodes(e,{at:s[1]})})}}function Zr(){const t=[];for(let e=2;e<=40;e++){const r=`${(e*.05).toFixed(2)}x`;t.push({id:e.toString(),text:r,remark:r})}return Promise.resolve(t)}const Te=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Qr,o=n.inject("editor"),i=n.ref([]),l=n.ref(!1);function s(){l.value||(l.value=!0)}function u(){l.value&&(l.value=!1)}async function a(d){if(i.value=await Zr(),r.isDisabled(d)){e("error","选中一个中文字符，并且有不能在其他语句之内");return}s()}return()=>n.createVNode(N.ElPopover,{style:{padding:"0px"},visible:l.value,"onUpdate:visible":d=>l.value=d,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(B,{text:"局部变速",icon:"changespeed",onClick:a},null),default:()=>n.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[i.value.map(({id:d,text:c})=>n.createVNode("div",{key:d,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,c),u()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[c]))])})}});function Jr(){return $("w-e-dom-rhythm")}class eo{isDisabled(e){const{selection:r}=e;return!!(r==null||_.SlateRange.isExpanded(r))}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i={type:"ssml-break",domId:Jr(),time:r.id,remark:r.remark,bgColor:"rhythm",children:[{text:""}]};_.SlateTransforms.insertNodes(e,i),e.move(1),P(e,"ssml-break",i.domId,l=>{_.SlateTransforms.delete(e,{at:l[1]})})}}const to=[{id:"200ms",text:"短",remark:"短"},{id:"300ms",text:"中",remark:"中"},{id:"500ms",text:"长",remark:"长"}],De=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new eo,o=n.inject("editor"),i=n.ref(!1);function l(){i.value||(i.value=!0)}function s(){i.value&&(i.value=!1)}function u(a){if(r.isDisabled(a)){e("error","不能选择文本");return}l()}return()=>n.createVNode(N.ElPopover,{visible:i.value,"onUpdate:visible":a=>i.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>n.createVNode(B,{text:"停顿调节",icon:"rhythm",onClick:u},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[to.map(({id:a,text:d,remark:c})=>n.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{r.isDisabled(o==null?void 0:o.value)||r.exec(o==null?void 0:o.value,{id:a,text:d,remark:c}),s()},onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[d]))])})}});var ve={exports:{}},Ht={exports:{}},no=void 0,qt=function(t){return t!==no&&t!==null},ro=qt,oo={object:!0,function:!0,undefined:!0},io=function(t){return ro(t)?hasOwnProperty.call(oo,typeof t):!1},lo=io,so=function(t){if(!lo(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},ao=so,uo=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!ao(t)},co=uo,fo=/^\s*class[\s{/}]/,mo=Function.prototype.toString,po=function(t){return!(!co(t)||fo.test(mo.call(t)))},vo=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},ie,xt;function ho(){return xt||(xt=1,ie=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),ie}var go=function(){},bo=go(),Ie=function(t){return t!==bo&&t!==null},le,St;function yo(){if(St)return le;St=1;var t=Ie,e=Object.keys;return le=function(r){return e(t(r)?Object(r):r)},le}var se,Et;function wo(){return Et||(Et=1,se=ho()()?Object.keys:yo()),se}var ae,kt;function _o(){if(kt)return ae;kt=1;var t=Ie;return ae=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},ae}var ue,Ct;function xo(){if(Ct)return ue;Ct=1;var t=wo(),e=_o(),r=Math.max;return ue=function(o,i){var l,s,u=r(arguments.length,2),a;for(o=Object(e(o)),a=function(d){try{o[d]=i[d]}catch(c){l||(l=c)}},s=1;s<u;++s)i=arguments[s],t(i).forEach(a);if(l!==void 0)throw l;return o},ue}var So=vo()?Object.assign:xo(),Eo=Ie,ko=Array.prototype.forEach,Co=Object.create,Vo=function(t,e){var r;for(r in t)e[r]=t[r]},No=function(t){var e=Co(null);return ko.call(arguments,function(r){Eo(r)&&Vo(Object(r),e)}),e},ce="razdwatrzy",Oo=function(){return typeof ce.contains!="function"?!1:ce.contains("dwa")===!0&&ce.contains("foo")===!1},fe,Vt;function Mo(){if(Vt)return fe;Vt=1;var t=String.prototype.indexOf;return fe=function(e){return t.call(this,e,arguments[1])>-1},fe}var Bo=Oo()?String.prototype.contains:Mo(),Q=qt,Nt=po,Kt=So,Xt=No,K=Bo,To=Ht.exports=function(t,e){var r,o,i,l,s;return arguments.length<2||typeof t!="string"?(l=e,e=t,t=null):l=arguments[2],Q(t)?(r=K.call(t,"c"),o=K.call(t,"e"),i=K.call(t,"w")):(r=i=!0,o=!1),s={value:e,configurable:r,enumerable:o,writable:i},l?Kt(Xt(l),s):s};To.gs=function(t,e,r){var o,i,l,s;return typeof t!="string"?(l=r,r=e,e=t,t=null):l=arguments[3],Q(e)?Nt(e)?Q(r)?Nt(r)||(l=r,r=void 0):r=void 0:(l=e,e=r=void 0):e=void 0,Q(t)?(o=K.call(t,"c"),i=K.call(t,"e")):(o=!0,i=!1),s={get:e,set:r,configurable:o,enumerable:i},l?Kt(Xt(l),s):s};var Do=Ht.exports,Io=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var r=Do,o=Io,i=Function.prototype.apply,l=Function.prototype.call,s=Object.create,u=Object.defineProperty,a=Object.defineProperties,d=Object.prototype.hasOwnProperty,c={configurable:!0,enumerable:!1,writable:!0},m,p,w,v,f,g,x;m=function(E,h){var y;return o(h),d.call(this,"__ee__")?y=this.__ee__:(y=c.value=s(null),u(this,"__ee__",c),c.value=null),y[E]?typeof y[E]=="object"?y[E].push(h):y[E]=[y[E],h]:y[E]=h,this},p=function(E,h){var y,S;return o(h),S=this,m.call(this,E,y=function(){w.call(S,E,y),i.call(h,this,arguments)}),y.__eeOnceListener__=h,this},w=function(E,h){var y,S,b,k;if(o(h),!d.call(this,"__ee__"))return this;if(y=this.__ee__,!y[E])return this;if(S=y[E],typeof S=="object")for(k=0;b=S[k];++k)(b===h||b.__eeOnceListener__===h)&&(S.length===2?y[E]=S[k?0:1]:S.splice(k,1));else(S===h||S.__eeOnceListener__===h)&&delete y[E];return this},v=function(E){var h,y,S,b,k;if(d.call(this,"__ee__")&&(b=this.__ee__[E],!!b))if(typeof b=="object"){for(y=arguments.length,k=new Array(y-1),h=1;h<y;++h)k[h-1]=arguments[h];for(b=b.slice(),h=0;S=b[h];++h)i.call(S,this,k)}else switch(arguments.length){case 1:l.call(b,this);break;case 2:l.call(b,this,arguments[1]);break;case 3:l.call(b,this,arguments[1],arguments[2]);break;default:for(y=arguments.length,k=new Array(y-1),h=1;h<y;++h)k[h-1]=arguments[h];i.call(b,this,k)}},f={on:m,once:p,off:w,emit:v},g={on:r(m),once:r(p),off:r(w),emit:r(v)},x=a({},g),t.exports=e=function(E){return E==null?s(x):a(Object(E),g)},e.methods=f})(ve,ve.exports);var $o=ve.exports;const Po=xe($o),C=Po();function $e(t){if(window.navigator.userAgent.toLowerCase().indexOf("ie")>=0){const r=`<embed name="embedPlay" src="${t}"></embed>`;V("body").find("embed").length<=0&&V("body").append(r);const o=document.embedPlay;o.volume=100}else{const r=`<audio id='audioPlay' src='${t}' hidden='true'>`;V("body").find("audio").length<=0&&V("body").append(r),document.getElementById("audioPlay").play()}}function Lo(){return $("w-e-dom-special")}class Ao{constructor(e){re(this,"editor");re(this,"oldSelection");this.editor=e}recordSelection(){this.oldSelection=this.editor.selection}getSelection(){const{selection:e}=this.editor;return e??this.oldSelection}getValue(){const{selection:e}=this.editor;return e==null?null:_.SlateEditor.string(this.editor,e)}isDisabled(){const e=this.getSelection();return e==null?(C.emit("editor-error","未选中编辑器"),!0):_.SlateRange.isExpanded(e)?(C.emit("editor-error","不能框选文字"),!0):!1}exec(e){if(this.isDisabled()||(this.editor.select(this.getSelection()),this.getValue()==null))return;const o={type:"ssml-audio",domId:Lo(),src:e.value,remark:e.label,bgColor:"special",children:[{text:""}]};_.SlateTransforms.insertNodes(this.editor,o),this.editor.move(1),P(this.editor,"ssml-audio",o.domId,i=>_.SlateTransforms.delete(this.editor,{at:i[1]})),Br(this.editor,"ssml-audio",o.domId,i=>$e(i[0].src))}}const Pe=n.defineComponent({__name:"special-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:l}=X(e),s=a=>{if(r.value??(r.value=new Ao(a)),r.value.isDisabled())return!1;r.value.recordSelection(),C.emit("special-menu-click",{x:o.value-200,y:i.value+l.value})};function u(a){r.value&&!r.value.isDisabled()&&r.value.exec(a)}return n.onMounted(()=>{C.on("special-drag-box-submit",u)}),n.onUnmounted(()=>{C.off("special-drag-box-submit",u)}),(a,d)=>(n.openBlock(),n.createBlock(n.unref(B),{ref_key:"menuRef",ref:e,text:"音效",icon:"special",onClick:s},null,512))}}),Le=n.defineComponent({__name:"special-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认音效",second:"自定义音效",last:"最近音效"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=n.ref();n.onMounted(()=>{C.on("special-menu-click",a)}),n.onUnmounted(()=>{C.off("special-menu-click",a)});function u(c){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-3s.wav#1",label:`${c.search||"测试"}音效1`},{value:"https://download.samplelib.com/wav/sample-3s.wav#2",label:`${c.menuKey||"测试"}音效2`},{value:"https://download.samplelib.com/wav/sample-3s.wav#3",label:`${c.scene||"测试"}音效3`},{value:"https://download.samplelib.com/wav/sample-3s.wav#4",label:`${c.style||"测试"}音效4`}])}async function a(c){r.value=c,e.value=!0,s.value??(s.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function d(c){e.value=!1,C.emit("special-drag-box-submit",c)}return(c,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:l,dataList:s.value,fetch:u,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}});function Ro(){return $("w-e-dom-mute")}class Fo{isDisabled(e){const{selection:r}=e;return!!(r==null||_.SlateRange.isExpanded(r))}exec(e,r){if(this.isDisabled(e))return;const{selection:o}=e;if(o==null)return;const i={type:"ssml-break",domId:Ro(),time:r,remark:r,bgColor:"mute",children:[{text:""}]};_.SlateTransforms.insertNodes(e,i),e.move(1),P(e,"ssml-break",i.domId,l=>{_.SlateTransforms.delete(e,{at:l[1]})})}}const jo=[{id:"150ms",text:"150ms",remark:"150ms"},{id:"200ms",text:"200ms",remark:"200ms"},{id:"300ms",text:"300ms",remark:"300ms"},{id:"400ms",text:"400ms",remark:"400ms"},{id:"500ms",text:"500ms",remark:"500ms"},{id:"600ms",text:"600ms",remark:"600ms"}],Ae=n.defineComponent({emits:["error"],setup(t,{emit:e}){const r=new Fo,o=n.inject("editor");o||e("error","请注入editor");const i=n.ref(!1),l=n.ref(),s=n.shallowRef();function u(){i.value||(i.value=!0)}function a(){i.value&&(i.value=!1)}function d(m){if(r.isDisabled(m)){e("error","不能选择文本");return}u(),s.value=m.selection,l.value.focus()}function c(m){a();const p=o==null?void 0:o.value;!p||!m||(p.select(s.value),!r.isDisabled(p)&&r.exec(p,m))}return()=>n.createVNode(N.ElPopover,{visible:i.value,"onUpdate:visible":m=>i.value=m,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>n.createVNode(B,{text:"插入静音",icon:"mute",onClick:d},null),default:()=>n.createVNode("div",{class:"d-flex flex-column"},[jo.map(({id:m,text:p})=>n.createVNode("div",{key:m,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>c(m),onMousedown:n.withModifiers(()=>{},["stop","prevent"])},[p])),n.createVNode(ee,{type:"number",ref:l,onSubmit:c},null)])})}}),Re=n.defineComponent({__name:"bgm-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:l}=X(e),s=a=>{r.value=a,C.emit("bgm-menu-click",{x:o.value-200,y:i.value+l.value})};function u(a){var d;(d=r.value)==null||d.emit("updateBgm",a)}return n.onMounted(()=>{C.on("bgm-drag-box-submit",u)}),n.onUnmounted(()=>{C.off("gbm-drag-box-submit",u)}),(a,d)=>(n.openBlock(),n.createBlock(n.unref(B),{ref_key:"menuRef",ref:e,text:"配乐",icon:"bgm",onClick:s},null,512))}}),Fe=n.defineComponent({__name:"bgm-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=n.ref();n.onMounted(()=>{C.on("bgm-menu-click",a)}),n.onUnmounted(()=>{C.off("bgm-menu-click",a)});function u(c){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${c.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${c.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${c.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${c.style||"测试"}背景音乐4`}])}async function a(c){r.value=c,e.value=!0,s.value??(s.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function d(c){e.value=!1,C.emit("bgm-drag-box-submit",c)}return(c,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:l,dataList:s.value,fetch:u,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),je=n.defineComponent({__name:"sensitive-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:l}=X(e),s=a=>{r.value=a,C.emit("sensitive-menu-click",{x:o.value-200,y:i.value+l.value})};function u(a){var d;(d=r.value)==null||d.emit("sensitive",a)}return n.onMounted(()=>{C.on("sensitive-drag-box-submit",u)}),n.onUnmounted(()=>{C.off("sensitive-drag-box-submit",u)}),(a,d)=>(n.openBlock(),n.createBlock(n.unref(B),{ref_key:"menuRef",ref:e,text:"敏感词",icon:"sensitive",onClick:s},null,512))}}),Ue=n.defineComponent({__name:"sensitive-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=n.ref();n.onMounted(()=>{C.on("sensitive-menu-click",a)}),n.onUnmounted(()=>{C.off("sensitive-menu-click",a)});function u(c){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${c.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${c.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${c.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${c.style||"测试"}背景音乐4`}])}async function a(c){r.value=c,e.value=!0,s.value??(s.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function d(c){e.value=!1,C.emit("sensitive-drag-box-submit",c)}return(c,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:l,dataList:s.value,fetch:u,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),We=n.defineComponent({__name:"management-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:l}=X(e),s=a=>{r.value=a,C.emit("management-menu-click",{x:o.value-200,y:i.value+l.value})};function u(a){var d;(d=r.value)==null||d.emit("management",a)}return n.onMounted(()=>{C.on("management-drag-box-submit",u)}),n.onUnmounted(()=>{C.off("management-drag-box-submit",u)}),(a,d)=>(n.openBlock(),n.createBlock(n.unref(B),{ref_key:"menuRef",ref:e,text:"多人配音",icon:"management",onClick:s},null,512))}}),ze=n.defineComponent({__name:"management-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=n.ref();n.onMounted(()=>{C.on("management-menu-click",a)}),n.onUnmounted(()=>{C.off("management-menu-click",a)});function u(c){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${c.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${c.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${c.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${c.style||"测试"}背景音乐4`}])}async function a(c){r.value=c,e.value=!0,s.value??(s.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function d(c){e.value=!1,C.emit("management-drag-box-submit",c)}return(c,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:l,dataList:s.value,fetch:u,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),He=n.defineComponent({__name:"conversion-menu",setup(t){const e=n.ref(),r=n.shallowRef(),{x:o,y:i,height:l}=X(e),s=a=>{r.value=a,C.emit("bgm-menu-click",{x:o.value-200,y:i.value+l.value})};function u(a){var d;(d=r.value)==null||d.emit("updateBgm",a)}return n.onMounted(()=>{C.on("bgm-drag-box-submit",u)}),n.onUnmounted(()=>{C.off("gbm-drag-box-submit",u)}),(a,d)=>(n.openBlock(),n.createBlock(n.unref(B),{ref_key:"menuRef",ref:e,text:"局部变音",icon:"conversion",onClick:s},null,512))}}),qe=n.defineComponent({__name:"conversion-drag-box",setup(t){const e=n.ref(!1),r=n.ref({x:20,y:20}),o={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],s=n.ref();n.onMounted(()=>{C.on("conversion-menu-click",a)}),n.onUnmounted(()=>{C.off("conversion-menu-click",a)});function u(c){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${c.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${c.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${c.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${c.style||"测试"}背景音乐4`}])}async function a(c){r.value=c,e.value=!0,s.value??(s.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function d(c){e.value=!1,C.emit("conversion-drag-box-submit",c)}return(c,m)=>(n.openBlock(),n.createBlock(n.unref(z),{visible:e.value,"onUpdate:visible":m[0]||(m[0]=p=>e.value=p),position:r.value,"onUpdate:position":m[1]||(m[1]=p=>r.value=p)},{default:n.withCtx(()=>[n.createVNode(n.unref(W),{menuItemLabel:o,scenes:i,styles:l,dataList:s.value,fetch:u,onSubmit:d},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Uo=n.createElementVNode("div",null,"xxxxx",-1),Ke=n.defineComponent({__name:"try-play",setup(t){return(e,r)=>(n.openBlock(),n.createBlock(n.unref(we),null,{default:n.withCtx(()=>[Uo]),_:1}))}});const Wo={install:t=>{t.component("SpeakerMenu",Ce),t.component("ContinuousMenu",Ve),t.component("ReadMenu",Ne),t.component("DigitalMenu",Oe),t.component("AliasMenu",Me),t.component("EnglishMenu",Be),t.component("ChangespeedMenu",Te),t.component("RhythmMenu",De),t.component("SpecialMenu",Pe),t.component("SpecialDragBox",Le),t.component("MuteMenu",Ae),t.component("BgmMenu",Re),t.component("BgmDragBox",Fe),t.component("SensitiveMenu",je),t.component("SensitiveDragBox",Ue),t.component("ManagementMenu",We),t.component("ManagementDragBox",ze),t.component("ConversionMenu",He),t.component("ConversionDragBox",qe),t.component("TryPlay",Ke)}};var he={exports:{}},ge={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParsingError=void 0;class r extends Error{constructor(y,S){super(y),this.cause=S}}e.ParsingError=r;let o;function i(){return a(!1)||p()||m()||c()}function l(){return f(/\s*/),a(!0)||m()||d()||u(!1)}function s(){const h=u(!0),y=[];let S,b=l();for(;b;){if(b.node.type==="Element"){if(S)throw new Error("Found multiple root nodes");S=b.node}b.excluded||y.push(b.node),b=l()}if(!S)throw new r("Failed to parse XML","Root Element not found");if(o.xml.length!==0)throw new r("Failed to parse XML","Not Well-Formed XML");return{declaration:h?h.node:null,root:S,children:y}}function u(h){const y=f(h?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!y)return;const S={name:y[1],type:"ProcessingInstruction",attributes:{}};for(;!(g()||x("?>"));){const b=w();if(b)S.attributes[b.name]=b.value;else return}return f(/\?>/),{excluded:h?!1:o.options.filter(S)===!1,node:S}}function a(h){const y=f(/^<([^?!</>\s]+)\s*/);if(!y)return;const S={type:"Element",name:y[1],attributes:{},children:[]},b=h?!1:o.options.filter(S)===!1;for(;!(g()||x(">")||x("?>")||x("/>"));){const M=w();if(M)S.attributes[M.name]=M.value;else return}if(f(/^\s*\/>/))return S.children=null,{excluded:b,node:S};f(/\??>/);let k=i();for(;k;)k.excluded||S.children.push(k.node),k=i();if(o.options.strictMode){const M=`</${S.name}>`;if(o.xml.startsWith(M))o.xml=o.xml.slice(M.length);else throw new r("Failed to parse XML",`Closing tag not matching "${M}"`)}else f(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:b,node:S}}function d(){const h=f(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||f(/^<!DOCTYPE\s+\S+\s*>/);if(h){const y={type:"DocumentType",content:h[0]};return{excluded:o.options.filter(y)===!1,node:y}}}function c(){if(o.xml.startsWith("<![CDATA[")){const h=o.xml.indexOf("]]>");if(h>-1){const y=h+3,S={type:"CDATA",content:o.xml.substring(0,y)};return o.xml=o.xml.slice(y),{excluded:o.options.filter(S)===!1,node:S}}}}function m(){const h=f(/^<!--[\s\S]*?-->/);if(h){const y={type:"Comment",content:h[0]};return{excluded:o.options.filter(y)===!1,node:y}}}function p(){const h=f(/^([^<]+)/);if(h){const y={type:"Text",content:h[1]};return{excluded:o.options.filter(y)===!1,node:y}}}function w(){const h=f(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(h)return{name:h[1].trim(),value:v(h[2].trim())}}function v(h){return h.replace(/^['"]|['"]$/g,"")}function f(h){const y=o.xml.match(h);if(y)return o.xml=o.xml.slice(y[0].length),y}function g(){return o.xml.length===0}function x(h){return o.xml.indexOf(h)===0}function E(h,y={}){h=h.trim();const S=y.filter||(()=>!0);return o={xml:h,options:Object.assign(Object.assign({},y),{filter:S,strictMode:y.strictMode===!0})},s()}t.exports=E,e.default=E})(ge,ge.exports);var zo=ge.exports;(function(t,e){var r=H&&H.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(zo);function i(v){if(!v.options.indentation&&!v.options.lineSeparator)return;v.content+=v.options.lineSeparator;let f;for(f=0;f<v.level;f++)v.content+=v.options.indentation}function l(v){v.content=v.content.replace(/ +$/,"");let f;for(f=0;f<v.level;f++)v.content+=v.options.indentation}function s(v,f){v.content+=f}function u(v,f,g){if(typeof v.content=="string")a(v.content,f,g);else if(v.type==="Element")c(v,f,g);else if(v.type==="ProcessingInstruction")p(v,f);else throw new Error("Unknown node type: "+v.type)}function a(v,f,g){if(!g){const x=v.trim();(f.options.lineSeparator||x.length===0)&&(v=x)}v.length>0&&(!g&&f.content.length>0&&i(f),s(f,v))}function d(v,f){const g="/"+v.join("/"),x=v[v.length-1];return f.includes(x)||f.includes(g)}function c(v,f,g){if(f.path.push(v.name),!g&&f.content.length>0&&i(f),s(f,"<"+v.name),m(f,v.attributes),v.children===null||f.options.forceSelfClosingEmptyTag&&v.children.length===0){const x=f.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";s(f,x)}else if(v.children.length===0)s(f,"></"+v.name+">");else{const x=v.children;s(f,">"),f.level++;let E=v.attributes["xml:space"]==="preserve",h=!1;if(!E&&f.options.ignoredPaths&&(h=d(f.path,f.options.ignoredPaths),E=h),!E&&f.options.collapseContent){let y=!1,S=!1,b=!1;x.forEach(function(k,M){k.type==="Text"?(k.content.includes(`
`)?(S=!0,k.content=k.content.trim()):(M===0||M===x.length-1)&&k.content.trim().length===0&&(k.content=""),k.content.trim().length>0&&(y=!0)):k.type==="CDATA"?y=!0:b=!0}),y&&(!b||!S)&&(E=!0)}x.forEach(function(y){u(y,f,g||E)}),f.level--,!g&&!E&&i(f),h&&l(f),s(f,"</"+v.name+">")}f.path.pop()}function m(v,f){Object.keys(f).forEach(function(g){const x=f[g].replace(/"/g,"&quot;");s(v," "+g+'="'+x+'"')})}function p(v,f){f.content.length>0&&i(f),s(f,"<?"+v.name),m(f,v.attributes),s(f,"?>")}function w(v,f={}){f.indentation="indentation"in f?f.indentation:"    ",f.collapseContent=f.collapseContent===!0,f.lineSeparator="lineSeparator"in f?f.lineSeparator:`\r
`,f.whiteSpaceAtEndOfSelfclosingTag=f.whiteSpaceAtEndOfSelfclosingTag===!0,f.throwOnFailure=f.throwOnFailure!==!1;try{const g=(0,o.default)(v,{filter:f.filter,strictMode:f.strictMode}),x={content:"",level:0,options:f,path:[]};return g.declaration&&p(g.declaration,x),g.children.forEach(function(E){u(E,x,!1)}),f.lineSeparator?x.content.replace(/\r\n/g,`
`).replace(/\n/g,f.lineSeparator):x.content}catch(g){if(f.throwOnFailure)throw g;return v}}w.minify=(v,f={})=>w(v,Object.assign(Object.assign({},f),{indentation:"",lineSeparator:""})),t.exports=w,e.default=w})(he,he.exports);var Ho=he.exports;const qo=xe(Ho),L=t=>(n.pushScopeId("data-v-dc5f32f2"),t=t(),n.popScopeId(),t),Ko={class:"edit-title"},Xo={class:"title-wrapper"},Go=L(()=>n.createElementVNode("div",{class:"title-author"},"SSML编辑器",-1)),Yo=L(()=>n.createElementVNode("div",{class:"h h-1"},null,-1)),Qo={class:"author"},Zo=L(()=>n.createElementVNode("div",null,"已保存",-1)),Jo=L(()=>n.createElementVNode("div",null,"|",-1)),ei=L(()=>n.createElementVNode("div",{class:"w-2"},null,-1)),ti=L(()=>n.createElementVNode("span",{class:"iconfont icon-play font-size-12 p1"},null,-1)),ni=L(()=>n.createElementVNode("div",{class:"inline-block w-1 p-1"},null,-1)),ri={class:"operation-wrapper"},oi=L(()=>n.createElementVNode("div",{class:"menu-divider"},null,-1)),ii=L(()=>n.createElementVNode("div",{class:"w w-2"},null,-1)),li={class:"ssml-code"},si={class:"dialog-footer"},ai=n.defineComponent({__name:"editor-title",props:{characterTotal:{},characterMax:{},bgm:{}},setup(t){const e=n.inject("editor"),r=n.ref(!1),o=n.ref(""),i=n.computed(()=>qo(o.value,{indentation:"    ",filter:u=>u.type!=="Comment",collapseContent:!1,lineSeparator:`
`})),l=()=>{e&&(o.value=e.value.getHtml(),r.value=!0)},s=()=>{var u;(u=e==null?void 0:e.value)==null||u.emit("removeBgm")};return(u,a)=>(n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",Ko,[n.createElementVNode("div",Xo,[Go,Yo,n.createElementVNode("div",Qo,[Zo,Jo,n.createElementVNode("div",null,n.toDisplayString(u.characterTotal)+"/"+n.toDisplayString(u.characterMax)+"字",1),ei,u.bgm?(n.openBlock(),n.createBlock(n.unref(N.ElTag),{key:0,class:"bgm-txt p-2",closable:"",size:"small",onClick:a[0]||(a[0]=()=>u.bgm&&u.bgm.value&&n.unref($e)(u.bgm.value)),onClose:s},{default:n.withCtx(()=>[ti,ni,n.createElementVNode("span",null,n.toDisplayString(u.bgm.label),1)]),_:1})):n.createCommentVNode("",!0)])]),n.createElementVNode("div",ri,[n.createVNode(n.unref(N.ElButton),{type:"primary",icon:n.unref(Bt.Share),disabled:""},{default:n.withCtx(()=>[n.createTextVNode("分享")]),_:1},8,["icon"]),oi,n.createVNode(n.unref(N.ElButton),{type:"primary",onClick:l},{default:n.withCtx(()=>[n.createTextVNode("查看SSML")]),_:1}),n.createVNode(n.unref(N.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("下载音频")]),_:1}),n.createVNode(n.unref(N.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("下载视频")]),_:1}),n.createVNode(n.unref(N.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("下载字幕")]),_:1}),n.createVNode(n.unref(N.ElButton),{disabled:""},{default:n.withCtx(()=>[n.createTextVNode("声音转换")]),_:1}),ii])]),n.createVNode(n.unref(N.ElDialog),{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=d=>r.value=d),title:"查看SSML",width:"50%"},{footer:n.withCtx(()=>[n.createElementVNode("span",si,[n.createVNode(n.unref(N.ElButton),{type:"primary",onClick:a[1]||(a[1]=d=>r.value=!1)},{default:n.withCtx(()=>[n.createTextVNode(" 确定 ")]),_:1})])]),default:n.withCtx(()=>[n.createElementVNode("pre",li,n.toDisplayString(i.value),1)]),_:1},8,["modelValue"])],64))}});const ui=F(ai,[["__scopeId","data-v-dc5f32f2"]]),ci=n.defineComponent({__name:"editor-core",props:{editorConfig:{},defaultHtml:{}},emits:["created","change"],setup(t,{emit:e}){const r=t,o=n.ref(null);n.onMounted(()=>{i()});const i=()=>{o.value&&_.createEditor({selector:o.value,mode:"simple",html:n.toRaw(r.defaultHtml),config:{...n.toRaw(r.editorConfig),onCreated(l){const s=l.getConfig();s.hoverbarKeys=void 0,l.focus(!0),e("created",l)},onChange(l){e("change",l)}}})};return(l,s)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"boxRef",ref:o,class:"edit-core",style:{height:"600px","overflow-y":"hidden"}},null,512))}});function Ot(t,e,r,o,i){const l=e===void 0?void 0:e.key;return{sel:t,data:e,children:r,text:o,elm:i,key:l}}const Mt=Array.isArray;function de(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function Gt(t,e,r){if(t.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&e!==void 0)for(let o=0;o<e.length;++o){const i=e[o];if(typeof i=="string")continue;const l=i.data;l!==void 0&&Gt(l,i.children,i.sel)}}function O(t,e,r){let o={},i,l,s;if(r!==void 0?(e!==null&&(o=e),Mt(r)?i=r:de(r)?l=r.toString():r&&r.sel&&(i=[r])):e!=null&&(Mt(e)?i=e:de(e)?l=e.toString():e&&e.sel?i=[e]:o=e),i!==void 0)for(s=0;s<i.length;++s)de(i[s])&&(i[s]=Ot(void 0,void 0,void 0,i[s],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&Gt(o,i,t),Ot(t,o,i,l,void 0)}const R={style:{userSelect:"none"},contentEditable:!1};function Xe(t){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...R},[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-close`,O("span.iconfont.icon-roundclosefill",null))]),O(`span.boundary.start.ft-color.${t.bgColor}`,{...R}),O("span",t.plain),O(`span.boundary.end.ft-color.${t.bgColor}`,{...R})])}function Ge(t,e){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...R},[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-close`,O("span.iconfont.icon-roundclosefill",null))]),O(`span.boundary.start.ft-color.${t.bgColor}`,{...R}),O("span",e),O(`span.boundary.end.ft-color.${t.bgColor}`,{...R})])}function fi(t){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...R},[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-close`,O("span.iconfont.icon-roundclosefill",null))])])}function di(t){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...R},[O(`span#${t.domId}-play.btn-text`,O("span.iconfont.icon-play",null)),O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-text`,O("span.iconfont.icon-roundclosefill",null))])])}function mi(t){const e=t;return Xe({...e,plain:e.word})}function pi(t,e){if(e)return Ge(t,e);const r=t;return Xe({...r,plain:r.value})}function vi(t,e){if(!e)throw Error("children is not null");return Ge(t,e)}function hi(t){return fi(t)}function gi(t){const e=t;return Xe({...e,plain:e.value})}function bi(t,e){if(!e)throw Error("children is not null");return Ge(t,e)}function yi(t){return di(t)}const wi=[{type:"ssml-p",renderElem:mi},{type:"ssml-w",renderElem:pi},{type:"ssml-say-as",renderElem:vi},{type:"ssml-break",renderElem:hi},{type:"ssml-sub",renderElem:gi},{type:"ssml-prosody",renderElem:bi},{type:"ssml-audio",renderElem:yi}];function _i(t,e){return`<s>${e}</s>`}function xi(t,e){const{phoneme:r,value:o}=t;return r?`<w phoneme="${r}">${o}</w>`:`<w>${e}</w>`}function Si(t){const{word:e,phoneme:r}=t;return`<p ph="${r}">${e}</p>`}function Ei(t,e){const{interpretAs:r}=t;return`<say-as interpret-as="${r}">${e}</say-as>`}function ki(t){const{time:e}=t;return`<break time="${e}" />`}function Ci(t){const{alias:e,value:r}=t;return`<sub alias="${e}">${r}</sub>`}function Vi(t,e){const{rate:r}=t;return`<prosody rate="${r}">${e}</prosody>`}function Ni(t){const{src:e}=t;return`<audio src="${e}" />`}const Oi=[{type:"paragraph",elemToHtml:_i},{type:"ssml-w",elemToHtml:xi},{type:"ssml-p",elemToHtml:Si},{type:"ssml-say-as",elemToHtml:Ei},{type:"ssml-break",elemToHtml:ki},{type:"ssml-sub",elemToHtml:Ci},{type:"ssml-prosody",elemToHtml:Vi},{type:"ssml-audio",elemToHtml:Ni}];function Mi(t,e){return{type:"paragraph",children:e}}function Bi(t,e){const r=t.getAttribute("phoneme");return r?{type:"ssml-w",phoneme:r,value:t.textContent,children:[{text:t.textContent||""}]}:{type:"ssml-w",children:e}}const Ti=[{selector:"s",parseElemHtml:Mi},{selector:"w",parseElemHtml:Bi}];function T(t,e){return t===e}function Di(t){const{isInline:e,isVoid:r,deleteBackward:o,deleteForward:i,insertBreak:l,getHtml:s,apply:u,normalizeNode:a}=t,d=t;d.isInline=m=>{const p=_.DomEditor.getNodeType(m);return T(p,"ssml-w")||T(p,"ssml-p")||T(p,"ssml-break")||T(p,"ssml-say-as")||T(p,"ssml-sub")||T(p,"ssml-prosody")||T(p,"ssml-audio")?!0:e(m)},d.isVoid=m=>{const p=_.DomEditor.getNodeType(m);if(T(p,"ssml-w")){const{phoneme:w}=m;return!!w}return T(p,"ssml-p")||T(p,"ssml-break")?!0:T(p,"ssml-say-as")?!1:T(p,"ssml-sub")?!0:T(p,"ssml-prosody")?!1:T(p,"ssml-audio")?!0:r(m)},d.deleteBackward=m=>{o(m)},d.deleteForward=m=>{i(m)},d.insertBreak=()=>{l()},d.normalizeNode=m=>{a(m)};const c={voice:"",volume:"",pitch:""};return t.on("updateSpeak",m=>{Object.assign(c,m)}),t.on("updateBgm",m=>{c.bgm=m.value,c.bgmRemark=m.label}),t.on("removeBgm",()=>{c.bgm=void 0,c.bgmRemark=void 0}),d.getHtml=()=>{const m=[];for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const w=c[p];w&&m.push(`${p}=${w}`)}return`<speak ${m.join(" ")}>${s()}</speak>`},d.apply=m=>{u(m)},d}const Ii={editorPlugin:Di,renderElems:wi,elemsToHtml:Oi,parseElemsHtml:Ti};const $i={class:"content"},Pi=n.defineComponent({__name:"bar-view",setup(t){n.onMounted(()=>{C.on("editor-error",e)}),n.onUnmounted(()=>{C.off("editor-error",e)});function e(i){N.ElMessage.warning({message:i,grouping:!0})}function r(i){const l={我:[{id:"1",text:"wo1",remark:"wo1"},{id:"2",text:"wo2",remark:"wo2"},{id:"3",text:"wo3",remark:"wo3"}],的:[{id:"1",text:"de1",remark:"de1"},{id:"2",text:"de2",remark:"de2"},{id:"3",text:"de3",remark:"de3"}]};return Promise.resolve(l[i]||l.的)}function o(i){const l={translate:[{id:"1",text:"wərd",remark:"wərd"}],global:[{id:"2",text:"ˈɡlōbəl",remark:"ˈɡlōbəl"}]};return Promise.resolve(l[i]||l.translate)}return(i,l)=>(n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",$i,[n.createVNode(n.unref(_e),null,{default:n.withCtx(()=>[n.createVNode(n.unref(A),{divider:"green"},{default:n.withCtx(()=>[n.createVNode(n.unref(B),{text:"24K高清音质",icon:"play",disabled:""})]),_:1}),n.createVNode(n.unref(A),{divider:"cyan"},{default:n.withCtx(()=>[n.createVNode(n.unref(Ce),{onError:e,fetch:r}),n.createVNode(n.unref(Ne),{onError:e}),n.createVNode(n.unref(Oe),{onError:e}),n.createVNode(n.unref(Ve),{onError:e}),n.createVNode(n.unref(Me),{onError:e}),n.createVNode(n.unref(Be),{fetch:o,onError:e})]),_:1}),n.createVNode(n.unref(A),{divider:"orange"},{default:n.withCtx(()=>[n.createVNode(n.unref(Te),{onError:e}),n.createVNode(n.unref(We)),n.createVNode(n.unref(He))]),_:1}),n.createVNode(n.unref(A),{divider:"purple"},{default:n.withCtx(()=>[n.createVNode(n.unref(De),{onError:e}),n.createVNode(n.unref(Ae),{onError:e})]),_:1}),n.createVNode(n.unref(A),{divider:"yellow"},{default:n.withCtx(()=>[n.createVNode(n.unref(Pe)),n.createVNode(n.unref(Re))]),_:1}),n.createVNode(n.unref(A),null,{default:n.withCtx(()=>[n.createVNode(n.unref(je))]),_:1})]),_:1})]),n.createVNode(n.unref(Fe)),n.createVNode(n.unref(Le)),n.createVNode(n.unref(Ue)),n.createVNode(n.unref(ze)),n.createVNode(n.unref(qe)),n.createVNode(n.unref(Ke))],64))}}),Li=t=>(n.pushScopeId("data-v-60e192fb"),t=t(),n.popScopeId(),t),Ai={class:"edit-view"},Ri={class:"edit-box"},Fi=Li(()=>n.createElementVNode("div",{class:"h h-1"},null,-1)),ji={class:"editor"},Ui=`地球在极其遥远的未来可能面临一些威胁，但目前不太可能突然消失。
The Earth may face some threats in the extremely distant future, but it is currently unlikely to suddenly disappear.
`,Wi=n.defineComponent({__name:"editor-view",emits:["onCreated","onChange"],setup(t,{emit:e}){const r=n.ref(0),o=n.shallowRef(),i=n.ref(null);n.provide("editor",o);const l={maxLength:5e3,placeholder:"请输入内容..."};n.onUnmounted(()=>{var a;(a=o.value)==null||a.destroy()});const s=a=>{o.value=a,e("onCreated",a),a.on("updateBgm",d=>{i.value=d}),a.on("removeBgm",()=>{i.value=null})},u=a=>{r.value=a.getText().length,e("onChange",a)};return(a,d)=>(n.openBlock(),n.createElementBlock("div",Ai,[n.createVNode(ui,{bgm:i.value,"character-total":r.value,"character-max":l.maxLength||0},null,8,["bgm","character-total","character-max"]),n.createElementVNode("div",Ri,[n.createVNode(Pi),Fi,n.createElementVNode("div",ji,[n.createVNode(ci,{"editor-config":l,"default-html":Ui,onChange:u,onCreated:s})])])]))}});const Yt=F(Wi,[["__scopeId","data-v-60e192fb"]]),zi={install(t){t.component("EditorView",Yt)}};const Hi={install(t){t.use(Kn),t.use(Wo),t.use(zi)}};exports.AliasMenu=Me;exports.BarButton=B;exports.BarInput=ee;exports.BarPopover=Tt;exports.BarSearch=W;exports.BarWrapper=_e;exports.BarWrapperGroup=A;exports.BarWrapperItem=Rt;exports.BgmDragBox=Fe;exports.BgmMenu=Re;exports.ChangespeedMenu=Te;exports.ContinuousMenu=Ve;exports.ConversionDragBox=qe;exports.ConversionMenu=He;exports.DOMComment=kr;exports.DOMElement=Cr;exports.DOMNode=Er;exports.DOMRange=Nr;exports.DOMSelection=Or;exports.DOMStaticRange=Mr;exports.DOMText=Vr;exports.DigitalMenu=Oe;exports.DragBox=z;exports.EditorCoreModule=Ii;exports.EditorView=Yt;exports.EnglishMenu=Be;exports.FixedPanel=we;exports.ManagementDragBox=ze;exports.ManagementMenu=We;exports.MuteMenu=Ae;exports.ReadMenu=Ne;exports.RhythmMenu=De;exports.SensitiveDragBox=Ue;exports.SensitiveMenu=je;exports.SpeakerMenu=Ce;exports.SpecialDragBox=Le;exports.SpecialMenu=Pe;exports.TryPlay=Ke;exports.default=Hi;exports.genRandomStr=$;exports.playSound=$e;
