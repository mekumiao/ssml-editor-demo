"use strict";var vr=Object.defineProperty;var yr=(e,n,r)=>n in e?vr(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var W=(e,n,r)=>(yr(e,typeof n!="symbol"?n+"":n,r),r);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),y=require("@wangeditor/editor"),$=require("element-plus"),_e=require("@element-plus/icons-vue");var gn=!1;function Re(e,n,r){return Array.isArray(e)?(e.length=Math.max(e.length,n),e.splice(n,1,r),r):(e[n]=r,r)}function Ue(e,n){if(Array.isArray(e)){e.splice(n,1);return}delete e[n]}function gr(){return bn().__VUE_DEVTOOLS_GLOBAL_HOOK__}function bn(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const br=typeof Proxy=="function",_r="devtools-plugin:setup",wr="plugin:settings:set";let pe,et;function Er(){var e;return pe!==void 0||(typeof window<"u"&&window.performance?(pe=!0,et=window.performance):typeof global<"u"&&(!((e=global.perf_hooks)===null||e===void 0)&&e.performance)?(pe=!0,et=global.perf_hooks.performance):pe=!1),pe}function xr(){return Er()?et.now():Date.now()}class kr{constructor(n,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=n,this.hook=r;const o={};if(n.settings)for(const l in n.settings){const i=n.settings[l];o[l]=i.defaultValue}const s=`__vue-devtools-plugin-settings__${n.id}`;let a=Object.assign({},o);try{const l=localStorage.getItem(s),i=JSON.parse(l);Object.assign(a,i)}catch{}this.fallbacks={getSettings(){return a},setSettings(l){try{localStorage.setItem(s,JSON.stringify(l))}catch{}a=l},now(){return xr()}},r&&r.on(wr,(l,i)=>{l===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(l,i)=>this.target?this.target.on[i]:(...c)=>{this.onQueue.push({method:i,args:c})}}),this.proxiedTarget=new Proxy({},{get:(l,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...c)=>(this.targetQueue.push({method:i,args:c,resolve:()=>{}}),this.fallbacks[i](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:i,args:c,resolve:u})})})}async setRealTarget(n){this.target=n;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function _n(e,n){const r=e,o=bn(),s=gr(),a=br&&r.enableEarlyProxy;if(s&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))s.emit(_r,e,n);else{const l=a?new kr(r,s):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:n,proxy:l}),l&&n(l.proxiedTarget)}}/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Se;const $e=e=>Se=e,wn=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function ce(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ne;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ne||(ne={}));const je=typeof window<"u",Ne=(process.env.NODE_ENV!=="production"||!1)&&process.env.NODE_ENV!=="test"&&je,$t=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function Sr(e,{autoBom:n=!1}={}){return n&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function ut(e,n,r){const o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){kn(o.response,n,r)},o.onerror=function(){console.error("could not download file")},o.send()}function En(e){const n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Oe(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const De=typeof navigator=="object"?navigator:{userAgent:""},xn=(()=>/Macintosh/.test(De.userAgent)&&/AppleWebKit/.test(De.userAgent)&&!/Safari/.test(De.userAgent))(),kn=je?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!xn?Vr:"msSaveOrOpenBlob"in De?Nr:Cr:()=>{};function Vr(e,n="download",r){const o=document.createElement("a");o.download=n,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?En(o.href)?ut(e,n,r):(o.target="_blank",Oe(o)):Oe(o)):(o.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(o.href)},4e4),setTimeout(function(){Oe(o)},0))}function Nr(e,n="download",r){if(typeof e=="string")if(En(e))ut(e,n,r);else{const o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){Oe(o)})}else navigator.msSaveOrOpenBlob(Sr(e,r),n)}function Cr(e,n,r,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return ut(e,n,r);const s=e.type==="application/octet-stream",a=/constructor/i.test(String($t.HTMLElement))||"safari"in $t,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&a||xn)&&typeof FileReader<"u"){const i=new FileReader;i.onloadend=function(){let c=i.result;if(typeof c!="string")throw o=null,new Error("Wrong reader.result type");c=l?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=c:location.assign(c),o=null},i.readAsDataURL(e)}else{const i=URL.createObjectURL(e);o?o.location.assign(i):location.href=i,o=null,setTimeout(function(){URL.revokeObjectURL(i)},4e4)}}function F(e,n){const r="🍍 "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,n):n==="error"?console.error(r):n==="warn"?console.warn(r):console.log(r)}function dt(e){return"_a"in e&&"install"in e}function Sn(){if(!("clipboard"in navigator))return F("Your browser doesn't support the Clipboard API","error"),!0}function Vn(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(F('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function $r(e){if(!Sn())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),F("Global state copied to clipboard.")}catch(n){if(Vn(n))return;F("Failed to serialize the state. Check the console for more details.","error"),console.error(n)}}async function Tr(e){if(!Sn())try{Nn(e,JSON.parse(await navigator.clipboard.readText())),F("Global state pasted from clipboard.")}catch(n){if(Vn(n))return;F("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(n)}}async function Rr(e){try{kn(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(n){F("Failed to export the state as JSON. Check the console for more details.","error"),console.error(n)}}let re;function Or(){re||(re=document.createElement("input"),re.type="file",re.accept=".json");function e(){return new Promise((n,r)=>{re.onchange=async()=>{const o=re.files;if(!o)return n(null);const s=o.item(0);return n(s?{text:await s.text(),file:s}:null)},re.oncancel=()=>n(null),re.onerror=r,re.click()})}return e}async function Dr(e){try{const r=await Or()();if(!r)return;const{text:o,file:s}=r;Nn(e,JSON.parse(o)),F(`Global state imported from "${s.name}".`)}catch(n){F("Failed to import the state from JSON. Check the console for more details.","error"),console.error(n)}}function Nn(e,n){for(const r in n){const o=e.state.value[r];o&&Object.assign(o,n[r])}}function J(e){return{_custom:{display:e}}}const Cn="🍍 Pinia (root)",tt="_root";function Pr(e){return dt(e)?{id:tt,label:Cn}:{id:e.$id,label:e.$id}}function Br(e){if(dt(e)){const r=Array.from(e._s.keys()),o=e._s;return{state:r.map(a=>({editable:!0,key:a,value:e.state.value[a]})),getters:r.filter(a=>o.get(a)._getters).map(a=>{const l=o.get(a);return{editable:!1,key:a,value:l._getters.reduce((i,c)=>(i[c]=l[c],i),{})}})}}const n={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(n.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(n.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),n}function Ir(e){return e?Array.isArray(e)?e.reduce((n,r)=>(n.keys.push(r.key),n.operations.push(r.type),n.oldValue[r.key]=r.oldValue,n.newValue[r.key]=r.newValue,n),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:J(e.type),key:J(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function Mr(e){switch(e){case ne.direct:return"mutation";case ne.patchFunction:return"$patch";case ne.patchObject:return"$patch";default:return"unknown"}}let ye=!0;const Pe=[],le="pinia:mutations",H="pinia",{assign:Ar}=Object,Ae=e=>"🍍 "+e;function Lr(e,n){_n({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Pe,app:e},r=>{typeof r.now!="function"&&F("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:le,label:"Pinia 🍍",color:15064968}),r.addInspector({id:H,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{$r(n)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Tr(n),r.sendInspectorTree(H),r.sendInspectorState(H)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{Rr(n)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Dr(n),r.sendInspectorTree(H),r.sendInspectorState(H)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:o=>{const s=n._s.get(o);s?typeof s.$reset!="function"?F(`Cannot reset "${o}" store because it doesn't have a "$reset" method implemented.`,"warn"):(s.$reset(),F(`Store "${o}" reset.`)):F(`Cannot reset "${o}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((o,s)=>{const a=o.componentInstance&&o.componentInstance.proxy;if(a&&a._pStores){const l=o.componentInstance.proxy._pStores;Object.values(l).forEach(i=>{o.instanceData.state.push({type:Ae(i.$id),key:"state",editable:!0,value:i._isOptionsAPI?{_custom:{value:t.toRaw(i.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>i.$reset()}]}}:Object.keys(i.$state).reduce((c,u)=>(c[u]=i.$state[u],c),{})}),i._getters&&i._getters.length&&o.instanceData.state.push({type:Ae(i.$id),key:"getters",editable:!1,value:i._getters.reduce((c,u)=>{try{c[u]=i[u]}catch(h){c[u]=h}return c},{})})})}}),r.on.getInspectorTree(o=>{if(o.app===e&&o.inspectorId===H){let s=[n];s=s.concat(Array.from(n._s.values())),o.rootNodes=(o.filter?s.filter(a=>"$id"in a?a.$id.toLowerCase().includes(o.filter.toLowerCase()):Cn.toLowerCase().includes(o.filter.toLowerCase())):s).map(Pr)}}),r.on.getInspectorState(o=>{if(o.app===e&&o.inspectorId===H){const s=o.nodeId===tt?n:n._s.get(o.nodeId);if(!s)return;s&&(o.state=Br(s))}}),r.on.editInspectorState((o,s)=>{if(o.app===e&&o.inspectorId===H){const a=o.nodeId===tt?n:n._s.get(o.nodeId);if(!a)return F(`store "${o.nodeId}" not found`,"error");const{path:l}=o;dt(a)?l.unshift("state"):(l.length!==1||!a._customProperties.has(l[0])||l[0]in a.$state)&&l.unshift("$state"),ye=!1,o.set(a,l,o.state.value),ye=!0}}),r.on.editComponentState(o=>{if(o.type.startsWith("🍍")){const s=o.type.replace(/^🍍\s*/,""),a=n._s.get(s);if(!a)return F(`store "${s}" not found`,"error");const{path:l}=o;if(l[0]!=="state")return F(`Invalid path for store "${s}":
${l}
Only state can be modified.`);l[0]="$state",ye=!1,o.set(a,l,o.state.value),ye=!0}})})}function Fr(e,n){Pe.includes(Ae(n.$id))||Pe.push(Ae(n.$id)),_n({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Pe,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const o=typeof r.now=="function"?r.now.bind(r):Date.now;n.$onAction(({after:l,onError:i,name:c,args:u})=>{const h=$n++;r.addTimelineEvent({layerId:le,event:{time:o(),title:"🛫 "+c,subtitle:"start",data:{store:J(n.$id),action:J(c),args:u},groupId:h}}),l(m=>{oe=void 0,r.addTimelineEvent({layerId:le,event:{time:o(),title:"🛬 "+c,subtitle:"end",data:{store:J(n.$id),action:J(c),args:u,result:m},groupId:h}})}),i(m=>{oe=void 0,r.addTimelineEvent({layerId:le,event:{time:o(),logType:"error",title:"💥 "+c,subtitle:"end",data:{store:J(n.$id),action:J(c),args:u,error:m},groupId:h}})})},!0),n._customProperties.forEach(l=>{t.watch(()=>t.unref(n[l]),(i,c)=>{r.notifyComponentUpdate(),r.sendInspectorState(H),ye&&r.addTimelineEvent({layerId:le,event:{time:o(),title:"Change",subtitle:l,data:{newValue:i,oldValue:c},groupId:oe}})},{deep:!0})}),n.$subscribe(({events:l,type:i},c)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(H),!ye)return;const u={time:o(),title:Mr(i),data:Ar({store:J(n.$id)},Ir(l)),groupId:oe};i===ne.patchFunction?u.subtitle="⤵️":i===ne.patchObject?u.subtitle="🧩":l&&!Array.isArray(l)&&(u.subtitle=l.type),l&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:l}}),r.addTimelineEvent({layerId:le,event:u})},{detached:!0,flush:"sync"});const s=n._hotUpdate;n._hotUpdate=t.markRaw(l=>{s(l),r.addTimelineEvent({layerId:le,event:{time:o(),title:"🔥 "+n.$id,subtitle:"HMR update",data:{store:J(n.$id),info:J("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(H),r.sendInspectorState(H)});const{$dispose:a}=n;n.$dispose=()=>{a(),r.notifyComponentUpdate(),r.sendInspectorTree(H),r.sendInspectorState(H),r.getSettings().logStoreChanges&&F(`Disposed "${n.$id}" store 🗑`)},r.notifyComponentUpdate(),r.sendInspectorTree(H),r.sendInspectorState(H),r.getSettings().logStoreChanges&&F(`"${n.$id}" store installed 🆕`)})}let $n=0,oe;function Tt(e,n,r){const o=n.reduce((s,a)=>(s[a]=t.toRaw(e)[a],s),{});for(const s in o)e[s]=function(){const a=$n,l=r?new Proxy(e,{get(...c){return oe=a,Reflect.get(...c)},set(...c){return oe=a,Reflect.set(...c)}}):e;oe=a;const i=o[s].apply(l,arguments);return oe=void 0,i}}function jr({app:e,store:n,options:r}){if(n.$id.startsWith("__hot:"))return;n._isOptionsAPI=!!r.state,Tt(n,Object.keys(r.actions),n._isOptionsAPI);const o=n._hotUpdate;t.toRaw(n)._hotUpdate=function(s){o.apply(this,arguments),Tt(n,Object.keys(s._hmrPayload.actions),!!n._isOptionsAPI)},Fr(e,n)}function Hr(){const e=t.effectScope(!0),n=e.run(()=>t.ref({}));let r=[],o=[];const s=t.markRaw({install(a){$e(s),s._a=a,a.provide(wn,s),a.config.globalProperties.$pinia=s,Ne&&Lr(a,s),o.forEach(l=>r.push(l)),o=[]},use(a){return!this._a&&!gn?o.push(a):r.push(a),this},_p:r,_a:null,_e:e,_s:new Map,state:n});return Ne&&typeof Proxy<"u"&&s.use(jr),s}function Tn(e,n){for(const r in n){const o=n[r];if(!(r in e))continue;const s=e[r];ce(s)&&ce(o)&&!t.isRef(o)&&!t.isReactive(o)?e[r]=Tn(s,o):e[r]=o}return e}const Rn=()=>{};function Rt(e,n,r,o=Rn){e.push(n);const s=()=>{const a=e.indexOf(n);a>-1&&(e.splice(a,1),o())};return!r&&t.getCurrentScope()&&t.onScopeDispose(s),s}function me(e,...n){e.slice().forEach(r=>{r(...n)})}const Ur=e=>e();function nt(e,n){e instanceof Map&&n instanceof Map&&n.forEach((r,o)=>e.set(o,r)),e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const r in n){if(!n.hasOwnProperty(r))continue;const o=n[r],s=e[r];ce(s)&&ce(o)&&e.hasOwnProperty(r)&&!t.isRef(o)&&!t.isReactive(o)?e[r]=nt(s,o):e[r]=o}return e}const zr=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function Wr(e){return!ce(e)||!e.hasOwnProperty(zr)}const{assign:X}=Object;function Ot(e){return!!(t.isRef(e)&&e.effect)}function Dt(e,n,r,o){const{state:s,actions:a,getters:l}=n,i=r.state.value[e];let c;function u(){!i&&(process.env.NODE_ENV==="production"||!o)&&(r.state.value[e]=s?s():{});const h=process.env.NODE_ENV!=="production"&&o?t.toRefs(t.ref(s?s():{}).value):t.toRefs(r.state.value[e]);return X(h,a,Object.keys(l||{}).reduce((m,p)=>(process.env.NODE_ENV!=="production"&&p in h&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${p}" in store "${e}".`),m[p]=t.markRaw(t.computed(()=>{$e(r);const v=r._s.get(e);return l[p].call(v,v)})),m),{}))}return c=rt(e,u,n,r,o,!0),c}function rt(e,n,r={},o,s,a){let l;const i=X({actions:{}},r);if(process.env.NODE_ENV!=="production"&&!o._e.active)throw new Error("Pinia destroyed");const c={deep:!0};process.env.NODE_ENV!=="production"&&!gn&&(c.onTrigger=S=>{u?v=S:u==!1&&!_._hotUpdating&&(Array.isArray(v)?v.push(S):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let u,h,m=[],p=[],v;const f=o.state.value[e];!a&&!f&&(process.env.NODE_ENV==="production"||!s)&&(o.state.value[e]={});const d=t.ref({});let b;function k(S){let V;u=h=!1,process.env.NODE_ENV!=="production"&&(v=[]),typeof S=="function"?(S(o.state.value[e]),V={type:ne.patchFunction,storeId:e,events:v}):(nt(o.state.value[e],S),V={type:ne.patchObject,payload:S,storeId:e,events:v});const T=b=Symbol();t.nextTick().then(()=>{b===T&&(u=!0)}),h=!0,me(m,V,o.state.value[e])}const C=a?function(){const{state:V}=r,T=V?V():{};this.$patch(I=>{X(I,T)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`🍍: Store "${e}" is built using the setup syntax and does not implement $reset().`)}:Rn;function E(){l.stop(),m=[],p=[],o._s.delete(e)}function x(S,V){return function(){$e(o);const T=Array.from(arguments),I=[],D=[];function ae(R){I.push(R)}function fe(R){D.push(R)}me(p,{args:T,name:S,store:_,after:ae,onError:fe});let A;try{A=V.apply(this&&this.$id===e?this:_,T)}catch(R){throw me(D,R),R}return A instanceof Promise?A.then(R=>(me(I,R),R)).catch(R=>(me(D,R),Promise.reject(R))):(me(I,A),A)}}const N=t.markRaw({actions:{},getters:{},state:[],hotState:d}),g={_p:o,$id:e,$onAction:Rt.bind(null,p),$patch:k,$reset:C,$subscribe(S,V={}){const T=Rt(m,S,V.detached,()=>I()),I=l.run(()=>t.watch(()=>o.state.value[e],D=>{(V.flush==="sync"?h:u)&&S({storeId:e,type:ne.direct,events:v},D)},X({},c,V)));return T},$dispose:E},_=t.reactive(process.env.NODE_ENV!=="production"||Ne?X({_hmrPayload:N,_customProperties:t.markRaw(new Set)},g):g);o._s.set(e,_);const O=o._a&&o._a.runWithContext||Ur,L=o._e.run(()=>(l=t.effectScope(),O(()=>l.run(n))));for(const S in L){const V=L[S];if(t.isRef(V)&&!Ot(V)||t.isReactive(V))process.env.NODE_ENV!=="production"&&s?Re(d.value,S,t.toRef(L,S)):a||(f&&Wr(V)&&(t.isRef(V)?V.value=f[S]:nt(V,f[S])),o.state.value[e][S]=V),process.env.NODE_ENV!=="production"&&N.state.push(S);else if(typeof V=="function"){const T=process.env.NODE_ENV!=="production"&&s?V:x(S,V);L[S]=T,process.env.NODE_ENV!=="production"&&(N.actions[S]=V),i.actions[S]=V}else process.env.NODE_ENV!=="production"&&Ot(V)&&(N.getters[S]=a?r.getters[S]:V,je&&(L._getters||(L._getters=t.markRaw([]))).push(S))}if(X(_,L),X(t.toRaw(_),L),Object.defineProperty(_,"$state",{get:()=>process.env.NODE_ENV!=="production"&&s?d.value:o.state.value[e],set:S=>{if(process.env.NODE_ENV!=="production"&&s)throw new Error("cannot set hotState");k(V=>{X(V,S)})}}),process.env.NODE_ENV!=="production"&&(_._hotUpdate=t.markRaw(S=>{_._hotUpdating=!0,S._hmrPayload.state.forEach(V=>{if(V in _.$state){const T=S.$state[V],I=_.$state[V];typeof T=="object"&&ce(T)&&ce(I)?Tn(T,I):S.$state[V]=I}Re(_,V,t.toRef(S.$state,V))}),Object.keys(_.$state).forEach(V=>{V in S.$state||Ue(_,V)}),u=!1,h=!1,o.state.value[e]=t.toRef(S._hmrPayload,"hotState"),h=!0,t.nextTick().then(()=>{u=!0});for(const V in S._hmrPayload.actions){const T=S[V];Re(_,V,x(V,T))}for(const V in S._hmrPayload.getters){const T=S._hmrPayload.getters[V],I=a?t.computed(()=>($e(o),T.call(_,_))):T;Re(_,V,I)}Object.keys(_._hmrPayload.getters).forEach(V=>{V in S._hmrPayload.getters||Ue(_,V)}),Object.keys(_._hmrPayload.actions).forEach(V=>{V in S._hmrPayload.actions||Ue(_,V)}),_._hmrPayload=S._hmrPayload,_._getters=S._getters,_._hotUpdating=!1})),Ne){const S={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(V=>{Object.defineProperty(_,V,X({value:_[V]},S))})}return o._p.forEach(S=>{if(Ne){const V=l.run(()=>S({store:_,app:o._a,pinia:o,options:i}));Object.keys(V||{}).forEach(T=>_._customProperties.add(T)),X(_,V)}else X(_,l.run(()=>S({store:_,app:o._a,pinia:o,options:i})))}),process.env.NODE_ENV!=="production"&&_.$state&&typeof _.$state=="object"&&typeof _.$state.constructor=="function"&&!_.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${_.$id}".`),f&&a&&r.hydrate&&r.hydrate(_.$state,f),u=!0,h=!0,_}function ft(e,n,r){let o,s;const a=typeof n=="function";if(typeof e=="string")o=e,s=a?r:n;else if(s=e,o=e.id,process.env.NODE_ENV!=="production"&&typeof o!="string")throw new Error('[🍍]: "defineStore()" must be passed a store id as its first argument.');function l(i,c){const u=t.hasInjectionContext();if(i=(process.env.NODE_ENV==="test"&&Se&&Se._testing?null:i)||(u?t.inject(wn,null):null),i&&$e(i),process.env.NODE_ENV!=="production"&&!Se)throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);i=Se,i._s.has(o)||(a?rt(o,n,s,i):Dt(o,s,i),process.env.NODE_ENV!=="production"&&(l._pinia=i));const h=i._s.get(o);if(process.env.NODE_ENV!=="production"&&c){const m="__hot:"+o,p=a?rt(m,n,s,i,!0):Dt(m,X({},s),i,!0);c._hotUpdate(p),delete i.state.value[m],i._s.delete(m)}if(process.env.NODE_ENV!=="production"&&je){const m=t.getCurrentInstance();if(m&&m.proxy&&!c){const p=m.proxy,v="_pStores"in p?p._pStores:p._pStores={};v[o]=h}}return h}return l.$id=o,l}function Pt(){return{id:"",src:""}}function G(){return()=>Promise.resolve([])}function pt(e){const n=(e==null?void 0:e.editorConfig)||{maxLength:5e3,placeholder:"请输入内容..."},r=(e==null?void 0:e.handleError)||(()=>{}),o=(e==null?void 0:e.pinyin)||{fetchData:G()},s=(e==null?void 0:e.english)||{fetchData:G()},a=(e==null?void 0:e.special)||{fetchData:G(),fetchScene:G(),fetchStyle:G()},l=(e==null?void 0:e.bgm)||{fetchData:G(),fetchScene:G(),fetchStyle:G()},i=(e==null?void 0:e.tryPlay)||{fetchData:G(),featchTag:G(),fetchStar:G(),fetchFlag:G()},c=(e==null?void 0:e.conversion)||{timeoutMilliseconds:2e4,audioUpload:()=>Pt(),transfer:()=>Pt(),fetchSpeaker:G()},u=a,h=l,m=i;return u.menus??(u.menus=[{label:"默认音效",value:""},{label:"自定义音效",value:"custom"},{label:"最近音效",value:"history"}]),h.menus??(h.menus=[{label:"默认配乐",value:""},{label:"自定义配乐",value:"custom"},{label:"最近配乐",value:"history"}]),m.gender??(m.gender=[{label:"全部",value:""},{label:"男声",value:"Male"},{label:"女声",value:"Female"}]),m.category??(m.category=[{label:"热榜",value:""},{label:"SVIP",value:"SVIP"},{label:"付费",value:"付费"}]),m.flags??(m.flags=[{label:"常用",value:"常用"},{label:"已购",value:"已购"},{label:"收藏",value:"收藏"},{label:"我的",value:"我的"}]),{editorConfig:n,handleError:r,pinyin:o,english:s,bgm:h,special:u,tryPlay:m,conversion:c}}const On=()=>({0:"0",.1:"0.1",.2:"0.2",.3:"0.3",.4:"0.4",.5:"0.5",.6:"0.6",.7:"0.7",.8:"0.8",.9:"0.9",1:"1.0",1.1:"1.1",1.2:"1.2",1.4:"1.4",1.5:"1.5",1.75:"1.75",2:"2.0"}),Dn=()=>({0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10","-1":"-1","-2":"-2","-3":"-3","-4":"-4","-5":"-5","-6":"-6","-7":"-7","-8":"-8","-9":"-9","-10":"-10"}),we=()=>"https://img.sdaxia.top/upload/4314c841777e4d20901cd5d04a28e91a.png",q=ft("--editor-config",()=>{const e=t.shallowRef(),n=t.shallowRef(),r=t.computed(()=>e.value),o=t.computed(()=>{if(n.value)return n.value;throw Error("请设置GlobalEditorConfig")});return{editor:r,globalEditConfig:o,setEditor:l=>{e.value=l},setGlobalEditConfig:l=>{n.value=l??pt()}}}),Gr=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-audio"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-audio"?!y.SlateNode.string(s):r(s),o};function Bt(e,n,r,o,s){const a=n===void 0?void 0:n.key;return{sel:e,data:n,children:r,text:o,elm:s,key:a}}const It=Array.isArray;function ze(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Pn(e,n,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&n!==void 0)for(let o=0;o<n.length;++o){const s=n[o];if(typeof s=="string")continue;const a=s.data;a!==void 0&&Pn(a,s.children,s.sel)}}function w(e,n,r){let o={},s,a,l;if(r!==void 0?(n!==null&&(o=n),It(r)?s=r:ze(r)?a=r.toString():r&&r.sel&&(s=[r])):n!=null&&(It(n)?s=n:ze(n)?a=n.toString():n&&n.sel?s=[n]:o=n),s!==void 0)for(l=0;l<s.length;++l)ze(s[l])&&(s[l]=Bt(void 0,void 0,void 0,s[l],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&Pn(o,s,e),Bt(e,o,s,a,void 0)}var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bn="Expected a function",Mt=0/0,qr="[object Symbol]",Yr=/^\s+|\s+$/g,Xr=/^[-+]0x[0-9a-f]+$/i,Kr=/^0b[01]+$/i,Jr=/^0o[0-7]+$/i,Qr=parseInt,Zr=typeof ge=="object"&&ge&&ge.Object===Object&&ge,eo=typeof self=="object"&&self&&self.Object===Object&&self,to=Zr||eo||Function("return this")(),no=Object.prototype,ro=no.toString,oo=Math.max,so=Math.min,We=function(){return to.Date.now()};function ao(e,n,r){var o,s,a,l,i,c,u=0,h=!1,m=!1,p=!0;if(typeof e!="function")throw new TypeError(Bn);n=At(n)||0,Le(r)&&(h=!!r.leading,m="maxWait"in r,a=m?oo(At(r.maxWait)||0,n):a,p="trailing"in r?!!r.trailing:p);function v(g){var _=o,O=s;return o=s=void 0,u=g,l=e.apply(O,_),l}function f(g){return u=g,i=setTimeout(k,n),h?v(g):l}function d(g){var _=g-c,O=g-u,L=n-_;return m?so(L,a-O):L}function b(g){var _=g-c,O=g-u;return c===void 0||_>=n||_<0||m&&O>=a}function k(){var g=We();if(b(g))return C(g);i=setTimeout(k,d(g))}function C(g){return i=void 0,p&&o?v(g):(o=s=void 0,l)}function E(){i!==void 0&&clearTimeout(i),u=0,o=c=s=i=void 0}function x(){return i===void 0?l:C(We())}function N(){var g=We(),_=b(g);if(o=arguments,s=this,c=g,_){if(i===void 0)return f(c);if(m)return i=setTimeout(k,n),v(c)}return i===void 0&&(i=setTimeout(k,n)),l}return N.cancel=E,N.flush=x,N}function lo(e,n,r){var o=!0,s=!0;if(typeof e!="function")throw new TypeError(Bn);return Le(r)&&(o="leading"in r?!!r.leading:o,s="trailing"in r?!!r.trailing:s),ao(e,n,{leading:o,maxWait:n,trailing:s})}function Le(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function io(e){return!!e&&typeof e=="object"}function co(e){return typeof e=="symbol"||io(e)&&ro.call(e)==qr}function At(e){if(typeof e=="number")return e;if(co(e))return Mt;if(Le(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Le(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(Yr,"");var r=Kr.test(e);return r||Jr.test(e)?Qr(e.slice(2),r?2:8):Xr.test(e)?Mt:+e}var uo=lo;const z=mt(uo);function Lt(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function ht(e,n){e===void 0&&(e={}),n===void 0&&(n={}),Object.keys(n).forEach(function(r){typeof e[r]>"u"?e[r]=n[r]:Lt(n[r])&&Lt(e[r])&&Object.keys(n[r]).length>0&&ht(e[r],n[r])})}var In={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function vt(){var e=typeof document<"u"?document:{};return ht(e,In),e}var fo={document:In,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){typeof setTimeout>"u"||clearTimeout(e)}};function Mn(){var e=typeof window<"u"?window:{};return ht(e,fo),e}function po(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ot(e)}function Fe(e,n){return Fe=Object.setPrototypeOf||function(o,s){return o.__proto__=s,o},Fe(e,n)}function mo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Be(e,n,r){return mo()?Be=Reflect.construct:Be=function(s,a,l){var i=[null];i.push.apply(i,a);var c=Function.bind.apply(s,i),u=new c;return l&&Fe(u,l.prototype),u},Be.apply(null,arguments)}function ho(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function st(e){var n=typeof Map=="function"?new Map:void 0;return st=function(o){if(o===null||!ho(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(o))return n.get(o);n.set(o,s)}function s(){return Be(o,arguments,ot(this).constructor)}return s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Fe(s,o)},st(e)}function vo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yo(e){var n=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return n},set:function(o){n.__proto__=o}})}var ie=function(e){po(n,e);function n(r){var o;return o=e.call.apply(e,[this].concat(r))||this,yo(vo(o)),o}return n}(st(Array));function yt(e){e===void 0&&(e=[]);var n=[];return e.forEach(function(r){Array.isArray(r)?n.push.apply(n,yt(r)):n.push(r)}),n}function go(e){for(var n=[],r=0;r<e.length;r+=1)n.indexOf(e[r])===-1&&n.push(e[r]);return n}function bo(e){return e.toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()})}function _o(e,n){if(typeof e!="string")return[e];for(var r=[],o=n.querySelectorAll(e),s=0;s<o.length;s+=1)r.push(o[s]);return r}function B(e,n){var r=Mn(),o=vt(),s=[];if(!n&&e instanceof ie)return e;if(!e)return new ie(s);if(typeof e=="string"){var a=e.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var l="div";a.indexOf("<li")===0&&(l="ul"),a.indexOf("<tr")===0&&(l="tbody"),(a.indexOf("<td")===0||a.indexOf("<th")===0)&&(l="tr"),a.indexOf("<tbody")===0&&(l="table"),a.indexOf("<option")===0&&(l="select");var i=o.createElement(l);i.innerHTML=a;for(var c=0;c<i.childNodes.length;c+=1)s.push(i.childNodes[c])}else s=_o(e.trim(),n||o)}else if(e.nodeType||e===r||e===o)s.push(e);else if(Array.isArray(e)){if(e instanceof ie)return e;s=e}return new ie(go(s))}B.fn=ie.prototype;function Ft(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=yt(n.map(function(s){return s.split(" ")}));return this.forEach(function(s){var a;(a=s.classList).add.apply(a,o)}),this}function jt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=yt(n.map(function(s){return s.split(" ")}));return this.forEach(function(s){var a;(a=s.classList).remove.apply(a,o)}),this}function Ht(e,n){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(var r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(e,n);else for(var o in e)this[r][o]=e[o],this[r].setAttribute(o,e[o]);return this}function Ut(){var e=this[0];if(e){var n={};if(e.dataset)for(var r in e.dataset)n[r]=e.dataset[r];else for(var o=0;o<e.attributes.length;o+=1){var s=e.attributes[o];s.name.indexOf("data-")>=0&&(n[bo(s.name.split("data-")[1])]=s.value)}for(var a in n)n[a]==="false"?n[a]=!1:n[a]==="true"?n[a]=!0:parseFloat(n[a])===n[a]*1&&(n[a]*=1);return n}}function zt(e){if(typeof e>"u"){var n=this[0];if(!n)return;if(n.multiple&&n.nodeName.toLowerCase()==="select"){for(var r=[],o=0;o<n.selectedOptions.length;o+=1)r.push(n.selectedOptions[o].value);return r}return n.value}for(var s=0;s<this.length;s+=1){var a=this[s];if(Array.isArray(e)&&a.multiple&&a.nodeName.toLowerCase()==="select")for(var l=0;l<a.options.length;l+=1)a.options[l].selected=e.indexOf(a.options[l].value)>=0;else a.value=e}return this}function Wt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],s=n[1],a=n[2],l=n[3];typeof n[1]=="function"&&(o=n[0],a=n[1],l=n[2],s=void 0),l||(l=!1);function i(d){var b=d.target;if(b){var k=d.target.dom7EventData||[];if(k.indexOf(d)<0&&k.unshift(d),B(b).is(s))a.apply(b,k);else for(var C=B(b).parents(),E=0;E<C.length;E+=1)B(C[E]).is(s)&&a.apply(C[E],k)}}function c(d){var b=d&&d.target?d.target.dom7EventData||[]:[];b.indexOf(d)<0&&b.unshift(d),a.apply(this,b)}for(var u=o.split(" "),h,m=0;m<this.length;m+=1){var p=this[m];if(s)for(h=0;h<u.length;h+=1){var f=u[h];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[f]||(p.dom7LiveListeners[f]=[]),p.dom7LiveListeners[f].push({listener:a,proxyListener:i}),p.addEventListener(f,i,l)}else for(h=0;h<u.length;h+=1){var v=u[h];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[v]||(p.dom7Listeners[v]=[]),p.dom7Listeners[v].push({listener:a,proxyListener:c}),p.addEventListener(v,c,l)}}return this}function Gt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],s=n[1],a=n[2],l=n[3];typeof n[1]=="function"&&(o=n[0],a=n[1],l=n[2],s=void 0),l||(l=!1);for(var i=o.split(" "),c=0;c<i.length;c+=1)for(var u=i[c],h=0;h<this.length;h+=1){var m=this[h],p=void 0;if(!s&&m.dom7Listeners?p=m.dom7Listeners[u]:s&&m.dom7LiveListeners&&(p=m.dom7LiveListeners[u]),p&&p.length)for(var v=p.length-1;v>=0;v-=1){var f=p[v];a&&f.listener===a||a&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===a?(m.removeEventListener(u,f.proxyListener,l),p.splice(v,1)):a||(m.removeEventListener(u,f.proxyListener,l),p.splice(v,1))}}return this}function qt(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function Yt(e){return e?(this.forEach(function(n,r){e.apply(n,[n,r])}),this):this}function Xt(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(var n=0;n<this.length;n+=1)this[n].innerHTML=e;return this}function Kt(e){var n=Mn(),r=vt(),o=this[0],s,a;if(!o||typeof e>"u")return!1;if(typeof e=="string"){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(s=B(e),a=0;a<s.length;a+=1)if(s[a]===o)return!0;return!1}if(e===r)return o===r;if(e===n)return o===n;if(e.nodeType||e instanceof ie){for(s=e.nodeType?[e]:e,a=0;a<s.length;a+=1)if(s[a]===o)return!0;return!1}return!1}function Jt(){for(var e,n=vt(),r=0;r<arguments.length;r+=1){e=r<0||arguments.length<=r?void 0:arguments[r];for(var o=0;o<this.length;o+=1)if(typeof e=="string"){var s=n.createElement("div");for(s.innerHTML=e;s.firstChild;)this[o].appendChild(s.firstChild)}else if(e instanceof ie)for(var a=0;a<e.length;a+=1)this[o].appendChild(e[a]);else this[o].appendChild(e)}return this}function Qt(e){for(var n=[],r=0;r<this.length;r+=1)for(var o=this[r].parentNode;o;)e?B(o).is(e)&&n.push(o):n.push(o),o=o.parentNode;return B(n)}function Zt(e){for(var n=[],r=0;r<this.length;r+=1)for(var o=this[r].querySelectorAll(e),s=0;s<o.length;s+=1)n.push(o[s]);return B(n)}function en(e){for(var n=[],r=0;r<this.length;r+=1)for(var o=this[r].children,s=0;s<o.length;s+=1)(!e||B(o[s]).is(e))&&n.push(o[s]);return B(n)}var wo="resize scroll".split(" ");function An(e){function n(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];if(typeof o[0]>"u"){for(var a=0;a<this.length;a+=1)wo.indexOf(e)<0&&(e in this[a]?this[a][e]():B(this[a]).trigger(e));return this}return this.on.apply(this,[e].concat(o))}return n}var tn=An("click"),nn=An("focus");qt&&(B.fn.hide=qt);Jt&&(B.fn.append=Jt);tn&&(B.fn.click=tn);Wt&&(B.fn.on=Wt);Gt&&(B.fn.off=Gt);nn&&(B.fn.focus=nn);Ht&&(B.fn.attr=Ht);zt&&(B.fn.val=zt);Xt&&(B.fn.html=Xt);Ut&&(B.fn.dataset=Ut);Ft&&(B.fn.addClass=Ft);jt&&(B.fn.removeClass=jt);en&&(B.fn.children=en);Yt&&(B.fn.each=Yt);Zt&&(B.fn.find=Zt);Kt&&(B.fn.is=Kt);Qt&&(B.fn.parents=Qt);const Eo=globalThis.Node,xo=globalThis.Comment,ko=globalThis.Element,So=globalThis.Text,Vo=globalThis.Range,No=globalThis.Selection,Co=globalThis.StaticRange;let $o=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,r)=>(r&=63,r<36?n+=r.toString(36):r<62?n+=(r-26).toString(36).toUpperCase():r>62?n+="-":n+="_",n),"");function To(e="r"){return`${e}-${$o()}`}class Ln{constructor(){W(this,"audio");W(this,"src");this.audio=null,this.src=null}removeAudioElement(){this.audio&&(document.body.removeChild(this.audio),this.audio=null,this.src=null)}play(n){this.stop(),this.audio=document.createElement("audio"),this.audio.hidden=!0,this.audio.volume=.5,this.audio.src=n,this.src=n,document.body.appendChild(this.audio),this.audio.play()}stop(n){n&&n!==this.src||this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.removeAudioElement())}}const ue=new Ln;function at(e){const n=Math.floor(e/60),r=e%60,o=String(n).padStart(2,"0"),s=String(r).padStart(2,"0");return`${o}:${s}`}class Fn{constructor(n,r){W(this,"id");W(this,"accept");W(this,"dom");W(this,"isdestroy",!1);W(this,"resolve");W(this,"reject");this.id=`--editor-input-file-${n}`,this.accept=r,this.dom=null,this.resolve=null,this.reject=null}createInputElement(){const n=document.createElement("input");return n.type="file",n.accept=this.accept,n.hidden=!0,n}change(n){var r,o;if(this.dom&&this.dom.files&&this.dom.files.length>0){const s=this.dom.files.item(0);if(s){(r=this.resolve)==null||r.call(this,s),this.dom.value="";return}this.dom.value=""}return(o=this.reject)==null?void 0:o.call(this,n)}cancel(n){var r;return this.dom&&(this.dom.value=""),(r=this.reject)==null?void 0:r.call(this,n)}open(){if(this.isdestroy)throw Error("对象已经销毁");this.dom||(this.dom=this.createInputElement(),this.dom.addEventListener("change",this.change.bind(this)),this.dom.addEventListener("cancel",this.cancel.bind(this)),document.body.appendChild(this.dom)),this.dom.click();const n=this;return new Promise((r,o)=>{n.resolve=r,n.reject=o})}destroy(){this.isdestroy||(this.dom&&document.body.removeChild(this.dom),this.dom=null,this.isdestroy=!0)}}class jn{constructor(n){W(this,"cancelled",!1);W(this,"timeoutId",null);this.timeoutMilliseconds=n}get token(){return{isCancellationRequested:()=>this.cancelled}}cancel(){this.cancelled=!0,this.clearTimeout()}clearTimeout(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}startTimeout(){this.timeoutId=setTimeout(()=>{this.cancel()},this.timeoutMilliseconds)}}function Ro(e){const{selection:n}=e;if(n){const[r,o]=y.SlateRange.edges(n),s=y.SlateEditor.range(e,r,o),a=y.SlateEditor.string(e,s),l=a.trimEnd();if(l!==a){const i=a.length-l.length,c={...o,offset:o.offset-i},u={...n,anchor:r,focus:c};y.SlateTransforms.select(e,u)}}}function rn(e,n){y.SlateEditor.withoutNormalizing(e,()=>{const r=y.SlateEditor.start(e,n),o=y.SlateEditor.end(e,n);y.SlateTransforms.insertText(e," ",{at:r}),y.SlateTransforms.insertText(e," ",{at:{path:o.path,offset:o.offset+1}}),y.SlateTransforms.select(e,{anchor:{path:r.path,offset:r.offset+1},focus:{path:o.path,offset:o.offset+1}})})}function Ee(e,n){y.SlateEditor.withoutNormalizing(e,()=>{const r=y.SlateEditor.before(e,n),o=y.SlateEditor.after(e,n);if(!r||!o)return;const s={anchor:{path:r.path,offset:r.offset-1},focus:{path:r.path,offset:r.offset}},a={anchor:{path:o.path,offset:o.offset},focus:{path:o.path,offset:o.offset+1}};y.SlateEditor.string(e,s)===" "&&y.SlateTransforms.delete(e,{at:s}),y.SlateEditor.string(e,a)===" "&&y.SlateTransforms.delete(e,{at:a})})}const Oo={type:"ssml-audio",renderElem:(e,n,r)=>n?Do(e,n,r):Po(e,r)};function Do(e,n,r){const{remark:o,src:s}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-audio)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-audio)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-audio)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(a=>{a.preventDefault(),ue.stop(s);const l=y.DomEditor.findPath(r,e);Ee(r,l),y.SlateTransforms.unwrapNodes(r,{at:l})})}}),w("span.iconfont.icon-play",{on:{click:z(a=>{a.preventDefault(),ue.play(s)})}}),w("span.data-content",{attrs:{"data-content":o}})])])}function Po(e,n){const{remark:r,src:o}=e;return w("span.ssml-wrapper.no-line-height",[w("span.remark.left",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-audio)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault(),ue.stop(o);const a=y.DomEditor.findPath(n,e);y.SlateTransforms.delete(n,{at:a})})}}),w("span.iconfont.icon-play",{on:{click:z(s=>{s.preventDefault(),ue.play(o)})}}),w("span.data-content",{attrs:{"data-content":r}})])])}const Bo={type:"ssml-audio",elemToHtml:(e,n)=>{const{remark:r,src:o}=e;return`<span
          data-w-e-type="ssml-audio"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-src="${o}"
          data-ow-remark="${r}"
        >${n}</span>`}},Io={selector:'span[data-w-e-type="ssml-audio"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-src")||"",o=e.getAttribute("data-ow-remark")||"";return{type:"ssml-audio",src:r,remark:o,children:n}}},Mo={editorPlugin:Gr,renderElems:[Oo],elemsToHtml:[Bo],parseElemsHtml:[Io]},Ao=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-break"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-break"?!0:r(s),o},Lo={type:"ssml-break",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",{props:{contentEditable:!1}},[w("span.remark",{style:{backgroundColor:"var(--ssml-break)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);y.SlateTransforms.delete(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})]),w("span.data-content",{attrs:{"data-content":"|"},style:{color:"var(--ssml-break)"}})])}},Fo={type:"ssml-break",elemToHtml:e=>{const{remark:n,time:r,strength:o}=e;return`<span
          data-w-e-type="ssml-break"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-remark="${n}"
          data-ow-time="${r??""}"
          data-ow-strength="${o??"medium"}"
        ></span>`}},jo={selector:'span[data-w-e-type="ssml-break"]',parseElemHtml:e=>{const n=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-time")||"",o=e.getAttribute("data-ow-strength")||"";return{type:"ssml-break",remark:n,time:r,strength:o,children:[{text:""}]}}},Ho={editorPlugin:Ao,renderElems:[Lo],elemsToHtml:[Fo],parseElemsHtml:[jo]},Uo=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-emphasis"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-emphasis"?!1:r(s),o},zo={type:"ssml-emphasis",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-emphasis)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-emphasis)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-emphasis)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},Wo={type:"ssml-emphasis",elemToHtml:(e,n)=>{const{remark:r,level:o}=e;return`<span
          data-w-e-type="ssml-emphasis"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-level="${o??"none"}"
        >${n}</span>`}},Go={selector:'span[data-w-e-type="ssml-emphasis"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-level")||"";return{type:"ssml-emphasis",remark:r,level:o,children:n}}},qo={editorPlugin:Uo,renderElems:[zo],elemsToHtml:[Wo],parseElemsHtml:[Go]},Yo=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-mstts:express-as"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-mstts:express-as"?!1:r(s),o},Xo={type:"ssml-mstts:express-as",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-mstts--express-as)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-mstts--express-as)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-mstts--express-as)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},Ko={type:"ssml-mstts:express-as",elemToHtml:(e,n)=>{const{remark:r,style:o,role:s,styledegree:a}=e;return`<span
          data-w-e-type="ssml-mstts:express-as"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-style="${o}"
          data-ow-styledegree="${a??""}"
          data-ow-role="${s??""}"
        >${n}</span>`}},Jo={selector:'span[data-w-e-type="ssml-mstts:express-as"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-style")||"",s=e.getAttribute("data-ow-styledegree")||"",a=e.getAttribute("data-ow-role")||"";return{type:"ssml-mstts:express-as",style:o,remark:r,styledegree:s,role:a,children:n}}},Qo={editorPlugin:Yo,renderElems:[Xo],elemsToHtml:[Ko],parseElemsHtml:[Jo]},Zo=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-p"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-p"?!1:r(s),o},es={type:"ssml-p",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-p)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-p)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-p)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},ts={type:"ssml-p",elemToHtml:(e,n)=>{const{remark:r}=e;return`<span
          data-w-e-type="ssml-p"
          data-w-e-is-inline
          data-ow-remark="${r}"
        >${n}</span>`}},ns={selector:'span[data-w-e-type="ssml-p"]',parseElemHtml:(e,n)=>({type:"ssml-p",remark:e.getAttribute("data-ow-remark")||"",children:n})},rs={editorPlugin:Zo,renderElems:[es],elemsToHtml:[ts],parseElemsHtml:[ns]},os=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-phoneme"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-phoneme"?!1:r(s),o},ss={type:"ssml-phoneme",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-phoneme)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-phoneme)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-phoneme)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);Ee(r,a),y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},as={type:"ssml-phoneme",elemToHtml:(e,n)=>{const{remark:r,alphabet:o,ph:s}=e;return`<span
          data-w-e-type="ssml-phoneme"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-alphabet="${o??""}"
          data-ow-ph="${s}"
        >${n}</span>`}},ls={selector:'span[data-w-e-type="ssml-phoneme"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-alphabet")||"",s=e.getAttribute("data-ow-ph")||"";return{type:"ssml-phoneme",remark:r,alphabet:o,ph:s,children:n}}},is={editorPlugin:os,renderElems:[ss],elemsToHtml:[as],parseElemsHtml:[ls]},cs=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-prosody"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-prosody"?!1:r(s),o},us={type:"ssml-prosody",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-prosody)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-prosody)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-prosody)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);Ee(r,a),y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},ds={type:"ssml-prosody",elemToHtml:(e,n)=>{const{remark:r,contour:o,pitch:s,range:a,rate:l,volume:i}=e;return`<span
          data-w-e-type="ssml-prosody"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-contour="${o??""}"
          data-ow-pitch="${s??""}"
          data-ow-range="${a??""}"
          data-ow-rate="${l??""}"
          data-ow-volume="${i??""}"
        >${n}</span>`}},fs={selector:'span[data-w-e-type="ssml-prosody"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-contour")||"",s=e.getAttribute("data-ow-pitch ")||"",a=e.getAttribute("data-ow-range")||"",l=e.getAttribute("data-ow-rate")||void 0,i=e.getAttribute("data-ow-volume")||"";return{type:"ssml-prosody",remark:r,contour:o,pitch:s,range:a,rate:l,volume:i,children:n}}},ps={editorPlugin:cs,renderElems:[us],elemsToHtml:[ds],parseElemsHtml:[fs]},ms=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-s"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-s"?!1:r(s),o},hs={type:"ssml-s",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-s)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-s)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-s)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},vs={type:"ssml-s",elemToHtml:(e,n)=>{const{remark:r}=e;return`<span
          data-w-e-type="ssml-s"
          data-w-e-is-inline
          data-ow-remark="${r}"
        >${n}</span>`}},ys={selector:'span[data-w-e-type="ssml-s"]',parseElemHtml:(e,n)=>({type:"ssml-s",remark:e.getAttribute("data-ow-remark")||"",children:n})},gs={editorPlugin:ms,renderElems:[hs],elemsToHtml:[vs],parseElemsHtml:[ys]},bs=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-say-as"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-say-as"?!1:r(s),o},_s={type:"ssml-say-as",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-say-as)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-say-as)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-say-as)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);Ee(r,a),y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},ws={type:"ssml-say-as",elemToHtml:(e,n)=>{const{remark:r,interpretAs:o,detail:s,format:a}=e;return`<span
          data-w-e-type="ssml-say-as"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-interpretAs="${o}"
          data-ow-detail="${s??""}"
          data-ow-format="${a??""}"
        >${n}</span>`}},Es={selector:'span[data-w-e-type="ssml-say-as"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-interpretAs")||"",s=e.getAttribute("data-ow-format")||"",a=e.getAttribute("data-ow-detail")||"";return{type:"ssml-say-as",remark:r,interpretAs:o,detail:a,format:s,children:n}}},xs={editorPlugin:bs,renderElems:[_s],elemsToHtml:[ws],parseElemsHtml:[Es]},ks=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-sub"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-sub"?!1:r(s),o},Ss={type:"ssml-sub",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-sub)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-sub)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-sub)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);Ee(r,a),y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},Vs={type:"ssml-sub",elemToHtml:(e,n)=>{const{remark:r,alias:o}=e;return`<span
          data-w-e-type="ssml-sub"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-alias="${o}"
        >${n}</span>`}},Ns={selector:'span[data-w-e-type="ssml-sub"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-alias")||"";return{type:"ssml-sub",remark:r,alias:o,children:n}}},Cs={editorPlugin:ks,renderElems:[Ss],elemsToHtml:[Vs],parseElemsHtml:[Ns]},$s=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="ssml-voice"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="ssml-voice"?!1:r(s),o},Ts={type:"ssml-voice",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-voice)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-voice)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-voice)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},Rs={type:"ssml-voice",elemToHtml:(e,n)=>{const{remark:r,name:o,effect:s}=e;return`<span
          data-w-e-type="ssml-voice"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-name="${o}"
          data-ow-effect="${s??""}"
        >${n}</span>`}},Os={selector:'span[data-w-e-type="ssml-voice"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-name")||"",s=e.getAttribute("data-ow-effect")||"";return{type:"ssml-voice",remark:r,name:o,effect:s,children:n}}},Ds={editorPlugin:$s,renderElems:[Ts],elemsToHtml:[Rs],parseElemsHtml:[Os]},Ps=e=>{const{isInline:n,isVoid:r}=e,o=e;return o.isInline=s=>y.DomEditor.getNodeType(s)==="custom-management"?!0:n(s),o.isVoid=s=>y.DomEditor.getNodeType(s)==="custom-management"?!1:r(s),o},Bs={type:"custom-management",renderElem:(e,n,r)=>{const{remark:o}=e;return w("span.ssml-wrapper",[w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{{"},style:{color:"var(--custom-management)"}}),w("span",n),w("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}}"},style:{color:"var(--custom-management)"}}),w("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--custom-management)"}},[w("span.iconfont.icon-roundclosefill",{on:{click:z(s=>{s.preventDefault();const a=y.DomEditor.findPath(r,e);Ee(r,a),y.SlateTransforms.unwrapNodes(r,{at:a})})}}),w("span.data-content",{attrs:{"data-content":o}})])])}},Is={type:"custom-management",elemToHtml:(e,n)=>{const{remark:r,style:o,role:s,name:a,pitch:l,rate:i}=e;return`<span
          data-w-e-type="custom-management"
          data-w-e-is-inline
          data-ow-remark="${r}"
          data-ow-style="${o}"
          data-ow-name="${a}"
          data-ow-role="${s}"
          data-ow-pitch="${l}"
          data-ow-rate="${i}"
        >${n}</span>`}},Ms={selector:'span[data-w-e-type="custom-management"]',parseElemHtml:(e,n)=>{const r=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-name")||"",s=e.getAttribute("data-ow-role")||"",a=e.getAttribute("data-ow-style")||"",l=e.getAttribute("data-ow-pitch")||"",i=e.getAttribute("data-ow-rate")||"";return{type:"custom-management",remark:r,name:o,role:s,style:a,pitch:l,rate:i,children:n}}},As={editorPlugin:Ps,renderElems:[Bs],elemsToHtml:[Is],parseElemsHtml:[Ms]},Ls=e=>{const{deleteBackward:n,deleteForward:r,insertBreak:o,apply:s,normalizeNode:a,insertText:l,insertData:i,setFragmentData:c,insertNode:u}=e,h=e;h.deleteBackward=p=>{n(p)},h.deleteForward=p=>{r(p)},h.insertBreak=()=>{o()},h.normalizeNode=p=>{a(p)},h.apply=p=>{s(p)},h.insertData=p=>(p.types.includes("application/x-slate-fragment")||p.setData("text/html",p.getData("text/plain").trim()),i(p)),h.setFragmentData=p=>{c(p);const v=p.getData("text/plain").replaceAll(/[\s]/gi,"");p.setData("text/plain",v)},h.insertText=p=>{l(p)};const m=["ssml-prosody","ssml-sub","custom-management","ssml-phoneme","ssml-say-as"];return h.insertNode=p=>{const v=y.DomEditor.getNodeType(p);return m.includes(v)||v==="ssml-audio"&&y.SlateNode.string(p)?(e.selection&&rn(e,e.selection),y.SlateTransforms.insertNodes(e,p)):u(p)},h};const Fs={install(){y.Boot.registerModule(Mo),y.Boot.registerModule(Ho),y.Boot.registerModule(qo),y.Boot.registerModule(Qo),y.Boot.registerModule(rs),y.Boot.registerModule(is),y.Boot.registerModule(ps),y.Boot.registerModule(gs),y.Boot.registerModule(xs),y.Boot.registerModule(Cs),y.Boot.registerModule(Ds),y.Boot.registerModule(As),y.Boot.registerPlugin(Ls)}},de=ft("--editor-ssml",()=>{const e=t.shallowReactive({type:"ssml-speak",version:"1.0",xmlLang:"zh-CN",xmlns:"http://www.w3.org/2001/10/synthesis","xmlns:mstts":"http://www.w3.org/2001/mstts","xmlns:emo":"http://www.w3.org/2009/10/emotionml",remark:"",children:[]}),n=t.shallowReactive({name:"zh-CN-XiaomoNeural",type:"ssml-voice",remark:"Xiaomo-晓墨",effect:"",children:[]}),r=t.shallowReactive({type:"ssml-mstts:backgroundaudio",src:"",remark:"",children:[]}),o=t.shallowReactive({type:"ssml-mstts:express-as",style:"",role:"",remark:"",children:[]}),s=t.shallowReactive({type:"ssml-prosody",remark:"",children:[]});return{rootSpeak:e,rootVoice:n,rootBackgroundaudio:r,rootExpressAs:o,rootProsody:s}});function Ve(){return{label:"",value:""}}function Hn(){return{id:"",avatar:"",isFree:!1,isStar:!1,isSupper24K:!1,roles:[],styles:[],label:"",value:""}}function gt(){return{word:"",category:"",gender:"",tag:""}}const bt=ft("--editor-try-play",()=>{const e=de(),n=t.ref(Hn());return{speaker:t.computed(()=>n.value),setSpeaker:s=>{n.value=s,e.rootVoice.name=s.value}}}),js={class:"bar-button-icon"},Hs={class:"fw-normal",style:{"font-size":"0.85rem"}},Us=t.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const r=e,o=()=>{if(!r.disabled){const{editor:s}=q();s&&n("click",s)}};return(s,a)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["bar-button px-2 py-1",{disabled:s.disabled}]),onClick:o,onMousedown:a[0]||(a[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",js,[t.createElementVNode("span",{class:t.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${s.icon}`]])},null,2)]),t.createElementVNode("div",Hs,t.toDisplayString(s.text),1)],34))}});const Y=(e,n)=>{const r=e.__vccOpts||e;for(const[o,s]of n)r[o]=s;return r},U=Y(Us,[["__scopeId","data-v-2da9a7ca"]]);const _t=t.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(e,{expose:n,emit:r}){const o=t.ref(""),s=t.ref();function a(){s.value.focus()}function l(){r("submit",o.value),o.value=""}return n({focus:a}),(i,c)=>(t.openBlock(),t.createBlock(t.unref($.ElForm),{onSubmit:t.withModifiers(l,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{type:i.type,ref_key:"inputRef",ref:s,modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=u=>o.value=u)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}});const zs=t.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(e){return(n,r)=>(t.openBlock(),t.createBlock(t.unref($.ElPopover),{hideAfter:n.hideAfter,width:n.width,visible:n.visible,trigger:n.trigger,"onUpdate:visible":r[0]||(r[0]=o=>n.$emit("update:visible",o))},{reference:t.withCtx(()=>[t.renderSlot(n.$slots,"reference")]),default:t.withCtx(()=>[t.renderSlot(n.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}});function He(e){return t.getCurrentScope()?(t.onScopeDispose(e),!0):!1}function Q(e){return typeof e=="function"?e():t.unref(e)}const Un=typeof window<"u",Ws=e=>e!=null,Ie=()=>{};var Gs=Object.defineProperty,qs=Object.defineProperties,Ys=Object.getOwnPropertyDescriptors,on=Object.getOwnPropertySymbols,Xs=Object.prototype.hasOwnProperty,Ks=Object.prototype.propertyIsEnumerable,sn=(e,n,r)=>n in e?Gs(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,Js=(e,n)=>{for(var r in n||(n={}))Xs.call(n,r)&&sn(e,r,n[r]);if(on)for(var r of on(n))Ks.call(n,r)&&sn(e,r,n[r]);return e},Qs=(e,n)=>qs(e,Ys(n));function Zs(e,n={}){if(!t.isRef(e))return t.toRefs(e);const r=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)r[o]=t.customRef(()=>({get(){return e.value[o]},set(s){var a;if((a=Q(n.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const i=[...e.value];i[o]=s,e.value=i}else{const i=Qs(Js({},e.value),{[o]:s});Object.setPrototypeOf(i,Object.getPrototypeOf(e.value)),e.value=i}else e.value[o]=s}}));return r}function zn(e,n=!0){t.getCurrentInstance()?t.onMounted(e):n?e():t.nextTick(e)}function ee(e){var n;const r=Q(e);return(n=r==null?void 0:r.$el)!=null?n:r}const se=Un?window:void 0;function be(...e){let n,r,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,o,s]=e,n=se):[n,r,o,s]=e,!n)return Ie;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const a=[],l=()=>{a.forEach(h=>h()),a.length=0},i=(h,m,p,v)=>(h.addEventListener(m,p,v),()=>h.removeEventListener(m,p,v)),c=t.watch(()=>[ee(n),Q(s)],([h,m])=>{l(),h&&a.push(...r.flatMap(p=>o.map(v=>i(h,p,v,m))))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return He(u),u}function ea(){const e=t.ref(!1);return t.getCurrentInstance()&&t.onMounted(()=>{e.value=!0}),e}function wt(e){const n=ea();return t.computed(()=>(n.value,!!e()))}function ta(e,n={}){const{window:r=se}=n,o=wt(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let s;const a=t.ref(!1),l=u=>{a.value=u.matches},i=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",l):s.removeListener(l))},c=t.watchEffect(()=>{o.value&&(i(),s=r.matchMedia(Q(e)),"addEventListener"in s?s.addEventListener("change",l):s.addListener(l),a.value=s.matches)});return He(()=>{c(),i(),s=void 0}),a}var na=Object.defineProperty,ra=Object.defineProperties,oa=Object.getOwnPropertyDescriptors,an=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable,ln=(e,n,r)=>n in e?na(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,la=(e,n)=>{for(var r in n||(n={}))sa.call(n,r)&&ln(e,r,n[r]);if(an)for(var r of an(n))aa.call(n,r)&&ln(e,r,n[r]);return e},ia=(e,n)=>ra(e,oa(n));function Et(e,n={}){var r,o;const{pointerTypes:s,preventDefault:a,stopPropagation:l,exact:i,onMove:c,onEnd:u,onStart:h,initialValue:m,axis:p="both",draggingElement:v=se,handle:f=e}=n,d=t.ref((r=Q(m))!=null?r:{x:0,y:0}),b=t.ref(),k=g=>s?s.includes(g.pointerType):!0,C=g=>{Q(a)&&g.preventDefault(),Q(l)&&g.stopPropagation()},E=g=>{if(!k(g)||Q(i)&&g.target!==Q(e))return;const _=Q(e).getBoundingClientRect(),O={x:g.clientX-_.left,y:g.clientY-_.top};(h==null?void 0:h(O,g))!==!1&&(b.value=O,C(g))},x=g=>{if(!k(g)||!b.value)return;let{x:_,y:O}=d.value;(p==="x"||p==="both")&&(_=g.clientX-b.value.x),(p==="y"||p==="both")&&(O=g.clientY-b.value.y),d.value={x:_,y:O},c==null||c(d.value,g),C(g)},N=g=>{k(g)&&b.value&&(b.value=void 0,u==null||u(d.value,g),C(g))};if(Un){const g={capture:(o=n.capture)!=null?o:!0};be(f,"pointerdown",E,g),be(v,"pointermove",x,g),be(v,"pointerup",N,g)}return ia(la({},Zs(d)),{position:d,isDragging:t.computed(()=>!!b.value),style:t.computed(()=>`left:${d.value.x}px;top:${d.value.y}px;`)})}var cn=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,da=(e,n)=>{var r={};for(var o in e)ca.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&cn)for(var o of cn(e))n.indexOf(o)<0&&ua.call(e,o)&&(r[o]=e[o]);return r};function Wn(e,n,r={}){const o=r,{window:s=se}=o,a=da(o,["window"]);let l;const i=wt(()=>s&&"ResizeObserver"in s),c=()=>{l&&(l.disconnect(),l=void 0)},u=t.computed(()=>Array.isArray(e)?e.map(p=>ee(p)):[ee(e)]),h=t.watch(u,p=>{if(c(),i.value&&s){l=new ResizeObserver(n);for(const v of p)v&&l.observe(v,a)}},{immediate:!0,flush:"post",deep:!0}),m=()=>{c(),h()};return He(m),{isSupported:i,stop:m}}function Te(e,n={}){const{reset:r=!0,windowResize:o=!0,windowScroll:s=!0,immediate:a=!0}=n,l=t.ref(0),i=t.ref(0),c=t.ref(0),u=t.ref(0),h=t.ref(0),m=t.ref(0),p=t.ref(0),v=t.ref(0);function f(){const d=ee(e);if(!d){r&&(l.value=0,i.value=0,c.value=0,u.value=0,h.value=0,m.value=0,p.value=0,v.value=0);return}const b=d.getBoundingClientRect();l.value=b.height,i.value=b.bottom,c.value=b.left,u.value=b.right,h.value=b.top,m.value=b.width,p.value=b.x,v.value=b.y}return Wn(e,f),t.watch(()=>ee(e),d=>!d&&f()),s&&be("scroll",f,{capture:!0,passive:!0}),o&&be("resize",f,{passive:!0}),zn(()=>{a&&f()}),{height:l,bottom:i,left:c,right:u,top:h,width:m,x:p,y:v,update:f}}function fa(e,n={width:0,height:0},r={}){const{window:o=se,box:s="content-box"}=r,a=t.computed(()=>{var c,u;return(u=(c=ee(e))==null?void 0:c.namespaceURI)==null?void 0:u.includes("svg")}),l=t.ref(n.width),i=t.ref(n.height);return Wn(e,([c])=>{const u=s==="border-box"?c.borderBoxSize:s==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(o&&a.value){const h=ee(e);if(h){const m=o.getComputedStyle(h);l.value=Number.parseFloat(m.width),i.value=Number.parseFloat(m.height)}}else if(u){const h=Array.isArray(u)?u:[u];l.value=h.reduce((m,{inlineSize:p})=>m+p,0),i.value=h.reduce((m,{blockSize:p})=>m+p,0)}else l.value=c.contentRect.width,i.value=c.contentRect.height},r),t.watch(()=>ee(e),c=>{l.value=c?n.width:0,i.value=c?n.height:0}),{width:l,height:i}}function pa(e,n,r={}){const{root:o,rootMargin:s="0px",threshold:a=.1,window:l=se,immediate:i=!0}=r,c=wt(()=>l&&"IntersectionObserver"in l),u=t.computed(()=>{const f=Q(e);return(Array.isArray(f)?f:[f]).map(ee).filter(Ws)});let h=Ie;const m=t.ref(i),p=c.value?t.watch(()=>[u.value,ee(o),m.value],([f,d])=>{if(h(),!m.value||!f.length)return;const b=new IntersectionObserver(n,{root:ee(d),rootMargin:s,threshold:a});f.forEach(k=>k&&b.observe(k)),h=()=>{b.disconnect(),h=Ie}},{immediate:i,flush:"post"}):Ie,v=()=>{h(),p(),m.value=!1};return He(v),{isSupported:c,isActive:m,pause(){h(),m.value=!1},resume(){m.value=!0},stop:v}}function xt(e,{window:n=se,scrollTarget:r}={}){const o=t.ref(!1);return pa(e,([{isIntersecting:s}])=>{o.value=s},{root:r,window:n}),o}function ma(e={}){const{window:n=se,initialWidth:r=Number.POSITIVE_INFINITY,initialHeight:o=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:a=!0}=e,l=t.ref(r),i=t.ref(o),c=()=>{n&&(a?(l.value=n.innerWidth,i.value=n.innerHeight):(l.value=n.document.documentElement.clientWidth,i.value=n.document.documentElement.clientHeight))};if(c(),zn(c),be("resize",c,{passive:!0}),s){const u=ta("(orientation: portrait)");t.watch(u,()=>c())}return{width:l,height:i}}const ha={class:"search-content w-100"},va={class:"ps-2 w-75"},ya={class:"menu ps-2"},ga={class:"flex flex-row pt-1"},ba={class:"content-list overflow-x-hidden overflow-y-auto py-2",style:{height:"250px"}},_a=["onClick"],wa=t.createElementVNode("span",{class:"iconfont icon-play"},null,-1),Ea={class:"ps-2"},kt=t.defineComponent({__name:"bar-search",props:{menus:{},fetchScene:{type:Function},fetchStyle:{type:Function},fetchData:{type:Function},sceneList:{},styleList:{},dataList:{}},emits:["submit"],setup(e,{emit:n}){const r=e,o=t.ref(),s=t.ref(""),a=t.ref(""),l=t.ref(""),i=t.ref(""),c=t.ref(r.dataList||[]),u=t.ref(r.sceneList||[]),h=t.ref(r.styleList||[]),m=xt(o);t.watch(m,d=>{d&&setTimeout(()=>{var b;(b=o.value)==null||b.focus()},100)}),t.onMounted(async()=>{c.value.length||await p(),u.value.length||(u.value=await r.fetchScene()),h.value.length||(h.value=await r.fetchStyle())});async function p(){c.value=await r.fetchData({word:s.value,menu:i.value,scene:a.value,style:l.value})}function v(d){i.value=d,p()}function f(d){n("submit",d)}return(d,b)=>(t.openBlock(),t.createElementBlock("div",ha,[t.createElementVNode("div",va,[t.createVNode(t.unref($.ElForm),{onSubmit:t.withModifiers(p,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{ref_key:"searchInputRef",ref:o,placeholder:"搜索",modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=k=>s.value=k),"suffix-icon":t.unref(_e.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),t.createElementVNode("div",ya,[t.createVNode(t.unref($.ElMenu),{mode:"horizontal","default-active":d.menus.length>0?d.menus[0].value:"",onSelect:b[1]||(b[1]=k=>v(k))},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.menus,(k,C)=>(t.openBlock(),t.createBlock(t.unref($.ElMenuItem),{index:k.value,key:C},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(k.label),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),t.createElementVNode("div",ga,[t.createVNode(t.unref($.ElSelect),{modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=k=>a.value=k),onChange:p,class:"m-1",size:"default"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.value,k=>(t.openBlock(),t.createBlock(t.unref($.ElOption),{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t.createVNode(t.unref($.ElSelect),{modelValue:l.value,"onUpdate:modelValue":b[3]||(b[3]=k=>l.value=k),onChange:p,class:"m-1",size:"default"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(h.value,k=>(t.openBlock(),t.createBlock(t.unref($.ElOption),{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t.createElementVNode("ul",ba,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(c.value,(k,C)=>(t.openBlock(),t.createElementBlock("li",{onClick:E=>f(t.toRaw(k)),class:"content-list-item clickable ps-2 py-2",key:C},[wa,t.createElementVNode("span",Ea,t.toDisplayString(k.label),1)],8,_a))),128))])]))}});const xa={},ka={class:"content"};function Sa(e,n){return t.openBlock(),t.createElementBlock("div",ka,[t.renderSlot(e.$slots,"default",{},void 0,!0)])}const Gn=Y(xa,[["render",Sa],["__scopeId","data-v-7beae5b9"]]),Va={},Na={class:"bar-wrapper-item"};function Ca(e,n){return t.openBlock(),t.createElementBlock("div",Na,[t.renderSlot(e.$slots,"default")])}const $a=Y(Va,[["render",Ca]]),Ta={class:"bar-wrapper-group"},Ra={class:"group-items"},Oa=t.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock("div",Ta,[t.createElementVNode("div",Ra,[t.renderSlot(n.$slots,"default",{},void 0,!0)]),t.createElementVNode("div",{class:t.normalizeClass(["divider",[n.divider]])},null,2)]))}});const ve=Y(Oa,[["__scopeId","data-v-be31f837"]]);function Da(e,n){return`left:${e}px;top:${n}px`}function St(e,n){const{width:r,height:o}=fa(e),{width:s,height:a}=ma(),l=t.computed(()=>({x:s.value-r.value,y:a.value-o.value}));return{style:t.computed(()=>{const c=n.value.x,u=n.value.y,h=c<5?5:c>l.value.x?l.value.x-5:c,m=u<5?5:u>l.value.y?l.value.y-5:u;return Da(h,m)})}}var lt={exports:{}},qn={exports:{}},Pa=void 0,Yn=function(e){return e!==Pa&&e!==null},Ba=Yn,Ia={object:!0,function:!0,undefined:!0},Ma=function(e){return Ba(e)?hasOwnProperty.call(Ia,typeof e):!1},Aa=Ma,La=function(e){if(!Aa(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch{return!1}},Fa=La,ja=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch{return!1}return!Fa(e)},Ha=ja,Ua=/^\s*class[\s{/}]/,za=Function.prototype.toString,Wa=function(e){return!(!Ha(e)||Ua.test(za.call(e)))},Ga=function(){var e=Object.assign,n;return typeof e!="function"?!1:(n={foo:"raz"},e(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")},Ge,un;function qa(){return un||(un=1,Ge=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Ge}var Ya=function(){},Xa=Ya(),Vt=function(e){return e!==Xa&&e!==null},qe,dn;function Ka(){if(dn)return qe;dn=1;var e=Vt,n=Object.keys;return qe=function(r){return n(e(r)?Object(r):r)},qe}var Ye,fn;function Ja(){return fn||(fn=1,Ye=qa()()?Object.keys:Ka()),Ye}var Xe,pn;function Qa(){if(pn)return Xe;pn=1;var e=Vt;return Xe=function(n){if(!e(n))throw new TypeError("Cannot use null or undefined");return n},Xe}var Ke,mn;function Za(){if(mn)return Ke;mn=1;var e=Ja(),n=Qa(),r=Math.max;return Ke=function(o,s){var a,l,i=r(arguments.length,2),c;for(o=Object(n(o)),c=function(u){try{o[u]=s[u]}catch(h){a||(a=h)}},l=1;l<i;++l)s=arguments[l],e(s).forEach(c);if(a!==void 0)throw a;return o},Ke}var el=Ga()?Object.assign:Za(),tl=Vt,nl=Array.prototype.forEach,rl=Object.create,ol=function(e,n){var r;for(r in e)n[r]=e[r]},sl=function(e){var n=rl(null);return nl.call(arguments,function(r){tl(r)&&ol(Object(r),n)}),n},Je="razdwatrzy",al=function(){return typeof Je.contains!="function"?!1:Je.contains("dwa")===!0&&Je.contains("foo")===!1},Qe,hn;function ll(){if(hn)return Qe;hn=1;var e=String.prototype.indexOf;return Qe=function(n){return e.call(this,n,arguments[1])>-1},Qe}var il=al()?String.prototype.contains:ll(),Me=Yn,vn=Wa,Xn=el,Kn=sl,Ce=il,cl=qn.exports=function(e,n){var r,o,s,a,l;return arguments.length<2||typeof e!="string"?(a=n,n=e,e=null):a=arguments[2],Me(e)?(r=Ce.call(e,"c"),o=Ce.call(e,"e"),s=Ce.call(e,"w")):(r=s=!0,o=!1),l={value:n,configurable:r,enumerable:o,writable:s},a?Xn(Kn(a),l):l};cl.gs=function(e,n,r){var o,s,a,l;return typeof e!="string"?(a=r,r=n,n=e,e=null):a=arguments[3],Me(n)?vn(n)?Me(r)?vn(r)||(a=r,r=void 0):r=void 0:(a=n,n=r=void 0):n=void 0,Me(e)?(o=Ce.call(e,"c"),s=Ce.call(e,"e")):(o=!0,s=!1),l={get:n,set:r,configurable:o,enumerable:s},a?Xn(Kn(a),l):l};var ul=qn.exports,dl=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e};(function(e,n){var r=ul,o=dl,s=Function.prototype.apply,a=Function.prototype.call,l=Object.create,i=Object.defineProperty,c=Object.defineProperties,u=Object.prototype.hasOwnProperty,h={configurable:!0,enumerable:!1,writable:!0},m,p,v,f,d,b,k;m=function(C,E){var x;return o(E),u.call(this,"__ee__")?x=this.__ee__:(x=h.value=l(null),i(this,"__ee__",h),h.value=null),x[C]?typeof x[C]=="object"?x[C].push(E):x[C]=[x[C],E]:x[C]=E,this},p=function(C,E){var x,N;return o(E),N=this,m.call(this,C,x=function(){v.call(N,C,x),s.call(E,this,arguments)}),x.__eeOnceListener__=E,this},v=function(C,E){var x,N,g,_;if(o(E),!u.call(this,"__ee__"))return this;if(x=this.__ee__,!x[C])return this;if(N=x[C],typeof N=="object")for(_=0;g=N[_];++_)(g===E||g.__eeOnceListener__===E)&&(N.length===2?x[C]=N[_?0:1]:N.splice(_,1));else(N===E||N.__eeOnceListener__===E)&&delete x[C];return this},f=function(C){var E,x,N,g,_;if(u.call(this,"__ee__")&&(g=this.__ee__[C],!!g))if(typeof g=="object"){for(x=arguments.length,_=new Array(x-1),E=1;E<x;++E)_[E-1]=arguments[E];for(g=g.slice(),E=0;N=g[E];++E)s.call(N,this,_)}else switch(arguments.length){case 1:a.call(g,this);break;case 2:a.call(g,this,arguments[1]);break;case 3:a.call(g,this,arguments[1],arguments[2]);break;default:for(x=arguments.length,_=new Array(x-1),E=1;E<x;++E)_[E-1]=arguments[E];s.call(g,this,_)}},d={on:m,once:p,off:v,emit:f},b={on:r(m),once:r(p),off:r(v),emit:r(f)},k=c({},b),e.exports=n=function(C){return C==null?l(k):c(Object(C),b)},n.methods=d})(lt,lt.exports);var fl=lt.exports;const pl=mt(fl),te=pl(),ml="wangeditor-error",M={ERROR:ml},hl="emitter-error",vl="emitter-view-click",yl="emitter-view-keydown",Z={ERROR:hl,VIEW_CLICK:vl,VIEW_KEYDOWN:yl},gl={class:"w-100 d-flex flex-row align-items-center"},xe=t.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},initialValue:{}},emits:["update:visible","close"],setup(e,{expose:n,emit:r}){const o=e,s=t.ref(),a=t.ref(),l=t.ref(),{position:i}=Et(a,{initialValue:o.initialValue}),{style:c}=St(s,i);function u(f){i.value=f}n({setPosition:u}),t.onMounted(()=>{te.on(Z.VIEW_CLICK,h),document.addEventListener("keydown",v)}),t.onUnmounted(()=>{te.off(Z.VIEW_CLICK,h),document.removeEventListener("keydown",v)});function h(f){m(f)&&p()}function m(f){const d=f.target;return!(!s.value||!l.value||l.value.contains(d)||s.value.contains(d))}function p(){r("update:visible",!1),r("close")}function v(f){f.code==="Escape"&&p()}return(f,d)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",{ref_key:"referenceRef",ref:l,onMousedown:d[0]||(d[0]=t.withModifiers(()=>{},["prevent"]))},[t.renderSlot(f.$slots,"reference")],544),(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.withDirectives(t.createElementVNode("div",{ref_key:"boxRef",ref:s,class:"demotestname card shadow brag-box user-select-none",style:t.normalizeStyle([{position:"fixed"},t.unref(c)]),onMousedown:d[1]||(d[1]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",gl,[t.createElementVNode("div",{ref_key:"dragRef",ref:a,class:"w-100",style:{height:"40px",cursor:"move"}},null,512),t.createElementVNode("span",{onClick:p,class:"btn iconfont icon-close fs-5"})]),t.renderSlot(f.$slots,"default")],36),[[t.vShow,f.visible]])]))],64))}}),bl={install(e){e.component("BarButton",U),e.component("BarInput",_t),e.component("BarPopover",zs),e.component("BarSearch",kt),e.component("BarWrapper",Gn),e.component("BarWrapperItem",$a),e.component("BarWrapperGroup",ve),e.component("DragBox",xe)}};class K{constructor(n){W(this,"editor");this.editor=n}getValue(){const{selection:n}=this.editor;return n==null?"":y.SlateEditor.string(this.editor,n)}isDisabled(){const{selection:n}=this.editor;return n==null?(this.editor.emit(M.ERROR,"未选中编辑器"),!0):!1}}class _l extends K{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(M.ERROR,"请选中文本"),!0;const r=this.getValue();return r.length!=1?!0:/^[\u4E00-\u9FA5]+$/gi.test(r)?!1:(this.editor.emit(M.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-phoneme",alphabet:"sapi",ph:n.value,remark:n.label,children:[{text:r}]};this.editor.insertNode(o)}}const Jn=t.defineComponent({setup(){const{globalEditConfig:e}=q(),n=t.shallowRef(),r=t.ref([]),o=t.ref(!1);function s(){o.value||(o.value=!0)}function a(){o.value&&(o.value=!1)}async function l(i){var u;if(n.value??(n.value=new _l(i)),(u=n.value)!=null&&u.isDisabled())return;const c=n.value.getValue();if(c?r.value=await e.pinyin.fetchData(c):r.value=[],r.value.length==0)return i.emit(M.ERROR,"选中的字符没有不是多音字");s()}return()=>t.createVNode($.ElPopover,{visible:o.value,"onUpdate:visible":i=>o.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"多音字",icon:"speaker",onClick:l},null),default:()=>t.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-auto",style:"max-height: 300px"},[r.value.map(({label:i,value:c})=>t.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),a()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class wl extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请选择多个中文字符或者多个多个英文单词"),!0):y.SlateEditor.string(this.editor,n).length<2:!0}exec(){if(this.isDisabled())return;const n=this.getValue();if(n==null)return;const r={type:"ssml-prosody",rate:"medium",remark:"连读",children:[{text:n}]};this.editor.insertNode(r)}}const Qn=t.defineComponent({setup(){const e=t.shallowRef();function n(r){e.value??(e.value=new wl(r)),!e.value.isDisabled()&&e.value.exec()}return()=>t.createVNode(U,{text:"连读",icon:"continuous",onClick:n},null)}}),El=[{label:"重音",value:"z"},{label:"拖音",value:"t"},{label:"重音+拖音",value:"z+t"}],xl={z:{pitch:"x-high",rate:void 0},t:{pitch:void 0,rate:"medium"},"z+t":{pitch:"x-high",rate:"medium"}};class kl extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return!n||n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请先选择文本"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const{pitch:o,rate:s}=xl[n.value],a={type:"ssml-prosody",remark:n.label,pitch:o,rate:s,children:[{text:r}]};this.editor.insertNode(a)}}const Zn=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value||(n.value=!0)}function o(){n.value&&(n.value=!1)}function s(a){e.value??(e.value=new kl(a)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"重音",icon:"read",onClick:s},null),default:()=>t.createVNode("div",{class:"d-flex flex-column",onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[El.map(({label:a,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:a,value:l}),o()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Sl extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(M.ERROR,"请选择纯数字"),!0;const r=y.SlateEditor.string(this.editor,n);return r.length<=0?!0:Number.isNaN(Number(r))?(this.editor.emit(M.ERROR,"请选择纯数字"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-say-as",interpretAs:n.value,remark:n.label,children:[{text:r}]};this.editor.insertNode(o)}}const Vl=[{value:"cardinal",label:"读数值"},{value:"characters",label:"读数字"},{value:"telephone",label:"读手机号"}],er=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value=!n.value}function o(s){e.value??(e.value=new Sl(s)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"数字符号",icon:"digital",onClick:o},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[Vl.map(({label:s,value:a})=>t.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:s,value:a}),r()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class Nl extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0):this.getValue().length<=0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-sub",remark:n.value,alias:n.value,children:[{text:r}]};this.editor.insertNode(o)}}const tr=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(),r=t.ref(!1);function o(){r.value||(r.value=!0)}function s(){r.value&&(r.value=!1)}async function a(i){e.value??(e.value=new Nl(i)),!e.value.isDisabled()&&(o(),n.value.focus())}function l(i){var c;s(),i&&((c=e.value)==null||c.exec({value:i,label:i}))}return()=>t.createVNode($.ElPopover,{visible:r.value,"onUpdate:visible":i=>r.value=i,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>t.createVNode(U,{text:"别名",icon:"alias",onClick:a},null),default:()=>t.createVNode(_t,{ref:n,onSubmit:l},null)})}});class Cl extends K{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(M.ERROR,"请选择英文单词"),!0;const r=y.SlateEditor.string(this.editor,n);return r.length<=0?!0:/^[A-Za-z]+$/gi.test(r)?!1:(this.editor.emit(M.ERROR,"请选择英文单词"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-phoneme",alphabet:"ipa",ph:n.value,remark:n.label,children:[{text:r}]};this.editor.insertNode(o)}}const nr=t.defineComponent({setup(){const{globalEditConfig:e}=q(),n=t.shallowRef(),r=t.ref([]),o=t.ref(!1);function s(){o.value||(o.value=!0)}function a(){o.value&&(o.value=!1)}async function l(i){if(n.value??(n.value=new Cl(i)),Ro(i),n.value.isDisabled())return;const c=n.value.getValue();if(c){if(r.value=await e.english.fetchData(c),r.value.length<=0)return i.emit(M.ERROR,"找不到单词的音标");s()}}return()=>t.createVNode($.ElPopover,{visible:o.value,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"音标",icon:"english",onClick:l},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[r.value.map(({label:i,value:c})=>t.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),a()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class $l extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请框选要变速的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-prosody",remark:n.label,rate:n.value,children:[{text:r}]};this.editor.insertNode(o)}}function P(e){return`${((e-1)*100).toFixed(0)}%`}const Tl=[{value:P(.5),label:"0.5x"},{value:P(.55),label:"0.55x"},{value:P(.6),label:"0.6x"},{value:P(.65),label:"0.65x"},{value:P(.7),label:"0.7x"},{value:P(.75),label:"0.75x"},{value:P(.8),label:"0.8x"},{value:P(.85),label:"0.85x"},{value:P(.9),label:"0.9x"},{value:P(.95),label:"0.95x"},{value:P(1),label:"1x"},{value:P(1.05),label:"1.05x"},{value:P(1.1),label:"1.1x"},{value:P(1.15),label:"1.15x"},{value:P(1.2),label:"1.2x"},{value:P(1.25),label:"1.25x"},{value:P(1.3),label:"1.3x"},{value:P(1.35),label:"1.35x"},{value:P(1.4),label:"1.4x"},{value:P(1.45),label:"1.45x"},{value:P(1.5),label:"1.5x"},{value:P(1.55),label:"1.55x"},{value:P(1.6),label:"1.6x"},{value:P(1.65),label:"1.65x"},{value:P(1.7),label:"1.7x"},{value:P(1.75),label:"1.75x"},{value:P(1.8),label:"1.8x"},{value:P(1.85),label:"1.85x"},{value:P(1.9),label:"1.9x"},{value:P(1.95),label:"1.95x"},{value:P(2),label:"2x"}],rr=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value||(n.value=!0)}function o(){n.value&&(n.value=!1)}async function s(a){e.value??(e.value=new $l(a)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{style:{padding:"0px"},visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"局部变速",icon:"changespeed",onClick:s},null),default:()=>t.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[Tl.map(({label:a,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{var i;(i=e.value)==null||i.exec({label:a,value:l}),o()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Rl extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(M.ERROR,"不能选中文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r={type:"ssml-break",strength:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(r)}}const Ol=[{value:"weak",label:"短"},{value:"medium",label:"中"},{value:"strong",label:"长"}],or=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function r(){n.value||(n.value=!0)}function o(){n.value&&(n.value=!1)}function s(a){e.value??(e.value=new Rl(a)),!e.value.isDisabled()&&r()}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"停顿调节",icon:"rhythm",onClick:s},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[Ol.map(({label:a,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:a,value:l}),o()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Dl extends K{constructor(n){super(n)}restoreSelection(){this.editor.restoreSelection()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(M.ERROR,"不能框选文字"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled()||this.getValue()==null)return;const o={type:"ssml-audio",src:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(o)}}const sr=t.defineComponent({__name:"special-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),{globalEditConfig:s}=q(),{special:a}=s,l=t.ref(!1),{x:i,y:c,height:u}=Te(r),h=p=>{o.value??(o.value=new Dl(p)),!o.value.isDisabled()&&(n.value.setPosition({x:i.value-200,y:c.value+u.value}),l.value=!0)};function m(p){var v;(v=o.value)==null||v.restoreSelection(),o.value&&!o.value.isDisabled()&&o.value.exec(p),l.value=!1}return(p,v)=>(t.openBlock(),t.createBlock(t.unref(xe),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":v[0]||(v[0]=f=>l.value=f)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:r,text:"音效",icon:"special",onClick:h},null,512)]),default:t.withCtx(()=>[t.createVNode(t.unref(kt),{menus:t.unref(a).menus,fetchScene:t.unref(a).fetchScene,fetchStyle:t.unref(a).fetchStyle,fetchData:t.unref(a).fetchData,onSubmit:m},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}});class Pl extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?y.SlateRange.isExpanded(n)?(this.editor.emit(M.ERROR,"不能选中文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r={type:"ssml-break",time:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(r)}}const Bl=[{value:"150ms",label:"150ms"},{value:"200ms",label:"200ms"},{value:"300ms",label:"300ms"},{value:"400ms",label:"400ms"},{value:"500ms",label:"500ms"},{value:"600ms",label:"600ms"}],ar=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1),r=t.ref();function o(){n.value||(n.value=!0)}function s(){n.value&&(n.value=!1)}function a(i){e.value??(e.value=new Pl(i)),!e.value.isDisabled()&&(o(),r.value.focus())}function l(i){var c;s(),i&&((c=e.value)==null||c.exec({value:i,label:i}))}return()=>t.createVNode($.ElPopover,{visible:n.value,"onUpdate:visible":i=>n.value=i,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>t.createVNode(U,{text:"插入静音",icon:"mute",onClick:a},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[Bl.map(({value:i,label:c})=>t.createVNode("div",{key:i,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>l(i),onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[c])),t.createVNode(_t,{type:"text",ref:r,onSubmit:l},null)])})}}),lr=t.defineComponent({__name:"bgm-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),{globalEditConfig:s}=q(),{bgm:a}=s,l=t.ref(!1),{x:i,y:c,height:u}=Te(r),h=async p=>{const v={x:i.value-300,y:c.value+u.value};o.value=p,n.value.setPosition(v),l.value=!0};function m(p){const{rootBackgroundaudio:v}=de();v.src=p.value,v.remark=p.label,l.value=!1}return(p,v)=>(t.openBlock(),t.createBlock(t.unref(xe),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":v[0]||(v[0]=f=>l.value=f)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:r,text:"配乐",icon:"bgm",onClick:h},null,512)]),default:t.withCtx(()=>[t.createVNode(t.unref(kt),{menus:t.unref(a).menus,fetchScene:t.unref(a).fetchScene,fetchStyle:t.unref(a).fetchStyle,fetchData:t.unref(a).fetchData,onSubmit:m},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}}),ir=t.defineComponent({__name:"sensitive-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),s=t.ref(!1),{x:a,y:l,height:i}=Te(r),c=u=>{o.value=u,n.value.setPosition({x:a.value-200,y:l.value+i.value}),s.value=!0};return(u,h)=>(t.openBlock(),t.createBlock(t.unref(xe),{ref_key:"dragRef",ref:n,visible:s.value,"onUpdate:visible":h[0]||(h[0]=m=>s.value=m)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:r,text:"敏感词",icon:"sensitive",onClick:c},null,512)]),default:t.withCtx(()=>[t.createVNode(ir)]),_:1},8,["visible"]))}});const Il={class:"select-list",style:{width:"120px"}},Ml={class:"text-center d-flex flex-column justify-content-center fs-6",style:{height:"60px"}},Al=["onClick"],Ll=t.defineComponent({__name:"select-list",props:{modelValue:{},dataList:{}},emits:["update:modelValue"],setup(e,{expose:n,emit:r}){const o=e,s=t.ref();function a(i){r("update:modelValue",t.toRaw(i))}function l(){var i;if(s.value){for(let c=0;c<o.dataList.length;c++)if(o.dataList[c].value===o.modelValue.value){(i=s.value.children[c])==null||i.scrollIntoView({behavior:"smooth"});return}}}return n({scrollIntoViewTheItem:l}),(i,c)=>(t.openBlock(),t.createElementBlock("div",Il,[t.createElementVNode("div",Ml,[t.renderSlot(i.$slots,"default",{},void 0,!0)]),t.createElementVNode("ul",{ref_key:"listRef",ref:s,class:"text-center w-100 border-start border-top border-bottom border-secondary-subtle overflow-y-auto overflow-x-hidden scrollbar-none",style:{height:"180px"}},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.dataList,(u,h)=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(["clickable select-item py-1",{activate:u.value===i.modelValue.value}]),key:h,onClick:m=>a(u)},t.toDisplayString(u.label),11,Al))),128))],512)]))}});const he=Y(Ll,[["__scopeId","data-v-657a8ff9"]]),Fl=()=>[{value:"0.5",label:"0.5x"},{value:"0.6",label:"0.6x"},{value:"0.7",label:"0.7x"},{value:"0.8",label:"0.8x"},{value:"0.9",label:"0.9x"},{value:"1.0",label:"1.0x"},{value:"1.1",label:"1.1x"},{value:"1.2",label:"1.2x"},{value:"1.4",label:"1.4x"},{value:"1.5",label:"1.5x"},{value:"1.75",label:"1.75x"},{value:"2.0",label:"2.0x"}],jl=()=>[{value:"-10",label:"-10"},{value:"-9",label:"-9"},{value:"-8",label:"-8"},{value:"-7",label:"-7"},{value:"-6",label:"-6"},{value:"-5",label:"-5"},{value:"-4",label:"-4"},{value:"-3",label:"-3"},{value:"-2",label:"-2"},{value:"-1",label:"-1"},{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"}];function Hl(e){return`${(.05*e*100).toFixed(0)}%`}function Ul(e){return`${((e-1)*100).toFixed(0)}%`}const zl={style:{width:"600px",height:"360px"},class:"position-relative px-2 pb-2"},Wl={class:"position-relative"},Gl={class:"position-absolute top-0 end-0"},ql=t.createElementVNode("li",null,[t.createElementVNode("span",{class:"text-nowrap"},"近期使用:")],-1),Yl=t.createElementVNode("span",{class:"my-3"},"类型",-1),Xl=t.createElementVNode("span",{class:"my-3"},"配音师",-1),Kl=t.createElementVNode("span",{class:"my-3"},"角色",-1),Jl=t.createElementVNode("span",{class:"my-3"},"风格",-1),Ql=t.createElementVNode("span",{class:"my-3"},"语速",-1),Zl=t.createElementVNode("span",{class:"my-3"},"语调",-1),ei={class:"position-absolute bottom-0 end-0 d-flex flex-row justify-content-end me-4 mb-3"},ti=t.defineComponent({__name:"management-content",emits:["submit"],setup(e,{emit:n}){const{globalEditConfig:r}=q(),{tryPlay:o}=r,s=t.ref(!1),a=t.ref(""),l=t.ref(),i=t.ref(),c=t.ref(),u=t.ref(),h=t.ref(),m=t.ref(),p=t.ref(Ve()),v=t.ref(Ve()),f=t.ref(Ve()),d=t.ref(Ve()),b=t.ref({label:"",value:"1.0"}),k=t.ref({label:"",value:"0"}),C=t.shallowRef([]),E=t.ref([{label:"全部类型",value:""},...o.flags]),x=t.ref([]),N=t.ref([]),g=t.ref([]),_=t.ref(Fl()),O=t.ref(jl());t.onMounted(async()=>{const A=await o.fetchData(gt());C.value=A,x.value=A,A.length>0&&(N.value=A[0].roles,g.value=A[0].styles,v.value=A[0]),N.value.length>0&&(f.value=N.value[0]),g.value.length>0&&(d.value=g.value[0])});function L(){}function S(){}function V(A){const R=C.value.find(j=>j.value===A.value);R&&(N.value=R.roles,g.value=R.styles,N.value.length>0&&(f.value=N.value[0]),g.value.length>0&&(d.value=g.value[0]))}function T(){}function I(){}function D(){}function ae(){}function fe(){const A={label:`${v.value.label}|${f.value.label}|${d.value.label}|${b.value.label}`,value:v.value.value,role:f.value.value,style:d.value.value,speed:Ul(Number(b.value.value)),pitch:Hl(Number(k.value.value))};n("submit",A)}return(A,R)=>(t.openBlock(),t.createElementBlock("div",zl,[t.createVNode(t.unref($.ElForm),{onSubmit:t.withModifiers(L,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{modelValue:a.value,"onUpdate:modelValue":R[0]||(R[0]=j=>a.value=j),placeholder:"请输入名称快速查找配音师"},null,8,["modelValue"])]),_:1},8,["onSubmit"]),t.createElementVNode("div",Wl,[t.createElementVNode("div",Gl,[t.createVNode(t.unref($.ElButton),{size:"small",icon:t.unref(_e.More),onClick:R[1]||(R[1]=()=>s.value=!s.value)},null,8,["icon"])]),t.createElementVNode("ul",{class:t.normalizeClass(["d-flex flex-row row-gap-1 column-gap-2 overflow-x-hidden",{"flex-wrap":s.value}])},[ql,t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref($.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})])],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass({"d-flex flex-row":!s.value})},[t.createVNode(he,{"onUpdate:modelValue":[S,R[2]||(R[2]=j=>p.value=j)],ref_key:"selTypeRef",ref:l,modelValue:p.value,dataList:E.value},{default:t.withCtx(()=>[Yl]),_:1},8,["modelValue","dataList"]),t.createVNode(he,{"onUpdate:modelValue":[V,R[3]||(R[3]=j=>v.value=j)],ref_key:"selSpeakerRef",ref:i,modelValue:v.value,dataList:x.value},{default:t.withCtx(()=>[Xl]),_:1},8,["modelValue","dataList"]),t.createVNode(he,{"onUpdate:modelValue":[T,R[4]||(R[4]=j=>f.value=j)],ref_key:"selRoleRef",ref:c,modelValue:f.value,dataList:N.value},{default:t.withCtx(()=>[Kl]),_:1},8,["modelValue","dataList"]),t.createVNode(he,{"onUpdate:modelValue":[I,R[5]||(R[5]=j=>d.value=j)],ref_key:"selStyleRef",ref:u,modelValue:d.value,dataList:g.value},{default:t.withCtx(()=>[Jl]),_:1},8,["modelValue","dataList"]),t.createVNode(he,{"onUpdate:modelValue":[D,R[6]||(R[6]=j=>b.value=j)],ref_key:"selSpeedRef",ref:h,modelValue:b.value,dataList:_.value},{default:t.withCtx(()=>[Ql]),_:1},8,["modelValue","dataList"]),t.createVNode(he,{"onUpdate:modelValue":[ae,R[7]||(R[7]=j=>k.value=j)],ref_key:"selPitchRef",ref:m,modelValue:k.value,dataList:O.value},{default:t.withCtx(()=>[Zl]),_:1},8,["modelValue","dataList"])],2),[[t.vShow,!s.value]])]),t.createElementVNode("div",ei,[t.withDirectives(t.createVNode(t.unref($.ElButton),{onClick:fe,type:"primary"},{default:t.withCtx(()=>[t.createTextVNode("确定")]),_:1},512),[[t.vShow,!s.value]]),t.withDirectives(t.createVNode(t.unref($.ElButton),{type:"primary"},{default:t.withCtx(()=>[t.createTextVNode("全部清空")]),_:1},512),[[t.vShow,s.value]])])]))}});class ni extends K{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(n==null)return!0;if(y.SlateRange.isCollapsed(n))return this.editor.emit(M.ERROR,"请框选句子"),!0;if(y.DomEditor.getSelectedNodeByType(this.editor,"custom-management"))return this.editor.emit(M.ERROR,"多人配音不能嵌套使用"),!0;const[r]=y.SlateEditor.node(this.editor,n),o=this.editor.getParentNode(r);return!o||!y.DomEditor.checkNodeType(o,"paragraph")?(this.editor.emit(M.ERROR,"多人配音需要在最外层使用"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"custom-management",remark:n.label,name:n.value,role:n.role,style:n.style,rate:n.speed,pitch:n.pitch,children:[{text:r}]};this.editor.insertNode(o)}}const cr=t.defineComponent({__name:"management-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),s=t.ref(!1),a=t.shallowRef(),{x:l,y:i,height:c}=Te(r),u=m=>{a.value??(a.value=new ni(m));const p={x:l.value-200,y:i.value+c.value};o.value=m,n.value.setPosition(p),s.value=!0};function h(m){var p;a.value&&!a.value.isDisabled()&&((p=a.value)==null||p.exec(m)),s.value=!1}return(m,p)=>(t.openBlock(),t.createBlock(t.unref(xe),{ref_key:"dragRef",ref:n,visible:s.value,"onUpdate:visible":p[0]||(p[0]=v=>s.value=v)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:r,text:"多人配音",icon:"management",onClick:u},null,512)]),default:t.withCtx(()=>[t.createVNode(ti,{onSubmit:h})]),_:1},8,["visible"]))}}),ri={class:"speaker-head"},oi=["src"],si={class:"speaker-name"},ai=t.defineComponent({__name:"speaker-item",props:{name:{},value:{},avatar:{},activated:{type:Boolean}},emits:["click"],setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock("div",{class:"speaker-item",onClick:r[0]||(r[0]=o=>n.$emit("click",n.value||""))},[t.createElementVNode("div",ri,[t.createElementVNode("img",{src:n.avatar||t.unref(we)(),class:t.normalizeClass([{"border border-warning":n.activated},"rounded-circle"]),style:{height:"40px"}},null,10,oi)]),t.createElementVNode("div",si,t.toDisplayString(n.name),1)]))}});const li=Y(ai,[["__scopeId","data-v-8c6b2288"]]);class ii{constructor(){W(this,"mediaRecorder",null)}get state(){var n;return(n=this.mediaRecorder)==null?void 0:n.state}async start(){if(navigator.mediaDevices.getUserMedia){let n=[];try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),o=new MediaRecorder(r);return new Promise((s,a)=>{o.ondataavailable=l=>{n.push(l.data)},o.onstop=()=>{const l=new Blob(n,{type:"audio/wav; codecs=opus"});s(l)},o.onerror=l=>{a(l)},o.start()})}catch(r){throw new Error("授权失败！请确保使用https访问网站",{cause:r})}finally{n=[]}}throw Error("浏览器不支持 getUserMedia")}stop(){this.mediaRecorder&&this.mediaRecorder.stop()}}const ci={class:"d-flex flex-row justify-content-between border rounded-pill border-secondary my-3 py-1 px-2"},ui={class:"text-secondary d-flex flex-row align-items-center",style:{"font-size":"0.5rem"}},di={key:0,class:"iconfont icon-play"},fi=t.createElementVNode("span",{class:"iconfont icon-delete"},null,-1),pi=[fi],mi={key:1,style:{"font-size":"0.5rem"}},hi=t.createElementVNode("p",null,"选择需要转换的配音师",-1),vi={class:"speakers-container border rounded d-flex flex-row flex-wrap row-gap-1 column-gap-2 overflow-y-auto overflow-x-hidden",style:{height:"150px"}},yi=["disabled"],gi=t.defineComponent({__name:"audio-upload",emits:["submit"],setup(e,{expose:n,emit:r}){const{globalEditConfig:o}=q(),{audioUpload:s,transfer:a,fetchSpeaker:l,timeoutMilliseconds:i}=o.conversion,c=t.ref(),u=t.ref(),h=t.ref(),m=t.ref(!0),p=t.ref([]),v=t.ref(),f=t.shallowRef(),d=t.shallowRef(),b=new ii,k=new Fn("audio-conversion","audio/*"),C=t.computed(()=>b.state),E=xt(c),x=t.inject("reopen");t.watch(E,D=>{D||N()}),t.onMounted(async()=>{p.value=await l()}),t.watch(E,D=>{D||(m.value=!0)}),n({openInputFile:L});function N(){u.value=void 0,h.value=void 0,m.value=!0,v.value=void 0,f.value=void 0,d.value=void 0}function g(){b.stop()}async function _(){try{f.value=await b.start()}catch(D){te.emit(Z.ERROR,`${D}`,D)}}function O(){u.value=void 0,h.value=void 0,f.value=void 0,d.value=void 0,v.value=void 0}async function L(){try{return d.value=await k.open(),m.value=!1,!0}catch{return!1}}async function S(){try{const D=new jn(i);if(m.value&&f.value)D.startTimeout(),u.value=await s(f.value,D.token);else if(!m.value&&d.value)D.startTimeout(),u.value=await s(d.value,D.token);else throw new Error("请选则文件或实时录音")}catch(D){te.emit(Z.ERROR,`${D}`,D)}}async function V(D){try{u.value?(v.value=D,h.value=await a({audioId:u.value.id,speakerId:D.id})):te.emit(Z.ERROR,"请先上传录音文件")}catch(ae){te.emit(Z.ERROR,`${ae}`,ae)}}function T(){h.value&&v.value&&(r("submit",{label:v.value.label,value:h.value.src}),N())}function I(){x==null||x()}return(D,ae)=>{var fe,A;return t.openBlock(),t.createElementBlock("div",{class:"audio-upload",ref_key:"boxRef",ref:c},[t.createElementVNode("div",ci,[t.createElementVNode("div",ui,[f.value||d.value?(t.openBlock(),t.createElementBlock("span",di)):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(((fe=d.value)==null?void 0:fe.name)||((A=f.value)==null?void 0:A.name)),1)]),t.createElementVNode("div",null,[!u.value&&(f.value||d.value)?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:O,class:"btn btn-sm rounded-pill"},pi)):t.createCommentVNode("",!0),u.value?(t.openBlock(),t.createElementBlock("span",mi,"已上传")):t.createCommentVNode("",!0),m.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[C.value==="recording"?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:g,class:"btn btn-primary btn-sm rounded-pill"}," 结束录音 ")):(t.openBlock(),t.createElementBlock("button",{key:1,onClick:_,class:"btn btn-primary btn-sm rounded-pill"}," 开始录音 "))],64)):t.createCommentVNode("",!0),!m.value&&!d.value?(t.openBlock(),t.createElementBlock("button",{key:3,onClick:L,class:"btn btn-primary btn-sm rounded-pill"}," 选择文件 ")):t.createCommentVNode("",!0),u.value?(t.openBlock(),t.createElementBlock("button",{key:4,onClick:I,class:"btn btn-primary btn-sm rounded-pill"}," 重传音频 ")):t.createCommentVNode("",!0),!u.value&&(d.value||f.value)?(t.openBlock(),t.createElementBlock("button",{key:5,onClick:S,class:"btn btn-primary btn-sm rounded-pill"}," 上传音频 ")):t.createCommentVNode("",!0)])]),t.createElementVNode("div",null,[hi,t.createElementVNode("div",vi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.value,(R,j)=>{var Ct;return t.openBlock(),t.createBlock(li,{onClick:ku=>V(R),key:j,name:R.label,avatar:R.avatar,activated:R.value===((Ct=v.value)==null?void 0:Ct.value)},null,8,["onClick","name","avatar","activated"])}),128))])]),t.createElementVNode("button",{class:"btn btn-primary mt-1",onClick:T,disabled:!h.value}," 完成录音并上传完成后，可选择配音师转换 ",8,yi)],512)}}}),bi={class:"fw-bold",style:{"font-size":"0.5rem"}},_i=t.createElementVNode("p",{class:"text-start text-danger"},"请在安静的环境中进行录音，以需要转换的风格，读出以下文案",-1),wi={class:"border border-secondary rounded p-2 w-100",style:{height:"100px"}},Ei={class:"mt-2"},xi=t.createElementVNode("p",{class:"mt-2 text-secondary",style:{"font-size":"0.5rem"}}," 录音内容需要和滑选一致，音频限制60秒，滑选文案限制60个字 ",-1),ki=t.defineComponent({__name:"conversion-content",props:{text:{}},emits:["submit"],setup(e){const n=t.ref(),r=t.ref(),o=t.ref(!0),s=t.ref(!1),a=xt(n);t.provide("reopen",()=>{o.value=!0,s.value=!1}),t.watch(a,c=>{c||(o.value=!0,s.value=!1)});function l(){o.value=!0,s.value=!0}async function i(){var c;await((c=r.value)==null?void 0:c.openInputFile())&&(o.value=!1,s.value=!0)}return(c,u)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:n,class:"px-2 py-1",style:{width:"410px"}},[t.withDirectives(t.createElementVNode("section",bi,[_i,t.createElementVNode("div",wi,t.toDisplayString(c.text),1)],512),[[t.vShow,o.value]]),t.withDirectives(t.createElementVNode("section",Ei,[t.createElementVNode("div",{class:"w-100 d-flex flex-column row-gap-1"},[t.createElementVNode("button",{onClick:l,class:"btn btn-success"},"实时录音"),t.createElementVNode("button",{onClick:i,class:"btn btn-primary"},"上传录音")]),xi],512),[[t.vShow,!s.value]]),t.withDirectives(t.createElementVNode("section",null,[t.createVNode(gi,{ref_key:"audioUploadRef",ref:r,onSubmit:u[0]||(u[0]=h=>c.$emit("submit",h))},null,512)],512),[[t.vShow,s.value]])],512))}});class Si extends K{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:y.SlateRange.isCollapsed(n)?(this.editor.emit(M.ERROR,"请框选要变音的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const o={type:"ssml-audio",remark:n.label,src:n.value,children:[{text:r}]};this.editor.insertNode(o)}}const ur=t.defineComponent({__name:"conversion-menu",setup(e){const n=t.ref(),r=t.ref(),o=t.shallowRef(),s=t.shallowRef(),a=t.ref(!1),l=t.ref(""),{x:i,y:c,height:u}=Te(r),h=p=>{if(s.value??(s.value=new Si(p)),s.value.isDisabled())return;l.value=s.value.getValue();const v={x:i.value-200,y:c.value+u.value};o.value=p,n.value.setPosition(v),a.value=!0};function m(p){var v;(v=s.value)==null||v.exec(p),a.value=!1}return(p,v)=>(t.openBlock(),t.createBlock(t.unref(xe),{ref_key:"dragRef",ref:n,visible:a.value,"onUpdate:visible":v[0]||(v[0]=f=>a.value=f)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:r,text:"局部变音",icon:"conversion",onClick:h},null,512)]),default:t.withCtx(()=>[t.createVNode(ki,{text:l.value,onSubmit:m},null,8,["text"])]),_:1},8,["visible"]))}}),Vi={class:"anchor-avatar d-flex flex-column justify-content-center align-items-center"},Ni=["src"],Ci={class:"anchor-avatar-name text-white"},$i=t.defineComponent({__name:"try-play-circle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:n}){const r=t.ref(),o=t.ref(0),s=t.ref(0),a=bt(),{position:l}=Et(r,{initialValue:{x:window.innerWidth-15,y:window.innerHeight/2-15},onStart:(m,p)=>h(p.clientX,p.clientY)?!1:void 0}),{style:i}=St(r,l);function c(m){h(m.clientX,m.clientY)&&n("update:visible",!1)}function u(m){o.value=m.clientX,s.value=m.clientY}function h(m,p){return m>o.value-10&&m<o.value+10&&p>s.value-10&&p<s.value+10}return(m,p)=>t.withDirectives((t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"try-play-circel user-select-none rounded-circle overflow-hidden",style:t.normalizeStyle([t.unref(i),{position:"fixed"}]),onMousedown:u,onMouseup:c},[t.createElementVNode("div",Vi,[t.createElementVNode("img",{src:t.unref(a).speaker.avatar||t.unref(we)(),class:"rounded-circle"},null,8,Ni),t.createElementVNode("div",Ci,t.toDisplayString(t.unref(a).speaker.label),1)])],36)),[[t.vShow,m.visible]])}});const Ti=Y($i,[["__scopeId","data-v-b8319066"]]),Ri={key:0,class:"position-absolute top-0 start-100 translate-middle text-bg-danger text-nowrap rounded px-1",style:{"font-size":"0.5rem"}},Oi=["src"],Di={class:"anchor-avatar-name text-white"},Pi=t.defineComponent({__name:"anchor-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(e){return(n,r)=>{var o,s,a;return t.openBlock(),t.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:r[0]||(r[0]=l=>{var i;return n.$emit("click",(i=n.data)==null?void 0:i.value)})},[(o=n.data)!=null&&o.isFree?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("span",Ri,"付费")),t.createElementVNode("img",{src:((s=n.data)==null?void 0:s.src)??t.unref(we)(),class:t.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"40px"}},null,10,Oi),t.createElementVNode("div",Di,t.toDisplayString((a=n.data)==null?void 0:a.label),1)])}}});const dr=Y(Pi,[["__scopeId","data-v-845325c9"]]),Bi={style:{height:"170px"},class:"w-100 d-flex flex-row flex-wrap justify-content-start overflow-x-hidden overflow-y-auto scrollbar-none"},Ii=t.defineComponent({__name:"anchor-list",props:{filter:{}},setup(e){const n=e,{globalEditConfig:r}=q(),{fetchData:o}=r.tryPlay,s=bt(),a=t.ref([]);t.watch(()=>n.filter,async i=>{a.value=await o(t.toRaw(i))});function l(i){s.setSpeaker(i)}return t.onMounted(async()=>{a.value=await o(t.toRaw(n.filter)),a.value.length>0&&l(a.value[0])}),(i,c)=>(t.openBlock(),t.createElementBlock("div",Bi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.value,(u,h)=>(t.openBlock(),t.createElementBlock("div",{class:"m-3",key:h},[t.createVNode(dr,{data:u,activate:u.value===t.unref(s).speaker.value,onClick:m=>l(t.toRaw(u))},null,8,["data","activate","onClick"])]))),128))]))}}),Ze=t.defineComponent({__name:"tag-item",props:{activate:{type:Boolean},value:{}},emits:["click"],setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(["tag-item d-inline-block text-white text-center text-nowrap text-truncate",{"border border-white rounded-pill":n.activate}]),onClick:r[0]||(r[0]=o=>n.$emit("click",n.value)),style:{height:"20px","min-width":"60px","max-width":"160px","font-size":"0.5rem",cursor:"pointer"}},[t.renderSlot(n.$slots,"default")],2))}}),Mi={class:"tag-list w-100"},Ai={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},Li={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},Fi={style:{height:"100px"},class:"w-100 pt-2 d-flex flex-row flex-wrap align-content-start row-gap-2 overflow-y-auto overflow-x-hidden scrollbar-none"},ji=t.defineComponent({__name:"tag-list",props:{filter:{}},emits:["update:filter"],setup(e,{emit:n}){const r=e,{globalEditConfig:o}=q(),{category:s,gender:a,featchTag:l}=o.tryPlay,i=t.ref([]);t.onMounted(async()=>{i.value=await l()});function c(m){n("update:filter",{...t.toRaw(r.filter),category:m})}function u(m){n("update:filter",{...t.toRaw(r.filter),gender:m})}function h(m){n("update:filter",{...t.toRaw(r.filter),tag:m})}return(m,p)=>(t.openBlock(),t.createElementBlock("div",Mi,[t.createElementVNode("div",Ai,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(v,f)=>(t.openBlock(),t.createBlock(Ze,{onClick:c,key:f,value:v.value,activate:m.filter.category===v.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.label),1)]),_:2},1032,["value","activate"]))),128))]),t.createElementVNode("div",Li,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(a),(v,f)=>(t.openBlock(),t.createBlock(Ze,{onClick:u,key:f,value:v.value,activate:m.filter.gender===v.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.label),1)]),_:2},1032,["value","activate"]))),128))]),t.createElementVNode("div",Fi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.value,(v,f)=>(t.openBlock(),t.createBlock(Ze,{onClick:h,key:f,value:v.value,activate:m.filter.tag===v.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(v.label),1)]),_:2},1032,["value","activate"]))),128))])]))}});const Hi=["src"],Ui={class:"anchor-avatar-name text-white",style:{"font-size":"0.5rem"}},zi=t.defineComponent({__name:"style-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(e){return(n,r)=>{var o,s;return t.openBlock(),t.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:r[0]||(r[0]=a=>{var l;return n.$emit("click",(l=n.data)==null?void 0:l.value)})},[t.createElementVNode("img",{src:((o=n.data)==null?void 0:o.src)||t.unref(we)(),class:t.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"30px"}},null,10,Hi),t.createElementVNode("div",Ui,t.toDisplayString((s=n.data)==null?void 0:s.label),1)])}}});const Wi=Y(zi,[["__scopeId","data-v-71aedb65"]]);function Gi(e){return`${(.05*e*100).toFixed(0)}%`}function qi(e){return`${((e-1)*100).toFixed(0)}%`}const Nt=e=>(t.pushScopeId("data-v-c4fe6de7"),e=e(),t.popScopeId(),e),Yi={class:"slider-panle w-100 px-3 text-white",style:{"font-size":"0.5rem"}},Xi={class:"mt-2 d-flex text-center justify-content-between align-items-center"},Ki={class:"me-auto d-flex flex-row align-items-center"},Ji=["src"],Qi={class:"ms-2 d-flex flex-column justify-content-between",style:{height:"50px"}},Zi={class:"d-flex dlex-row column-gap-2 align-items-end"},ec={class:"fs-6"},tc={style:{"font-size":"0.5rem"}},nc={class:"d-flex flex-row column-gap-2 align-items-center"},rc={key:0,class:"badge text-bg-primary px-2"},oc={class:"d-flex flex-column align-items-end"},sc=Nt(()=>t.createElementVNode("div",{class:"text-info"},"音频时长，请以生成后的为准",-1)),ac={class:"mt-1"},lc=Nt(()=>t.createElementVNode("span",null,"/",-1)),ic={class:"role-list mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-2 column-gap-3"},cc=["onClick"],uc={class:"audio-mood mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-1 column-gap-2"},dc=["onClick"],fc=Nt(()=>t.createElementVNode("div",{class:"my-3"},[t.createElementVNode("span",{class:"border rounded-pill p-1"},"配音师详情")],-1)),pc={class:"slider-box"},mc={class:"slider-box"},hc={class:"d-flex flex-row gap-3 my-3"},vc=["onClick"],yc={class:"d-flex flex-row flex-wrap row-gap-2 column-gap-3 mb-3",style:{"min-height":"100px"}},gc=["onClick"],bc=t.defineComponent({__name:"slider-panle",setup(e){const{globalEditConfig:n}=q(),{rootProsody:r,rootExpressAs:o}=de(),{fetchStar:s,flags:a,fetchFlag:l}=n.tryPlay,i=bt(),c=t.ref(i.speaker.isStar),u=t.ref(10),h=t.ref(0),m=t.ref([0,2]),p=t.ref(1),v=t.ref([-10,10]),f=t.ref(0),d=t.computed(()=>at(u.value)),b=t.computed(()=>at(h.value)),k=t.reactive(On()),C=t.reactive(Dn()),E=t.ref(""),x=t.ref([]);t.onMounted(async()=>{await O("")}),t.watch(()=>i.speaker,S=>{S.roles.length>0&&g(S.roles[0].value),S.styles.length>0&&_(S.styles[0].value)},{immediate:!0}),t.watch(f,S=>{r.pitch=Gi(S)},{immediate:!0}),t.watch(p,S=>{r.rate=qi(S)},{immediate:!0});async function N(){c.value=await s(i.speaker.value,!c.value)}function g(S){o.role=S}function _(S){o.style=S}async function O(S){E.value=S;try{x.value=await l(S)}catch(V){te.emit(Z.ERROR,`${V}`,V)}}function L(S){i.setSpeaker(t.toRaw(S))}return(S,V)=>(t.openBlock(),t.createElementBlock("div",Yi,[t.createElementVNode("div",Xi,[t.createElementVNode("div",Ki,[t.createElementVNode("img",{src:t.unref(we)(),class:"rounded-circle",style:{height:"50px"}},null,8,Ji),t.createElementVNode("div",Qi,[t.createElementVNode("div",Zi,[t.createElementVNode("span",ec,t.toDisplayString(t.unref(i).speaker.label),1),t.createElementVNode("span",tc,t.toDisplayString(p.value)+"x",1)]),t.createElementVNode("div",nc,[t.createVNode(t.unref($.ElIcon),{onClick:N,class:"fs-6",style:t.normalizeStyle({color:c.value?"red":"white"})},{default:t.withCtx(()=>[c.value?(t.openBlock(),t.createBlock(t.unref(_e.StarFilled),{key:0})):(t.openBlock(),t.createBlock(t.unref(_e.Star),{key:1}))]),_:1},8,["style"]),t.unref(i).speaker.isSupper24K?(t.openBlock(),t.createElementBlock("span",rc," 24K ")):t.createCommentVNode("",!0)])])]),t.createElementVNode("div",oc,[sc,t.createElementVNode("div",ac,[t.createElementVNode("span",null,t.toDisplayString(b.value),1),lc,t.createElementVNode("span",null,t.toDisplayString(d.value),1)]),t.createVNode(t.unref($.ElSlider),{max:u.value,modelValue:h.value,"onUpdate:modelValue":V[0]||(V[0]=T=>h.value=T),size:"small"},null,8,["max","modelValue"])])]),t.createElementVNode("div",ic,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(i).speaker.roles,(T,I)=>(t.openBlock(),t.createElementBlock("div",{onClick:D=>g(T.value),key:I,class:t.normalizeClass(["rounded-pill px-1",{border:T.value===(t.unref(o).role||"")}])},t.toDisplayString(T.label),11,cc))),128))]),t.createElementVNode("ul",uc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(i).speaker.styles,(T,I)=>(t.openBlock(),t.createElementBlock("li",{class:"mx-2",onClick:D=>_(T.value),key:I},[t.createVNode(Wi,{activate:T.value===(t.unref(o).style||""),data:T},null,8,["activate","data"])],8,dc))),128))]),fc,t.createElementVNode("div",pc,[t.createElementVNode("div",null,[t.createElementVNode("span",null,"语速："+t.toDisplayString(p.value)+"x",1)]),t.createVNode(t.unref($.ElSlider),{modelValue:p.value,"onUpdate:modelValue":V[1]||(V[1]=T=>p.value=T),min:m.value[0],max:m.value[1],step:.05,marks:k},null,8,["modelValue","min","max","marks"])]),t.createElementVNode("div",mc,[t.createElementVNode("div",null,[t.createElementVNode("span",null,"语调："+t.toDisplayString(f.value),1)]),t.createVNode(t.unref($.ElSlider),{modelValue:f.value,"onUpdate:modelValue":V[2]||(V[2]=T=>f.value=T),min:v.value[0],max:v.value[1],step:.2,marks:C},null,8,["modelValue","min","max","marks"])]),t.createElementVNode("div",null,[t.createElementVNode("ul",hc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(a),(T,I)=>(t.openBlock(),t.createElementBlock("li",{onClick:D=>O(T.value),key:I,class:t.normalizeClass(["rounded-pill px-1",{border:T.value===E.value}])},t.toDisplayString(T.label),11,vc))),128))]),t.createElementVNode("ul",yc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(x.value,(T,I)=>(t.openBlock(),t.createElementBlock("li",{onClick:D=>L(T),key:I},[t.createVNode(dr,{activate:T.value===t.unref(i).speaker.value,data:T},null,8,["activate","data"])],8,gc))),128))])])]))}});const _c=Y(bc,[["__scopeId","data-v-c4fe6de7"]]),wc=e=>(t.pushScopeId("data-v-f0208c5e"),e=e(),t.popScopeId(),e),Ec={class:"box ms-2"},xc={class:"try-play-header text-center d-flex flex-row justify-content-between"},kc={class:"try-play-body d-flex flex-row"},Sc={class:"try-play-left w-50 border-right border-secondary"},Vc={class:"pe-1"},Nc=wc(()=>t.createElementVNode("div",{class:"py-1 border-top border-secondary"},null,-1)),Cc={class:"try-play-right w-50 border-start rounded border-top border-secondary overflow-x-hidden overflow-y-auto scrollbar-none"},$c=t.defineComponent({__name:"try-play-panle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:n}){const r=e,o=t.ref(),s=t.ref(""),a=t.ref(),l=t.ref(),i=t.ref(gt());t.onMounted(()=>{window.addEventListener("keydown",c)}),t.onUnmounted(()=>{window.addEventListener("keydown",c)}),t.watch(()=>r.visible,f=>{f&&setTimeout(()=>{p()},200)});function c(f){f.code==="Escape"&&r.visible&&m()}const{position:u}=Et(l,{initialValue:{x:40,y:40}}),{style:h}=St(a,u);t.onMounted(()=>{u.value.x=(window.innerWidth-890)/2,u.value.y=(window.innerHeight-390)/2});function m(){n("update:visible",!1)}function p(){var f;(f=o.value)==null||f.focus()}function v(){i.value={...i.value,word:s.value}}return(f,d)=>t.withDirectives((t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:a,style:t.normalizeStyle([t.unref(h),{position:"fixed"}]),class:"try-play user-select-none card z-3 shadow"},[t.createElementVNode("div",Ec,[t.createElementVNode("div",xc,[t.createElementVNode("div",{ref_key:"handleRef",ref:l,class:"col-11 try-play-move"},null,512),t.createElementVNode("div",{onClick:m,class:"col-1 try-play-menu-close"},[t.createVNode(t.unref($.ElIcon),{color:"white"},{default:t.withCtx(()=>[t.createVNode(t.unref(_e.Minus))]),_:1})])]),t.createElementVNode("div",kc,[t.createElementVNode("div",Sc,[t.createElementVNode("div",Vc,[t.createVNode(t.unref($.ElForm),{onSubmit:t.withModifiers(v,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref($.ElInput),{"input-style":{color:"white"},ref_key:"searchInputRef",ref:o,modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=b=>s.value=b),placeholder:"输入名称搜索"},null,8,["modelValue"])]),_:1},8,["onSubmit"])]),t.createVNode(ji,{filter:i.value,"onUpdate:filter":d[1]||(d[1]=b=>i.value=b)},null,8,["filter"]),Nc,t.createVNode(Ii,{filter:i.value},null,8,["filter"])]),t.createElementVNode("div",Cc,[t.createVNode(_c)])])])],4)),[[t.vShow,f.visible]])}});const Tc=Y($c,[["__scopeId","data-v-f0208c5e"]]),fr=t.defineComponent({__name:"try-play",setup(e){const n=t.ref(!0);function r(o){o||(n.value=!0)}return(o,s)=>(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.createVNode(Ti,{visible:n.value,"onUpdate:visible":s[0]||(s[0]=a=>n.value=a)},null,8,["visible"]),t.createVNode(Tc,{visible:!n.value,"onUpdate:visible":r},null,8,["visible"])]))}});const Rc={install:e=>{e.component("PinyinMenu",Jn),e.component("ContinuousMenu",Qn),e.component("ReadMenu",Zn),e.component("DigitalMenu",er),e.component("AliasMenu",tr),e.component("EnglishMenu",nr),e.component("ChangespeedMenu",rr),e.component("RhythmMenu",or),e.component("SpecialMenu",sr),e.component("MuteMenu",ar),e.component("BgmMenu",lr),e.component("SensitiveMenu",ir),e.component("ManagementMenu",cr),e.component("ConversionMenu",ur),e.component("TryPlay",fr)}};var it={exports:{}},ct={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class r extends Error{constructor(x,N){super(x),this.cause=N}}n.ParsingError=r;let o;function s(){return c(!1)||p()||m()||h()}function a(){return d(/\s*/),c(!0)||m()||u()||i(!1)}function l(){const E=i(!0),x=[];let N,g=a();for(;g;){if(g.node.type==="Element"){if(N)throw new Error("Found multiple root nodes");N=g.node}g.excluded||x.push(g.node),g=a()}if(!N)throw new r("Failed to parse XML","Root Element not found");if(o.xml.length!==0)throw new r("Failed to parse XML","Not Well-Formed XML");return{declaration:E?E.node:null,root:N,children:x}}function i(E){const x=d(E?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!x)return;const N={name:x[1],type:"ProcessingInstruction",attributes:{}};for(;!(b()||k("?>"));){const g=v();if(g)N.attributes[g.name]=g.value;else return}return d(/\?>/),{excluded:E?!1:o.options.filter(N)===!1,node:N}}function c(E){const x=d(/^<([^?!</>\s]+)\s*/);if(!x)return;const N={type:"Element",name:x[1],attributes:{},children:[]},g=E?!1:o.options.filter(N)===!1;for(;!(b()||k(">")||k("?>")||k("/>"));){const O=v();if(O)N.attributes[O.name]=O.value;else return}if(d(/^\s*\/>/))return N.children=null,{excluded:g,node:N};d(/\??>/);let _=s();for(;_;)_.excluded||N.children.push(_.node),_=s();if(o.options.strictMode){const O=`</${N.name}>`;if(o.xml.startsWith(O))o.xml=o.xml.slice(O.length);else throw new r("Failed to parse XML",`Closing tag not matching "${O}"`)}else d(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:g,node:N}}function u(){const E=d(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||d(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||d(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||d(/^<!DOCTYPE\s+\S+\s*>/);if(E){const x={type:"DocumentType",content:E[0]};return{excluded:o.options.filter(x)===!1,node:x}}}function h(){if(o.xml.startsWith("<![CDATA[")){const E=o.xml.indexOf("]]>");if(E>-1){const x=E+3,N={type:"CDATA",content:o.xml.substring(0,x)};return o.xml=o.xml.slice(x),{excluded:o.options.filter(N)===!1,node:N}}}}function m(){const E=d(/^<!--[\s\S]*?-->/);if(E){const x={type:"Comment",content:E[0]};return{excluded:o.options.filter(x)===!1,node:x}}}function p(){const E=d(/^([^<]+)/);if(E){const x={type:"Text",content:E[1]};return{excluded:o.options.filter(x)===!1,node:x}}}function v(){const E=d(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(E)return{name:E[1].trim(),value:f(E[2].trim())}}function f(E){return E.replace(/^['"]|['"]$/g,"")}function d(E){const x=o.xml.match(E);if(x)return o.xml=o.xml.slice(x[0].length),x}function b(){return o.xml.length===0}function k(E){return o.xml.indexOf(E)===0}function C(E,x={}){E=E.trim();const N=x.filter||(()=>!0);return o={xml:E,options:Object.assign(Object.assign({},x),{filter:N,strictMode:x.strictMode===!0})},l()}e.exports=C,n.default=C})(ct,ct.exports);var Oc=ct.exports;(function(e,n){var r=ge&&ge.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(n,"__esModule",{value:!0});const o=r(Oc);function s(f){if(!f.options.indentation&&!f.options.lineSeparator)return;f.content+=f.options.lineSeparator;let d;for(d=0;d<f.level;d++)f.content+=f.options.indentation}function a(f){f.content=f.content.replace(/ +$/,"");let d;for(d=0;d<f.level;d++)f.content+=f.options.indentation}function l(f,d){f.content+=d}function i(f,d,b){if(typeof f.content=="string")c(f.content,d,b);else if(f.type==="Element")h(f,d,b);else if(f.type==="ProcessingInstruction")p(f,d);else throw new Error("Unknown node type: "+f.type)}function c(f,d,b){if(!b){const k=f.trim();(d.options.lineSeparator||k.length===0)&&(f=k)}f.length>0&&(!b&&d.content.length>0&&s(d),l(d,f))}function u(f,d){const b="/"+f.join("/"),k=f[f.length-1];return d.includes(k)||d.includes(b)}function h(f,d,b){if(d.path.push(f.name),!b&&d.content.length>0&&s(d),l(d,"<"+f.name),m(d,f.attributes),f.children===null||d.options.forceSelfClosingEmptyTag&&f.children.length===0){const k=d.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";l(d,k)}else if(f.children.length===0)l(d,"></"+f.name+">");else{const k=f.children;l(d,">"),d.level++;let C=f.attributes["xml:space"]==="preserve",E=!1;if(!C&&d.options.ignoredPaths&&(E=u(d.path,d.options.ignoredPaths),C=E),!C&&d.options.collapseContent){let x=!1,N=!1,g=!1;k.forEach(function(_,O){_.type==="Text"?(_.content.includes(`
`)?(N=!0,_.content=_.content.trim()):(O===0||O===k.length-1)&&_.content.trim().length===0&&(_.content=""),_.content.trim().length>0&&(x=!0)):_.type==="CDATA"?x=!0:g=!0}),x&&(!g||!N)&&(C=!0)}k.forEach(function(x){i(x,d,b||C)}),d.level--,!b&&!C&&s(d),E&&a(d),l(d,"</"+f.name+">")}d.path.pop()}function m(f,d){Object.keys(d).forEach(function(b){const k=d[b].replace(/"/g,"&quot;");l(f," "+b+'="'+k+'"')})}function p(f,d){d.content.length>0&&s(d),l(d,"<?"+f.name),m(d,f.attributes),l(d,"?>")}function v(f,d={}){d.indentation="indentation"in d?d.indentation:"    ",d.collapseContent=d.collapseContent===!0,d.lineSeparator="lineSeparator"in d?d.lineSeparator:`\r
`,d.whiteSpaceAtEndOfSelfclosingTag=d.whiteSpaceAtEndOfSelfclosingTag===!0,d.throwOnFailure=d.throwOnFailure!==!1;try{const b=(0,o.default)(f,{filter:d.filter,strictMode:d.strictMode}),k={content:"",level:0,options:d,path:[]};return b.declaration&&p(b.declaration,k),b.children.forEach(function(C){i(C,k,!1)}),d.lineSeparator?k.content.replace(/\r\n/g,`
`).replace(/\n/g,d.lineSeparator):k.content}catch(b){if(d.throwOnFailure)throw b;return f}}v.minify=(f,d={})=>v(f,Object.assign(Object.assign({},d),{indentation:"",lineSeparator:""})),e.exports=v,n.default=v})(it,it.exports);var Dc=it.exports;const Pc=mt(Dc);function Bc(e){return e.replaceAll(/[&]/gi,"&amp;").replaceAll(/[<]/gi,"&lt;").replaceAll(/[>]/gi,"&gt;")}function Ic(e,n){return n?`<audio src="${e.src}">${n}</audio>`:`<audio src="${e.src}"/>`}function Mc(e){return e.time?`<break time="${e.time}"/>`:e.strength?`<break strength="${e.strength}"/>`:"<break/>"}function Ac(e,n){return e.level?`<emphasis level="${e.level}">${n}</emphasis>`:`<emphasis>${n}</emphasis>`}function Lc(e,n){if(!e.style)return n;const r=e.role?` role="${e.role}"`:"",o=e.styledegree?` styledegree="${e.styledegree}"`:"";return`<mstts:express-as style="${e.style}"${r}${o}>${n}</mstts:express-as>`}function Fc(e){if(!e.src)return"";const n=e.volume?` volume="${e.volume}"`:"",r=e.fadein?` fadein="${e.fadein}"`:"",o=e.fadeout?` fadeout="${e.fadeout}"`:"";return`<mstts:backgroundaudio src="${e.src}"${n}${r}${o}/>`}function jc(e){return!e.attrType||!e.value?"":`<mstts:silence type="${e.attrType}" value="${e.value}"/>`}function Hc(e,n){return`<p>${n}</p>`}function Uc(e,n){const r=e.alphabet?`alphabet="${e.alphabet}"`:"";return`<phoneme ph="${e.ph}"${r}>${n}</phoneme>`}function zc(e,n){if(!e.contour&&!e.pitch&&!e.range&&!e.rate&&!e.volume)return n;const r=e.contour?` contour="${e.contour}"`:"",o=e.pitch?` pitch="${e.pitch}"`:"",s=e.range?` range="${e.range}"`:"",a=e.volume?` volume="${e.volume}"`:"",l=e.rate?` rate="${e.rate}"`:"";return`<prosody${r}${o}${s}${a}${l}>${n}</prosody>`}function Wc(e,n){const r=e.interpretAs?` interpret-as="${e.interpretAs}"`:"",o=e.format?` format="${e.format}"`:"",s=e.detail?` detail="${e.detail}"`:"";return`<say-as${r}${o}${s}>${n}</say-as>`}function Gc(e,n){return`<s>${n}</s>`}function qc(e,n){return`<sub alias="${e.alias}">${n}</sub>`}function Yc(e,n){const r=e.effect?` effect="${e.effect}"`:"";return`<voice name="${e.name}${r}">${n}</voice>`}function Xc(e,n){return`<speak version="${e.version}" xml:lang="${e.xmlLang}" xmlns="${e.xmlns}" xmlns:mstts="${e["xmlns:mstts"]}" xmlns:emo="${e["xmlns:emo"]}">${n}</speak>`}function pr(e){if(y.SlateText.isText(e))return Bc(e.text.trim());if(y.SlateElement.isElement(e)){const n=e.children.map(o=>pr(o)).join("");switch(y.DomEditor.getNodeType(e)){case"paragraph":return`<p>${n}</p>`;case"ssml-speak":return Xc(e,n);case"ssml-mstts:backgroundaudio":return Fc(e);case"ssml-audio":return Ic(e,n);case"ssml-break":return Mc(e);case"ssml-emphasis":return Ac(e,n);case"ssml-mstts:express-as":return Lc(e,n);case"ssml-p":return Hc(e,n);case"ssml-phoneme":return Uc(e,n);case"ssml-prosody":return zc(e,n);case"ssml-s":return Gc(e,n);case"ssml-say-as":return Wc(e,n);case"ssml-sub":return qc(e,n);case"ssml-voice":return Yc(e,n);case"ssml-mstts:silence":return jc(e);default:return n}}return""}function Kc(e,n){const r={type:"ssml-voice",remark:"",name:n.name,children:[]},o=mr(),s={type:"ssml-mstts:express-as",remark:"",style:n.style,role:n.role,children:[]},a=()=>({type:"ssml-prosody",remark:"",rate:n.rate,pitch:n.pitch,children:[]});r.children.push(...o),r.children.push(s);function l(){const c=a();s.children.push(c);function u(h){c.children.push(h)}return{prosody:c,pushNode:u}}let i;for(let c=0;c<n.children.length;c++){const u=n.children[c];if(!(y.SlateText.isText(u)&&!u.text.trim()))if(y.SlateText.isText(u)){i??(i=l()),i.pushNode(u);continue}else if(y.SlateEditor.isVoid(e,u)){i=void 0,s.children.push(u);continue}else{const h=y.DomEditor.findPath(e,u),[m]=y.SlateEditor.nodes(e,{at:h,mode:"lowest",voids:!1,match:p=>y.DomEditor.checkNodeType(p,"ssml-prosody")});if(m){i=void 0,s.children.push(u);continue}else i??(i=l()),i.pushNode(u)}}return r}function mr(){return[{type:"ssml-mstts:silence",attrType:"comma-exact",value:"200ms",remark:"逗号静音",children:[]},{type:"ssml-mstts:silence",attrType:"semicolon-exact",value:"200ms",remark:"分号静音",children:[]},{type:"ssml-mstts:silence",attrType:"enumerationcomma-exact",value:"200ms",remark:"顿号静音",children:[]}]}function Jc(){const{rootVoice:e,rootExpressAs:n}=de(),r={...e,children:[]},o=mr(),s={...n,children:[]};r.children.push(...o),r.children.push(s);function a(l){s.children.push(l)}return{voice:r,pushNode:a}}function yn(e){const{rootProsody:n}=de(),r={...n,children:[]};e(r);function o(s){r.children.push(s)}return{prosody:r,pushNode:o}}function Qc(){return{type:"ssml-break",time:"200ms",children:[{text:""}],remark:"paragraphBreak"}}function Zc(e){const n=e.children.filter(r=>y.DomEditor.checkNodeType(r,"paragraph")).filter(r=>!!y.SlateNode.string(r).trim()).map((r,o,s)=>{const l=r.children;return o<s.length-1?l.concat([Qc()]):l});return[].concat(...n)}function eu(e){const n=Zc(e),r=[];let o,s;for(let a=0;a<n.length;a++){const l=n[a];if(!(y.SlateText.isText(l)&&!l.text.trim())){if(y.DomEditor.checkNodeType(l,"custom-management")){o&&(r.push(o.voice),o=void 0,s=void 0),r.push(Kc(e,l));continue}if(o??(o=Jc()),y.SlateText.isText(l)){s??(s=yn(o.pushNode)),s.pushNode(l);continue}else if(y.SlateEditor.isVoid(e,l)){s=void 0,o.pushNode(l);continue}else{const i=y.DomEditor.findPath(e,l),[c]=y.SlateEditor.nodes(e,{at:i,mode:"lowest",voids:!1,match:u=>y.DomEditor.checkNodeType(u,"ssml-prosody")});if(c){s=void 0,o.pushNode(l);continue}else{s??(s=yn(o.pushNode)),s.pushNode(l);continue}}}}return o&&r.push(o.voice),r}function tu(){const{editor:e}=q();if(!e)throw Error("没有找到 editor 对象");const{rootSpeak:n,rootBackgroundaudio:r}=de(),o={...n,children:[]},s={...r};return o.children.push(s,...eu(e)),pr(o)}const ke=e=>(t.pushScopeId("data-v-fb2870b0"),e=e(),t.popScopeId(),e),nu={class:"editor-title d-flex flex-row align-item-center justify-content-between"},ru={class:"title-wrapper d-flex flex-column justify-content-center ps-3"},ou=ke(()=>t.createElementVNode("div",{class:"title-author pb-1"},"SSML编辑器",-1)),su={class:"author d-flex flex-row align-items-center justify-content-start"},au=ke(()=>t.createElementVNode("div",null,"未保存",-1)),lu=ke(()=>t.createElementVNode("span",{class:"iconfont icon-play font-size-12 p-1"},null,-1)),iu=ke(()=>t.createElementVNode("div",{class:"d-inline-block"},null,-1)),cu={class:"operation-wrapper d-flex flex-row justify-content-center align-items-center"},uu=ke(()=>t.createElementVNode("div",{class:"menu-divider"},null,-1)),du=ke(()=>t.createElementVNode("div",{class:"px-1"},null,-1)),fu={class:"ssml-code border border-secondary-subtle rounded-2 px-2",style:{"white-space":"pre-wrap","max-height":"50vh"}},pu={class:"dialog-footer"},mu=t.defineComponent({__name:"editor-title",setup(e){const n=t.ref(!1),r=t.ref(""),{rootBackgroundaudio:o}=de(),s=t.computed(()=>Pc(r.value,{indentation:"    ",filter:u=>u.type!=="Comment",collapseContent:!0,lineSeparator:`
`})),a=()=>{r.value=tu(),n.value=!0},l=()=>{o.src&&ue.play(o.src)},i=()=>{ue.stop(o.src),o.src="",o.remark=""};async function c(u){await navigator.clipboard.writeText(u?s.value:r.value),n.value=!1}return(u,h)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",nu,[t.createElementVNode("div",ru,[ou,t.createElementVNode("div",su,[au,t.unref(o).src?(t.openBlock(),t.createBlock(t.unref($.ElTag),{key:0,class:"bgm-txt ms-2",closable:"",size:"small",onClick:l,onClose:i},{default:t.withCtx(()=>[lu,iu,t.createElementVNode("span",null,t.toDisplayString(t.unref(o).remark),1)]),_:1})):t.createCommentVNode("",!0)])]),t.createElementVNode("div",cu,[t.createVNode(t.unref($.ElButton),{type:"primary",icon:t.unref(_e.Share),disabled:""},{default:t.withCtx(()=>[t.createTextVNode("分享")]),_:1},8,["icon"]),uu,t.createVNode(t.unref($.ElButton),{type:"primary",onClick:a},{default:t.withCtx(()=>[t.createTextVNode("查看SSML")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载音频")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载视频")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载字幕")]),_:1}),t.createVNode(t.unref($.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("声音转换")]),_:1}),du])]),t.createVNode(t.unref($.ElDialog),{modelValue:n.value,"onUpdate:modelValue":h[4]||(h[4]=m=>n.value=m),title:"查看SSML",width:"80%"},{header:t.withCtx(()=>[t.createVNode(t.unref($.ElButton),{type:"info",onClick:h[0]||(h[0]=m=>c(!0))},{default:t.withCtx(()=>[t.createTextVNode("复制+关闭")]),_:1}),t.createVNode(t.unref($.ElButton),{type:"primary",onClick:h[1]||(h[1]=m=>c(!1))},{default:t.withCtx(()=>[t.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})]),footer:t.withCtx(()=>[t.createElementVNode("span",pu,[t.createVNode(t.unref($.ElButton),{type:"info",onClick:h[2]||(h[2]=m=>c(!0))},{default:t.withCtx(()=>[t.createTextVNode("复制+关闭")]),_:1}),t.createVNode(t.unref($.ElButton),{type:"primary",onClick:h[3]||(h[3]=m=>c(!1))},{default:t.withCtx(()=>[t.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})])]),default:t.withCtx(()=>[t.createElementVNode("pre",fu,t.toDisplayString(s.value),1)]),_:1},8,["modelValue"])],64))}});const hu=Y(mu,[["__scopeId","data-v-fb2870b0"]]),vu=t.defineComponent({__name:"editor-core",emits:["created","change"],setup(e,{emit:n}){const{editor:r,setEditor:o,globalEditConfig:s}=q(),a=t.ref(null);t.onMounted(()=>{l()}),t.onUnmounted(()=>{r==null||r.destroy()});function l(){if(!a.value)return;const i=y.createEditor({selector:a.value,mode:"simple",config:{...t.toRaw(s.editorConfig),onCreated(c){n("created",c)},onChange(c){n("change",c)}}});o(i),i.on(M.ERROR,s.handleError)}return(i,c)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:a,class:"edit-core",style:{height:"70vh","overflow-y":"hidden"}},null,512))}}),yu={class:"bar-view border-bottom border-1"},gu=t.defineComponent({__name:"bar-view",setup(e){return(n,r)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",yu,[t.createVNode(t.unref(Gn),null,{default:t.withCtx(()=>[t.createVNode(t.unref(ve),{divider:"green"},{default:t.withCtx(()=>[t.createVNode(t.unref(U),{text:"24K高清音质",icon:"play",disabled:""})]),_:1}),t.createVNode(t.unref(ve),{divider:"cyan"},{default:t.withCtx(()=>[t.createVNode(t.unref(Jn)),t.createVNode(t.unref(Zn)),t.createVNode(t.unref(er)),t.createVNode(t.unref(Qn)),t.createVNode(t.unref(tr)),t.createVNode(t.unref(nr))]),_:1}),t.createVNode(t.unref(ve),{divider:"orange"},{default:t.withCtx(()=>[t.createVNode(t.unref(rr)),t.createVNode(t.unref(cr)),t.createVNode(t.unref(ur))]),_:1}),t.createVNode(t.unref(ve),{divider:"purple"},{default:t.withCtx(()=>[t.createVNode(t.unref(or)),t.createVNode(t.unref(ar))]),_:1}),t.createVNode(t.unref(ve),{divider:"yellow"},{default:t.withCtx(()=>[t.createVNode(t.unref(sr)),t.createVNode(t.unref(lr))]),_:1})]),_:1})]),t.createVNode(t.unref(fr))],64))}}),bu={class:"editor-box"},_u={class:"editor-core-container shadow pt-1"},wu=t.defineComponent({__name:"editor-view",emits:["created","change"],setup(e,{emit:n}){const r=l=>{n("created",l)},o=l=>{n("change",l)};function s(l){te.emit(Z.VIEW_CLICK,l)}function a(l){te.emit(Z.VIEW_KEYDOWN,l)}return(l,i)=>(t.openBlock(),t.createElementBlock("div",{class:"editor-view",onClick:s,onKeydown:a},[t.createVNode(hu),t.createElementVNode("div",bu,[t.createVNode(gu),t.createElementVNode("div",_u,[t.createVNode(vu,{onChange:o,onCreated:r})])])],32))}});const hr=Y(wu,[["__scopeId","data-v-c398e700"]]),Eu={install(e){e.component("EditorView",hr)}},xu={install(e,n){e.use(Hr()),e.use(()=>{const{setGlobalEditConfig:r}=q(),o=pt(n);r(o),te.on(Z.ERROR,o.handleError)}),e.use(Fs),e.use(bl),e.use(Rc),e.use(Eu)}};exports.AudioPlayer=Ln;exports.CancellationTokenSource=jn;exports.DOMComment=xo;exports.DOMElement=ko;exports.DOMNode=Eo;exports.DOMRange=Vo;exports.DOMSelection=No;exports.DOMStaticRange=Co;exports.DOMText=So;exports.EMITTER_EVENT=Z;exports.EditorView=hr;exports.FileSelector=Fn;exports.WANGEDITOR_EVENT=M;exports.audioPlayer=ue;exports.createGlobalEditorConfig=pt;exports.default=xu;exports.defaultFilterSpeaker=gt;exports.defaultLabelValue=Ve;exports.defaultSpeaker=Hn;exports.demoAvatar=we;exports.formatTime=at;exports.genRandomStr=To;exports.pitch=Dn;exports.speed=On;
