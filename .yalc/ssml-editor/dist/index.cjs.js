"use strict";var ko=Object.defineProperty;var So=(e,n,o)=>n in e?ko(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o;var M=(e,n,o)=>(So(e,typeof n!="symbol"?n+"":n,o),o);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),v=require("@wangeditor/editor"),T=require("element-plus"),ie=require("@element-plus/icons-vue");var bn=!1;function Te(e,n,o){return Array.isArray(e)?(e.length=Math.max(e.length,n),e.splice(n,1,o),o):(e[n]=o,o)}function Ye(e,n){if(Array.isArray(e)){e.splice(n,1);return}delete e[n]}function No(){return _n().__VUE_DEVTOOLS_GLOBAL_HOOK__}function _n(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const Vo=typeof Proxy=="function",Co="devtools-plugin:setup",$o="plugin:settings:set";let fe,st;function To(){var e;return fe!==void 0||(typeof window<"u"&&window.performance?(fe=!0,st=window.performance):typeof global<"u"&&(!((e=global.perf_hooks)===null||e===void 0)&&e.performance)?(fe=!0,st=global.perf_hooks.performance):fe=!1),fe}function Ro(){return To()?st.now():Date.now()}class Do{constructor(n,o){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=n,this.hook=o;const r={};if(n.settings)for(const l in n.settings){const i=n.settings[l];r[l]=i.defaultValue}const s=`__vue-devtools-plugin-settings__${n.id}`;let a=Object.assign({},r);try{const l=localStorage.getItem(s),i=JSON.parse(l);Object.assign(a,i)}catch{}this.fallbacks={getSettings(){return a},setSettings(l){try{localStorage.setItem(s,JSON.stringify(l))}catch{}a=l},now(){return Ro()}},o&&o.on($o,(l,i)=>{l===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(l,i)=>this.target?this.target.on[i]:(...c)=>{this.onQueue.push({method:i,args:c})}}),this.proxiedTarget=new Proxy({},{get:(l,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...c)=>(this.targetQueue.push({method:i,args:c,resolve:()=>{}}),this.fallbacks[i](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:i,args:c,resolve:u})})})}async setRealTarget(n){this.target=n;for(const o of this.onQueue)this.target.on[o.method](...o.args);for(const o of this.targetQueue)o.resolve(await this.target[o.method](...o.args))}}function wn(e,n){const o=e,r=_n(),s=No(),a=Vo&&o.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))s.emit(Co,e,n);else{const l=a?new Do(o,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:o,setupFn:n,proxy:l}),l&&n(l.proxiedTarget)}}/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let xe;const Ne=e=>xe=e,En=process.env.NODE_ENV!=="production"?Symbol("pinia"):Symbol();function ce(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var te;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(te||(te={}));const Fe=typeof window<"u",ke=(process.env.NODE_ENV!=="production"||!1)&&process.env.NODE_ENV!=="test"&&Fe,Bt=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function Oo(e,{autoBom:n=!1}={}){return n&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function vt(e,n,o){const r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Sn(r.response,n,o)},r.onerror=function(){console.error("could not download file")},r.send()}function xn(e){const n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Re(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}const De=typeof navigator=="object"?navigator:{userAgent:""},kn=(()=>/Macintosh/.test(De.userAgent)&&/AppleWebKit/.test(De.userAgent)&&!/Safari/.test(De.userAgent))(),Sn=Fe?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!kn?Bo:"msSaveOrOpenBlob"in De?Po:Io:()=>{};function Bo(e,n="download",o){const r=document.createElement("a");r.download=n,r.rel="noopener",typeof e=="string"?(r.href=e,r.origin!==location.origin?xn(r.href)?vt(e,n,o):(r.target="_blank",Re(r)):Re(r)):(r.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(r.href)},4e4),setTimeout(function(){Re(r)},0))}function Po(e,n="download",o){if(typeof e=="string")if(xn(e))vt(e,n,o);else{const r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Re(r)})}else navigator.msSaveOrOpenBlob(Oo(e,o),n)}function Io(e,n,o,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return vt(e,n,o);const s=e.type==="application/octet-stream",a=/constructor/i.test(String(Bt.HTMLElement))||"safari"in Bt,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&a||kn)&&typeof FileReader<"u"){const i=new FileReader;i.onloadend=function(){let c=i.result;if(typeof c!="string")throw r=null,new Error("Wrong reader.result type");c=l?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location.assign(c),r=null},i.readAsDataURL(e)}else{const i=URL.createObjectURL(e);r?r.location.assign(i):location.href=i,r=null,setTimeout(function(){URL.revokeObjectURL(i)},4e4)}}function A(e,n){const o="🍍 "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(o,n):n==="error"?console.error(o):n==="warn"?console.warn(o):console.log(o)}function yt(e){return"_a"in e&&"install"in e}function Nn(){if(!("clipboard"in navigator))return A("Your browser doesn't support the Clipboard API","error"),!0}function Vn(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(A('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Mo(e){if(!Nn())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),A("Global state copied to clipboard.")}catch(n){if(Vn(n))return;A("Failed to serialize the state. Check the console for more details.","error"),console.error(n)}}async function Lo(e){if(!Nn())try{Cn(e,JSON.parse(await navigator.clipboard.readText())),A("Global state pasted from clipboard.")}catch(n){if(Vn(n))return;A("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(n)}}async function Ao(e){try{Sn(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(n){A("Failed to export the state as JSON. Check the console for more details.","error"),console.error(n)}}let ne;function Fo(){ne||(ne=document.createElement("input"),ne.type="file",ne.accept=".json");function e(){return new Promise((n,o)=>{ne.onchange=async()=>{const r=ne.files;if(!r)return n(null);const s=r.item(0);return n(s?{text:await s.text(),file:s}:null)},ne.oncancel=()=>n(null),ne.onerror=o,ne.click()})}return e}async function jo(e){try{const o=await Fo()();if(!o)return;const{text:r,file:s}=o;Cn(e,JSON.parse(r)),A(`Global state imported from "${s.name}".`)}catch(n){A("Failed to import the state from JSON. Check the console for more details.","error"),console.error(n)}}function Cn(e,n){for(const o in n){const r=e.state.value[o];r&&Object.assign(r,n[o])}}function Z(e){return{_custom:{display:e}}}const $n="🍍 Pinia (root)",at="_root";function Ho(e){return yt(e)?{id:at,label:$n}:{id:e.$id,label:e.$id}}function Uo(e){if(yt(e)){const o=Array.from(e._s.keys()),r=e._s;return{state:o.map(a=>({editable:!0,key:a,value:e.state.value[a]})),getters:o.filter(a=>r.get(a)._getters).map(a=>{const l=r.get(a);return{editable:!1,key:a,value:l._getters.reduce((i,c)=>(i[c]=l[c],i),{})}})}}const n={state:Object.keys(e.$state).map(o=>({editable:!0,key:o,value:e.$state[o]}))};return e._getters&&e._getters.length&&(n.getters=e._getters.map(o=>({editable:!1,key:o,value:e[o]}))),e._customProperties.size&&(n.customProperties=Array.from(e._customProperties).map(o=>({editable:!0,key:o,value:e[o]}))),n}function zo(e){return e?Array.isArray(e)?e.reduce((n,o)=>(n.keys.push(o.key),n.operations.push(o.type),n.oldValue[o.key]=o.oldValue,n.newValue[o.key]=o.newValue,n),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Z(e.type),key:Z(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function Wo(e){switch(e){case te.direct:return"mutation";case te.patchFunction:return"$patch";case te.patchObject:return"$patch";default:return"unknown"}}let ve=!0;const Oe=[],ae="pinia:mutations",F="pinia",{assign:Go}=Object,Me=e=>"🍍 "+e;function qo(e,n){wn({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Oe,app:e},o=>{typeof o.now!="function"&&A("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),o.addTimelineLayer({id:ae,label:"Pinia 🍍",color:15064968}),o.addInspector({id:F,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Mo(n)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Lo(n),o.sendInspectorTree(F),o.sendInspectorState(F)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{Ao(n)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await jo(n),o.sendInspectorTree(F),o.sendInspectorState(F)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:r=>{const s=n._s.get(r);s?typeof s.$reset!="function"?A(`Cannot reset "${r}" store because it doesn't have a "$reset" method implemented.`,"warn"):(s.$reset(),A(`Store "${r}" reset.`)):A(`Cannot reset "${r}" store because it wasn't found.`,"warn")}}]}),o.on.inspectComponent((r,s)=>{const a=r.componentInstance&&r.componentInstance.proxy;if(a&&a._pStores){const l=r.componentInstance.proxy._pStores;Object.values(l).forEach(i=>{r.instanceData.state.push({type:Me(i.$id),key:"state",editable:!0,value:i._isOptionsAPI?{_custom:{value:t.toRaw(i.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>i.$reset()}]}}:Object.keys(i.$state).reduce((c,u)=>(c[u]=i.$state[u],c),{})}),i._getters&&i._getters.length&&r.instanceData.state.push({type:Me(i.$id),key:"getters",editable:!1,value:i._getters.reduce((c,u)=>{try{c[u]=i[u]}catch(p){c[u]=p}return c},{})})})}}),o.on.getInspectorTree(r=>{if(r.app===e&&r.inspectorId===F){let s=[n];s=s.concat(Array.from(n._s.values())),r.rootNodes=(r.filter?s.filter(a=>"$id"in a?a.$id.toLowerCase().includes(r.filter.toLowerCase()):$n.toLowerCase().includes(r.filter.toLowerCase())):s).map(Ho)}}),o.on.getInspectorState(r=>{if(r.app===e&&r.inspectorId===F){const s=r.nodeId===at?n:n._s.get(r.nodeId);if(!s)return;s&&(r.state=Uo(s))}}),o.on.editInspectorState((r,s)=>{if(r.app===e&&r.inspectorId===F){const a=r.nodeId===at?n:n._s.get(r.nodeId);if(!a)return A(`store "${r.nodeId}" not found`,"error");const{path:l}=r;yt(a)?l.unshift("state"):(l.length!==1||!a._customProperties.has(l[0])||l[0]in a.$state)&&l.unshift("$state"),ve=!1,r.set(a,l,r.state.value),ve=!0}}),o.on.editComponentState(r=>{if(r.type.startsWith("🍍")){const s=r.type.replace(/^🍍\s*/,""),a=n._s.get(s);if(!a)return A(`store "${s}" not found`,"error");const{path:l}=r;if(l[0]!=="state")return A(`Invalid path for store "${s}":
${l}
Only state can be modified.`);l[0]="$state",ve=!1,r.set(a,l,r.state.value),ve=!0}})})}function Yo(e,n){Oe.includes(Me(n.$id))||Oe.push(Me(n.$id)),wn({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Oe,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},o=>{const r=typeof o.now=="function"?o.now.bind(o):Date.now;n.$onAction(({after:l,onError:i,name:c,args:u})=>{const p=Tn++;o.addTimelineEvent({layerId:ae,event:{time:r(),title:"🛫 "+c,subtitle:"start",data:{store:Z(n.$id),action:Z(c),args:u},groupId:p}}),l(m=>{oe=void 0,o.addTimelineEvent({layerId:ae,event:{time:r(),title:"🛬 "+c,subtitle:"end",data:{store:Z(n.$id),action:Z(c),args:u,result:m},groupId:p}})}),i(m=>{oe=void 0,o.addTimelineEvent({layerId:ae,event:{time:r(),logType:"error",title:"💥 "+c,subtitle:"end",data:{store:Z(n.$id),action:Z(c),args:u,error:m},groupId:p}})})},!0),n._customProperties.forEach(l=>{t.watch(()=>t.unref(n[l]),(i,c)=>{o.notifyComponentUpdate(),o.sendInspectorState(F),ve&&o.addTimelineEvent({layerId:ae,event:{time:r(),title:"Change",subtitle:l,data:{newValue:i,oldValue:c},groupId:oe}})},{deep:!0})}),n.$subscribe(({events:l,type:i},c)=>{if(o.notifyComponentUpdate(),o.sendInspectorState(F),!ve)return;const u={time:r(),title:Wo(i),data:Go({store:Z(n.$id)},zo(l)),groupId:oe};i===te.patchFunction?u.subtitle="⤵️":i===te.patchObject?u.subtitle="🧩":l&&!Array.isArray(l)&&(u.subtitle=l.type),l&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:l}}),o.addTimelineEvent({layerId:ae,event:u})},{detached:!0,flush:"sync"});const s=n._hotUpdate;n._hotUpdate=t.markRaw(l=>{s(l),o.addTimelineEvent({layerId:ae,event:{time:r(),title:"🔥 "+n.$id,subtitle:"HMR update",data:{store:Z(n.$id),info:Z("HMR update")}}}),o.notifyComponentUpdate(),o.sendInspectorTree(F),o.sendInspectorState(F)});const{$dispose:a}=n;n.$dispose=()=>{a(),o.notifyComponentUpdate(),o.sendInspectorTree(F),o.sendInspectorState(F),o.getSettings().logStoreChanges&&A(`Disposed "${n.$id}" store 🗑`)},o.notifyComponentUpdate(),o.sendInspectorTree(F),o.sendInspectorState(F),o.getSettings().logStoreChanges&&A(`"${n.$id}" store installed 🆕`)})}let Tn=0,oe;function Pt(e,n,o){const r=n.reduce((s,a)=>(s[a]=t.toRaw(e)[a],s),{});for(const s in r)e[s]=function(){const a=Tn,l=o?new Proxy(e,{get(...c){return oe=a,Reflect.get(...c)},set(...c){return oe=a,Reflect.set(...c)}}):e;oe=a;const i=r[s].apply(l,arguments);return oe=void 0,i}}function Xo({app:e,store:n,options:o}){if(n.$id.startsWith("__hot:"))return;n._isOptionsAPI=!!o.state,Pt(n,Object.keys(o.actions),n._isOptionsAPI);const r=n._hotUpdate;t.toRaw(n)._hotUpdate=function(s){r.apply(this,arguments),Pt(n,Object.keys(s._hmrPayload.actions),!!n._isOptionsAPI)},Yo(e,n)}function Ko(){const e=t.effectScope(!0),n=e.run(()=>t.ref({}));let o=[],r=[];const s=t.markRaw({install(a){Ne(s),s._a=a,a.provide(En,s),a.config.globalProperties.$pinia=s,ke&&qo(a,s),r.forEach(l=>o.push(l)),r=[]},use(a){return!this._a&&!bn?r.push(a):o.push(a),this},_p:o,_a:null,_e:e,_s:new Map,state:n});return ke&&typeof Proxy<"u"&&s.use(Xo),s}function Rn(e,n){for(const o in n){const r=n[o];if(!(o in e))continue;const s=e[o];ce(s)&&ce(r)&&!t.isRef(r)&&!t.isReactive(r)?e[o]=Rn(s,r):e[o]=r}return e}const Dn=()=>{};function It(e,n,o,r=Dn){e.push(n);const s=()=>{const a=e.indexOf(n);a>-1&&(e.splice(a,1),r())};return!o&&t.getCurrentScope()&&t.onScopeDispose(s),s}function pe(e,...n){e.slice().forEach(o=>{o(...n)})}const Jo=e=>e();function lt(e,n){e instanceof Map&&n instanceof Map&&n.forEach((o,r)=>e.set(r,o)),e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const o in n){if(!n.hasOwnProperty(o))continue;const r=n[o],s=e[o];ce(s)&&ce(r)&&e.hasOwnProperty(o)&&!t.isRef(r)&&!t.isReactive(r)?e[o]=lt(s,r):e[o]=r}return e}const Qo=process.env.NODE_ENV!=="production"?Symbol("pinia:skipHydration"):Symbol();function Zo(e){return!ce(e)||!e.hasOwnProperty(Qo)}const{assign:Y}=Object;function Mt(e){return!!(t.isRef(e)&&e.effect)}function Lt(e,n,o,r){const{state:s,actions:a,getters:l}=n,i=o.state.value[e];let c;function u(){!i&&(process.env.NODE_ENV==="production"||!r)&&(o.state.value[e]=s?s():{});const p=process.env.NODE_ENV!=="production"&&r?t.toRefs(t.ref(s?s():{}).value):t.toRefs(o.state.value[e]);return Y(p,a,Object.keys(l||{}).reduce((m,h)=>(process.env.NODE_ENV!=="production"&&h in p&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),m[h]=t.markRaw(t.computed(()=>{Ne(o);const y=o._s.get(e);return l[h].call(y,y)})),m),{}))}return c=it(e,u,n,o,r,!0),c}function it(e,n,o={},r,s,a){let l;const i=Y({actions:{}},o);if(process.env.NODE_ENV!=="production"&&!r._e.active)throw new Error("Pinia destroyed");const c={deep:!0};process.env.NODE_ENV!=="production"&&!bn&&(c.onTrigger=S=>{u?y=S:u==!1&&!b._hotUpdating&&(Array.isArray(y)?y.push(S):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let u,p,m=[],h=[],y;const d=r.state.value[e];!a&&!d&&(process.env.NODE_ENV==="production"||!s)&&(r.state.value[e]={});const f=t.ref({});let w;function E(S){let N;u=p=!1,process.env.NODE_ENV!=="production"&&(y=[]),typeof S=="function"?(S(r.state.value[e]),N={type:te.patchFunction,storeId:e,events:y}):(lt(r.state.value[e],S),N={type:te.patchObject,payload:S,storeId:e,events:y});const $=w=Symbol();t.nextTick().then(()=>{w===$&&(u=!0)}),p=!0,pe(m,N,r.state.value[e])}const k=a?function(){const{state:N}=o,$=N?N():{};this.$patch(I=>{Y(I,$)})}:process.env.NODE_ENV!=="production"?()=>{throw new Error(`🍍: Store "${e}" is built using the setup syntax and does not implement $reset().`)}:Dn;function g(){l.stop(),m=[],h=[],r._s.delete(e)}function _(S,N){return function(){Ne(r);const $=Array.from(arguments),I=[],Q=[];function Ce(z){I.push(z)}function Ge(z){Q.push(z)}pe(h,{args:$,name:S,store:b,after:Ce,onError:Ge});let se;try{se=N.apply(this&&this.$id===e?this:b,$)}catch(z){throw pe(Q,z),z}return se instanceof Promise?se.then(z=>(pe(I,z),z)).catch(z=>(pe(Q,z),Promise.reject(z))):(pe(I,se),se)}}const V=t.markRaw({actions:{},getters:{},state:[],hotState:f}),C={_p:r,$id:e,$onAction:It.bind(null,h),$patch:E,$reset:k,$subscribe(S,N={}){const $=It(m,S,N.detached,()=>I()),I=l.run(()=>t.watch(()=>r.state.value[e],Q=>{(N.flush==="sync"?p:u)&&S({storeId:e,type:te.direct,events:y},Q)},Y({},c,N)));return $},$dispose:g},b=t.reactive(process.env.NODE_ENV!=="production"||ke?Y({_hmrPayload:V,_customProperties:t.markRaw(new Set)},C):C);r._s.set(e,b);const R=r._a&&r._a.runWithContext||Jo,B=r._e.run(()=>(l=t.effectScope(),R(()=>l.run(n))));for(const S in B){const N=B[S];if(t.isRef(N)&&!Mt(N)||t.isReactive(N))process.env.NODE_ENV!=="production"&&s?Te(f.value,S,t.toRef(B,S)):a||(d&&Zo(N)&&(t.isRef(N)?N.value=d[S]:lt(N,d[S])),r.state.value[e][S]=N),process.env.NODE_ENV!=="production"&&V.state.push(S);else if(typeof N=="function"){const $=process.env.NODE_ENV!=="production"&&s?N:_(S,N);B[S]=$,process.env.NODE_ENV!=="production"&&(V.actions[S]=N),i.actions[S]=N}else process.env.NODE_ENV!=="production"&&Mt(N)&&(V.getters[S]=a?o.getters[S]:N,Fe&&(B._getters||(B._getters=t.markRaw([]))).push(S))}if(Y(b,B),Y(t.toRaw(b),B),Object.defineProperty(b,"$state",{get:()=>process.env.NODE_ENV!=="production"&&s?f.value:r.state.value[e],set:S=>{if(process.env.NODE_ENV!=="production"&&s)throw new Error("cannot set hotState");E(N=>{Y(N,S)})}}),process.env.NODE_ENV!=="production"&&(b._hotUpdate=t.markRaw(S=>{b._hotUpdating=!0,S._hmrPayload.state.forEach(N=>{if(N in b.$state){const $=S.$state[N],I=b.$state[N];typeof $=="object"&&ce($)&&ce(I)?Rn($,I):S.$state[N]=I}Te(b,N,t.toRef(S.$state,N))}),Object.keys(b.$state).forEach(N=>{N in S.$state||Ye(b,N)}),u=!1,p=!1,r.state.value[e]=t.toRef(S._hmrPayload,"hotState"),p=!0,t.nextTick().then(()=>{u=!0});for(const N in S._hmrPayload.actions){const $=S[N];Te(b,N,_(N,$))}for(const N in S._hmrPayload.getters){const $=S._hmrPayload.getters[N],I=a?t.computed(()=>(Ne(r),$.call(b,b))):$;Te(b,N,I)}Object.keys(b._hmrPayload.getters).forEach(N=>{N in S._hmrPayload.getters||Ye(b,N)}),Object.keys(b._hmrPayload.actions).forEach(N=>{N in S._hmrPayload.actions||Ye(b,N)}),b._hmrPayload=S._hmrPayload,b._getters=S._getters,b._hotUpdating=!1})),ke){const S={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(N=>{Object.defineProperty(b,N,Y({value:b[N]},S))})}return r._p.forEach(S=>{if(ke){const N=l.run(()=>S({store:b,app:r._a,pinia:r,options:i}));Object.keys(N||{}).forEach($=>b._customProperties.add($)),Y(b,N)}else Y(b,l.run(()=>S({store:b,app:r._a,pinia:r,options:i})))}),process.env.NODE_ENV!=="production"&&b.$state&&typeof b.$state=="object"&&typeof b.$state.constructor=="function"&&!b.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${b.$id}".`),d&&a&&o.hydrate&&o.hydrate(b.$state,d),u=!0,p=!0,b}function je(e,n,o){let r,s;const a=typeof n=="function";if(typeof e=="string")r=e,s=a?o:n;else if(s=e,r=e.id,process.env.NODE_ENV!=="production"&&typeof r!="string")throw new Error('[🍍]: "defineStore()" must be passed a store id as its first argument.');function l(i,c){const u=t.hasInjectionContext();if(i=(process.env.NODE_ENV==="test"&&xe&&xe._testing?null:i)||(u?t.inject(En,null):null),i&&Ne(i),process.env.NODE_ENV!=="production"&&!xe)throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);i=xe,i._s.has(r)||(a?it(r,n,s,i):Lt(r,s,i),process.env.NODE_ENV!=="production"&&(l._pinia=i));const p=i._s.get(r);if(process.env.NODE_ENV!=="production"&&c){const m="__hot:"+r,h=a?it(m,n,s,i,!0):Lt(m,Y({},s),i,!0);c._hotUpdate(h),delete i.state.value[m],i._s.delete(m)}if(process.env.NODE_ENV!=="production"&&Fe){const m=t.getCurrentInstance();if(m&&m.proxy&&!c){const h=m.proxy,y="_pStores"in h?h._pStores:h._pStores={};y[r]=p}}return p}return l.$id=r,l}function On(e){{e=t.toRaw(e);const n={};for(const o in e){const r=e[o];(t.isRef(r)||t.isReactive(r))&&(n[o]=t.toRef(e,o))}return n}}function At(){return{id:"",src:""}}function q(){return()=>Promise.resolve([])}function gt(e){const n=(e==null?void 0:e.editorConfig)||{maxLength:5e3,placeholder:"请输入内容..."},o=(e==null?void 0:e.handleError)||(()=>{}),r=(e==null?void 0:e.pinyin)||{fetchData:q()},s=(e==null?void 0:e.english)||{fetchData:q()},a=(e==null?void 0:e.special)||{fetchData:q(),fetchScene:q(),fetchStyle:q()},l=(e==null?void 0:e.bgm)||{fetchData:q(),fetchScene:q(),fetchStyle:q()},i=(e==null?void 0:e.tryPlay)||{play:()=>Promise,fetchData:q(),featchTag:q(),fetchStar:q()},c=(e==null?void 0:e.conversion)||{timeoutMilliseconds:2e4,audioUpload:()=>At(),transfer:()=>At(),fetchSpeaker:q()},u=a,p=l,m=i;return u.menus??(u.menus=[{label:"默认音效",value:""},{label:"自定义音效",value:"custom"},{label:"最近音效",value:"history"}]),p.menus??(p.menus=[{label:"默认配乐",value:""},{label:"自定义配乐",value:"custom"},{label:"最近配乐",value:"history"}]),m.gender??(m.gender=[{label:"全部",value:""},{label:"男声",value:"Male"},{label:"女声",value:"Female"}]),m.topFlag??(m.topFlag=[{label:"热榜",value:""},{label:"SVIP",value:"SVIP"},{label:"付费",value:"付费"}]),m.category??(m.category=[{label:"常用",value:"常用"},{label:"已购",value:"已购"},{label:"收藏",value:"收藏"},{label:"我的",value:"我的"}]),{editorConfig:n,handleError:o,pinyin:r,english:s,bgm:p,special:u,tryPlay:m,conversion:c}}const Bn=()=>({0:"0",.1:"0.1",.2:"0.2",.3:"0.3",.4:"0.4",.5:"0.5",.6:"0.6",.7:"0.7",.8:"0.8",.9:"0.9",1:"1.0",1.1:"1.1",1.2:"1.2",1.4:"1.4",1.5:"1.5",1.75:"1.75",2:"2.0"}),Pn=()=>({0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10","-1":"-1","-2":"-2","-3":"-3","-4":"-4","-5":"-5","-6":"-6","-7":"-7","-8":"-8","-9":"-9","-10":"-10"}),be=()=>"https://img.sdaxia.top/upload/4314c841777e4d20901cd5d04a28e91a.png",H=je("--editor-config",()=>{const e=t.shallowRef(),n=t.shallowRef(),o=t.computed(()=>e.value),r=t.computed(()=>{if(n.value)return n.value;throw Error("请设置GlobalEditorConfig")});return{editor:o,globalEditConfig:r,setEditor:l=>{e.value=l},setGlobalEditConfig:l=>{n.value=l??gt()}}}),er=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-audio"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-audio"?!v.SlateNode.string(s):o(s),r};function Ft(e,n,o,r,s){const a=n===void 0?void 0:n.key;return{sel:e,data:n,children:o,text:r,elm:s,key:a}}const jt=Array.isArray;function Xe(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function In(e,n,o){if(e.ns="http://www.w3.org/2000/svg",o!=="foreignObject"&&n!==void 0)for(let r=0;r<n.length;++r){const s=n[r];if(typeof s=="string")continue;const a=s.data;a!==void 0&&In(a,s.children,s.sel)}}function x(e,n,o){let r={},s,a,l;if(o!==void 0?(n!==null&&(r=n),jt(o)?s=o:Xe(o)?a=o.toString():o&&o.sel&&(s=[o])):n!=null&&(jt(n)?s=n:Xe(n)?a=n.toString():n&&n.sel?s=[n]:r=n),s!==void 0)for(l=0;l<s.length;++l)Xe(s[l])&&(s[l]=Ft(void 0,void 0,void 0,s[l],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&In(r,s,e),Ft(e,r,s,a,void 0)}var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mn="Expected a function",Ht=0/0,tr="[object Symbol]",nr=/^\s+|\s+$/g,or=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,sr=/^0o[0-7]+$/i,ar=parseInt,lr=typeof ye=="object"&&ye&&ye.Object===Object&&ye,ir=typeof self=="object"&&self&&self.Object===Object&&self,cr=lr||ir||Function("return this")(),ur=Object.prototype,dr=ur.toString,fr=Math.max,pr=Math.min,Ke=function(){return cr.Date.now()};function mr(e,n,o){var r,s,a,l,i,c,u=0,p=!1,m=!1,h=!0;if(typeof e!="function")throw new TypeError(Mn);n=Ut(n)||0,Le(o)&&(p=!!o.leading,m="maxWait"in o,a=m?fr(Ut(o.maxWait)||0,n):a,h="trailing"in o?!!o.trailing:h);function y(C){var b=r,R=s;return r=s=void 0,u=C,l=e.apply(R,b),l}function d(C){return u=C,i=setTimeout(E,n),p?y(C):l}function f(C){var b=C-c,R=C-u,B=n-b;return m?pr(B,a-R):B}function w(C){var b=C-c,R=C-u;return c===void 0||b>=n||b<0||m&&R>=a}function E(){var C=Ke();if(w(C))return k(C);i=setTimeout(E,f(C))}function k(C){return i=void 0,h&&r?y(C):(r=s=void 0,l)}function g(){i!==void 0&&clearTimeout(i),u=0,r=c=s=i=void 0}function _(){return i===void 0?l:k(Ke())}function V(){var C=Ke(),b=w(C);if(r=arguments,s=this,c=C,b){if(i===void 0)return d(c);if(m)return i=setTimeout(E,n),y(c)}return i===void 0&&(i=setTimeout(E,n)),l}return V.cancel=g,V.flush=_,V}function hr(e,n,o){var r=!0,s=!0;if(typeof e!="function")throw new TypeError(Mn);return Le(o)&&(r="leading"in o?!!o.leading:r,s="trailing"in o?!!o.trailing:s),mr(e,n,{leading:r,maxWait:n,trailing:s})}function Le(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function vr(e){return!!e&&typeof e=="object"}function yr(e){return typeof e=="symbol"||vr(e)&&dr.call(e)==tr}function Ut(e){if(typeof e=="number")return e;if(yr(e))return Ht;if(Le(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Le(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(nr,"");var o=rr.test(e);return o||sr.test(e)?ar(e.slice(2),o?2:8):or.test(e)?Ht:+e}var gr=hr;const j=bt(gr);function zt(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function _t(e,n){e===void 0&&(e={}),n===void 0&&(n={}),Object.keys(n).forEach(function(o){typeof e[o]>"u"?e[o]=n[o]:zt(n[o])&&zt(e[o])&&Object.keys(n[o]).length>0&&_t(e[o],n[o])})}var Ln={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function wt(){var e=typeof document<"u"?document:{};return _t(e,Ln),e}var br={document:Ln,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){typeof setTimeout>"u"||clearTimeout(e)}};function An(){var e=typeof window<"u"?window:{};return _t(e,br),e}function _r(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ct(e)}function Ae(e,n){return Ae=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Ae(e,n)}function wr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Be(e,n,o){return wr()?Be=Reflect.construct:Be=function(s,a,l){var i=[null];i.push.apply(i,a);var c=Function.bind.apply(s,i),u=new c;return l&&Ae(u,l.prototype),u},Be.apply(null,arguments)}function Er(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function ut(e){var n=typeof Map=="function"?new Map:void 0;return ut=function(r){if(r===null||!Er(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(r))return n.get(r);n.set(r,s)}function s(){return Be(r,arguments,ct(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Ae(s,r)},ut(e)}function xr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kr(e){var n=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return n},set:function(r){n.__proto__=r}})}var le=function(e){_r(n,e);function n(o){var r;return r=e.call.apply(e,[this].concat(o))||this,kr(xr(r)),r}return n}(ut(Array));function Et(e){e===void 0&&(e=[]);var n=[];return e.forEach(function(o){Array.isArray(o)?n.push.apply(n,Et(o)):n.push(o)}),n}function Sr(e){for(var n=[],o=0;o<e.length;o+=1)n.indexOf(e[o])===-1&&n.push(e[o]);return n}function Nr(e){return e.toLowerCase().replace(/-(.)/g,function(n,o){return o.toUpperCase()})}function Vr(e,n){if(typeof e!="string")return[e];for(var o=[],r=n.querySelectorAll(e),s=0;s<r.length;s+=1)o.push(r[s]);return o}function O(e,n){var o=An(),r=wt(),s=[];if(!n&&e instanceof le)return e;if(!e)return new le(s);if(typeof e=="string"){var a=e.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var l="div";a.indexOf("<li")===0&&(l="ul"),a.indexOf("<tr")===0&&(l="tbody"),(a.indexOf("<td")===0||a.indexOf("<th")===0)&&(l="tr"),a.indexOf("<tbody")===0&&(l="table"),a.indexOf("<option")===0&&(l="select");var i=r.createElement(l);i.innerHTML=a;for(var c=0;c<i.childNodes.length;c+=1)s.push(i.childNodes[c])}else s=Vr(e.trim(),n||r)}else if(e.nodeType||e===o||e===r)s.push(e);else if(Array.isArray(e)){if(e instanceof le)return e;s=e}return new le(Sr(s))}O.fn=le.prototype;function Wt(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=Et(n.map(function(s){return s.split(" ")}));return this.forEach(function(s){var a;(a=s.classList).add.apply(a,r)}),this}function Gt(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=Et(n.map(function(s){return s.split(" ")}));return this.forEach(function(s){var a;(a=s.classList).remove.apply(a,r)}),this}function qt(e,n){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(var o=0;o<this.length;o+=1)if(arguments.length===2)this[o].setAttribute(e,n);else for(var r in e)this[o][r]=e[r],this[o].setAttribute(r,e[r]);return this}function Yt(){var e=this[0];if(e){var n={};if(e.dataset)for(var o in e.dataset)n[o]=e.dataset[o];else for(var r=0;r<e.attributes.length;r+=1){var s=e.attributes[r];s.name.indexOf("data-")>=0&&(n[Nr(s.name.split("data-")[1])]=s.value)}for(var a in n)n[a]==="false"?n[a]=!1:n[a]==="true"?n[a]=!0:parseFloat(n[a])===n[a]*1&&(n[a]*=1);return n}}function Xt(e){if(typeof e>"u"){var n=this[0];if(!n)return;if(n.multiple&&n.nodeName.toLowerCase()==="select"){for(var o=[],r=0;r<n.selectedOptions.length;r+=1)o.push(n.selectedOptions[r].value);return o}return n.value}for(var s=0;s<this.length;s+=1){var a=this[s];if(Array.isArray(e)&&a.multiple&&a.nodeName.toLowerCase()==="select")for(var l=0;l<a.options.length;l+=1)a.options[l].selected=e.indexOf(a.options[l].value)>=0;else a.value=e}return this}function Kt(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=n[0],s=n[1],a=n[2],l=n[3];typeof n[1]=="function"&&(r=n[0],a=n[1],l=n[2],s=void 0),l||(l=!1);function i(f){var w=f.target;if(w){var E=f.target.dom7EventData||[];if(E.indexOf(f)<0&&E.unshift(f),O(w).is(s))a.apply(w,E);else for(var k=O(w).parents(),g=0;g<k.length;g+=1)O(k[g]).is(s)&&a.apply(k[g],E)}}function c(f){var w=f&&f.target?f.target.dom7EventData||[]:[];w.indexOf(f)<0&&w.unshift(f),a.apply(this,w)}for(var u=r.split(" "),p,m=0;m<this.length;m+=1){var h=this[m];if(s)for(p=0;p<u.length;p+=1){var d=u[p];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[d]||(h.dom7LiveListeners[d]=[]),h.dom7LiveListeners[d].push({listener:a,proxyListener:i}),h.addEventListener(d,i,l)}else for(p=0;p<u.length;p+=1){var y=u[p];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[y]||(h.dom7Listeners[y]=[]),h.dom7Listeners[y].push({listener:a,proxyListener:c}),h.addEventListener(y,c,l)}}return this}function Jt(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=n[0],s=n[1],a=n[2],l=n[3];typeof n[1]=="function"&&(r=n[0],a=n[1],l=n[2],s=void 0),l||(l=!1);for(var i=r.split(" "),c=0;c<i.length;c+=1)for(var u=i[c],p=0;p<this.length;p+=1){var m=this[p],h=void 0;if(!s&&m.dom7Listeners?h=m.dom7Listeners[u]:s&&m.dom7LiveListeners&&(h=m.dom7LiveListeners[u]),h&&h.length)for(var y=h.length-1;y>=0;y-=1){var d=h[y];a&&d.listener===a||a&&d.listener&&d.listener.dom7proxy&&d.listener.dom7proxy===a?(m.removeEventListener(u,d.proxyListener,l),h.splice(y,1)):a||(m.removeEventListener(u,d.proxyListener,l),h.splice(y,1))}}return this}function Qt(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function Zt(e){return e?(this.forEach(function(n,o){e.apply(n,[n,o])}),this):this}function en(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(var n=0;n<this.length;n+=1)this[n].innerHTML=e;return this}function tn(e){var n=An(),o=wt(),r=this[0],s,a;if(!r||typeof e>"u")return!1;if(typeof e=="string"){if(r.matches)return r.matches(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);for(s=O(e),a=0;a<s.length;a+=1)if(s[a]===r)return!0;return!1}if(e===o)return r===o;if(e===n)return r===n;if(e.nodeType||e instanceof le){for(s=e.nodeType?[e]:e,a=0;a<s.length;a+=1)if(s[a]===r)return!0;return!1}return!1}function nn(){for(var e,n=wt(),o=0;o<arguments.length;o+=1){e=o<0||arguments.length<=o?void 0:arguments[o];for(var r=0;r<this.length;r+=1)if(typeof e=="string"){var s=n.createElement("div");for(s.innerHTML=e;s.firstChild;)this[r].appendChild(s.firstChild)}else if(e instanceof le)for(var a=0;a<e.length;a+=1)this[r].appendChild(e[a]);else this[r].appendChild(e)}return this}function on(e){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].parentNode;r;)e?O(r).is(e)&&n.push(r):n.push(r),r=r.parentNode;return O(n)}function rn(e){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].querySelectorAll(e),s=0;s<r.length;s+=1)n.push(r[s]);return O(n)}function sn(e){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].children,s=0;s<r.length;s+=1)(!e||O(r[s]).is(e))&&n.push(r[s]);return O(n)}var Cr="resize scroll".split(" ");function Fn(e){function n(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];if(typeof r[0]>"u"){for(var a=0;a<this.length;a+=1)Cr.indexOf(e)<0&&(e in this[a]?this[a][e]():O(this[a]).trigger(e));return this}return this.on.apply(this,[e].concat(r))}return n}var an=Fn("click"),ln=Fn("focus");Qt&&(O.fn.hide=Qt);nn&&(O.fn.append=nn);an&&(O.fn.click=an);Kt&&(O.fn.on=Kt);Jt&&(O.fn.off=Jt);ln&&(O.fn.focus=ln);qt&&(O.fn.attr=qt);Xt&&(O.fn.val=Xt);en&&(O.fn.html=en);Yt&&(O.fn.dataset=Yt);Wt&&(O.fn.addClass=Wt);Gt&&(O.fn.removeClass=Gt);sn&&(O.fn.children=sn);Zt&&(O.fn.each=Zt);rn&&(O.fn.find=rn);tn&&(O.fn.is=tn);on&&(O.fn.parents=on);const $r=globalThis.Node,Tr=globalThis.Comment,Rr=globalThis.Element,Dr=globalThis.Text,Or=globalThis.Range,Br=globalThis.Selection,Pr=globalThis.StaticRange;let Ir=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,o)=>(o&=63,o<36?n+=o.toString(36):o<62?n+=(o-26).toString(36).toUpperCase():o>62?n+="-":n+="_",n),"");function Mr(e="r"){return`${e}-${Ir()}`}let jn=class{constructor(){M(this,"audio");M(this,"src");this.audio=null,this.src=null}removeAudioElement(){this.audio&&(document.body.removeChild(this.audio),this.audio=null,this.src=null)}play(n){this.stop(),this.audio=document.createElement("audio"),this.audio.hidden=!0,this.audio.volume=.5,this.audio.src=n,this.src=n,document.body.appendChild(this.audio),this.audio.play()}stop(n){n&&n!==this.src||this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.removeAudioElement())}};const ue=new jn;function dt(e){const n=Math.floor(e/60),o=e%60,r=String(n).padStart(2,"0"),s=String(o).padStart(2,"0");return`${r}:${s}`}class Hn{constructor(n){M(this,"accept");M(this,"dom");M(this,"isdestroy",!1);M(this,"resolve");M(this,"reject");this.accept=n,this.dom=null,this.resolve=null,this.reject=null}createInputElement(){const n=document.createElement("input");return n.type="file",n.accept=this.accept,n.hidden=!0,n}change(n){var o,r;if(this.dom&&this.dom.files&&this.dom.files.length>0){const s=this.dom.files.item(0);if(s){(o=this.resolve)==null||o.call(this,s),this.dom.value="";return}this.dom.value=""}return(r=this.reject)==null?void 0:r.call(this,n)}cancel(n){var o;return this.dom&&(this.dom.value=""),(o=this.reject)==null?void 0:o.call(this,n)}open(){if(this.isdestroy)throw Error("对象已经销毁");this.dom||(this.dom=this.createInputElement(),this.dom.addEventListener("change",this.change.bind(this)),this.dom.addEventListener("cancel",this.cancel.bind(this)),document.body.appendChild(this.dom)),this.dom.click();const n=this;return new Promise((o,r)=>{n.resolve=o,n.reject=r})}destroy(){this.isdestroy||(this.dom&&document.body.removeChild(this.dom),this.dom=null,this.isdestroy=!0)}}class ft{constructor(n){M(this,"cancelled",!1);M(this,"timeoutId",null);this.timeoutMilliseconds=n}get token(){return{isCancellationRequested:()=>this.cancelled,throwIfRequested:()=>{if(this.cancelled)throw new Error("Operation canceled")}}}cancel(){this.cancelled=!0,this.clearTimeout()}clearTimeout(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}startTimeout(){this.timeoutId=setTimeout(()=>{this.cancel()},this.timeoutMilliseconds)}}class Un{constructor(n=60){M(this,"isStop",!1);M(this,"count",t.ref(0));M(this,"timeoutId",null);this.timeoutSeconds=n}clearTimeout(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}get state(){return t.computed(()=>this.count.value)}start(n){n&&(this.timeoutSeconds=n),this.isStop=!1,this.count.value=0,this.clearTimeout(),this.timeoutId=setInterval(()=>{!this.isStop&&this.count.value<this.timeoutSeconds?this.count.value++:this.clearTimeout()},1e3)}stop(){this.isStop=!0,this.clearTimeout()}}function Lr(e){const{selection:n}=e;if(n){const[o,r]=v.SlateRange.edges(n),s=v.SlateEditor.range(e,o,r),a=v.SlateEditor.string(e,s),l=a.trimEnd();if(l!==a){const i=a.length-l.length,c={...r,offset:r.offset-i},u={...n,anchor:o,focus:c};v.SlateTransforms.select(e,u)}}}function cn(e,n){v.SlateEditor.withoutNormalizing(e,()=>{const o=v.SlateEditor.start(e,n),r=v.SlateEditor.end(e,n);v.SlateTransforms.insertText(e," ",{at:o}),v.SlateTransforms.insertText(e," ",{at:{path:r.path,offset:r.offset+1}}),v.SlateTransforms.select(e,{anchor:{path:o.path,offset:o.offset+1},focus:{path:r.path,offset:r.offset+1}})})}function _e(e,n){v.SlateEditor.withoutNormalizing(e,()=>{const o=v.SlateEditor.before(e,n),r=v.SlateEditor.after(e,n);if(!o||!r)return;const s={anchor:{path:o.path,offset:o.offset-1},focus:{path:o.path,offset:o.offset}},a={anchor:{path:r.path,offset:r.offset},focus:{path:r.path,offset:r.offset+1}};v.SlateEditor.string(e,s)===" "&&v.SlateTransforms.delete(e,{at:s}),v.SlateEditor.string(e,a)===" "&&v.SlateTransforms.delete(e,{at:a})})}const Ar={type:"ssml-audio",renderElem:(e,n,o)=>n?Fr(e,n,o):jr(e,o)};function Fr(e,n,o){const{remark:r,src:s}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-audio)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(a=>{a.preventDefault(),ue.stop(s);const l=v.DomEditor.findPath(o,e);_e(o,l),v.SlateTransforms.unwrapNodes(o,{at:l})})}}),x("span.iconfont.icon-play",{on:{click:j(a=>{a.preventDefault(),ue.play(s)})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-audio)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-audio)"}})])}function jr(e,n){const{remark:o,src:r}=e;return x("span.ssml-wrapper",{props:{contentEditable:!1}},[x("span.remark",{style:{backgroundColor:"var(--ssml-audio)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault(),ue.stop(r);const a=v.DomEditor.findPath(n,e);v.SlateTransforms.delete(n,{at:a})})}}),x("span.iconfont.icon-play",{on:{click:j(s=>{s.preventDefault(),ue.play(r)})}}),x("span.data-content",{attrs:{"data-content":o}})]),x("span.iconfont.icon-music",{style:{color:"var(--ssml-audio)"}})])}const Hr={type:"ssml-audio",elemToHtml:(e,n)=>{const{remark:o,src:r}=e;return`<span
          data-w-e-type="ssml-audio"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-src="${r}"
          data-ow-remark="${o}"
        >${n}</span>`}},Ur={selector:'span[data-w-e-type="ssml-audio"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-src")||"",r=e.getAttribute("data-ow-remark")||"";return{type:"ssml-audio",src:o,remark:r,children:n}}},zr={editorPlugin:er,renderElems:[Ar],elemsToHtml:[Hr],parseElemsHtml:[Ur]},Wr=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-break"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-break"?!0:o(s),r},Gr={type:"ssml-break",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",{props:{contentEditable:!1}},[x("span.remark",{style:{backgroundColor:"var(--ssml-break)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);v.SlateTransforms.delete(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.iconfont.icon-tingdun",{style:{color:"var(--ssml-break)"}})])}},qr={type:"ssml-break",elemToHtml:e=>{const{remark:n,time:o,strength:r}=e;return`<span
          data-w-e-type="ssml-break"
          data-w-e-is-void
          data-w-e-is-inline
          data-ow-remark="${n}"
          data-ow-time="${o??""}"
          data-ow-strength="${r??"medium"}"
        ></span>`}},Yr={selector:'span[data-w-e-type="ssml-break"]',parseElemHtml:e=>{const n=e.getAttribute("data-ow-remark")||"",o=e.getAttribute("data-ow-time")||"",r=e.getAttribute("data-ow-strength")||"";return{type:"ssml-break",remark:n,time:o,strength:r,children:[{text:""}]}}},Xr={editorPlugin:Wr,renderElems:[Gr],elemsToHtml:[qr],parseElemsHtml:[Yr]},Kr=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-emphasis"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-emphasis"?!1:o(s),r},Jr={type:"ssml-emphasis",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-emphasis)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-emphasis)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-emphasis)"}})])}},Qr={type:"ssml-emphasis",elemToHtml:(e,n)=>{const{remark:o,level:r}=e;return`<span
          data-w-e-type="ssml-emphasis"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-level="${r??"none"}"
        >${n}</span>`}},Zr={selector:'span[data-w-e-type="ssml-emphasis"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-level")||"";return{type:"ssml-emphasis",remark:o,level:r,children:n}}},es={editorPlugin:Kr,renderElems:[Jr],elemsToHtml:[Qr],parseElemsHtml:[Zr]},ts=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-mstts:express-as"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-mstts:express-as"?!1:o(s),r},ns={type:"ssml-mstts:express-as",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-mstts--express-as)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-mstts--express-as)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-mstts--express-as)"}})])}},os={type:"ssml-mstts:express-as",elemToHtml:(e,n)=>{const{remark:o,style:r,role:s,styledegree:a}=e;return`<span
          data-w-e-type="ssml-mstts:express-as"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-style="${r}"
          data-ow-styledegree="${a??""}"
          data-ow-role="${s??""}"
        >${n}</span>`}},rs={selector:'span[data-w-e-type="ssml-mstts:express-as"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-style")||"",s=e.getAttribute("data-ow-styledegree")||"",a=e.getAttribute("data-ow-role")||"";return{type:"ssml-mstts:express-as",style:r,remark:o,styledegree:s,role:a,children:n}}},ss={editorPlugin:ts,renderElems:[ns],elemsToHtml:[os],parseElemsHtml:[rs]},as=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-p"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-p"?!1:o(s),r},ls={type:"ssml-p",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-p)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-p)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-p)"}})])}},is={type:"ssml-p",elemToHtml:(e,n)=>{const{remark:o}=e;return`<span
          data-w-e-type="ssml-p"
          data-w-e-is-inline
          data-ow-remark="${o}"
        >${n}</span>`}},cs={selector:'span[data-w-e-type="ssml-p"]',parseElemHtml:(e,n)=>({type:"ssml-p",remark:e.getAttribute("data-ow-remark")||"",children:n})},us={editorPlugin:as,renderElems:[ls],elemsToHtml:[is],parseElemsHtml:[cs]},ds=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-phoneme"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-phoneme"?!1:o(s),r},fs={type:"ssml-phoneme",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-phoneme)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);_e(o,a),v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-phoneme)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-phoneme)"}})])}},ps={type:"ssml-phoneme",elemToHtml:(e,n)=>{const{remark:o,alphabet:r,ph:s}=e;return`<span
          data-w-e-type="ssml-phoneme"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-alphabet="${r??""}"
          data-ow-ph="${s}"
        >${n}</span>`}},ms={selector:'span[data-w-e-type="ssml-phoneme"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-alphabet")||"",s=e.getAttribute("data-ow-ph")||"";return{type:"ssml-phoneme",remark:o,alphabet:r,ph:s,children:n}}},hs={editorPlugin:ds,renderElems:[fs],elemsToHtml:[ps],parseElemsHtml:[ms]},vs=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-prosody"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-prosody"?!1:o(s),r},ys={type:"ssml-prosody",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-prosody)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);_e(o,a),v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-prosody)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-prosody)"}})])}},gs={type:"ssml-prosody",elemToHtml:(e,n)=>{const{remark:o,contour:r,pitch:s,range:a,rate:l,volume:i}=e;return`<span
          data-w-e-type="ssml-prosody"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-contour="${r??""}"
          data-ow-pitch="${s??""}"
          data-ow-range="${a??""}"
          data-ow-rate="${l??""}"
          data-ow-volume="${i??""}"
        >${n}</span>`}},bs={selector:'span[data-w-e-type="ssml-prosody"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-contour")||"",s=e.getAttribute("data-ow-pitch ")||"",a=e.getAttribute("data-ow-range")||"",l=e.getAttribute("data-ow-rate")||void 0,i=e.getAttribute("data-ow-volume")||"";return{type:"ssml-prosody",remark:o,contour:r,pitch:s,range:a,rate:l,volume:i,children:n}}},_s={editorPlugin:vs,renderElems:[ys],elemsToHtml:[gs],parseElemsHtml:[bs]},ws=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-s"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-s"?!1:o(s),r},Es={type:"ssml-s",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-s)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-s)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-s)"}})])}},xs={type:"ssml-s",elemToHtml:(e,n)=>{const{remark:o}=e;return`<span
          data-w-e-type="ssml-s"
          data-w-e-is-inline
          data-ow-remark="${o}"
        >${n}</span>`}},ks={selector:'span[data-w-e-type="ssml-s"]',parseElemHtml:(e,n)=>({type:"ssml-s",remark:e.getAttribute("data-ow-remark")||"",children:n})},Ss={editorPlugin:ws,renderElems:[Es],elemsToHtml:[xs],parseElemsHtml:[ks]},Ns=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-say-as"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-say-as"?!1:o(s),r},Vs={type:"ssml-say-as",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-say-as)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);_e(o,a),v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-say-as)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-say-as)"}})])}},Cs={type:"ssml-say-as",elemToHtml:(e,n)=>{const{remark:o,interpretAs:r,detail:s,format:a}=e;return`<span
          data-w-e-type="ssml-say-as"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-interpretAs="${r}"
          data-ow-detail="${s??""}"
          data-ow-format="${a??""}"
        >${n}</span>`}},$s={selector:'span[data-w-e-type="ssml-say-as"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-interpretAs")||"",s=e.getAttribute("data-ow-format")||"",a=e.getAttribute("data-ow-detail")||"";return{type:"ssml-say-as",remark:o,interpretAs:r,detail:a,format:s,children:n}}},Ts={editorPlugin:Ns,renderElems:[Vs],elemsToHtml:[Cs],parseElemsHtml:[$s]},Rs=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-sub"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-sub"?!1:o(s),r},Ds={type:"ssml-sub",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-sub)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);_e(o,a),v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-sub)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-sub)"}})])}},Os={type:"ssml-sub",elemToHtml:(e,n)=>{const{remark:o,alias:r}=e;return`<span
          data-w-e-type="ssml-sub"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-alias="${r}"
        >${n}</span>`}},Bs={selector:'span[data-w-e-type="ssml-sub"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-alias")||"";return{type:"ssml-sub",remark:o,alias:r,children:n}}},Ps={editorPlugin:Rs,renderElems:[Ds],elemsToHtml:[Os],parseElemsHtml:[Bs]},Is=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="ssml-voice"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="ssml-voice"?!1:o(s),r},Ms={type:"ssml-voice",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--ssml-voice)"}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{"},style:{color:"var(--ssml-voice)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}"},style:{color:"var(--ssml-voice)"}})])}},Ls={type:"ssml-voice",elemToHtml:(e,n)=>{const{remark:o,name:r,effect:s}=e;return`<span
          data-w-e-type="ssml-voice"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-name="${r}"
          data-ow-effect="${s??""}"
        >${n}</span>`}},As={selector:'span[data-w-e-type="ssml-voice"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-name")||"",s=e.getAttribute("data-ow-effect")||"";return{type:"ssml-voice",remark:o,name:r,effect:s,children:n}}},Fs={editorPlugin:Is,renderElems:[Ms],elemsToHtml:[Ls],parseElemsHtml:[As]},js=e=>{const{isInline:n,isVoid:o}=e,r=e;return r.isInline=s=>v.DomEditor.getNodeType(s)==="custom-management"?!0:n(s),r.isVoid=s=>v.DomEditor.getNodeType(s)==="custom-management"?!1:o(s),r},Hs="wangeditor-error",Us="ssml-element-click",P={ERROR:Hs,SSML_ELEMENT_CLICK:Us},zs="emitter-error",Ws="emitter-view-click",Gs="emitter-view-keydown",qs="emitter-editor-created",G={ERROR:zs,VIEW_CLICK:Ws,VIEW_KEYDOWN:Gs,EDITOR_CREATED:qs},Ys={type:"custom-management",renderElem:(e,n,o)=>{const{remark:r}=e;return x("span.ssml-wrapper",[x("span.remark",{props:{contentEditable:!1},style:{backgroundColor:"var(--custom-management)"},on:{mousedown:s=>s.preventDefault(),click:j(s=>{s.preventDefault(),o.select(v.DomEditor.findPath(o,e)),o.emit(P.SSML_ELEMENT_CLICK,o,e)})}},[x("span.iconfont.icon-roundclosefill",{on:{click:j(s=>{s.preventDefault();const a=v.DomEditor.findPath(o,e);_e(o,a),v.SlateTransforms.unwrapNodes(o,{at:a})})}}),x("span.data-content",{attrs:{"data-content":r}})]),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"{{"},style:{color:"var(--custom-management)"}}),x("span",n),x("span.data-content",{props:{contentEditable:!1},attrs:{"data-content":"}}"},style:{color:"var(--custom-management)"}})])}},Xs={type:"custom-management",elemToHtml:(e,n)=>{const{remark:o,style:r,role:s,name:a,pitch:l,rate:i,custom:c}=e;return`<span
          data-w-e-type="custom-management"
          data-w-e-is-inline
          data-ow-remark="${o}"
          data-ow-style="${r}"
          data-ow-name="${a}"
          data-ow-role="${s}"
          data-ow-pitch="${l}"
          data-ow-rate="${i}"
          data-ow-custom="${JSON.stringify(c)}"
        >${n}</span>`}},Ks={selector:'span[data-w-e-type="custom-management"]',parseElemHtml:(e,n)=>{const o=e.getAttribute("data-ow-remark")||"",r=e.getAttribute("data-ow-name")||"",s=e.getAttribute("data-ow-role")||"",a=e.getAttribute("data-ow-style")||"",l=e.getAttribute("data-ow-pitch")||"",i=e.getAttribute("data-ow-rate")||"",c=e.getAttribute("data-ow-custom")||"{}";return{type:"custom-management",remark:o,name:r,role:s,style:a,pitch:l,rate:i,custom:JSON.parse(c),children:n}}},Js={editorPlugin:js,renderElems:[Ys],elemsToHtml:[Xs],parseElemsHtml:[Ks]},Qs=e=>{const{deleteBackward:n,deleteForward:o,insertBreak:r,apply:s,normalizeNode:a,insertText:l,insertData:i,setFragmentData:c,insertNode:u}=e,p=e;p.deleteBackward=h=>{n(h)},p.deleteForward=h=>{o(h)},p.insertBreak=()=>{r()},p.normalizeNode=h=>{a(h)},p.apply=h=>{s(h)},p.insertData=h=>{if(h.types.includes("application/x-slate-fragment"))return i(h);{const y=new DataTransfer;return y.setData("text/plain",h.getData("text/plain").trim()),i(y)}},p.setFragmentData=h=>{c(h);const y=h.getData("text/plain").replaceAll(/[\s]/gi,"");h.setData("text/plain",y)},p.insertText=h=>{l(h)};const m=["ssml-prosody","ssml-sub","custom-management","ssml-phoneme","ssml-say-as"];return p.insertNode=h=>{const y=v.DomEditor.getNodeType(h);return m.includes(y)||y==="ssml-audio"&&v.SlateNode.string(h)?(e.selection&&cn(e,e.selection),v.SlateTransforms.insertNodes(e,h)):v.SlateEditor.isVoid(e,h)?(u(h),e.move(1)):u(h)},p};const Zs={install(){v.Boot.registerModule(zr),v.Boot.registerModule(Xr),v.Boot.registerModule(es),v.Boot.registerModule(ss),v.Boot.registerModule(us),v.Boot.registerModule(hs),v.Boot.registerModule(_s),v.Boot.registerModule(Ss),v.Boot.registerModule(Ts),v.Boot.registerModule(Ps),v.Boot.registerModule(Fs),v.Boot.registerModule(Js),v.Boot.registerPlugin(Qs)}},de=je("--editor-ssml",()=>{const e=t.shallowReactive({type:"ssml-speak",version:"1.0",xmlLang:"zh-CN",xmlns:"http://www.w3.org/2001/10/synthesis","xmlns:mstts":"http://www.w3.org/2001/mstts","xmlns:emo":"http://www.w3.org/2009/10/emotionml",remark:"",children:[]}),n=t.shallowReactive({name:"zh-CN-XiaomoNeural",type:"ssml-voice",remark:"Xiaomo-晓墨",effect:"",children:[]}),o=t.shallowReactive({type:"ssml-mstts:backgroundaudio",src:"",remark:"",children:[]}),r=t.shallowReactive({type:"ssml-mstts:express-as",style:"",role:"",remark:"",children:[]}),s=t.shallowReactive({type:"ssml-prosody",remark:"",children:[]});return{rootSpeak:e,rootVoice:n,rootBackgroundaudio:o,rootExpressAs:r,rootProsody:s}});function ea(){return{label:"",value:""}}function zn(){return{id:"",category:"",avatar:"",isFree:!1,isStar:!1,isSupper24K:!1,roles:[],styles:[],name:"",displayName:""}}function He(){return{word:"",topFlag:"",category:"",gender:"",tag:""}}class Wn{constructor(){M(this,"audio");M(this,"isPlaying",t.ref(!1));M(this,"isLoading",t.ref(!1));M(this,"loadResolve");M(this,"loadReject");this.audio=new Audio,this.audio.addEventListener("canplaythrough",()=>{var n;this.isLoading.value=!1,(n=this.loadResolve)==null||n.call(this)}),this.audio.addEventListener("play",()=>{this.isPlaying.value=!0}),this.audio.addEventListener("pause",()=>{this.isPlaying.value=!1}),this.audio.addEventListener("error",()=>{var n;this.isLoading.value=!1,this.isPlaying.value=!1,(n=this.loadReject)==null||n.call(this)})}load(n){return this.pause(),this.isPlaying.value=!1,this.isLoading.value=!0,this.audio.src=n,this.audio.load(),new Promise((o,r)=>{this.loadResolve=o,this.loadReject=r})}play(){this.audio.play()}pause(){this.audio.pause()}togglePlayPause(){this.isPlaying.value?this.pause():this.play()}get playState(){return t.computed(()=>this.isPlaying.value?"playing":"paused")}get loadState(){return t.computed(()=>this.isLoading.value?"loading":"complete")}}const Ue=je("--editor-try-play",()=>{const e=de(),n=t.shallowRef(new Wn),o=t.ref(zn()),r=t.computed(()=>o.value),s=t.computed(()=>n.value);return{speaker:r,setSpeaker:l=>{o.value=l,e.rootVoice.name=l.name},audioPlayer:s}}),ta=()=>[{value:"0.5",label:"0.5x"},{value:"0.6",label:"0.6x"},{value:"0.7",label:"0.7x"},{value:"0.8",label:"0.8x"},{value:"0.9",label:"0.9x"},{value:"1.0",label:"1.0x"},{value:"1.1",label:"1.1x"},{value:"1.2",label:"1.2x"},{value:"1.4",label:"1.4x"},{value:"1.5",label:"1.5x"},{value:"1.75",label:"1.75x"},{value:"2.0",label:"2.0x"}],na=()=>[{value:"-10",label:"-10"},{value:"-9",label:"-9"},{value:"-8",label:"-8"},{value:"-7",label:"-7"},{value:"-6",label:"-6"},{value:"-5",label:"-5"},{value:"-4",label:"-4"},{value:"-3",label:"-3"},{value:"-2",label:"-2"},{value:"-1",label:"-1"},{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"}];function oa(e){return`${(.05*e*100).toFixed(0)}%`}function ra(e){return`${((e-1)*100).toFixed(0)}%`}function sa(){return{category:"",name:"",role:"",style:"",speed:"1.0",pitch:"0"}}const Gn=je("--editor-management-menu",()=>({contentData:t.reactive(sa())})),aa={class:"bar-button-icon"},la={class:"fw-normal",style:{"font-size":"0.85rem"}},ia=t.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const o=e,r=()=>{if(!o.disabled){const{editor:s}=H();s&&n("click",s)}};return(s,a)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["bar-button px-2 py-1",{disabled:s.disabled}]),onClick:r,onMousedown:a[0]||(a[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",aa,[t.createElementVNode("span",{class:t.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${s.icon}`]])},null,2)]),t.createElementVNode("div",la,t.toDisplayString(s.text),1)],34))}});const W=(e,n)=>{const o=e.__vccOpts||e;for(const[r,s]of n)o[r]=s;return o},U=W(ia,[["__scopeId","data-v-2da9a7ca"]]);const xt=t.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(e,{expose:n,emit:o}){const r=t.ref(""),s=t.ref();function a(){s.value.focus()}function l(){o("submit",r.value),r.value=""}return n({focus:a}),(i,c)=>(t.openBlock(),t.createBlock(t.unref(T.ElForm),{onSubmit:t.withModifiers(l,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref(T.ElInput),{type:i.type,ref_key:"inputRef",ref:s,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=u=>r.value=u)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}});const ca=t.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(e){return(n,o)=>(t.openBlock(),t.createBlock(t.unref(T.ElPopover),{hideAfter:n.hideAfter,width:n.width,visible:n.visible,trigger:n.trigger,"onUpdate:visible":o[0]||(o[0]=r=>n.$emit("update:visible",r))},{reference:t.withCtx(()=>[t.renderSlot(n.$slots,"reference")]),default:t.withCtx(()=>[t.renderSlot(n.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}});function ze(e){return t.getCurrentScope()?(t.onScopeDispose(e),!0):!1}function X(e){return typeof e=="function"?e():t.unref(e)}const qn=typeof window<"u"&&typeof document<"u",ua=e=>e!=null,da=Object.prototype.toString,fa=e=>da.call(e)==="[object Object]",Pe=()=>{};function pa(e,n={}){if(!t.isRef(e))return t.toRefs(e);const o=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const r in e.value)o[r]=t.customRef(()=>({get(){return e.value[r]},set(s){var a;if((a=X(n.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const i=[...e.value];i[r]=s,e.value=i}else{const i={...e.value,[r]:s};Object.setPrototypeOf(i,Object.getPrototypeOf(e.value)),e.value=i}else e.value[r]=s}}));return o}function Yn(e,n=!0){t.getCurrentInstance()?t.onMounted(e):n?e():t.nextTick(e)}function ee(e){var n;const o=X(e);return(n=o==null?void 0:o.$el)!=null?n:o}const re=qn?window:void 0;function ge(...e){let n,o,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,r,s]=e,n=re):[n,o,r,s]=e,!n)return Pe;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const a=[],l=()=>{a.forEach(p=>p()),a.length=0},i=(p,m,h,y)=>(p.addEventListener(m,h,y),()=>p.removeEventListener(m,h,y)),c=t.watch(()=>[ee(n),X(s)],([p,m])=>{if(l(),!p)return;const h=fa(m)?{...m}:m;a.push(...o.flatMap(y=>r.map(d=>i(p,y,d,h))))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return ze(u),u}function ma(){const e=t.ref(!1);return t.getCurrentInstance()&&t.onMounted(()=>{e.value=!0}),e}function kt(e){const n=ma();return t.computed(()=>(n.value,!!e()))}function ha(e,n={}){const{window:o=re}=n,r=kt(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let s;const a=t.ref(!1),l=u=>{a.value=u.matches},i=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",l):s.removeListener(l))},c=t.watchEffect(()=>{r.value&&(i(),s=o.matchMedia(X(e)),"addEventListener"in s?s.addEventListener("change",l):s.addListener(l),a.value=s.matches)});return ze(()=>{c(),i(),s=void 0}),a}function St(e,n={}){var o,r;const{pointerTypes:s,preventDefault:a,stopPropagation:l,exact:i,onMove:c,onEnd:u,onStart:p,initialValue:m,axis:h="both",draggingElement:y=re,containerElement:d,handle:f=e}=n,w=t.ref((o=X(m))!=null?o:{x:0,y:0}),E=t.ref(),k=b=>s?s.includes(b.pointerType):!0,g=b=>{X(a)&&b.preventDefault(),X(l)&&b.stopPropagation()},_=b=>{var R;if(!k(b)||X(i)&&b.target!==X(e))return;const S=((R=X(d))!=null?R:X(e)).getBoundingClientRect(),N={x:b.clientX-S.left,y:b.clientY-S.top};(p==null?void 0:p(N,b))!==!1&&(E.value=N,g(b))},V=b=>{if(!k(b)||!E.value)return;let{x:R,y:B}=w.value;(h==="x"||h==="both")&&(R=b.clientX-E.value.x),(h==="y"||h==="both")&&(B=b.clientY-E.value.y),w.value={x:R,y:B},c==null||c(w.value,b),g(b)},C=b=>{k(b)&&E.value&&(E.value=void 0,u==null||u(w.value,b),g(b))};if(qn){const b={capture:(r=n.capture)!=null?r:!0};ge(f,"pointerdown",_,b),ge(y,"pointermove",V,b),ge(y,"pointerup",C,b)}return{...pa(w),position:w,isDragging:t.computed(()=>!!E.value),style:t.computed(()=>`left:${w.value.x}px;top:${w.value.y}px;`)}}function Xn(e,n,o={}){const{window:r=re,...s}=o;let a;const l=kt(()=>r&&"ResizeObserver"in r),i=()=>{a&&(a.disconnect(),a=void 0)},c=t.computed(()=>Array.isArray(e)?e.map(m=>ee(m)):[ee(e)]),u=t.watch(c,m=>{if(i(),l.value&&r){a=new ResizeObserver(n);for(const h of m)h&&a.observe(h,s)}},{immediate:!0,flush:"post",deep:!0}),p=()=>{i(),u()};return ze(p),{isSupported:l,stop:p}}function Ve(e,n={}){const{reset:o=!0,windowResize:r=!0,windowScroll:s=!0,immediate:a=!0}=n,l=t.ref(0),i=t.ref(0),c=t.ref(0),u=t.ref(0),p=t.ref(0),m=t.ref(0),h=t.ref(0),y=t.ref(0);function d(){const f=ee(e);if(!f){o&&(l.value=0,i.value=0,c.value=0,u.value=0,p.value=0,m.value=0,h.value=0,y.value=0);return}const w=f.getBoundingClientRect();l.value=w.height,i.value=w.bottom,c.value=w.left,u.value=w.right,p.value=w.top,m.value=w.width,h.value=w.x,y.value=w.y}return Xn(e,d),t.watch(()=>ee(e),f=>!f&&d()),s&&ge("scroll",d,{capture:!0,passive:!0}),r&&ge("resize",d,{passive:!0}),Yn(()=>{a&&d()}),{height:l,bottom:i,left:c,right:u,top:p,width:m,x:h,y,update:d}}function va(e,n={width:0,height:0},o={}){const{window:r=re,box:s="content-box"}=o,a=t.computed(()=>{var c,u;return(u=(c=ee(e))==null?void 0:c.namespaceURI)==null?void 0:u.includes("svg")}),l=t.ref(n.width),i=t.ref(n.height);return Xn(e,([c])=>{const u=s==="border-box"?c.borderBoxSize:s==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(r&&a.value){const p=ee(e);if(p){const m=r.getComputedStyle(p);l.value=Number.parseFloat(m.width),i.value=Number.parseFloat(m.height)}}else if(u){const p=Array.isArray(u)?u:[u];l.value=p.reduce((m,{inlineSize:h})=>m+h,0),i.value=p.reduce((m,{blockSize:h})=>m+h,0)}else l.value=c.contentRect.width,i.value=c.contentRect.height},o),t.watch(()=>ee(e),c=>{l.value=c?n.width:0,i.value=c?n.height:0}),{width:l,height:i}}function ya(e,n,o={}){const{root:r,rootMargin:s="0px",threshold:a=.1,window:l=re,immediate:i=!0}=o,c=kt(()=>l&&"IntersectionObserver"in l),u=t.computed(()=>{const d=X(e);return(Array.isArray(d)?d:[d]).map(ee).filter(ua)});let p=Pe;const m=t.ref(i),h=c.value?t.watch(()=>[u.value,ee(r),m.value],([d,f])=>{if(p(),!m.value||!d.length)return;const w=new IntersectionObserver(n,{root:ee(f),rootMargin:s,threshold:a});d.forEach(E=>E&&w.observe(E)),p=()=>{w.disconnect(),p=Pe}},{immediate:i,flush:"post"}):Pe,y=()=>{p(),h(),m.value=!1};return ze(y),{isSupported:c,isActive:m,pause(){p(),m.value=!1},resume(){m.value=!0},stop:y}}function Nt(e,{window:n=re,scrollTarget:o}={}){const r=t.ref(!1);return ya(e,([{isIntersecting:s}])=>{r.value=s},{root:o,window:n,threshold:0}),r}function ga(e={}){const{window:n=re,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:a=!0}=e,l=t.ref(o),i=t.ref(r),c=()=>{n&&(a?(l.value=n.innerWidth,i.value=n.innerHeight):(l.value=n.document.documentElement.clientWidth,i.value=n.document.documentElement.clientHeight))};if(c(),Yn(c),ge("resize",c,{passive:!0}),s){const u=ha("(orientation: portrait)");t.watch(u,()=>c())}return{width:l,height:i}}const ba={class:"search-content w-100"},_a={class:"ps-2 w-75"},wa={class:"menu ps-2"},Ea={class:"flex flex-row pt-1"},xa={class:"content-list overflow-x-hidden overflow-y-auto py-2",style:{height:"250px"}},ka=["onClick"],Sa=t.createElementVNode("span",{class:"iconfont icon-play"},null,-1),Na={class:"ps-2"},Vt=t.defineComponent({__name:"bar-search",props:{menus:{},fetchScene:{type:Function},fetchStyle:{type:Function},fetchData:{type:Function},sceneList:{},styleList:{},dataList:{}},emits:["submit"],setup(e,{emit:n}){const o=e,r=t.ref(),s=t.ref(""),a=t.ref(""),l=t.ref(""),i=t.ref(""),c=t.ref(o.dataList||[]),u=t.ref(o.sceneList||[]),p=t.ref(o.styleList||[]),m=Nt(r);t.watch(m,f=>{f&&setTimeout(()=>{var w;(w=r.value)==null||w.focus()},100)}),t.onMounted(async()=>{c.value.length||await h(),u.value.length||(u.value=await o.fetchScene()),p.value.length||(p.value=await o.fetchStyle())});async function h(){c.value=await o.fetchData({word:s.value,menu:i.value,scene:a.value,style:l.value})}function y(f){i.value=f,h()}function d(f){n("submit",f)}return(f,w)=>(t.openBlock(),t.createElementBlock("div",ba,[t.createElementVNode("div",_a,[t.createVNode(t.unref(T.ElForm),{onSubmit:t.withModifiers(h,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref(T.ElInput),{ref_key:"searchInputRef",ref:r,placeholder:"搜索",modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=E=>s.value=E),"suffix-icon":t.unref(ie.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),t.createElementVNode("div",wa,[t.createVNode(t.unref(T.ElMenu),{mode:"horizontal","default-active":f.menus.length>0?f.menus[0].value:"",onSelect:w[1]||(w[1]=E=>y(E))},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.menus,(E,k)=>(t.openBlock(),t.createBlock(t.unref(T.ElMenuItem),{index:E.value,key:k},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(E.label),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),t.createElementVNode("div",Ea,[t.createVNode(t.unref(T.ElSelect),{modelValue:a.value,"onUpdate:modelValue":w[2]||(w[2]=E=>a.value=E),onChange:h,class:"m-1",size:"default"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.value,E=>(t.openBlock(),t.createBlock(t.unref(T.ElOption),{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t.createVNode(t.unref(T.ElSelect),{modelValue:l.value,"onUpdate:modelValue":w[3]||(w[3]=E=>l.value=E),onChange:h,class:"m-1",size:"default"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.value,E=>(t.openBlock(),t.createBlock(t.unref(T.ElOption),{key:E.value,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t.createElementVNode("ul",xa,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(c.value,(E,k)=>(t.openBlock(),t.createElementBlock("li",{onClick:g=>d(t.toRaw(E)),class:"content-list-item clickable ps-2 py-2",key:k},[Sa,t.createElementVNode("span",Na,t.toDisplayString(E.label),1)],8,ka))),128))])]))}});const Va={},Ca={class:"content"};function $a(e,n){return t.openBlock(),t.createElementBlock("div",Ca,[t.renderSlot(e.$slots,"default",{},void 0,!0)])}const Kn=W(Va,[["render",$a],["__scopeId","data-v-7beae5b9"]]),Ta={},Ra={class:"bar-wrapper-item"};function Da(e,n){return t.openBlock(),t.createElementBlock("div",Ra,[t.renderSlot(e.$slots,"default")])}const Oa=W(Ta,[["render",Da]]),Ba={class:"bar-wrapper-group"},Pa={class:"group-items"},Ia=t.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(e){return(n,o)=>(t.openBlock(),t.createElementBlock("div",Ba,[t.createElementVNode("div",Pa,[t.renderSlot(n.$slots,"default",{},void 0,!0)]),t.createElementVNode("div",{class:t.normalizeClass(["divider",[n.divider]])},null,2)]))}});const he=W(Ia,[["__scopeId","data-v-be31f837"]]);function Ma(e,n){return`left:${e}px;top:${n}px`}function Ct(e,n){const{width:o,height:r}=va(e),{width:s,height:a}=ga(),l=t.computed(()=>({x:s.value-o.value,y:a.value-r.value}));return{style:t.computed(()=>{const c=n.value.x,u=n.value.y,p=c<5?5:c>l.value.x?l.value.x-5:c,m=u<5?5:u>l.value.y?l.value.y-5:u;return Ma(p,m)})}}var pt={exports:{}},Jn={exports:{}},La=void 0,Qn=function(e){return e!==La&&e!==null},Aa=Qn,Fa={object:!0,function:!0,undefined:!0},ja=function(e){return Aa(e)?hasOwnProperty.call(Fa,typeof e):!1},Ha=ja,Ua=function(e){if(!Ha(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch{return!1}},za=Ua,Wa=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch{return!1}return!za(e)},Ga=Wa,qa=/^\s*class[\s{/}]/,Ya=Function.prototype.toString,Xa=function(e){return!(!Ga(e)||qa.test(Ya.call(e)))},Ka=function(){var e=Object.assign,n;return typeof e!="function"?!1:(n={foo:"raz"},e(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")},Je,un;function Ja(){return un||(un=1,Je=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Je}var Qa=function(){},Za=Qa(),$t=function(e){return e!==Za&&e!==null},Qe,dn;function el(){if(dn)return Qe;dn=1;var e=$t,n=Object.keys;return Qe=function(o){return n(e(o)?Object(o):o)},Qe}var Ze,fn;function tl(){return fn||(fn=1,Ze=Ja()()?Object.keys:el()),Ze}var et,pn;function nl(){if(pn)return et;pn=1;var e=$t;return et=function(n){if(!e(n))throw new TypeError("Cannot use null or undefined");return n},et}var tt,mn;function ol(){if(mn)return tt;mn=1;var e=tl(),n=nl(),o=Math.max;return tt=function(r,s){var a,l,i=o(arguments.length,2),c;for(r=Object(n(r)),c=function(u){try{r[u]=s[u]}catch(p){a||(a=p)}},l=1;l<i;++l)s=arguments[l],e(s).forEach(c);if(a!==void 0)throw a;return r},tt}var rl=Ka()?Object.assign:ol(),sl=$t,al=Array.prototype.forEach,ll=Object.create,il=function(e,n){var o;for(o in e)n[o]=e[o]},cl=function(e){var n=ll(null);return al.call(arguments,function(o){sl(o)&&il(Object(o),n)}),n},nt="razdwatrzy",ul=function(){return typeof nt.contains!="function"?!1:nt.contains("dwa")===!0&&nt.contains("foo")===!1},ot,hn;function dl(){if(hn)return ot;hn=1;var e=String.prototype.indexOf;return ot=function(n){return e.call(this,n,arguments[1])>-1},ot}var fl=ul()?String.prototype.contains:dl(),Ie=Qn,vn=Xa,Zn=rl,eo=cl,Se=fl,pl=Jn.exports=function(e,n){var o,r,s,a,l;return arguments.length<2||typeof e!="string"?(a=n,n=e,e=null):a=arguments[2],Ie(e)?(o=Se.call(e,"c"),r=Se.call(e,"e"),s=Se.call(e,"w")):(o=s=!0,r=!1),l={value:n,configurable:o,enumerable:r,writable:s},a?Zn(eo(a),l):l};pl.gs=function(e,n,o){var r,s,a,l;return typeof e!="string"?(a=o,o=n,n=e,e=null):a=arguments[3],Ie(n)?vn(n)?Ie(o)?vn(o)||(a=o,o=void 0):o=void 0:(a=n,n=o=void 0):n=void 0,Ie(e)?(r=Se.call(e,"c"),s=Se.call(e,"e")):(r=!0,s=!1),l={get:n,set:o,configurable:r,enumerable:s},a?Zn(eo(a),l):l};var ml=Jn.exports,hl=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e};(function(e,n){var o=ml,r=hl,s=Function.prototype.apply,a=Function.prototype.call,l=Object.create,i=Object.defineProperty,c=Object.defineProperties,u=Object.prototype.hasOwnProperty,p={configurable:!0,enumerable:!1,writable:!0},m,h,y,d,f,w,E;m=function(k,g){var _;return r(g),u.call(this,"__ee__")?_=this.__ee__:(_=p.value=l(null),i(this,"__ee__",p),p.value=null),_[k]?typeof _[k]=="object"?_[k].push(g):_[k]=[_[k],g]:_[k]=g,this},h=function(k,g){var _,V;return r(g),V=this,m.call(this,k,_=function(){y.call(V,k,_),s.call(g,this,arguments)}),_.__eeOnceListener__=g,this},y=function(k,g){var _,V,C,b;if(r(g),!u.call(this,"__ee__"))return this;if(_=this.__ee__,!_[k])return this;if(V=_[k],typeof V=="object")for(b=0;C=V[b];++b)(C===g||C.__eeOnceListener__===g)&&(V.length===2?_[k]=V[b?0:1]:V.splice(b,1));else(V===g||V.__eeOnceListener__===g)&&delete _[k];return this},d=function(k){var g,_,V,C,b;if(u.call(this,"__ee__")&&(C=this.__ee__[k],!!C))if(typeof C=="object"){for(_=arguments.length,b=new Array(_-1),g=1;g<_;++g)b[g-1]=arguments[g];for(C=C.slice(),g=0;V=C[g];++g)s.call(V,this,b)}else switch(arguments.length){case 1:a.call(C,this);break;case 2:a.call(C,this,arguments[1]);break;case 3:a.call(C,this,arguments[1],arguments[2]);break;default:for(_=arguments.length,b=new Array(_-1),g=1;g<_;++g)b[g-1]=arguments[g];s.call(C,this,b)}},f={on:m,once:h,off:y,emit:d},w={on:o(m),once:o(h),off:o(y),emit:o(d)},E=c({},w),e.exports=n=function(k){return k==null?l(E):c(Object(k),w)},n.methods=f})(pt,pt.exports);var vl=pt.exports;const yl=bt(vl),K=yl(),gl={class:"w-100 d-flex flex-row align-items-center"},we=t.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},initialValue:{}},emits:["update:visible","close"],setup(e,{expose:n,emit:o}){const r=e,s=t.ref(),a=t.ref(),l=t.ref(),{position:i}=St(a,{initialValue:r.initialValue}),{style:c}=Ct(s,i);function u(d){i.value=d}n({setPosition:u}),t.onMounted(()=>{K.on(G.VIEW_CLICK,p),document.addEventListener("keydown",y)}),t.onUnmounted(()=>{K.off(G.VIEW_CLICK,p),document.removeEventListener("keydown",y)});function p(d){m(d)&&h()}function m(d){const f=d.target;return!(!s.value||!l.value||l.value.contains(f)||s.value.contains(f))}function h(){o("update:visible",!1),o("close")}function y(d){d.code==="Escape"&&h()}return(d,f)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",{ref_key:"referenceRef",ref:l,onMousedown:f[0]||(f[0]=t.withModifiers(()=>{},["prevent"]))},[t.renderSlot(d.$slots,"reference")],544),(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.withDirectives(t.createElementVNode("div",{ref_key:"boxRef",ref:s,class:"demotestname card shadow brag-box user-select-none z-2",style:t.normalizeStyle([{position:"fixed"},t.unref(c)]),onMousedown:f[1]||(f[1]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",gl,[t.createElementVNode("div",{ref_key:"dragRef",ref:a,class:"w-100",style:{height:"40px",cursor:"move"}},null,512),t.createElementVNode("span",{onClick:h,class:"btn iconfont icon-close fs-5"})]),t.renderSlot(d.$slots,"default")],36),[[t.vShow,d.visible]])]))],64))}}),bl={install(e){e.component("BarButton",U),e.component("BarInput",xt),e.component("BarPopover",ca),e.component("BarSearch",Vt),e.component("BarWrapper",Kn),e.component("BarWrapperItem",Oa),e.component("BarWrapperGroup",he),e.component("DragBox",we)}};function _l(e){return e.replaceAll(/[&]/gi,"&amp;").replaceAll(/[<]/gi,"&lt;").replaceAll(/[>]/gi,"&gt;")}function wl(e,n){return n?`<audio src="${e.src}">${n}</audio>`:`<audio src="${e.src}"/>`}function El(e){return e.time?`<break time="${e.time}"/>`:e.strength?`<break strength="${e.strength}"/>`:"<break/>"}function xl(e,n){return e.level?`<emphasis level="${e.level}">${n}</emphasis>`:`<emphasis>${n}</emphasis>`}function kl(e,n){if(!e.style)return n;const o=e.role?` role="${e.role}"`:"",r=e.styledegree?` styledegree="${e.styledegree}"`:"";return`<mstts:express-as style="${e.style}"${o}${r}>${n}</mstts:express-as>`}function Sl(e){if(!e.src)return"";const n=e.volume?` volume="${e.volume}"`:"",o=e.fadein?` fadein="${e.fadein}"`:"",r=e.fadeout?` fadeout="${e.fadeout}"`:"";return`<mstts:backgroundaudio src="${e.src}"${n}${o}${r}/>`}function Nl(e){return!e.attrType||!e.value?"":`<mstts:silence type="${e.attrType}" value="${e.value}"/>`}function Vl(e,n){return`<p>${n}</p>`}function Cl(e,n){const o=e.alphabet?`alphabet="${e.alphabet}"`:"";return`<phoneme ph="${e.ph}"${o}>${n}</phoneme>`}function $l(e,n){if(!e.contour&&!e.pitch&&!e.range&&!e.rate&&!e.volume)return n;const o=e.contour?` contour="${e.contour}"`:"",r=e.pitch?` pitch="${e.pitch}"`:"",s=e.range?` range="${e.range}"`:"",a=e.volume?` volume="${e.volume}"`:"",l=e.rate?` rate="${e.rate}"`:"";return`<prosody${o}${r}${s}${a}${l}>${n}</prosody>`}function Tl(e,n){const o=e.interpretAs?` interpret-as="${e.interpretAs}"`:"",r=e.format?` format="${e.format}"`:"",s=e.detail?` detail="${e.detail}"`:"";return`<say-as${o}${r}${s}>${n}</say-as>`}function Rl(e,n){return`<s>${n}</s>`}function Dl(e,n){return`<sub alias="${e.alias}">${n}</sub>`}function Ol(e,n){const o=e.effect?` effect="${e.effect}"`:"";return`<voice name="${e.name}${o}">${n}</voice>`}function Bl(e,n){return`<speak version="${e.version}" xml:lang="${e.xmlLang}" xmlns="${e.xmlns}" xmlns:mstts="${e["xmlns:mstts"]}" xmlns:emo="${e["xmlns:emo"]}">${n}</speak>`}function to(e){if(v.SlateText.isText(e))return _l(e.text.trim());if(v.SlateElement.isElement(e)){const n=e.children.map(r=>to(r)).join("");switch(v.DomEditor.getNodeType(e)){case"paragraph":return`<p>${n}</p>`;case"ssml-speak":return Bl(e,n);case"ssml-mstts:backgroundaudio":return Sl(e);case"ssml-audio":return wl(e,n);case"ssml-break":return El(e);case"ssml-emphasis":return xl(e,n);case"ssml-mstts:express-as":return kl(e,n);case"ssml-p":return Vl(e,n);case"ssml-phoneme":return Cl(e,n);case"ssml-prosody":return $l(e,n);case"ssml-s":return Rl(e,n);case"ssml-say-as":return Tl(e,n);case"ssml-sub":return Dl(e,n);case"ssml-voice":return Ol(e,n);case"ssml-mstts:silence":return Nl(e);default:return n}}return""}function Pl(e,n){const o={type:"ssml-voice",remark:"",name:n.name,children:[]},r=no(),s={type:"ssml-mstts:express-as",remark:"",style:n.style,role:n.role,children:[]},a=()=>({type:"ssml-prosody",remark:"",rate:n.rate,pitch:n.pitch,children:[]});o.children.push(...r),o.children.push(s);function l(){const c=a();s.children.push(c);function u(p){c.children.push(p)}return{prosody:c,pushNode:u}}let i;for(let c=0;c<n.children.length;c++){const u=n.children[c];if(!(v.SlateText.isText(u)&&!u.text.trim()))if(v.SlateText.isText(u)){i??(i=l()),i.pushNode(u);continue}else if(v.SlateEditor.isVoid(e,u)){i=void 0,s.children.push(u);continue}else{const p=v.DomEditor.findPath(e,u),[m]=v.SlateEditor.nodes(e,{at:p,mode:"lowest",voids:!1,match:h=>v.DomEditor.checkNodeType(h,"ssml-prosody")});if(m){i=void 0,s.children.push(u);continue}else i??(i=l()),i.pushNode(u)}}return o}function no(){return[{type:"ssml-mstts:silence",attrType:"comma-exact",value:"200ms",remark:"逗号静音",children:[]},{type:"ssml-mstts:silence",attrType:"semicolon-exact",value:"200ms",remark:"分号静音",children:[]},{type:"ssml-mstts:silence",attrType:"enumerationcomma-exact",value:"200ms",remark:"顿号静音",children:[]}]}function Il(){const{rootVoice:e,rootExpressAs:n}=de(),o={...e,children:[]},r=no(),s={...n,children:[]};o.children.push(...r),o.children.push(s);function a(l){s.children.push(l)}return{voice:o,pushNode:a}}function yn(e){const{rootProsody:n}=de(),o={...n,children:[]};e(o);function r(s){o.children.push(s)}return{prosody:o,pushNode:r}}function Ml(){return{type:"ssml-break",time:"200ms",children:[{text:""}],remark:"paragraphBreak"}}function Ll(e){const n=e.children.filter(o=>v.DomEditor.checkNodeType(o,"paragraph")).filter(o=>!!v.SlateNode.string(o).trim()).map((o,r,s)=>{const l=o.children;return r<s.length-1?l.concat([Ml()]):l});return[].concat(...n)}function Al(e){const n=Ll(e),o=[];let r,s;for(let a=0;a<n.length;a++){const l=n[a];if(!(v.SlateText.isText(l)&&!l.text.trim())){if(v.DomEditor.checkNodeType(l,"custom-management")){r&&(o.push(r.voice),r=void 0,s=void 0),o.push(Pl(e,l));continue}if(r??(r=Il()),v.SlateText.isText(l)){s??(s=yn(r.pushNode)),s.pushNode(l);continue}else if(v.SlateEditor.isVoid(e,l)){s=void 0,r.pushNode(l);continue}else{const i=v.DomEditor.findPath(e,l),[c]=v.SlateEditor.nodes(e,{at:i,mode:"lowest",voids:!1,match:u=>v.DomEditor.checkNodeType(u,"ssml-prosody")});if(c){s=void 0,r.pushNode(l);continue}else{s??(s=yn(r.pushNode)),s.pushNode(l);continue}}}}return r&&o.push(r.voice),o}function We(){const{editor:e}=H();if(!e)throw Error("没有找到 editor 对象");const{rootSpeak:n,rootBackgroundaudio:o}=de(),r={...n,children:[]},s={...o};return r.children.push(s,...Al(e)),to(r)}const Fl=e=>(t.pushScopeId("data-v-f485fb08"),e=e(),t.popScopeId(),e),jl={class:"play-menu-icon d-flex justify-content-center align-items-center"},Hl={key:0,class:"fs-3 iconfont-moyin moyin-icon_play"},Ul={key:2,class:"iconfont icon-pause"},zl=Fl(()=>t.createElementVNode("div",{class:"fw-normal",style:{"font-size":"0.85rem"}},"24K高清音质",-1)),Wl=t.defineComponent({__name:"play-menu",props:{disabled:{type:Boolean,default:!1}},setup(e){const n=Ue(),{audioPlayer:o}=n,r=o.playState,s=o.loadState,a=H(),{globalEditConfig:l}=a;async function i(){if(r.value==="playing"){o.pause();return}try{const c=We(),u=await l.tryPlay.play(c);await o.load(u.src),o.play()}catch{o.pause()}}return(c,u)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["play-menu px-2 py-1",{disabled:c.disabled}]),onClick:u[0]||(u[0]=p=>!c.disabled&&i()),onMousedown:u[1]||(u[1]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",jl,[t.unref(s)==="complete"&&t.unref(r)==="paused"?(t.openBlock(),t.createElementBlock("span",Hl)):t.unref(s)==="loading"?(t.openBlock(),t.createBlock(t.unref(T.ElIcon),{key:1,class:"is-loading"},{default:t.withCtx(()=>[t.createVNode(t.unref(ie.Loading))]),_:1})):(t.openBlock(),t.createElementBlock("span",Ul))]),zl],34))}});const oo=W(Wl,[["__scopeId","data-v-f485fb08"]]);class J{constructor(n){M(this,"editor");this.editor=n}getValue(){const{selection:n}=this.editor;return n==null?"":v.SlateEditor.string(this.editor,n)}isDisabled(){const{selection:n}=this.editor;return n==null?(this.editor.emit(P.ERROR,"未选中编辑器"),!0):!1}}class Gl extends J{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(v.SlateRange.isCollapsed(n))return this.editor.emit(P.ERROR,"请框选一个中文字符"),!0;const o=this.getValue();return o.length!=1?(this.editor.emit(P.ERROR,"请框选一个中文字符"),!0):/^[\u4E00-\u9FA5]$/gi.test(o)?!1:(this.editor.emit(P.ERROR,"请框选一个中文字符"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-phoneme",alphabet:"sapi",ph:n.value,remark:n.label,children:[{text:o}]};this.editor.insertNode(r)}}const ro=t.defineComponent({setup(){const{globalEditConfig:e}=H(),n=t.shallowRef(),o=t.ref([]),r=t.ref(!1);function s(){r.value||(r.value=!0)}function a(){r.value&&(r.value=!1)}async function l(i){var u;if(n.value??(n.value=new Gl(i)),(u=n.value)!=null&&u.isDisabled())return;const c=n.value.getValue();if(c?o.value=await e.pinyin.fetchData(c):o.value=[],o.value.length==0)return i.emit(P.ERROR,"选中的字符没有不是多音字");s()}return()=>t.createVNode(T.ElPopover,{visible:r.value,"onUpdate:visible":i=>r.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"多音字",icon:"speaker",onClick:l},null),default:()=>t.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-auto",style:"max-height: 300px"},[o.value.map(({label:i,value:c})=>t.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),a()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class ql extends J{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?v.SlateRange.isCollapsed(n)?(this.editor.emit(P.ERROR,"请框选要连读的词或句子"),!0):v.SlateEditor.string(this.editor,n).length<2:!0}exec(){if(this.isDisabled())return;const n=this.getValue();if(n==null)return;const o={type:"ssml-prosody",rate:"medium",remark:"连读",children:[{text:n}]};this.editor.insertNode(o)}}const so=t.defineComponent({setup(){const e=t.shallowRef();function n(o){e.value??(e.value=new ql(o)),!e.value.isDisabled()&&e.value.exec()}return()=>t.createVNode(U,{text:"连读",icon:"continuous",onClick:n},null)}}),Yl=[{label:"重音",value:"z"},{label:"拖音",value:"t"},{label:"重音+拖音",value:"z+t"}],Xl={z:{pitch:"x-high",rate:void 0},t:{pitch:void 0,rate:"medium"},"z+t":{pitch:"x-high",rate:"medium"}};class Kl extends J{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return!n||n==null?!0:v.SlateRange.isCollapsed(n)?(this.editor.emit(P.ERROR,"请框选词或句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const{pitch:r,rate:s}=Xl[n.value],a={type:"ssml-prosody",remark:n.label,pitch:r,rate:s,children:[{text:o}]};this.editor.insertNode(a)}}const ao=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function s(a){e.value??(e.value=new Kl(a)),!e.value.isDisabled()&&o()}return()=>t.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"重音",icon:"read",onClick:s},null),default:()=>t.createVNode("div",{class:"d-flex flex-column",onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[Yl.map(({label:a,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:a,value:l}),r()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class Jl extends J{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(v.SlateRange.isCollapsed(n))return this.editor.emit(P.ERROR,"请框选纯数字"),!0;const o=v.SlateEditor.string(this.editor,n);return o.length<=0?!0:Number.isNaN(Number(o))?(this.editor.emit(P.ERROR,"请框选纯数字"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-say-as",interpretAs:n.value,remark:n.label,children:[{text:o}]};this.editor.insertNode(r)}}const Ql=[{value:"cardinal",label:"读数值"},{value:"characters",label:"读数字"},{value:"telephone",label:"读手机号"}],lo=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function o(){n.value=!n.value}function r(s){e.value??(e.value=new Jl(s)),!e.value.isDisabled()&&o()}return()=>t.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":s=>n.value=s,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"数字符号",icon:"digital",onClick:r},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[Ql.map(({label:s,value:a})=>t.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:s,value:a}),o()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[s]))])})}});class Zl extends J{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:v.SlateRange.isCollapsed(n)?(this.editor.emit(P.ERROR,"请框选要设置别名的词或句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-sub",remark:n.value,alias:n.value,children:[{text:o}]};this.editor.insertNode(r)}}const io=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(),o=t.ref(!1);function r(){o.value||(o.value=!0)}function s(){o.value&&(o.value=!1)}async function a(i){e.value??(e.value=new Zl(i)),!e.value.isDisabled()&&(r(),n.value.focus())}function l(i){var c;s(),i&&((c=e.value)==null||c.exec({value:i,label:i}))}return()=>t.createVNode(T.ElPopover,{visible:o.value,"onUpdate:visible":i=>o.value=i,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>t.createVNode(U,{text:"别名",icon:"alias",onClick:a},null),default:()=>t.createVNode(xt,{ref:n,onSubmit:l},null)})}});class ei extends J{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;if(!n)return!0;if(v.SlateRange.isCollapsed(n))return this.editor.emit(P.ERROR,"请框选英文单词"),!0;const o=v.SlateEditor.string(this.editor,n);return o.length<=0?!0:/^[A-Za-z]+$/gi.test(o)?!1:(this.editor.emit(P.ERROR,"请框选英文单词"),!0)}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-phoneme",alphabet:"ipa",ph:n.value,remark:n.label,children:[{text:o}]};this.editor.insertNode(r)}}const co=t.defineComponent({setup(){const{globalEditConfig:e}=H(),n=t.shallowRef(),o=t.ref([]),r=t.ref(!1);function s(){r.value||(r.value=!0)}function a(){r.value&&(r.value=!1)}async function l(i){if(n.value??(n.value=new ei(i)),Lr(i),n.value.isDisabled())return;const c=n.value.getValue();if(c){if(o.value=await e.english.fetchData(c),o.value.length<=0)return i.emit(P.ERROR,"找不到单词的音标");s()}}return()=>t.createVNode(T.ElPopover,{visible:r.value,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"音标",icon:"english",onClick:l},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[o.value.map(({label:i,value:c})=>t.createVNode("div",{key:c,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:i,value:c}),a()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class ti extends J{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:v.SlateRange.isCollapsed(n)?(this.editor.emit(P.ERROR,"请框选要变速的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-prosody",remark:n.label,rate:n.value,children:[{text:o}]};this.editor.insertNode(r)}}function D(e){return`${((e-1)*100).toFixed(0)}%`}const ni=[{value:D(.5),label:"0.5x"},{value:D(.55),label:"0.55x"},{value:D(.6),label:"0.6x"},{value:D(.65),label:"0.65x"},{value:D(.7),label:"0.7x"},{value:D(.75),label:"0.75x"},{value:D(.8),label:"0.8x"},{value:D(.85),label:"0.85x"},{value:D(.9),label:"0.9x"},{value:D(.95),label:"0.95x"},{value:D(1),label:"1x"},{value:D(1.05),label:"1.05x"},{value:D(1.1),label:"1.1x"},{value:D(1.15),label:"1.15x"},{value:D(1.2),label:"1.2x"},{value:D(1.25),label:"1.25x"},{value:D(1.3),label:"1.3x"},{value:D(1.35),label:"1.35x"},{value:D(1.4),label:"1.4x"},{value:D(1.45),label:"1.45x"},{value:D(1.5),label:"1.5x"},{value:D(1.55),label:"1.55x"},{value:D(1.6),label:"1.6x"},{value:D(1.65),label:"1.65x"},{value:D(1.7),label:"1.7x"},{value:D(1.75),label:"1.75x"},{value:D(1.8),label:"1.8x"},{value:D(1.85),label:"1.85x"},{value:D(1.9),label:"1.9x"},{value:D(1.95),label:"1.95x"},{value:D(2),label:"2x"}],uo=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}async function s(a){e.value??(e.value=new ti(a)),!e.value.isDisabled()&&o()}return()=>t.createVNode(T.ElPopover,{style:{padding:"0px"},visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"局部变速",icon:"changespeed",onClick:s},null),default:()=>t.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[ni.map(({label:a,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{var i;(i=e.value)==null||i.exec({label:a,value:l}),r()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class oi extends J{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?v.SlateRange.isExpanded(n)?(this.editor.emit(P.ERROR,"不能框选文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o={type:"ssml-break",strength:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(o)}}const ri=[{value:"weak",label:"短"},{value:"medium",label:"中"},{value:"strong",label:"长"}],fo=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function s(a){e.value??(e.value=new oi(a)),!e.value.isDisabled()&&o()}return()=>t.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":a=>n.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>t.createVNode(U,{text:"停顿调节",icon:"rhythm",onClick:s},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[ri.map(({label:a,value:l})=>t.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{e.value&&!e.value.isDisabled()&&e.value.exec({label:a,value:l}),r()},onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});class si extends J{constructor(n){super(n)}restoreSelection(){this.editor.restoreSelection()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?v.SlateRange.isExpanded(n)?(this.editor.emit(P.ERROR,"不能框选文字"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled()||this.getValue()==null)return;const r={type:"ssml-audio",src:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(r)}}const po=t.defineComponent({__name:"special-menu",setup(e){const n=t.ref(),o=t.ref(),r=t.shallowRef(),{globalEditConfig:s}=H(),{special:a}=s,l=t.ref(!1),{x:i,y:c,height:u}=Ve(o),p=h=>{r.value??(r.value=new si(h)),!r.value.isDisabled()&&(n.value.setPosition({x:i.value-200,y:c.value+u.value}),l.value=!0)};function m(h){var y;(y=r.value)==null||y.restoreSelection(),r.value&&!r.value.isDisabled()&&r.value.exec(h),l.value=!1}return(h,y)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":y[0]||(y[0]=d=>l.value=d)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:o,text:"音效",icon:"special",onClick:p},null,512)]),default:t.withCtx(()=>[t.createVNode(t.unref(Vt),{menus:t.unref(a).menus,fetchScene:t.unref(a).fetchScene,fetchStyle:t.unref(a).fetchStyle,fetchData:t.unref(a).fetchData,onSubmit:m},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}});class ai extends J{constructor(n){super(n)}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n?v.SlateRange.isExpanded(n)?(this.editor.emit(P.ERROR,"不能框选文本"),!0):!1:!0}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o={type:"ssml-break",time:n.value,remark:n.label,children:[{text:""}]};this.editor.insertNode(o)}}const li=[{value:"150ms",label:"150ms"},{value:"200ms",label:"200ms"},{value:"300ms",label:"300ms"},{value:"400ms",label:"400ms"},{value:"500ms",label:"500ms"},{value:"600ms",label:"600ms"}],mo=t.defineComponent({setup(){const e=t.shallowRef(),n=t.ref(!1),o=t.ref();function r(){n.value||(n.value=!0)}function s(){n.value&&(n.value=!1)}function a(i){e.value??(e.value=new ai(i)),!e.value.isDisabled()&&(r(),o.value.focus())}function l(i){var c;s(),i&&((c=e.value)==null||c.exec({value:i,label:i}))}return()=>t.createVNode(T.ElPopover,{visible:n.value,"onUpdate:visible":i=>n.value=i,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>t.createVNode(U,{text:"插入静音",icon:"mute",onClick:a},null),default:()=>t.createVNode("div",{class:"d-flex flex-column"},[li.map(({value:i,label:c})=>t.createVNode("div",{key:i,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>l(i),onMousedown:t.withModifiers(()=>{},["stop","prevent"])},[c])),t.createVNode(xt,{type:"text",ref:o,onSubmit:l},null)])})}}),ho=t.defineComponent({__name:"bgm-menu",setup(e){const n=t.ref(),o=t.ref(),r=t.shallowRef(),{globalEditConfig:s}=H(),{bgm:a}=s,l=t.ref(!1),{x:i,y:c,height:u}=Ve(o),p=async h=>{const y={x:i.value-300,y:c.value+u.value};r.value=h,n.value.setPosition(y),l.value=!0};function m(h){const{rootBackgroundaudio:y}=de();y.src=h.value,y.remark=h.label,l.value=!1}return(h,y)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:l.value,"onUpdate:visible":y[0]||(y[0]=d=>l.value=d)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:o,text:"配乐",icon:"bgm",onClick:p},null,512)]),default:t.withCtx(()=>[t.createVNode(t.unref(Vt),{menus:t.unref(a).menus,fetchScene:t.unref(a).fetchScene,fetchStyle:t.unref(a).fetchStyle,fetchData:t.unref(a).fetchData,onSubmit:m},null,8,["menus","fetchScene","fetchStyle","fetchData"])]),_:1},8,["visible"]))}}),vo=t.defineComponent({__name:"sensitive-menu",setup(e){const n=t.ref(),o=t.ref(),r=t.shallowRef(),s=t.ref(!1),{x:a,y:l,height:i}=Ve(o),c=u=>{r.value=u,n.value.setPosition({x:a.value-200,y:l.value+i.value}),s.value=!0};return(u,p)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:s.value,"onUpdate:visible":p[0]||(p[0]=m=>s.value=m)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:o,text:"敏感词",icon:"sensitive",onClick:c},null,512)]),default:t.withCtx(()=>[t.createVNode(vo)]),_:1},8,["visible"]))}});const ii={class:"select-list",style:{width:"120px"}},ci={class:"text-center d-flex flex-column justify-content-center fs-6",style:{height:"60px"}},ui=["onClick"],di=t.defineComponent({__name:"select-list",props:{modelValue:{},dataList:{}},emits:["update:modelValue"],setup(e,{expose:n,emit:o}){const r=e,s=t.ref();function a(i){o("update:modelValue",i.value)}function l(){var i;if(s.value){for(let c=0;c<r.dataList.length;c++)if(r.dataList[c].value===r.modelValue){(i=s.value.children[c])==null||i.scrollIntoView({behavior:"smooth"});return}}}return n({scrollIntoViewTheItem:l}),(i,c)=>(t.openBlock(),t.createElementBlock("div",ii,[t.createElementVNode("div",ci,[t.renderSlot(i.$slots,"default",{},void 0,!0)]),t.createElementVNode("ul",{ref_key:"listRef",ref:s,class:"text-center w-100 border-start border-top border-bottom border-secondary-subtle overflow-y-auto overflow-x-hidden scrollbar-none",style:{height:"180px"}},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.dataList,(u,p)=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(["clickable select-item py-1",{activate:u.value===i.modelValue}]),key:p,onClick:m=>a(u)},t.toDisplayString(u.label),11,ui))),128))],512)]))}});const me=W(di,[["__scopeId","data-v-e0f0259e"]]),fi={style:{width:"600px",height:"360px"},class:"position-relative px-2 pb-2"},pi={class:"position-relative"},mi={class:"position-absolute top-0 end-0"},hi=t.createElementVNode("li",null,[t.createElementVNode("span",{class:"text-nowrap"},"近期使用:")],-1),vi=t.createElementVNode("span",{class:"my-3"},"类型",-1),yi=t.createElementVNode("span",{class:"my-3"},"配音师",-1),gi=t.createElementVNode("span",{class:"my-3"},"角色",-1),bi=t.createElementVNode("span",{class:"my-3"},"风格",-1),_i=t.createElementVNode("span",{class:"my-3"},"语速",-1),wi=t.createElementVNode("span",{class:"my-3"},"语调",-1),Ei={class:"position-absolute bottom-0 end-0 d-flex flex-row justify-content-end me-4 mb-3"},xi=t.defineComponent({__name:"management-content",emits:["submit"],setup(e,{emit:n}){const{globalEditConfig:o}=H(),{tryPlay:r}=o,s=t.ref(!1),a=t.ref(""),l=Gn(),{contentData:i}=On(l),c=t.shallowRef([]),u=t.ref([{label:"全部类型",value:""},...r.category]),p=t.ref([]),m=t.ref([]),h=t.ref([]),y=t.ref(ta()),d=t.ref(na());t.onMounted(async()=>{i.value.category=u.value[0].value,await w()});async function f(g){i.value.category=g,await w()}async function w(){const g=await r.fetchData({...He(),...i.value});c.value=g,p.value=g.map(_=>({label:_.displayName,value:_.name})),g.length>0&&(m.value=g[0].roles,h.value=g[0].styles,i.value.name=g[0].name),m.value.length>0&&(i.value.role=m.value[0].value),h.value.length>0&&(i.value.style=h.value[0].value)}function E(g){const _=c.value.find(V=>V.name===g);_&&(m.value=_.roles,h.value=_.styles,m.value.length>0&&(i.value.role=m.value[0].value),h.value.length>0&&(i.value.style=h.value[0].value))}function k(){var R,B,S,N;const g=((R=p.value.find($=>$.value===i.value.name))==null?void 0:R.label)||"",_=((B=m.value.find($=>$.value===i.value.role))==null?void 0:B.label)||"",V=((S=h.value.find($=>$.value===i.value.style))==null?void 0:S.label)||"",C=((N=y.value.find($=>$.value===i.value.speed))==null?void 0:N.label)||"",b={category:i.value.category,name:i.value.name,label:`${g}|${_}|${V}|${C}`,value:i.value.name,role:i.value.role,style:i.value.style,speed:ra(Number(i.value.speed)),pitch:oa(Number(i.value.pitch))};n("submit",b)}return(g,_)=>(t.openBlock(),t.createElementBlock("div",fi,[t.createVNode(t.unref(T.ElForm),{onSubmit:t.withModifiers(w,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref(T.ElInput),{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=V=>a.value=V),placeholder:"请输入名称快速查找配音师"},null,8,["modelValue"])]),_:1},8,["onSubmit"]),t.createElementVNode("div",pi,[t.createElementVNode("div",mi,[t.createVNode(t.unref(T.ElButton),{size:"small",icon:t.unref(ie.More),onClick:_[1]||(_[1]=()=>s.value=!s.value)},null,8,["icon"])]),t.createElementVNode("ul",{class:t.normalizeClass(["d-flex flex-row row-gap-1 column-gap-2 overflow-x-hidden",{"flex-wrap":s.value}])},[hi,t.createElementVNode("li",null,[t.createVNode(t.unref(T.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref(T.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref(T.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref(T.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref(T.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref(T.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})]),t.createElementVNode("li",null,[t.createVNode(t.unref(T.ElTag),{type:"info",closable:""},{default:t.withCtx(()=>[t.createTextVNode("魔小婉|女青年|娱乐|1x")]),_:1})])],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass({"d-flex flex-row":!s.value})},[t.createVNode(me,{"onUpdate:modelValue":[f,_[2]||(_[2]=V=>t.unref(i).category=V)],modelValue:t.unref(i).category,dataList:u.value},{default:t.withCtx(()=>[vi]),_:1},8,["modelValue","dataList"]),t.createVNode(me,{"onUpdate:modelValue":[E,_[3]||(_[3]=V=>t.unref(i).name=V)],modelValue:t.unref(i).name,dataList:p.value},{default:t.withCtx(()=>[yi]),_:1},8,["modelValue","dataList"]),t.createVNode(me,{modelValue:t.unref(i).role,"onUpdate:modelValue":_[4]||(_[4]=V=>t.unref(i).role=V),dataList:m.value},{default:t.withCtx(()=>[gi]),_:1},8,["modelValue","dataList"]),t.createVNode(me,{modelValue:t.unref(i).style,"onUpdate:modelValue":_[5]||(_[5]=V=>t.unref(i).style=V),dataList:h.value},{default:t.withCtx(()=>[bi]),_:1},8,["modelValue","dataList"]),t.createVNode(me,{modelValue:t.unref(i).speed,"onUpdate:modelValue":_[6]||(_[6]=V=>t.unref(i).speed=V),dataList:y.value},{default:t.withCtx(()=>[_i]),_:1},8,["modelValue","dataList"]),t.createVNode(me,{modelValue:t.unref(i).pitch,"onUpdate:modelValue":_[7]||(_[7]=V=>t.unref(i).pitch=V),dataList:d.value},{default:t.withCtx(()=>[wi]),_:1},8,["modelValue","dataList"])],2),[[t.vShow,!s.value]])]),t.createElementVNode("div",Ei,[t.withDirectives(t.createVNode(t.unref(T.ElButton),{onClick:k,type:"primary"},{default:t.withCtx(()=>[t.createTextVNode("确定")]),_:1},512),[[t.vShow,!s.value]]),t.withDirectives(t.createVNode(t.unref(T.ElButton),{type:"primary"},{default:t.withCtx(()=>[t.createTextVNode("全部清空")]),_:1},512),[[t.vShow,s.value]])])]))}});class gn extends J{constructor(o){super(o);M(this,"contentData")}isDisabled(){if(super.isDisabled())return!0;const{selection:o}=this.editor;if(o==null)return!0;if(v.DomEditor.getSelectedNodeByType(this.editor,"custom-management"))return!1;if(v.SlateRange.isCollapsed(o))return this.editor.emit(P.ERROR,"请框选句子"),!0;const[r]=v.SlateEditor.node(this.editor,o),s=this.editor.getParentNode(r);return!s||!v.DomEditor.checkNodeType(s,"paragraph")?(this.editor.emit(P.ERROR,"多人配音需要在最外层使用"),!0):!1}exec(o){if(this.editor.restoreSelection(),this.isDisabled())return;const r=this.getValue();if(r==null)return;const s=v.DomEditor.getSelectedNodeByType(this.editor,"custom-management");if(s)v.SlateTransforms.setNodes(this.editor,{custom:{contentData:this.contentData||{}},remark:o.label,name:o.value,role:o.role,style:o.style,rate:o.speed,pitch:o.pitch},{at:v.DomEditor.findPath(this.editor,s)});else{const a={type:"custom-management",custom:{contentData:this.contentData||{}},remark:o.label,name:o.value,role:o.role,style:o.style,rate:o.speed,pitch:o.pitch,children:[{text:r}]};this.editor.insertNode(a)}}}const yo=t.defineComponent({__name:"management-menu",setup(e){const n=t.ref(),o=t.ref(),r=t.ref(!1),s=t.shallowRef(),a=Gn(),{contentData:l}=On(a),{x:i,y:c,height:u}=Ve(o);t.onMounted(()=>{K.on(G.EDITOR_CREATED,d=>{d.on(P.SSML_ELEMENT_CLICK,(f,w)=>{var E;if(w.type==="custom-management"){s.value??(s.value=new gn(f));const g=((E=w.custom)==null?void 0:E.contentData)||{};g&&(l.value.category=g.category,l.value.name=g.name,l.value.pitch=g.pitch,l.value.role=g.role,l.value.speed=g.speed,l.value.style=g.style),setTimeout(()=>{p()},200)}})})});function p(){var f;const d={x:i.value-200,y:c.value+u.value};(f=n.value)==null||f.setPosition(d),r.value=!0}function m(){r.value=!1}function h(d){s.value??(s.value=new gn(d)),!s.value.isDisabled()&&p()}function y(d){var f;s.value&&!s.value.isDisabled()&&(s.value.contentData={...l.value},(f=s.value)==null||f.exec(d)),m()}return(d,f)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:r.value,"onUpdate:visible":f[0]||(f[0]=w=>r.value=w)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:o,text:"多人配音",icon:"management",onClick:h},null,512)]),default:t.withCtx(()=>[t.createVNode(xi,{onSubmit:y})]),_:1},8,["visible"]))}}),ki={class:"speaker-head"},Si=["src"],Ni={class:"speaker-name"},Vi=t.defineComponent({__name:"speaker-item",props:{label:{},value:{},avatar:{},activated:{type:Boolean}},emits:["click"],setup(e){return(n,o)=>(t.openBlock(),t.createElementBlock("div",{class:"speaker-item",onClick:o[0]||(o[0]=r=>n.$emit("click",n.value||""))},[t.createElementVNode("div",ki,[t.createElementVNode("img",{src:n.avatar||t.unref(be)(),class:t.normalizeClass([{"border border-warning":n.activated},"rounded-circle"]),style:{height:"40px"}},null,10,Si)]),t.createElementVNode("div",Ni,t.toDisplayString(n.label),1)]))}});const Ci=W(Vi,[["__scopeId","data-v-b043c1a6"]]);class $i{constructor(){M(this,"mediaRecorder",null);M(this,"isRecording",t.ref(!1))}get recorderState(){return t.computed(()=>this.isRecording.value?"recording":"paused")}async start(n){if(navigator.mediaDevices.getUserMedia){const o=[];try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),s=new MediaRecorder(r);return this.mediaRecorder=s,new Promise((a,l)=>{s.ondataavailable=i=>{n.isCancellationRequested()?(s.stop(),this.isRecording.value=!1,n.throwIfRequested()):o.push(i.data)},s.onstart=()=>{this.isRecording.value=!0},s.onpause=()=>{this.isRecording.value=!1},s.onstop=()=>{this.isRecording.value=!1;const i=new Blob(o,{type:"audio/wav"});a(i)},s.onerror=i=>{this.isRecording.value=!1,l(i)},n.throwIfRequested(),s.start()})}catch(r){throw console.error(r),new Error("授权失败！",{cause:r})}}throw Error("浏览器不支持 getUserMedia")}stop(){this.mediaRecorder&&this.mediaRecorder.stop()}}const Ti={class:"d-flex flex-row justify-content-between border rounded-pill border-secondary my-3 py-1 px-2"},Ri={class:"text-secondary d-flex flex-row align-items-center",style:{"font-size":"0.5rem"}},Di={key:0,class:"iconfont icon-pause"},Oi={key:1,class:"iconfont icon-play"},Bi=t.createElementVNode("span",{class:"iconfont icon-delete"},null,-1),Pi=[Bi],Ii={key:1,style:{"font-size":"0.5rem"}},Mi=t.createElementVNode("p",null,"选择需要转换的配音师",-1),Li={class:"speakers-container border rounded d-flex flex-row flex-wrap row-gap-1 column-gap-2 overflow-y-auto overflow-x-hidden",style:{height:"150px"}},Ai=["disabled"],Fi=t.defineComponent({__name:"audio-upload",emits:["submit"],setup(e,{expose:n,emit:o}){const{globalEditConfig:r}=H(),{audioUpload:s,transfer:a,fetchSpeaker:l,timeoutMilliseconds:i}=r.conversion,c=t.ref(),u=t.ref(),p=t.ref(),m=t.ref(!0),h=t.ref([]),y=t.ref(),d=t.shallowRef(),f=t.shallowRef(),w=new Wn,{playState:E}=w;let k;const g=new $i,_=new Hn("audio/*"),V=new Un(60),{state:C}=V,{recorderState:b}=g,R=Nt(c),B=t.inject("reopen");t.watch(R,L=>{L||S()}),t.onMounted(async()=>{h.value=await l()}),t.watch(R,L=>{L||(m.value=!0,k==null||k.cancel())}),n({openInputFile:Ce});function S(){m.value=!0,N()}function N(){w.pause(),u.value=void 0,p.value=void 0,y.value=void 0,d.value=void 0,f.value=void 0,k==null||k.cancel()}function $(){g.stop(),V.stop()}async function I(){k=new ft(6e4),V.start();try{k.startTimeout(),d.value=await g.start(k.token)}catch(L){K.emit(G.ERROR,`${L}`,L)}finally{k.cancel(),V.stop()}}function Q(){if(E.value==="playing")w.pause();else if(d.value){const L=window.URL.createObjectURL(d.value);w.load(L),w.play()}else if(f.value){const L=window.URL.createObjectURL(f.value);w.load(L),w.play()}}async function Ce(){try{return f.value=await _.open(),m.value=!1,!0}catch{return!1}}async function Ge(){try{if(k=new ft(i),m.value&&d.value)k.startTimeout(),u.value=await s(d.value,k.token);else if(!m.value&&f.value)k.startTimeout(),u.value=await s(f.value,k.token);else throw new Error("请选则文件或实时录音")}catch(L){K.emit(G.ERROR,`${L}`,L)}}async function se(L){try{u.value?(y.value=L,p.value=await a({audioId:u.value.id,speakerId:L.id})):K.emit(G.ERROR,"请先上传音频文件")}catch(qe){K.emit(G.ERROR,`${qe}`,qe)}}function z(){p.value&&y.value&&(o("submit",{label:y.value.displayName,value:p.value.src}),S())}function Eo(){k==null||k.cancel(),B==null||B()}return(L,qe)=>{var Rt,Dt;return t.openBlock(),t.createElementBlock("div",{class:"audio-upload",ref_key:"boxRef",ref:c},[t.createElementVNode("div",Ti,[t.createElementVNode("div",Ri,[d.value||f.value?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:Q,class:"btn btn-sm rounded-pill"},[t.unref(E)==="playing"||t.unref(b)==="recording"?(t.openBlock(),t.createElementBlock("span",Di)):(t.openBlock(),t.createElementBlock("span",Oi))])):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(((Rt=f.value)==null?void 0:Rt.name)||((Dt=d.value)==null?void 0:Dt.name)),1)]),t.createElementVNode("div",null,[!u.value&&(d.value||f.value)?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:N,class:"btn btn-sm rounded-pill"},Pi)):t.createCommentVNode("",!0),u.value?(t.openBlock(),t.createElementBlock("span",Ii,"已上传")):t.createCommentVNode("",!0),m.value&&!d.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[t.unref(b)==="recording"?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:$,class:"btn btn-primary btn-sm rounded-pill"}," 结束录音("+t.toDisplayString(t.unref(C))+")s ",1)):(t.openBlock(),t.createElementBlock("button",{key:1,onClick:I,class:"btn btn-primary btn-sm rounded-pill"}," 开始录音 "))],64)):t.createCommentVNode("",!0),!m.value&&!f.value?(t.openBlock(),t.createElementBlock("button",{key:3,onClick:Ce,class:"btn btn-primary btn-sm rounded-pill"}," 选择文件 ")):t.createCommentVNode("",!0),u.value?(t.openBlock(),t.createElementBlock("button",{key:4,onClick:Eo,class:"btn btn-primary btn-sm rounded-pill"}," 重传音频 ")):t.createCommentVNode("",!0),!u.value&&(f.value||d.value)?(t.openBlock(),t.createElementBlock("button",{key:5,onClick:Ge,class:"btn btn-primary btn-sm rounded-pill"}," 上传音频 ")):t.createCommentVNode("",!0)])]),t.createElementVNode("div",null,[Mi,t.createElementVNode("div",Li,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(h.value,($e,xo)=>{var Ot;return t.openBlock(),t.createBlock(Ci,{onClick:Cu=>se($e),key:xo,label:$e.displayName,avatar:$e.avatar,activated:$e.name===((Ot=y.value)==null?void 0:Ot.name)},null,8,["onClick","label","avatar","activated"])}),128))])]),t.createElementVNode("button",{class:"btn btn-primary mt-1",onClick:z,disabled:!p.value}," 完成录音并上传完成后，可选择配音师转换 ",8,Ai)],512)}}}),ji={class:"fw-bold",style:{"font-size":"0.5rem"}},Hi=t.createElementVNode("p",{class:"text-start text-danger"},"请在安静的环境中进行录音，以需要转换的风格，读出以下文案",-1),Ui={class:"border border-secondary rounded p-2 w-100",style:{height:"100px"}},zi={class:"mt-2"},Wi=t.createElementVNode("p",{class:"mt-2 text-secondary",style:{"font-size":"0.5rem"}}," 录音内容需要和滑选一致，音频限制60秒，滑选文案限制60个字 ",-1),Gi=t.defineComponent({__name:"conversion-content",props:{text:{}},emits:["submit"],setup(e){const n=t.ref(),o=t.ref(),r=t.ref(!0),s=t.ref(!1),a=Nt(n);t.provide("reopen",()=>{r.value=!0,s.value=!1}),t.watch(a,c=>{c||(r.value=!0,s.value=!1)});function l(){r.value=!0,s.value=!0}async function i(){var c;await((c=o.value)==null?void 0:c.openInputFile())&&(r.value=!1,s.value=!0)}return(c,u)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:n,class:"px-2 py-1",style:{width:"410px"}},[t.withDirectives(t.createElementVNode("section",ji,[Hi,t.createElementVNode("div",Ui,t.toDisplayString(c.text),1)],512),[[t.vShow,r.value]]),t.withDirectives(t.createElementVNode("section",zi,[t.createElementVNode("div",{class:"w-100 d-flex flex-column row-gap-1"},[t.createElementVNode("button",{onClick:l,class:"btn btn-success"},"实时录音"),t.createElementVNode("button",{onClick:i,class:"btn btn-primary"},"上传录音")]),Wi],512),[[t.vShow,!s.value]]),t.withDirectives(t.createElementVNode("section",null,[t.createVNode(Fi,{ref_key:"audioUploadRef",ref:o,onSubmit:u[0]||(u[0]=p=>c.$emit("submit",p))},null,512)],512),[[t.vShow,s.value]])],512))}});class qi extends J{constructor(n){super(n)}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const{selection:n}=this.editor;return n==null?!0:v.SlateRange.isCollapsed(n)?(this.editor.emit(P.ERROR,"请框选要变音的句子"),!0):!1}exec(n){if(this.editor.restoreSelection(),this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-audio",remark:n.label,src:n.value,children:[{text:o}]};this.editor.insertNode(r)}}const go=t.defineComponent({__name:"conversion-menu",setup(e){const n=t.ref(),o=t.ref(),r=t.shallowRef(),s=t.shallowRef(),a=t.ref(!1),l=t.ref(""),{x:i,y:c,height:u}=Ve(o),p=h=>{if(s.value??(s.value=new qi(h)),s.value.isDisabled())return;l.value=s.value.getValue();const y={x:i.value-200,y:c.value+u.value};r.value=h,n.value.setPosition(y),a.value=!0};function m(h){var y;(y=s.value)==null||y.exec(h),a.value=!1}return(h,y)=>(t.openBlock(),t.createBlock(t.unref(we),{ref_key:"dragRef",ref:n,visible:a.value,"onUpdate:visible":y[0]||(y[0]=d=>a.value=d)},{reference:t.withCtx(()=>[t.createVNode(t.unref(U),{ref_key:"menuRef",ref:o,text:"局部变音",icon:"conversion",onClick:p},null,512)]),default:t.withCtx(()=>[t.createVNode(Gi,{text:l.value,onSubmit:m},null,8,["text"])]),_:1},8,["visible"]))}}),Yi={class:"anchor-avatar d-flex flex-column justify-content-center align-items-center"},Xi={class:"position-relative"},Ki=["src"],Ji={key:0,class:"iconfont icon-play1"},Qi={key:1,class:"iconfont icon-pause1"},Zi={class:"anchor-avatar-name text-white"},ec=t.defineComponent({__name:"try-play-circle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:n}){const o=t.ref(),r=t.ref(),s=t.ref(0),a=t.ref(0),l=Ue(),{globalEditConfig:i}=H(),{audioPlayer:c}=l,u=c.playState,{position:p}=St(o,{initialValue:{x:window.innerWidth-15,y:window.innerHeight/2-15},onStart:(E,k)=>d(k.clientX,k.clientY)?!1:void 0}),{style:m}=Ct(o,p);function h(E){if(d(E.clientX,E.clientY))return f(E)?w():n("update:visible",!1)}function y(E){s.value=E.clientX,a.value=E.clientY}function d(E,k){return E>s.value-10&&E<s.value+10&&k>a.value-10&&k<a.value+10}function f(E){var g;const k=E.target;return((g=r.value)==null?void 0:g.contains(k))||!1}async function w(){if(u.value==="playing")c.pause();else try{const E=We(),k=await i.tryPlay.play(E);c.load(k.src),c.play()}catch{c.pause()}}return(E,k)=>t.withDirectives((t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:o,class:"try-play-circel user-select-none rounded-circle overflow-hidden",style:t.normalizeStyle([t.unref(m),{position:"fixed"}]),onMousedown:y,onMouseup:h},[t.createElementVNode("div",Yi,[t.createElementVNode("div",Xi,[t.createElementVNode("img",{src:t.unref(l).speaker.avatar||t.unref(be)(),class:"rounded-circle"},null,8,Ki),t.createElementVNode("button",{ref_key:"btnPlayRef",ref:r,class:"btn w-100 h-100 position-absolute top-50 start-50 translate-middle bg-black bg-opacity-50 text-white rounded-circle"},[t.unref(u)==="paused"?(t.openBlock(),t.createElementBlock("span",Ji)):(t.openBlock(),t.createElementBlock("span",Qi))],512)]),t.createElementVNode("div",Zi,t.toDisplayString(t.unref(l).speaker.displayName),1)])],36)),[[t.vShow,E.visible]])}});const tc=W(ec,[["__scopeId","data-v-236e9f7d"]]),nc={key:0,class:"position-absolute top-0 start-100 translate-middle text-bg-danger text-nowrap rounded px-1",style:{"font-size":"0.5rem"}},oc=["src"],rc={class:"anchor-avatar-name text-white"},sc=t.defineComponent({__name:"anchor-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(e){return(n,o)=>{var r,s,a;return t.openBlock(),t.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:o[0]||(o[0]=l=>{var i;return n.$emit("click",(i=n.data)==null?void 0:i.value)})},[(r=n.data)!=null&&r.isFree?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("span",nc,"付费")),t.createElementVNode("img",{src:((s=n.data)==null?void 0:s.src)??t.unref(be)(),class:t.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"40px"}},null,10,oc),t.createElementVNode("div",rc,t.toDisplayString((a=n.data)==null?void 0:a.label),1)])}}});const bo=W(sc,[["__scopeId","data-v-845325c9"]]),ac={style:{height:"170px"},class:"w-100 d-flex flex-row flex-wrap justify-content-start overflow-x-hidden overflow-y-auto scrollbar-none"},lc=t.defineComponent({__name:"anchor-list",props:{filter:{}},setup(e){const n=e,{globalEditConfig:o}=H(),{fetchData:r}=o.tryPlay,s=Ue(),a=t.ref([]),l=t.shallowRef([]);t.watch(()=>n.filter,async c=>{const u=await r(t.toRaw(c));l.value=u,a.value=u.map(p=>({label:p.displayName,value:p.name}))});function i(c){const u=l.value.find(p=>p.name===c);u&&s.setSpeaker(u)}return t.onMounted(async()=>{const c=await r(t.toRaw(n.filter));l.value=c,a.value=c.map(u=>({label:u.displayName,value:u.name})),a.value.length>0&&i(a.value[0].value)}),(c,u)=>(t.openBlock(),t.createElementBlock("div",ac,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.value,(p,m)=>(t.openBlock(),t.createElementBlock("div",{class:"m-3",key:m},[t.createVNode(bo,{data:p,activate:p.value===t.unref(s).speaker.name,onClick:h=>i(p.value)},null,8,["data","activate","onClick"])]))),128))]))}}),rt=t.defineComponent({__name:"tag-item",props:{activate:{type:Boolean},value:{}},emits:["click"],setup(e){return(n,o)=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(["tag-item d-inline-block text-white text-center text-nowrap text-truncate",{"border border-white rounded-pill":n.activate}]),onClick:o[0]||(o[0]=r=>n.$emit("click",n.value)),style:{height:"20px","min-width":"60px","max-width":"160px","font-size":"0.5rem",cursor:"pointer"}},[t.renderSlot(n.$slots,"default")],2))}}),ic={class:"tag-list w-100"},cc={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},uc={class:"w-100 d-flex flex-row border-bottom border-secondary align-items-center",style:{height:"40px"}},dc={style:{height:"100px"},class:"w-100 pt-2 d-flex flex-row flex-wrap align-content-start row-gap-2 overflow-y-auto overflow-x-hidden scrollbar-none"},fc=t.defineComponent({__name:"tag-list",props:{filter:{}},emits:["update:filter"],setup(e,{emit:n}){const o=e,{globalEditConfig:r}=H(),{topFlag:s,gender:a,featchTag:l}=r.tryPlay,i=t.ref([]);t.onMounted(async()=>{i.value=await l()});function c(m){n("update:filter",{...t.toRaw(o.filter),topFlag:m})}function u(m){n("update:filter",{...t.toRaw(o.filter),gender:m})}function p(m){n("update:filter",{...t.toRaw(o.filter),tag:m})}return(m,h)=>(t.openBlock(),t.createElementBlock("div",ic,[t.createElementVNode("div",cc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(y,d)=>(t.openBlock(),t.createBlock(rt,{onClick:c,key:d,value:y.value,activate:m.filter.topFlag===y.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(y.label),1)]),_:2},1032,["value","activate"]))),128))]),t.createElementVNode("div",uc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(a),(y,d)=>(t.openBlock(),t.createBlock(rt,{onClick:u,key:d,value:y.value,activate:m.filter.gender===y.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(y.label),1)]),_:2},1032,["value","activate"]))),128))]),t.createElementVNode("div",dc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.value,(y,d)=>(t.openBlock(),t.createBlock(rt,{onClick:p,key:d,value:y.value,activate:m.filter.tag===y.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(y.label),1)]),_:2},1032,["value","activate"]))),128))])]))}});const pc=["src"],mc={class:"anchor-avatar-name text-white",style:{"font-size":"0.5rem"}},hc=t.defineComponent({__name:"style-avatar",props:{activate:{type:Boolean},data:{}},emits:["click"],setup(e){return(n,o)=>{var r,s;return t.openBlock(),t.createElementBlock("div",{class:"anchor-avatar d-flex flex-column align-items-center text-center justify-content-center position-relative",onClick:o[0]||(o[0]=a=>{var l;return n.$emit("click",(l=n.data)==null?void 0:l.value)})},[t.createElementVNode("img",{src:((r=n.data)==null?void 0:r.src)||t.unref(be)(),class:t.normalizeClass(["rounded-circle",{"border border-2 border-warning":n.activate}]),style:{height:"30px"}},null,10,pc),t.createElementVNode("div",mc,t.toDisplayString((s=n.data)==null?void 0:s.label),1)])}}});const vc=W(hc,[["__scopeId","data-v-71aedb65"]]);function yc(e){return`${(.05*e*100).toFixed(0)}%`}function gc(e){return`${((e-1)*100).toFixed(0)}%`}const Tt=e=>(t.pushScopeId("data-v-0210af00"),e=e(),t.popScopeId(),e),bc={class:"slider-panle w-100 px-3 text-white",style:{"font-size":"0.5rem"}},_c={class:"mt-2 d-flex text-center justify-content-between align-items-center"},wc={class:"me-auto d-flex flex-row align-items-center"},Ec=["src"],xc={class:"ms-2 d-flex flex-column justify-content-between",style:{height:"50px"}},kc={class:"d-flex dlex-row column-gap-2 align-items-end"},Sc={class:"fs-6"},Nc={style:{"font-size":"0.5rem"}},Vc={class:"d-flex flex-row column-gap-2 align-items-center"},Cc={key:0,class:"badge text-bg-primary px-2"},$c={class:"d-flex flex-column align-items-end"},Tc=Tt(()=>t.createElementVNode("div",{class:"text-info"},"音频时长，请以生成后的为准",-1)),Rc={class:"mt-1"},Dc=Tt(()=>t.createElementVNode("span",null,"/",-1)),Oc={class:"role-list mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-2 column-gap-3"},Bc=["onClick"],Pc={class:"audio-mood mt-2 d-flex flex-row flex-wrap justify-content-start align-items-center row-gap-1 column-gap-2"},Ic=["onClick"],Mc=Tt(()=>t.createElementVNode("div",{class:"my-3"},[t.createElementVNode("span",{class:"border rounded-pill p-1"},"配音师详情")],-1)),Lc={class:"slider-box"},Ac={class:"slider-box"},Fc={class:"d-flex flex-row gap-3 my-3"},jc=["onClick"],Hc={class:"d-flex flex-row flex-wrap row-gap-2 column-gap-3 mb-3",style:{"min-height":"100px"}},Uc=["onClick"],zc=t.defineComponent({__name:"slider-panle",setup(e){const{globalEditConfig:n}=H(),{rootProsody:o,rootExpressAs:r}=de(),{fetchStar:s,category:a,fetchData:l}=n.tryPlay,i=Ue(),c=t.ref(i.speaker.isStar),u=t.ref(10),p=t.ref(0),m=t.ref([0,2]),h=t.ref(1),y=t.ref([-10,10]),d=t.ref(0),f=t.computed(()=>dt(u.value)),w=t.computed(()=>dt(p.value)),E=t.reactive(Bn()),k=t.reactive(Pn()),g=t.ref(""),_=t.ref([]);t.onMounted(async()=>{await R(a[0].value)}),t.watch(()=>i.speaker,S=>{S.roles.length>0&&C(S.roles[0].value),S.styles.length>0&&b(S.styles[0].value)},{immediate:!0}),t.watch(d,S=>{o.pitch=yc(S)},{immediate:!0}),t.watch(h,S=>{o.rate=gc(S)},{immediate:!0});async function V(){c.value=await s(i.speaker.name,!c.value)}function C(S){r.role=S}function b(S){r.style=S}async function R(S){g.value=S;try{_.value=await l({...He(),category:S})}catch(N){K.emit(G.ERROR,`${N}`,N)}}function B(S){i.setSpeaker(t.toRaw(S))}return(S,N)=>(t.openBlock(),t.createElementBlock("div",bc,[t.createElementVNode("div",_c,[t.createElementVNode("div",wc,[t.createElementVNode("img",{src:t.unref(be)(),class:"rounded-circle",style:{height:"50px"}},null,8,Ec),t.createElementVNode("div",xc,[t.createElementVNode("div",kc,[t.createElementVNode("span",Sc,t.toDisplayString(t.unref(i).speaker.displayName),1),t.createElementVNode("span",Nc,t.toDisplayString(h.value)+"x",1)]),t.createElementVNode("div",Vc,[t.createVNode(t.unref(T.ElIcon),{onClick:V,class:"fs-6",style:t.normalizeStyle({color:c.value?"red":"white"})},{default:t.withCtx(()=>[c.value?(t.openBlock(),t.createBlock(t.unref(ie.StarFilled),{key:0})):(t.openBlock(),t.createBlock(t.unref(ie.Star),{key:1}))]),_:1},8,["style"]),t.unref(i).speaker.isSupper24K?(t.openBlock(),t.createElementBlock("span",Cc," 24K ")):t.createCommentVNode("",!0)])])]),t.createElementVNode("div",$c,[Tc,t.createElementVNode("div",Rc,[t.createElementVNode("span",null,t.toDisplayString(w.value),1),Dc,t.createElementVNode("span",null,t.toDisplayString(f.value),1)]),t.createVNode(t.unref(T.ElSlider),{max:u.value,modelValue:p.value,"onUpdate:modelValue":N[0]||(N[0]=$=>p.value=$),size:"small"},null,8,["max","modelValue"])])]),t.createElementVNode("div",Oc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(i).speaker.roles,($,I)=>(t.openBlock(),t.createElementBlock("div",{onClick:Q=>C($.value),key:I,class:t.normalizeClass(["rounded-pill px-1",{border:$.value===(t.unref(r).role||"")}])},t.toDisplayString($.label),11,Bc))),128))]),t.createElementVNode("ul",Pc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(i).speaker.styles,($,I)=>(t.openBlock(),t.createElementBlock("li",{class:"mx-2",onClick:Q=>b($.value),key:I},[t.createVNode(vc,{activate:$.value===(t.unref(r).style||""),data:$},null,8,["activate","data"])],8,Ic))),128))]),Mc,t.createElementVNode("div",Lc,[t.createElementVNode("div",null,[t.createElementVNode("span",null,"语速："+t.toDisplayString(h.value)+"x",1)]),t.createVNode(t.unref(T.ElSlider),{modelValue:h.value,"onUpdate:modelValue":N[1]||(N[1]=$=>h.value=$),min:m.value[0],max:m.value[1],step:.05,marks:E},null,8,["modelValue","min","max","marks"])]),t.createElementVNode("div",Ac,[t.createElementVNode("div",null,[t.createElementVNode("span",null,"语调："+t.toDisplayString(d.value),1)]),t.createVNode(t.unref(T.ElSlider),{modelValue:d.value,"onUpdate:modelValue":N[2]||(N[2]=$=>d.value=$),min:y.value[0],max:y.value[1],step:.2,marks:k},null,8,["modelValue","min","max","marks"])]),t.createElementVNode("div",null,[t.createElementVNode("ul",Fc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(a),($,I)=>(t.openBlock(),t.createElementBlock("li",{onClick:Q=>R($.value),key:I,class:t.normalizeClass(["rounded-pill px-1",{border:$.value===g.value}])},t.toDisplayString($.label),11,jc))),128))]),t.createElementVNode("ul",Hc,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(_.value,($,I)=>(t.openBlock(),t.createElementBlock("li",{onClick:Q=>B($),key:I},[t.createVNode(bo,{activate:$.name===t.unref(i).speaker.name,data:{...$,label:$.displayName,value:$.name}},null,8,["activate","data"])],8,Uc))),128))])])]))}});const Wc=W(zc,[["__scopeId","data-v-0210af00"]]),Gc=e=>(t.pushScopeId("data-v-f0208c5e"),e=e(),t.popScopeId(),e),qc={class:"box ms-2"},Yc={class:"try-play-header text-center d-flex flex-row justify-content-between"},Xc={class:"try-play-body d-flex flex-row"},Kc={class:"try-play-left w-50 border-right border-secondary"},Jc={class:"pe-1"},Qc=Gc(()=>t.createElementVNode("div",{class:"py-1 border-top border-secondary"},null,-1)),Zc={class:"try-play-right w-50 border-start rounded border-top border-secondary overflow-x-hidden overflow-y-auto scrollbar-none"},eu=t.defineComponent({__name:"try-play-panle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:n}){const o=e,r=t.ref(),s=t.ref(""),a=t.ref(),l=t.ref(),i=t.ref(He());t.onMounted(()=>{window.addEventListener("keydown",c)}),t.onUnmounted(()=>{window.addEventListener("keydown",c)}),t.watch(()=>o.visible,d=>{d&&setTimeout(()=>{h()},200)});function c(d){d.code==="Escape"&&o.visible&&m()}const{position:u}=St(l,{initialValue:{x:40,y:40}}),{style:p}=Ct(a,u);t.onMounted(()=>{u.value.x=(window.innerWidth-890)/2,u.value.y=(window.innerHeight-390)/2});function m(){n("update:visible",!1)}function h(){var d;(d=r.value)==null||d.focus()}function y(){i.value={...i.value,word:s.value}}return(d,f)=>t.withDirectives((t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:a,style:t.normalizeStyle([t.unref(p),{position:"fixed"}]),class:"try-play user-select-none card z-3 shadow"},[t.createElementVNode("div",qc,[t.createElementVNode("div",Yc,[t.createElementVNode("div",{ref_key:"handleRef",ref:l,class:"col-11 try-play-move"},null,512),t.createElementVNode("div",{onClick:m,class:"col-1 try-play-menu-close"},[t.createVNode(t.unref(T.ElIcon),{color:"white"},{default:t.withCtx(()=>[t.createVNode(t.unref(ie.Minus))]),_:1})])]),t.createElementVNode("div",Xc,[t.createElementVNode("div",Kc,[t.createElementVNode("div",Jc,[t.createVNode(t.unref(T.ElForm),{onSubmit:t.withModifiers(y,["prevent"])},{default:t.withCtx(()=>[t.createVNode(t.unref(T.ElInput),{"input-style":{color:"white"},ref_key:"searchInputRef",ref:r,modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=w=>s.value=w),placeholder:"输入名称搜索"},null,8,["modelValue"])]),_:1},8,["onSubmit"])]),t.createVNode(fc,{filter:i.value,"onUpdate:filter":f[1]||(f[1]=w=>i.value=w)},null,8,["filter"]),Qc,t.createVNode(lc,{filter:i.value},null,8,["filter"])]),t.createElementVNode("div",Zc,[t.createVNode(Wc)])])])],4)),[[t.vShow,d.visible]])}});const tu=W(eu,[["__scopeId","data-v-f0208c5e"]]),_o=t.defineComponent({__name:"try-play",setup(e){const n=t.ref(!0);function o(r){r||(n.value=!0)}return(r,s)=>(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.createVNode(tc,{visible:n.value,"onUpdate:visible":s[0]||(s[0]=a=>n.value=a)},null,8,["visible"]),t.createVNode(tu,{visible:!n.value,"onUpdate:visible":o},null,8,["visible"])]))}});const nu={install:e=>{e.component("PlayMenu",oo),e.component("PinyinMenu",ro),e.component("ContinuousMenu",so),e.component("ReadMenu",ao),e.component("DigitalMenu",lo),e.component("AliasMenu",io),e.component("EnglishMenu",co),e.component("ChangespeedMenu",uo),e.component("RhythmMenu",fo),e.component("SpecialMenu",po),e.component("MuteMenu",mo),e.component("BgmMenu",ho),e.component("SensitiveMenu",vo),e.component("ManagementMenu",yo),e.component("ConversionMenu",go),e.component("TryPlay",_o)}};var mt={exports:{}},ht={exports:{}};(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class o extends Error{constructor(_,V){super(_),this.cause=V}}n.ParsingError=o;let r;function s(){return c(!1)||h()||m()||p()}function a(){return f(/\s*/),c(!0)||m()||u()||i(!1)}function l(){const g=i(!0),_=[];let V,C=a();for(;C;){if(C.node.type==="Element"){if(V)throw new Error("Found multiple root nodes");V=C.node}C.excluded||_.push(C.node),C=a()}if(!V)throw new o("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new o("Failed to parse XML","Not Well-Formed XML");return{declaration:g?g.node:null,root:V,children:_}}function i(g){const _=f(g?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!_)return;const V={name:_[1],type:"ProcessingInstruction",attributes:{}};for(;!(w()||E("?>"));){const C=y();if(C)V.attributes[C.name]=C.value;else return}return f(/\?>/),{excluded:g?!1:r.options.filter(V)===!1,node:V}}function c(g){const _=f(/^<([^?!</>\s]+)\s*/);if(!_)return;const V={type:"Element",name:_[1],attributes:{},children:[]},C=g?!1:r.options.filter(V)===!1;for(;!(w()||E(">")||E("?>")||E("/>"));){const R=y();if(R)V.attributes[R.name]=R.value;else return}if(f(/^\s*\/>/))return V.children=null,{excluded:C,node:V};f(/\??>/);let b=s();for(;b;)b.excluded||V.children.push(b.node),b=s();if(r.options.strictMode){const R=`</${V.name}>`;if(r.xml.startsWith(R))r.xml=r.xml.slice(R.length);else throw new o("Failed to parse XML",`Closing tag not matching "${R}"`)}else f(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:C,node:V}}function u(){const g=f(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||f(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||f(/^<!DOCTYPE\s+\S+\s*>/);if(g){const _={type:"DocumentType",content:g[0]};return{excluded:r.options.filter(_)===!1,node:_}}}function p(){if(r.xml.startsWith("<![CDATA[")){const g=r.xml.indexOf("]]>");if(g>-1){const _=g+3,V={type:"CDATA",content:r.xml.substring(0,_)};return r.xml=r.xml.slice(_),{excluded:r.options.filter(V)===!1,node:V}}}}function m(){const g=f(/^<!--[\s\S]*?-->/);if(g){const _={type:"Comment",content:g[0]};return{excluded:r.options.filter(_)===!1,node:_}}}function h(){const g=f(/^([^<]+)/);if(g){const _={type:"Text",content:g[1]};return{excluded:r.options.filter(_)===!1,node:_}}}function y(){const g=f(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(g)return{name:g[1].trim(),value:d(g[2].trim())}}function d(g){return g.replace(/^['"]|['"]$/g,"")}function f(g){const _=r.xml.match(g);if(_)return r.xml=r.xml.slice(_[0].length),_}function w(){return r.xml.length===0}function E(g){return r.xml.indexOf(g)===0}function k(g,_={}){g=g.trim();const V=_.filter||(()=>!0);return r={xml:g,options:Object.assign(Object.assign({},_),{filter:V,strictMode:_.strictMode===!0})},l()}e.exports=k,n.default=k})(ht,ht.exports);var ou=ht.exports;(function(e,n){var o=ye&&ye.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(n,"__esModule",{value:!0});const r=o(ou);function s(d){if(!d.options.indentation&&!d.options.lineSeparator)return;d.content+=d.options.lineSeparator;let f;for(f=0;f<d.level;f++)d.content+=d.options.indentation}function a(d){d.content=d.content.replace(/ +$/,"");let f;for(f=0;f<d.level;f++)d.content+=d.options.indentation}function l(d,f){d.content+=f}function i(d,f,w){if(typeof d.content=="string")c(d.content,f,w);else if(d.type==="Element")p(d,f,w);else if(d.type==="ProcessingInstruction")h(d,f);else throw new Error("Unknown node type: "+d.type)}function c(d,f,w){if(!w){const E=d.trim();(f.options.lineSeparator||E.length===0)&&(d=E)}d.length>0&&(!w&&f.content.length>0&&s(f),l(f,d))}function u(d,f){const w="/"+d.join("/"),E=d[d.length-1];return f.includes(E)||f.includes(w)}function p(d,f,w){if(f.path.push(d.name),!w&&f.content.length>0&&s(f),l(f,"<"+d.name),m(f,d.attributes),d.children===null||f.options.forceSelfClosingEmptyTag&&d.children.length===0){const E=f.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";l(f,E)}else if(d.children.length===0)l(f,"></"+d.name+">");else{const E=d.children;l(f,">"),f.level++;let k=d.attributes["xml:space"]==="preserve",g=!1;if(!k&&f.options.ignoredPaths&&(g=u(f.path,f.options.ignoredPaths),k=g),!k&&f.options.collapseContent){let _=!1,V=!1,C=!1;E.forEach(function(b,R){b.type==="Text"?(b.content.includes(`
`)?(V=!0,b.content=b.content.trim()):(R===0||R===E.length-1)&&b.content.trim().length===0&&(b.content=""),b.content.trim().length>0&&(_=!0)):b.type==="CDATA"?_=!0:C=!0}),_&&(!C||!V)&&(k=!0)}E.forEach(function(_){i(_,f,w||k)}),f.level--,!w&&!k&&s(f),g&&a(f),l(f,"</"+d.name+">")}f.path.pop()}function m(d,f){Object.keys(f).forEach(function(w){const E=f[w].replace(/"/g,"&quot;");l(d," "+w+'="'+E+'"')})}function h(d,f){f.content.length>0&&s(f),l(f,"<?"+d.name),m(f,d.attributes),l(f,"?>")}function y(d,f={}){f.indentation="indentation"in f?f.indentation:"    ",f.collapseContent=f.collapseContent===!0,f.lineSeparator="lineSeparator"in f?f.lineSeparator:`\r
`,f.whiteSpaceAtEndOfSelfclosingTag=f.whiteSpaceAtEndOfSelfclosingTag===!0,f.throwOnFailure=f.throwOnFailure!==!1;try{const w=(0,r.default)(d,{filter:f.filter,strictMode:f.strictMode}),E={content:"",level:0,options:f,path:[]};return w.declaration&&h(w.declaration,E),w.children.forEach(function(k){i(k,E,!1)}),f.lineSeparator?E.content.replace(/\r\n/g,`
`).replace(/\n/g,f.lineSeparator):E.content}catch(w){if(f.throwOnFailure)throw w;return d}}y.minify=(d,f={})=>y(d,Object.assign(Object.assign({},f),{indentation:"",lineSeparator:""})),e.exports=y,n.default=y})(mt,mt.exports);var ru=mt.exports;const su=bt(ru),Ee=e=>(t.pushScopeId("data-v-fb2870b0"),e=e(),t.popScopeId(),e),au={class:"editor-title d-flex flex-row align-item-center justify-content-between"},lu={class:"title-wrapper d-flex flex-column justify-content-center ps-3"},iu=Ee(()=>t.createElementVNode("div",{class:"title-author pb-1"},"SSML编辑器",-1)),cu={class:"author d-flex flex-row align-items-center justify-content-start"},uu=Ee(()=>t.createElementVNode("div",null,"未保存",-1)),du=Ee(()=>t.createElementVNode("span",{class:"iconfont icon-play font-size-12 p-1"},null,-1)),fu=Ee(()=>t.createElementVNode("div",{class:"d-inline-block"},null,-1)),pu={class:"operation-wrapper d-flex flex-row justify-content-center align-items-center"},mu=Ee(()=>t.createElementVNode("div",{class:"menu-divider"},null,-1)),hu=Ee(()=>t.createElementVNode("div",{class:"px-1"},null,-1)),vu={class:"ssml-code border border-secondary-subtle rounded-2 px-2",style:{"white-space":"pre-wrap","max-height":"50vh"}},yu={class:"dialog-footer"},gu=t.defineComponent({__name:"editor-title",setup(e){const n=t.ref(!1),o=t.ref(""),{rootBackgroundaudio:r}=de(),s=t.computed(()=>su(o.value,{indentation:"    ",filter:u=>u.type!=="Comment",collapseContent:!0,lineSeparator:`
`})),a=()=>{o.value=We(),n.value=!0},l=()=>{r.src&&ue.play(r.src)},i=()=>{ue.stop(r.src),r.src="",r.remark=""};async function c(u){await navigator.clipboard.writeText(u?s.value:o.value),n.value=!1}return(u,p)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",au,[t.createElementVNode("div",lu,[iu,t.createElementVNode("div",cu,[uu,t.unref(r).src?(t.openBlock(),t.createBlock(t.unref(T.ElTag),{key:0,class:"bgm-txt ms-2",closable:"",size:"small",onClick:l,onClose:i},{default:t.withCtx(()=>[du,fu,t.createElementVNode("span",null,t.toDisplayString(t.unref(r).remark),1)]),_:1})):t.createCommentVNode("",!0)])]),t.createElementVNode("div",pu,[t.createVNode(t.unref(T.ElButton),{type:"primary",icon:t.unref(ie.Share),disabled:""},{default:t.withCtx(()=>[t.createTextVNode("分享")]),_:1},8,["icon"]),mu,t.createVNode(t.unref(T.ElButton),{type:"primary",onClick:a},{default:t.withCtx(()=>[t.createTextVNode("查看SSML")]),_:1}),t.createVNode(t.unref(T.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载音频")]),_:1}),t.createVNode(t.unref(T.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载视频")]),_:1}),t.createVNode(t.unref(T.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("下载字幕")]),_:1}),t.createVNode(t.unref(T.ElButton),{disabled:""},{default:t.withCtx(()=>[t.createTextVNode("声音转换")]),_:1}),hu])]),t.createVNode(t.unref(T.ElDialog),{modelValue:n.value,"onUpdate:modelValue":p[4]||(p[4]=m=>n.value=m),title:"查看SSML",width:"80%"},{header:t.withCtx(()=>[t.createVNode(t.unref(T.ElButton),{type:"info",onClick:p[0]||(p[0]=m=>c(!0))},{default:t.withCtx(()=>[t.createTextVNode("复制+关闭")]),_:1}),t.createVNode(t.unref(T.ElButton),{type:"primary",onClick:p[1]||(p[1]=m=>c(!1))},{default:t.withCtx(()=>[t.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})]),footer:t.withCtx(()=>[t.createElementVNode("span",yu,[t.createVNode(t.unref(T.ElButton),{type:"info",onClick:p[2]||(p[2]=m=>c(!0))},{default:t.withCtx(()=>[t.createTextVNode("复制+关闭")]),_:1}),t.createVNode(t.unref(T.ElButton),{type:"primary",onClick:p[3]||(p[3]=m=>c(!1))},{default:t.withCtx(()=>[t.createTextVNode("压缩+复制+关闭(推荐)")]),_:1})])]),default:t.withCtx(()=>[t.createElementVNode("pre",vu,t.toDisplayString(s.value),1)]),_:1},8,["modelValue"])],64))}});const bu=W(gu,[["__scopeId","data-v-fb2870b0"]]),_u=t.defineComponent({__name:"editor-core",emits:["created","change"],setup(e,{emit:n}){const{editor:o,setEditor:r,globalEditConfig:s}=H(),a=t.ref(null);t.onMounted(()=>{l()}),t.onUnmounted(()=>{o==null||o.destroy()});function l(){if(!a.value)return;const i=v.createEditor({selector:a.value,mode:"simple",config:{...t.toRaw(s.editorConfig),onCreated(c){n("created",c),K.emit(G.EDITOR_CREATED,c)},onChange(c){n("change",c)}}});r(i),i.on(P.ERROR,s.handleError)}return(i,c)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"boxRef",ref:a,class:"edit-core",style:{height:"70vh","overflow-y":"hidden"}},null,512))}}),wu={class:"bar-view border-bottom border-1"},Eu=t.defineComponent({__name:"bar-view",setup(e){return(n,o)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.createElementVNode("div",wu,[t.createVNode(t.unref(Kn),null,{default:t.withCtx(()=>[t.createVNode(t.unref(he),{divider:"green"},{default:t.withCtx(()=>[t.createVNode(t.unref(oo))]),_:1}),t.createVNode(t.unref(he),{divider:"cyan"},{default:t.withCtx(()=>[t.createVNode(t.unref(ro)),t.createVNode(t.unref(ao)),t.createVNode(t.unref(lo)),t.createVNode(t.unref(so)),t.createVNode(t.unref(io)),t.createVNode(t.unref(co))]),_:1}),t.createVNode(t.unref(he),{divider:"orange"},{default:t.withCtx(()=>[t.createVNode(t.unref(uo)),t.createVNode(t.unref(yo)),t.createVNode(t.unref(go))]),_:1}),t.createVNode(t.unref(he),{divider:"purple"},{default:t.withCtx(()=>[t.createVNode(t.unref(fo)),t.createVNode(t.unref(mo))]),_:1}),t.createVNode(t.unref(he),{divider:"yellow"},{default:t.withCtx(()=>[t.createVNode(t.unref(po)),t.createVNode(t.unref(ho))]),_:1})]),_:1})]),t.createVNode(t.unref(_o))],64))}}),xu={class:"editor-box"},ku={class:"editor-core-container shadow pt-1"},Su=t.defineComponent({__name:"editor-view",emits:["created","change"],setup(e,{emit:n}){const o=l=>{n("created",l)},r=l=>{n("change",l)};function s(l){K.emit(G.VIEW_CLICK,l)}function a(l){K.emit(G.VIEW_KEYDOWN,l)}return(l,i)=>(t.openBlock(),t.createElementBlock("div",{class:"editor-view",onClick:s,onKeydown:a},[t.renderSlot(l.$slots,"default",{},()=>[t.createVNode(bu)],!0),t.createElementVNode("div",xu,[t.createVNode(Eu),t.createElementVNode("div",ku,[t.createVNode(_u,{onChange:r,onCreated:o})])])],32))}});const wo=W(Su,[["__scopeId","data-v-b5e6df8c"]]),Nu={install(e){e.component("EditorView",wo)}},Vu={install(e,n){e.use(Ko()),e.use(()=>{const{setGlobalEditConfig:o}=H(),r=gt(n);o(r),K.on(G.ERROR,r.handleError)}),e.use(Zs),e.use(bl),e.use(nu),e.use(Nu)}};exports.AudioPlayer=jn;exports.CancellationTokenSource=ft;exports.DOMComment=Tr;exports.DOMElement=Rr;exports.DOMNode=$r;exports.DOMRange=Or;exports.DOMSelection=Br;exports.DOMStaticRange=Pr;exports.DOMText=Dr;exports.EMITTER_EVENT=G;exports.EditorView=wo;exports.FileSelector=Hn;exports.Timer=Un;exports.WANGEDITOR_EVENT=P;exports.audioPlayer=ue;exports.createGlobalEditorConfig=gt;exports.default=Vu;exports.defaultFilterSpeaker=He;exports.defaultLabelValue=ea;exports.defaultSpeaker=zn;exports.demoAvatar=be;exports.formatTime=dt;exports.genRandomStr=Mr;exports.pitch=Pn;exports.serializeToSSML=We;exports.speed=Bn;
