"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("vue"),p=require("@wangeditor/editor"),b=require("element-plus"),Je=require("@element-plus/icons-vue"),Qe={class:"button"},Ye={class:"content"},et=o.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const n=t,r=o.inject("editor"),s=()=>{!n.disabled&&r&&e("click",r==null?void 0:r.value)};return(i,l)=>(o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["btn bar-button",{disabled:i.disabled}]),onClick:s,onMousedown:l[0]||(l[0]=o.withModifiers(()=>{},["prevent"]))},[o.createElementVNode("div",Qe,[o.createElementVNode("span",{class:o.normalizeClass(["font-size-30 iconfont-moyin",[`moyin-icon_${i.icon}`]])},null,2)]),o.createElementVNode("div",Ye,o.toDisplayString(i.text),1)],34))}});const B=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},k=B(et,[["__scopeId","data-v-94376aa5"]]);const W=o.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(t,{expose:e,emit:n}){const r=o.ref(""),s=o.ref();function i(){s.value.focus()}function l(){n("submit",r.value),r.value=""}return e({focus:i}),(d,f)=>(o.openBlock(),o.createBlock(o.unref(b.ElForm),{class:"flex flex-row",onSubmit:o.withModifiers(l,["prevent"])},{default:o.withCtx(()=>[o.createVNode(o.unref(b.ElInput),{type:d.type,ref_key:"inputRef",ref:s,modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=a=>r.value=a)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}});const _e=o.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(t){return(e,n)=>(o.openBlock(),o.createBlock(o.unref(b.ElPopover),{hideAfter:e.hideAfter,width:e.width,visible:e.visible,trigger:e.trigger,"onUpdate:visible":n[0]||(n[0]=r=>e.$emit("update:visible",r))},{reference:o.withCtx(()=>[o.renderSlot(e.$slots,"reference")]),default:o.withCtx(()=>[o.renderSlot(e.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}});const A=t=>(o.pushScopeId("data-v-889b5093"),t=t(),o.popScopeId(),t),tt={class:"search-content"},nt={class:"menu"},rt=A(()=>o.createElementVNode("div",{class:"h h-1"},null,-1)),ot={class:"flex flex-row"},st=A(()=>o.createElementVNode("div",{class:"h-1"},null,-1)),it={class:"content flex flex-col"},lt=["onClick"],at=A(()=>o.createElementVNode("div",{class:"w-2"},null,-1)),ut=A(()=>o.createElementVNode("span",{class:"iconfont icon-play"},null,-1)),ct=A(()=>o.createElementVNode("div",{class:"w-1"},null,-1)),ft=o.defineComponent({__name:"search-content",props:{menuItemLabel:{},scenes:{},styles:{},dataList:{}},emits:["submit","fetch"],setup(t,{emit:e}){const n=o.ref(""),r=o.ref(""),s=o.ref(""),i=o.ref("first");function l(){e("fetch",{search:n.value,menuKey:i.value,scene:r.value,style:s.value})}function d(a){i.value=a,l()}function f(a){e("submit",a)}return(a,u)=>(o.openBlock(),o.createElementBlock("div",tt,[o.createVNode(o.unref(b.ElForm),{onSubmit:o.withModifiers(l,["prevent"])},{default:o.withCtx(()=>[o.createVNode(o.unref(b.ElInput),{placeholder:"搜索",modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),"suffix-icon":o.unref(Je.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"]),o.createElementVNode("div",nt,[o.createVNode(o.unref(b.ElMenu),{mode:"horizontal","default-active":"first",onSelect:u[1]||(u[1]=c=>d(c))},{default:o.withCtx(()=>[o.createVNode(o.unref(b.ElMenuItem),{index:"first"},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(a.menuItemLabel.first),1)]),_:1}),o.createVNode(o.unref(b.ElMenuItem),{index:"second"},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(a.menuItemLabel.second),1)]),_:1}),o.createVNode(o.unref(b.ElMenuItem),{index:"last"},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(a.menuItemLabel.last),1)]),_:1})]),_:1})]),rt,o.createElementVNode("div",ot,[o.createVNode(o.unref(b.ElSelect),{modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=c=>r.value=c),onChange:l,class:"m m-2",size:"large"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(a.scenes,c=>(o.openBlock(),o.createBlock(o.unref(b.ElOption),{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o.createVNode(o.unref(b.ElSelect),{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=c=>s.value=c),onChange:l,class:"m m-2",size:"large"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(a.styles,c=>(o.openBlock(),o.createBlock(o.unref(b.ElOption),{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),st,o.createElementVNode("div",it,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(a.dataList,(c,m)=>(o.openBlock(),o.createElementBlock("div",{onClick:g=>f(c),class:"btn full p-4 item",key:m},[at,ut,ct,o.createElementVNode("div",null,o.toDisplayString(c.label),1)],8,lt))),128))])]))}});const $=B(ft,[["__scopeId","data-v-889b5093"]]);function dt(t,e){let n,r,s;const i=o.ref(!0),l=()=>{i.value=!0,s()};o.watch(t,l,{flush:"sync"});const d=typeof e=="function"?e:e.get,f=typeof e=="function"?void 0:e.set,a=o.customRef((u,c)=>(r=u,s=c,{get(){return i.value&&(n=d(),i.value=!1),r(),n},set(m){f==null||f(m)}}));return Object.isExtensible(a)&&(a.trigger=l),a}function ke(t){return o.getCurrentScope()?(o.onScopeDispose(t),!0):!1}function X(t){return typeof t=="function"?t():o.unref(t)}const pt=typeof window<"u",mt=()=>{};function Ce(t,e=!0){o.getCurrentInstance()?o.onMounted(t):e?t():o.nextTick(t)}function I(t){var e;const n=X(t);return(e=n==null?void 0:n.$el)!=null?e:n}const De=pt?window:void 0;function ee(...t){let e,n,r,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,s]=t,e=De):[e,n,r,s]=t,!e)return mt;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],l=()=>{i.forEach(u=>u()),i.length=0},d=(u,c,m,g)=>(u.addEventListener(c,m,g),()=>u.removeEventListener(c,m,g)),f=o.watch(()=>[I(e),X(s)],([u,c])=>{l(),u&&i.push(...n.flatMap(m=>r.map(g=>d(u,m,g,c))))},{immediate:!0,flush:"post"}),a=()=>{f(),l()};return ke(a),a}function vt(){const t=o.ref(!1);return o.getCurrentInstance()&&o.onMounted(()=>{t.value=!0}),t}function ht(t){const e=vt();return o.computed(()=>(e.value,!!t()))}function gt(){const t=o.getCurrentInstance(),e=dt(()=>null,()=>t.proxy.$el);return o.onUpdated(e.trigger),o.onMounted(e.trigger),e}var te=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,wt=(t,e)=>{var n={};for(var r in t)bt.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&te)for(var r of te(t))e.indexOf(r)<0&&yt.call(t,r)&&(n[r]=t[r]);return n};function St(t,e,n={}){const r=n,{window:s=De}=r,i=wt(r,["window"]);let l;const d=ht(()=>s&&"ResizeObserver"in s),f=()=>{l&&(l.disconnect(),l=void 0)},a=o.computed(()=>Array.isArray(t)?t.map(m=>I(m)):[I(t)]),u=o.watch(a,m=>{if(f(),d.value&&s){l=new ResizeObserver(e);for(const g of m)g&&l.observe(g,i)}},{immediate:!0,flush:"post",deep:!0}),c=()=>{f(),u()};return ke(c),{isSupported:d,stop:c}}function xt(t,e={}){const{reset:n=!0,windowResize:r=!0,windowScroll:s=!0,immediate:i=!0}=e,l=o.ref(0),d=o.ref(0),f=o.ref(0),a=o.ref(0),u=o.ref(0),c=o.ref(0),m=o.ref(0),g=o.ref(0);function y(){const x=I(t);if(!x){n&&(l.value=0,d.value=0,f.value=0,a.value=0,u.value=0,c.value=0,m.value=0,g.value=0);return}const w=x.getBoundingClientRect();l.value=w.height,d.value=w.bottom,f.value=w.left,a.value=w.right,u.value=w.top,c.value=w.width,m.value=w.x,g.value=w.y}return St(t,y),o.watch(()=>I(t),x=>!x&&y()),s&&ee("scroll",y,{capture:!0,passive:!0}),r&&ee("resize",y,{passive:!0}),Ce(()=>{i&&y()}),{height:l,bottom:d,left:f,right:a,top:u,width:c,x:m,y:g,update:y}}function Et(t=gt()){const e=o.shallowRef(),n=()=>{const r=I(t);r&&(e.value=r.parentElement)};return Ce(n),o.watch(()=>X(t),n),e}const _t={class:"content"},kt=o.defineComponent({__name:"top-panel",setup(t,{expose:e}){const n=o.ref(!1),r=Et(),{top:s,left:i}=xt(r),l=o.computed(()=>`top:${s.value}px;left:${i.value}px`);function d(){n.value=!0}function f(){n.value=!1}return e({show:d,hide:f}),(a,u)=>o.withDirectives((o.openBlock(),o.createElementBlock("div",{class:"panel",style:o.normalizeStyle(l.value)},[o.createVNode(o.unref(b.ElCard),null,{default:o.withCtx(()=>[o.createElementVNode("div",_t,[o.renderSlot(a.$slots,"default",{},void 0,!0)])]),_:3})],4)),[[o.vShow,n.value]])}});const Ne=B(kt,[["__scopeId","data-v-298dc86b"]]),Ct={},Dt={class:"content"};function Nt(t,e){return o.openBlock(),o.createElementBlock("div",Dt)}const Ve=B(Ct,[["render",Nt]]),Vt={},Mt={class:"bar-wrapper-item"};function Tt(t,e){return o.openBlock(),o.createElementBlock("div",Mt,[o.renderSlot(t.$slots,"default")])}const Me=B(Vt,[["render",Tt]]),Ot={class:"bar-wrapper-group"},It={class:"group-items"},Bt=o.defineComponent({__name:"bar-wrapper-group",props:{divider:{default:"green"}},setup(t){return(e,n)=>(o.openBlock(),o.createElementBlock("div",Ot,[o.createElementVNode("div",{class:o.normalizeClass(["divider",[e.divider]])},null,2),o.createElementVNode("div",It,[o.renderSlot(e.$slots,"default",{},void 0,!0)])]))}});const Te=B(Bt,[["__scopeId","data-v-74379d98"]]),Lt={install(t){t.component("BarButton",k),t.component("BarInput",W),t.component("BarPopover",_e),t.component("BarSearch",$),t.component("TopPanel",Ne),t.component("BarWrapper",Ve),t.component("BarWrapperItem",Me),t.component("BarWrapperGroup",Te)}};let At=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function C(t="r"){return`${t}-${At()}`}var P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oe="Expected a function",ne=0/0,Ft="[object Symbol]",jt=/^\s+|\s+$/g,Rt=/^[-+]0x[0-9a-f]+$/i,Wt=/^0b[01]+$/i,$t=/^0o[0-7]+$/i,Ht=parseInt,Ut=typeof P=="object"&&P&&P.Object===Object&&P,qt=typeof self=="object"&&self&&self.Object===Object&&self,zt=Ut||qt||Function("return this")(),Gt=Object.prototype,Kt=Gt.toString,Xt=Math.max,Zt=Math.min,q=function(){return zt.Date.now()};function Jt(t,e,n){var r,s,i,l,d,f,a=0,u=!1,c=!1,m=!0;if(typeof t!="function")throw new TypeError(Oe);e=re(e)||0,j(n)&&(u=!!n.leading,c="maxWait"in n,i=c?Xt(re(n.maxWait)||0,e):i,m="trailing"in n?!!n.trailing:m);function g(S){var V=r,L=s;return r=s=void 0,a=S,l=t.apply(L,V),l}function y(S){return a=S,d=setTimeout(N,e),u?g(S):l}function x(S){var V=S-f,L=S-a,Y=e-V;return c?Zt(Y,i-L):Y}function w(S){var V=S-f,L=S-a;return f===void 0||V>=e||V<0||c&&L>=i}function N(){var S=q();if(w(S))return T(S);d=setTimeout(N,x(S))}function T(S){return d=void 0,m&&r?g(S):(r=s=void 0,l)}function O(){d!==void 0&&clearTimeout(d),a=0,r=f=s=d=void 0}function Ze(){return d===void 0?l:T(q())}function U(){var S=q(),V=w(S);if(r=arguments,s=this,f=S,V){if(d===void 0)return y(f);if(c)return d=setTimeout(N,e),g(f)}return d===void 0&&(d=setTimeout(N,e)),l}return U.cancel=O,U.flush=Ze,U}function Qt(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(Oe);return j(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),Jt(t,e,{leading:r,maxWait:e,trailing:s})}function j(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Yt(t){return!!t&&typeof t=="object"}function en(t){return typeof t=="symbol"||Yt(t)&&Kt.call(t)==Ft}function re(t){if(typeof t=="number")return t;if(en(t))return ne;if(j(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=j(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(jt,"");var n=Wt.test(t);return n||$t.test(t)?Ht(t.slice(2),n?2:8):Rt.test(t)?ne:+t}var tn=Qt;const nn=Pt(tn);function oe(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Z(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(function(n){typeof t[n]>"u"?t[n]=e[n]:oe(e[n])&&oe(t[n])&&Object.keys(e[n]).length>0&&Z(t[n],e[n])})}var Ie={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function J(){var t=typeof document<"u"?document:{};return Z(t,Ie),t}var rn={document:Ie,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout>"u"||clearTimeout(t)}};function Be(){var t=typeof window<"u"?window:{};return Z(t,rn),t}function on(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},G(t)}function R(t,e){return R=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},R(t,e)}function sn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(t,e,n){return sn()?F=Reflect.construct:F=function(s,i,l){var d=[null];d.push.apply(d,i);var f=Function.bind.apply(s,d),a=new f;return l&&R(a,l.prototype),a},F.apply(null,arguments)}function ln(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function K(t){var e=typeof Map=="function"?new Map:void 0;return K=function(r){if(r===null||!ln(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return F(r,arguments,G(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),R(s,r)},K(t)}function an(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t){var e=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return e},set:function(r){e.__proto__=r}})}var M=function(t){on(e,t);function e(n){var r;return r=t.call.apply(t,[this].concat(n))||this,un(an(r)),r}return e}(K(Array));function Q(t){t===void 0&&(t=[]);var e=[];return t.forEach(function(n){Array.isArray(n)?e.push.apply(e,Q(n)):e.push(n)}),e}function cn(t){for(var e=[],n=0;n<t.length;n+=1)e.indexOf(t[n])===-1&&e.push(t[n]);return e}function fn(t){return t.toLowerCase().replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function dn(t,e){if(typeof t!="string")return[t];for(var n=[],r=e.querySelectorAll(t),s=0;s<r.length;s+=1)n.push(r[s]);return n}function h(t,e){var n=Be(),r=J(),s=[];if(!e&&t instanceof M)return t;if(!t)return new M(s);if(typeof t=="string"){var i=t.trim();if(i.indexOf("<")>=0&&i.indexOf(">")>=0){var l="div";i.indexOf("<li")===0&&(l="ul"),i.indexOf("<tr")===0&&(l="tbody"),(i.indexOf("<td")===0||i.indexOf("<th")===0)&&(l="tr"),i.indexOf("<tbody")===0&&(l="table"),i.indexOf("<option")===0&&(l="select");var d=r.createElement(l);d.innerHTML=i;for(var f=0;f<d.childNodes.length;f+=1)s.push(d.childNodes[f])}else s=dn(t.trim(),e||r)}else if(t.nodeType||t===n||t===r)s.push(t);else if(Array.isArray(t)){if(t instanceof M)return t;s=t}return new M(cn(s))}h.fn=M.prototype;function se(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Q(e.map(function(s){return s.split(" ")}));return this.forEach(function(s){var i;(i=s.classList).add.apply(i,r)}),this}function ie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Q(e.map(function(s){return s.split(" ")}));return this.forEach(function(s){var i;(i=s.classList).remove.apply(i,r)}),this}function le(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n+=1)if(arguments.length===2)this[n].setAttribute(t,e);else for(var r in t)this[n][r]=t[r],this[n].setAttribute(r,t[r]);return this}function ae(){var t=this[0];if(t){var e={};if(t.dataset)for(var n in t.dataset)e[n]=t.dataset[n];else for(var r=0;r<t.attributes.length;r+=1){var s=t.attributes[r];s.name.indexOf("data-")>=0&&(e[fn(s.name.split("data-")[1])]=s.value)}for(var i in e)e[i]==="false"?e[i]=!1:e[i]==="true"?e[i]=!0:parseFloat(e[i])===e[i]*1&&(e[i]*=1);return e}}function ue(t){if(typeof t>"u"){var e=this[0];if(!e)return;if(e.multiple&&e.nodeName.toLowerCase()==="select"){for(var n=[],r=0;r<e.selectedOptions.length;r+=1)n.push(e.selectedOptions[r].value);return n}return e.value}for(var s=0;s<this.length;s+=1){var i=this[s];if(Array.isArray(t)&&i.multiple&&i.nodeName.toLowerCase()==="select")for(var l=0;l<i.options.length;l+=1)i.options[l].selected=t.indexOf(i.options[l].value)>=0;else i.value=t}return this}function ce(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],s=e[1],i=e[2],l=e[3];typeof e[1]=="function"&&(r=e[0],i=e[1],l=e[2],s=void 0),l||(l=!1);function d(x){var w=x.target;if(w){var N=x.target.dom7EventData||[];if(N.indexOf(x)<0&&N.unshift(x),h(w).is(s))i.apply(w,N);else for(var T=h(w).parents(),O=0;O<T.length;O+=1)h(T[O]).is(s)&&i.apply(T[O],N)}}function f(x){var w=x&&x.target?x.target.dom7EventData||[]:[];w.indexOf(x)<0&&w.unshift(x),i.apply(this,w)}for(var a=r.split(" "),u,c=0;c<this.length;c+=1){var m=this[c];if(s)for(u=0;u<a.length;u+=1){var y=a[u];m.dom7LiveListeners||(m.dom7LiveListeners={}),m.dom7LiveListeners[y]||(m.dom7LiveListeners[y]=[]),m.dom7LiveListeners[y].push({listener:i,proxyListener:d}),m.addEventListener(y,d,l)}else for(u=0;u<a.length;u+=1){var g=a[u];m.dom7Listeners||(m.dom7Listeners={}),m.dom7Listeners[g]||(m.dom7Listeners[g]=[]),m.dom7Listeners[g].push({listener:i,proxyListener:f}),m.addEventListener(g,f,l)}}return this}function fe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],s=e[1],i=e[2],l=e[3];typeof e[1]=="function"&&(r=e[0],i=e[1],l=e[2],s=void 0),l||(l=!1);for(var d=r.split(" "),f=0;f<d.length;f+=1)for(var a=d[f],u=0;u<this.length;u+=1){var c=this[u],m=void 0;if(!s&&c.dom7Listeners?m=c.dom7Listeners[a]:s&&c.dom7LiveListeners&&(m=c.dom7LiveListeners[a]),m&&m.length)for(var g=m.length-1;g>=0;g-=1){var y=m[g];i&&y.listener===i||i&&y.listener&&y.listener.dom7proxy&&y.listener.dom7proxy===i?(c.removeEventListener(a,y.proxyListener,l),m.splice(g,1)):i||(c.removeEventListener(a,y.proxyListener,l),m.splice(g,1))}}return this}function de(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function pe(t){return t?(this.forEach(function(e,n){t.apply(e,[e,n])}),this):this}function me(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function ve(t){var e=Be(),n=J(),r=this[0],s,i;if(!r||typeof t>"u")return!1;if(typeof t=="string"){if(r.matches)return r.matches(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);for(s=h(t),i=0;i<s.length;i+=1)if(s[i]===r)return!0;return!1}if(t===n)return r===n;if(t===e)return r===e;if(t.nodeType||t instanceof M){for(s=t.nodeType?[t]:t,i=0;i<s.length;i+=1)if(s[i]===r)return!0;return!1}return!1}function he(){for(var t,e=J(),n=0;n<arguments.length;n+=1){t=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if(typeof t=="string"){var s=e.createElement("div");for(s.innerHTML=t;s.firstChild;)this[r].appendChild(s.firstChild)}else if(t instanceof M)for(var i=0;i<t.length;i+=1)this[r].appendChild(t[i]);else this[r].appendChild(t)}return this}function ge(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)t?h(r).is(t)&&e.push(r):e.push(r),r=r.parentNode;return h(e)}function be(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(t),s=0;s<r.length;s+=1)e.push(r[s]);return h(e)}function ye(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].children,s=0;s<r.length;s+=1)(!t||h(r[s]).is(t))&&e.push(r[s]);return h(e)}var pn="resize scroll".split(" ");function Le(t){function e(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(typeof r[0]>"u"){for(var i=0;i<this.length;i+=1)pn.indexOf(t)<0&&(t in this[i]?this[i][t]():h(this[i]).trigger(t));return this}return this.on.apply(this,[t].concat(r))}return e}var we=Le("click"),Se=Le("focus");de&&(h.fn.hide=de);he&&(h.fn.append=he);we&&(h.fn.click=we);ce&&(h.fn.on=ce);fe&&(h.fn.off=fe);Se&&(h.fn.focus=Se);le&&(h.fn.attr=le);ue&&(h.fn.val=ue);me&&(h.fn.html=me);ae&&(h.fn.dataset=ae);se&&(h.fn.addClass=se);ie&&(h.fn.removeClass=ie);ye&&(h.fn.children=ye);pe&&(h.fn.each=pe);be&&(h.fn.find=be);ve&&(h.fn.is=ve);ge&&(h.fn.parents=ge);const mn=globalThis.Node,vn=globalThis.Comment,hn=globalThis.Element,gn=globalThis.Text,bn=globalThis.Range,yn=globalThis.Selection,wn=globalThis.StaticRange;function Ae(t,e,n,r,s){h("body").on("click",`#${r}-${e}`,nn(i=>{i.preventDefault();const l=xn(t,n,r);return l&&s(l)}))}function D(t,e,n,r){return Ae(t,"close",e,n,r)}function Sn(t,e,n,r){return Ae(t,"play",e,n,r)}function xn(t,e,n){const[r]=p.SlateEditor.nodes(t,{at:[],match:s=>!p.SlateElement.isElement(s)||!p.DomEditor.checkNodeType(s,e)?!1:s.domId===n});return r}function H(t,e,n){const r=p.SlateEditor.previous(t,{at:e[1],match:s=>p.SlateText.isText(s)});r!=null&&(p.SlateTransforms.insertText(t,n(e[0]),{at:p.SlateEditor.end(t,r[1])}),p.SlateTransforms.delete(t,{at:p.SlatePath.next(r[1])}))}function En(){return C("w-e-dom-speaker")}let _n=class{getValue(e){const{selection:n}=e;return n==null?null:p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;if(n==null||p.SlateRange.isCollapsed(n))return!0;const r=p.SlateEditor.string(e,n);return r.length!=1||!/^[\u4E00-\u9FA5]+$/gi.test(r)}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s=this.getValue(e);if(s==null)return;const i={type:"ssml-p",domId:En(),word:s,phoneme:n,remark:n,bgColor:"speaker",children:[{text:""}]};p.SlateTransforms.delete(e),p.SlateTransforms.insertNodes(e,i),e.move(1),D(e,"ssml-p",i.domId,l=>{H(e,l,d=>d.word)})}};function kn(t){const e={我:[{id:"1",text:"wo1",remark:"wo1"},{id:"2",text:"wo2",remark:"wo2"},{id:"3",text:"wo3",remark:"wo3"}],的:[{id:"1",text:"de1",remark:"de1"},{id:"2",text:"de2",remark:"de2"},{id:"3",text:"de3",remark:"de3"}]};return Promise.resolve(e[t]||e.我)}const Pe=o.defineComponent({emits:["error"],props:["fetch"],setup(t,{emit:e}){const n=new _n,r=o.inject("editor"),s=o.ref([]),i=o.ref(!1);function l(){i.value||(i.value=!0)}function d(){i.value&&(i.value=!1)}async function f(a){const u=n.getValue(a);if(u?s.value=await(t.fetch||kn)(u):s.value=[],n.isDisabled(a))return e("error","选中一个中文字符，并且有不能在其他语句之内");if(s.value.length==0)return e("error","选中的字符没有不是多音字");l()}return()=>o.createVNode(b.ElPopover,{visible:i.value,"onUpdate:visible":a=>i.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>o.createVNode(k,{text:"多音字",icon:"speaker",onClick:f},null),default:()=>o.createVNode("div",{class:"flex flex-col"},[s.value.map(({id:a,text:u})=>o.createVNode("div",{key:a,class:"btn full",onClick:()=>{n.isDisabled(r==null?void 0:r.value)||n.exec(r==null?void 0:r.value,u),d()},onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});function Cn(){return C("w-e-dom-continuous")}class Dn{getValue(e){const{selection:n}=e;return n==null?"":p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;return!!(n==null||p.SlateRange.isCollapsed(n)||p.SlateEditor.string(e,n).length<2)}exec(e){if(this.isDisabled(e))return;const{selection:n}=e;if(n==null)return;const r=this.getValue(e);if(r==null)return;const s={type:"ssml-w",domId:Cn(),children:[{text:r}],remark:"连读",bgColor:"continuous"};p.SlateTransforms.delete(e),p.SlateTransforms.insertNodes(e,s),D(e,"ssml-w",s.domId,i=>{p.SlateTransforms.unwrapNodes(e,{at:i[1]})})}}const Fe=o.defineComponent({emits:["error"],setup(t,{emit:e}){const n=new Dn;function r(s){if(n.isDisabled(s))return e("error","请选择多个中文字符或者多个多个英文单词");n.exec(s)}return()=>o.createVNode(k,{text:"连读",icon:"continuous",onClick:r},null)}});function Nn(){return C("w-e-dom-read")}class Vn{getValue(e){const{selection:n}=e;return n==null?"":p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;return!!(n==null||p.SlateRange.isCollapsed(n)||p.SlateEditor.string(e,n).length<=0)}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s=this.getValue(e);if(s==null)return;const i={type:"ssml-w",domId:Nn(),phoneme:n.id,remark:n.remark,value:s,bgColor:"read",children:[{text:s}]};p.SlateTransforms.delete(e),p.SlateTransforms.insertNodes(e,i),D(e,"ssml-w",i.domId,l=>H(e,l,()=>s))}}const Mn=[{id:"z",text:"重音",remark:"重"},{id:"t",text:"拖音",remark:"拖"},{id:"all",text:"重音+拖音",remark:"重+拖"}],je=o.defineComponent({emits:["error"],setup(t,{emit:e}){const n=new Vn,r=o.inject("editor"),s=o.ref(!1);function i(){s.value||(s.value=!0)}function l(){s.value&&(s.value=!1)}function d(f){if(n.isDisabled(f)){e("error","请先选择文本");return}i()}return()=>o.createVNode(b.ElPopover,{visible:s.value,"onUpdate:visible":f=>s.value=f,trigger:"contextmenu",hideAfter:0},{reference:()=>o.createVNode(k,{text:"重音",icon:"read",onClick:d},null),default:()=>o.createVNode("div",{class:"flex flex-col",onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[Mn.map(({id:f,text:a,remark:u})=>o.createVNode("div",{key:f,class:"btn full",onClick:()=>{n.isDisabled(r==null?void 0:r.value)||n.exec(r==null?void 0:r.value,{id:f,text:a,remark:u}),l()},onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});function Tn(){return C("w-e-dom-digital")}class On{getValue(e){const{selection:n}=e;return n==null?"":p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;if(n==null||p.SlateRange.isCollapsed(n))return!0;const r=p.SlateEditor.string(e,n);return!!(r.length<=0||Number.isNaN(Number(r)))}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s=this.getValue(e);if(s==null)return;const i={type:"ssml-say-as",domId:Tn(),interpretAs:n.id,remark:n.remark,bgColor:"digital",children:[{text:s}]};p.SlateTransforms.delete(e),p.SlateTransforms.insertNodes(e,i),D(e,"ssml-say-as",i.domId,l=>{p.SlateTransforms.unwrapNodes(e,{at:l[1]})})}}const In=[{id:"value",text:"读数值",remark:"读数值"},{id:"digits",text:"读数字",remark:"读数字"},{id:"telephone",text:"读手机号",remark:"读手机号"}],Re=o.defineComponent({emits:["error"],setup(t,{emit:e}){const n=new On,r=o.inject("editor"),s=o.ref(!1);function i(){s.value=!s.value}function l(d){if(n.isDisabled(d)){e("error","请选择纯数字文本");return}i()}return()=>o.createVNode(b.ElPopover,{visible:s.value,"onUpdate:visible":d=>s.value=d,trigger:"contextmenu",hideAfter:0},{reference:()=>o.createVNode(k,{text:"数字符号",icon:"digital",onClick:l},null),default:()=>o.createVNode("div",{class:"flex flex-col"},[In.map(({id:d,text:f,remark:a})=>o.createVNode("div",{key:d,class:"btn radius ssml-menu item full",onClick:()=>{n.isDisabled(r==null?void 0:r.value)||n.exec(r==null?void 0:r.value,{id:d,text:f,remark:a}),i()},onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[f]))])})}});function Bn(){return C("w-e-dom-alias")}class Ln{getValue(e){const{selection:n}=e;return n==null?null:p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;return!!(n==null||p.SlateRange.isCollapsed(n)||p.SlateEditor.string(e,n).length<=0)}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s=this.getValue(e);if(s==null)return;const i={type:"ssml-sub",domId:Bn(),remark:`(${n})`,alias:n,value:s,bgColor:"alias",children:[{text:""}]};p.SlateTransforms.delete(e),p.SlateTransforms.insertNodes(e,i),D(e,"ssml-sub",i.domId,l=>H(e,l,d=>d.value))}}const We=o.defineComponent({emits:["error"],setup(t,{emit:e}){const n=new Ln,r=o.inject("editor"),s=o.ref(),i=o.ref(!1),l=o.shallowRef();function d(){i.value||(i.value=!0)}function f(){i.value&&(i.value=!1)}async function a(c){if(n.isDisabled(c)){e("error","选中一个中文字符，并且有不能在其他语句之内");return}d(),l.value=c.selection,s.value.focus()}function u(c){f();const m=r==null?void 0:r.value;!m||!c||(m.select(l.value),!n.isDisabled(m)&&n.exec(m,c))}return()=>o.createVNode(b.ElPopover,{visible:i.value,"onUpdate:visible":c=>i.value=c,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>o.createVNode(k,{text:"别名",icon:"alias",onClick:a},null),default:()=>o.createVNode(W,{ref:s,onSubmit:u},null)})}});function An(t){const{selection:e}=t;if(e){const[n,r]=p.SlateRange.edges(e),s=p.SlateEditor.range(t,n,r),i=p.SlateEditor.string(t,s),l=i.trimEnd();if(l!==i){const d=i.length-l.length,f={...r,offset:r.offset-d},a={...e,anchor:n,focus:f};p.SlateTransforms.select(t,a)}}}function Pn(){return C("w-e-dom-english")}class Fn{getValue(e){const{selection:n}=e;return n==null?null:p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;if(n==null||p.SlateRange.isCollapsed(n))return!0;const r=p.SlateEditor.string(e,n);return r.length<=0||!/^[A-Za-z]+$/gi.test(r)}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s=this.getValue(e);if(s==null)return;const i={type:"ssml-p",domId:Pn(),word:s,phoneme:n,remark:n,bgColor:"english",children:[{text:""}]};p.SlateTransforms.delete(e),p.SlateTransforms.insertNodes(e,i),e.move(1),D(e,"ssml-p",i.domId,l=>H(e,l,d=>d.word))}}function jn(t){const e={translate:[{id:"1",text:"wərd",remark:"wərd"}],global:[{id:"2",text:"ˈɡlōbəl",remark:"ˈɡlōbəl"}]};return Promise.resolve(e[t]||e.translate)}const $e=o.defineComponent({emits:["error"],props:["popover","fetch"],setup(t,{emit:e}){const n=new Fn,r=o.inject("editor"),s=o.ref([]),i=o.ref(!1);function l(){i.value||(i.value=!0)}function d(){i.value&&(i.value=!1)}async function f(a){if(An(a),n.isDisabled(a))return e("error","请选择英文单词");const u=n.getValue(a);if(u){if(s.value=await(t.fetch||jn)(u),s.value.length<=0)return e("error","找不到单词的音标");l()}}return()=>o.createVNode(b.ElPopover,{visible:i.value,trigger:"contextmenu",hideAfter:0},{reference:()=>o.createVNode(k,{text:"音标",icon:"english",onClick:f},null),default:()=>o.createVNode("div",{class:"flex flex-col"},[s.value.map(({id:a,text:u})=>o.createVNode("div",{key:a,class:"btn full",onClick:()=>{n.isDisabled(r==null?void 0:r.value)||n.exec(r==null?void 0:r.value,u),d()},onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});function Rn(){return C("w-e-dom-changespeed")}class Wn{getValue(e){const{selection:n}=e;return n==null?null:p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;return!!(n==null||p.SlateRange.isCollapsed(n)||p.SlateEditor.string(e,n).length<=1)}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s=this.getValue(e);if(s==null)return;const i={type:"ssml-prosody",domId:Rn(),remark:n,rate:n,bgColor:"changespeed",children:[{text:s}]};p.SlateTransforms.delete(e),p.SlateTransforms.insertNodes(e,i),D(e,"ssml-prosody",i.domId,l=>{p.SlateTransforms.unwrapNodes(e,{at:l[1]})})}}function $n(){const t=[];for(let e=2;e<=40;e++){const n=`${(e*.05).toFixed(2)}x`;t.push({id:e.toString(),text:n,remark:n})}return Promise.resolve(t)}const He=o.defineComponent({emits:["error"],setup(t,{emit:e}){const n=new Wn,r=o.inject("editor"),s=o.ref([]),i=o.ref(!1);function l(){i.value||(i.value=!0)}function d(){i.value&&(i.value=!1)}async function f(a){if(s.value=await $n(),n.isDisabled(a)){e("error","选中一个中文字符，并且有不能在其他语句之内");return}l()}return()=>o.createVNode(b.ElPopover,{style:{padding:"0px"},visible:i.value,"onUpdate:visible":a=>i.value=a,trigger:"contextmenu",hideAfter:0},{reference:()=>o.createVNode(k,{text:"局部变速",icon:"changespeed",onClick:f},null),default:()=>o.createVNode("div",{class:"flex flex-col h h-50 scroll scroll-y"},[s.value.map(({id:a,text:u})=>o.createVNode("div",{key:a,class:"btn full",onClick:()=>{n.isDisabled(r==null?void 0:r.value)||n.exec(r==null?void 0:r.value,u),d()},onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});function Hn(){return C("w-e-dom-rhythm")}class Un{isDisabled(e){const{selection:n}=e;return!!(n==null||p.SlateRange.isExpanded(n))}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s={type:"ssml-break",domId:Hn(),time:n.id,remark:n.remark,bgColor:"rhythm",children:[{text:""}]};p.SlateTransforms.insertNodes(e,s),e.move(1),D(e,"ssml-break",s.domId,i=>{p.SlateTransforms.delete(e,{at:i[1]})})}}const qn=[{id:"200ms",text:"短",remark:"短"},{id:"300ms",text:"中",remark:"中"},{id:"500ms",text:"长",remark:"长"}],Ue=o.defineComponent({emits:["error"],setup(t,{emit:e}){const n=new Un,r=o.inject("editor"),s=o.ref(!1);function i(){s.value||(s.value=!0)}function l(){s.value&&(s.value=!1)}function d(f){if(n.isDisabled(f)){e("error","不能选择文本");return}i()}return()=>o.createVNode(b.ElPopover,{visible:s.value,"onUpdate:visible":f=>s.value=f,trigger:"contextmenu",hideAfter:0},{reference:()=>o.createVNode(k,{text:"停顿调节",icon:"rhythm",onClick:d},null),default:()=>o.createVNode("div",{class:"flex flex-col"},[qn.map(({id:f,text:a,remark:u})=>o.createVNode("div",{key:f,class:"btn radius ssml-menu item full",onClick:()=>{n.isDisabled(r==null?void 0:r.value)||n.exec(r==null?void 0:r.value,{id:f,text:a,remark:u}),l()},onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[a]))])})}});function qe(t){if(window.navigator.userAgent.toLowerCase().indexOf("ie")>=0){const n=`<embed name="embedPlay" src="${t}"></embed>`;h("body").find("embed").length<=0&&h("body").append(n);const r=document.embedPlay;r.volume=100}else{const n=`<audio id='audioPlay' src='${t}' hidden='true'>`;h("body").find("audio").length<=0&&h("body").append(n),document.getElementById("audioPlay").play()}}function zn(){return C("w-e-dom-special")}class Gn{getValue(e){const{selection:n}=e;return n==null?null:p.SlateEditor.string(e,n)}isDisabled(e){const{selection:n}=e;return n==null||p.SlateRange.isExpanded(n)?!0:p.SlateEditor.string(e,n).length>0}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null||this.getValue(e)==null)return;const i={type:"ssml-audio",domId:zn(),src:n.value,remark:n.label,bgColor:"special",children:[{text:""}]};p.SlateTransforms.insertNodes(e,i),e.move(1),D(e,"ssml-audio",i.domId,l=>p.SlateTransforms.delete(e,{at:l[1]})),Sn(e,"ssml-audio",i.domId,l=>qe(l[0].src))}}const ze=o.defineComponent({emits:["error"],props:{fetch:{type:Function,required:!0},scenes:{type:Object,required:!0},styles:{type:Object,required:!0}},setup(t,{emit:e}){const n=new Gn,r=o.ref(!1),s=o.shallowRef(),i=o.ref([]),l=o.inject("editor");async function d(a){if(n.isDisabled(a)){e("error","请选中编辑区，并且不能选中文字");return}r.value=!0,i.value=await t.fetch({search:"",menuKey:"first",scene:"",style:""}),s.value=a.selection}const f=a=>{r.value=!1;const u=l==null?void 0:l.value;!u||!a||(u.select(s.value),!n.isDisabled(u)&&n.exec(u,a))};return()=>o.createVNode("div",null,[o.createVNode(k,{text:"音效",icon:"special",onClick:d},null),o.createVNode(b.ElDialog,{modelValue:r.value,"onUpdate:modelValue":a=>r.value=a,width:500},{default:()=>[o.createVNode($,{menuItemLabel:{first:"默认音效",second:"自定义音效",last:"最近音效"},scenes:t.scenes,styles:t.styles,dataList:i.value,onSubmit:f,onFetch:async a=>{const u=await t.fetch(a);i.value=u}},null)]})])}});function Kn(){return C("w-e-dom-mute")}class Xn{isDisabled(e){const{selection:n}=e;return!!(n==null||p.SlateRange.isExpanded(n))}exec(e,n){if(this.isDisabled(e))return;const{selection:r}=e;if(r==null)return;const s={type:"ssml-break",domId:Kn(),time:n,remark:n,bgColor:"mute",children:[{text:""}]};p.SlateTransforms.insertNodes(e,s),e.move(1),D(e,"ssml-break",s.domId,i=>{p.SlateTransforms.delete(e,{at:i[1]})})}}const Zn=[{id:"150ms",text:"150ms",remark:"150ms"},{id:"200ms",text:"200ms",remark:"200ms"},{id:"300ms",text:"300ms",remark:"300ms"},{id:"400ms",text:"400ms",remark:"400ms"},{id:"500ms",text:"500ms",remark:"500ms"},{id:"600ms",text:"600ms",remark:"600ms"}],Ge=o.defineComponent({emits:["error"],setup(t,{emit:e}){const n=new Xn,r=o.inject("editor");r||e("error","请注入editor");const s=o.ref(!1),i=o.ref(),l=o.shallowRef();function d(){s.value||(s.value=!0)}function f(){s.value&&(s.value=!1)}function a(c){if(n.isDisabled(c)){e("error","不能选择文本");return}d(),l.value=c.selection,i.value.focus()}function u(c){f();const m=r==null?void 0:r.value;!m||!c||(m.select(l.value),!n.isDisabled(m)&&n.exec(m,c))}return()=>o.createVNode(b.ElPopover,{visible:s.value,"onUpdate:visible":c=>s.value=c,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>o.createVNode(k,{text:"插入静音",icon:"mute",onClick:a},null),default:()=>o.createVNode("div",{class:"flex flex-col"},[Zn.map(({id:c,text:m})=>o.createVNode("div",{key:c,class:"btn radius ssml-menu item full",onClick:()=>u(c),onMousedown:o.withModifiers(()=>{},["stop","prevent"])},[m])),o.createVNode(W,{type:"number",ref:i,onSubmit:u},null)])})}}),Ke=o.defineComponent({emits:["error"],props:{fetch:{type:Function,required:!0},scenes:{type:Object,required:!0},styles:{type:Object,required:!0}},setup(t,{emit:e}){const n=o.ref(!1),r=o.shallowRef(),s=o.ref([]),i=o.inject("editor");async function l(f){n.value=!0,s.value=await t.fetch({search:"",menuKey:"first",scene:"",style:""}),r.value=f.selection}const d=f=>{n.value=!1;const a=i==null?void 0:i.value;if(!a||!f){e("error","背景音乐值无效");return}a.emit("updateBgm",f)};return()=>o.createVNode("div",null,[o.createVNode(k,{text:"配乐",icon:"bgm",onClick:l},null),o.createVNode(b.ElDialog,{modelValue:n.value,"onUpdate:modelValue":f=>n.value=f,width:500},{default:()=>[o.createVNode($,{menuItemLabel:{first:"默认配乐",second:"自定义配乐",last:"最近配乐"},scenes:t.scenes,styles:t.styles,dataList:s.value,onSubmit:d,onFetch:async f=>{const a=await t.fetch(f);s.value=a}},null)]})])}});const Jn={install:t=>{t.component("SpeakerMenu",Pe),t.component("ContinuousMenu",Fe),t.component("ReadMenu",je),t.component("DigitalMenu",Re),t.component("AliasMenu",We),t.component("EnglishMenu",$e),t.component("ChangespeedMenu",He),t.component("RhythmMenu",Ue),t.component("SpecialMenu",ze),t.component("MuteMenu",Ge),t.component("BgmMenu",Ke)}};function xe(t,e,n,r,s){const i=e===void 0?void 0:e.key;return{sel:t,data:e,children:n,text:r,elm:s,key:i}}const Ee=Array.isArray;function z(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function Xe(t,e,n){if(t.ns="http://www.w3.org/2000/svg",n!=="foreignObject"&&e!==void 0)for(let r=0;r<e.length;++r){const s=e[r];if(typeof s=="string")continue;const i=s.data;i!==void 0&&Xe(i,s.children,s.sel)}}function v(t,e,n){let r={},s,i,l;if(n!==void 0?(e!==null&&(r=e),Ee(n)?s=n:z(n)?i=n.toString():n&&n.sel&&(s=[n])):e!=null&&(Ee(e)?s=e:z(e)?i=e.toString():e&&e.sel?s=[e]:r=e),s!==void 0)for(l=0;l<s.length;++l)z(s[l])&&(s[l]=xe(void 0,void 0,void 0,s[l],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&Xe(r,s,t),xe(t,r,s,i,void 0)}const _={style:{userSelect:"none"},contentEditable:!1};function Qn(t){const{domId:e,bgColor:n,remark:r,word:s}=t;return v("span.ssml-wrap",{..._},[v(`span.tag.bg-color.${n}`,[v("span.tag-remark",{attrs:{"data-tag-remark":r}}),v(`span#${e}-close.btn.btn-text`,v("span.iconfont.icon-roundclosefill",null))]),v(`span.boundary.start.ft-color.${n}`),v("span",s),v(`span.boundary.end.ft-color.${n}`)])}function Yn(t,e){const{bgColor:n,domId:r,remark:s,value:i}=t;return v("span.ssml-wrap",e?{}:{..._},[v(`span.tag.bg-color.${n}`,{..._},[v("span.tag-remark",{attrs:{"data-tag-remark":s}}),v(`span#${r}-close.btn.btn-text`,v("span.iconfont.icon-roundclosefill",null))]),v(`span.boundary.start.ft-color.${n}`,{..._}),v("span",e||i),v(`span.boundary.end.ft-color.${n}`,{..._})])}function er(t,e){const{bgColor:n,domId:r,remark:s}=t;return v("span.ssml-wrap",[v(`span.tag.bg-color.${n}`,{..._},[v("span.tag-remark",{attrs:{"data-tag-remark":s}}),v(`span#${r}-close.btn.btn-text`,v("span.iconfont.icon-roundclosefill",null))]),v(`span.boundary.start.ft-color.${n}`,{..._}),v("span",e),v(`span.boundary.end.ft-color.${n}`,{..._})])}function tr(t){const{domId:e,remark:n,bgColor:r}=t;return v("span.ssml-wrap",[v(`span.tag.bg-color.${r}`,{..._},[v("span.tag-remark",{attrs:{"data-tag-remark":n}}),v(`span#${e}-close.btn.btn-text`,v("span.iconfont.icon-roundclosefill",null))])])}function nr(t){const{domId:e,remark:n,bgColor:r,value:s}=t;return v("span.ssml-wrap",{..._},[v(`span.tag.bg-color.${r}`,[v("span.tag-remark",{attrs:{"data-tag-remark":n}}),v(`span#${e}-close.btn.btn-text`,v("span.iconfont.icon-roundclosefill"))]),v(`span.boundary.start.ft-color.${r}`),v("span",s),v(`span.boundary.end.ft-color.${r}`)])}function rr(t,e){const{bgColor:n,domId:r,remark:s}=t;return v("span.ssml-wrap",[v(`span.tag.bg-color.${n}`,{..._},[v("span.tag-remark",{attrs:{"data-tag-remark":s}}),v(`span#${r}-close.btn.btn-text`,v("span.iconfont.icon-roundclosefill",null))]),v(`span.boundary.start.ft-color.${n}`,{..._}),v("span",e),v(`span.boundary.end.ft-color.${n}`,{..._})])}function or(t){const{bgColor:e,domId:n,remark:r}=t;return v("span.ssml-wrap",[v(`span.tag.bg-color.${e}`,{..._},[v(`span#${n}-play.btn.btn-text`,v("span.iconfont.icon-play",null)),v("span.tag-remark",{attrs:{"data-tag-remark":r}}),v(`span#${n}-close.btn.btn-text`,v("span.iconfont.icon-roundclosefill",null))])])}const sr=[{type:"ssml-p",renderElem:Qn},{type:"ssml-w",renderElem:Yn},{type:"ssml-say-as",renderElem:er},{type:"ssml-break",renderElem:tr},{type:"ssml-sub",renderElem:nr},{type:"ssml-prosody",renderElem:rr},{type:"ssml-audio",renderElem:or}];function ir(t,e){return`<s>${e}</s>`}function lr(t,e){const{phoneme:n,value:r}=t;return n?`<w phoneme="${n}">${r}</w>`:`<w>${e}</w>`}function ar(t){const{word:e,phoneme:n}=t;return`<p ph="${n}">${e}</p>`}function ur(t,e){const{interpretAs:n}=t;return`<say-as interpret-as="${n}">${e}</say-as>`}function cr(t){const{time:e}=t;return`<break time="${e}" />`}function fr(t){const{alias:e,value:n}=t;return`<sub alias="${e}">${n}</sub>`}function dr(t,e){const{rate:n}=t;return`<prosody rate="${n}">${e}</prosody>`}function pr(t){const{src:e}=t;return`<audio src="${e}" />`}const mr=[{type:"paragraph",elemToHtml:ir},{type:"ssml-w",elemToHtml:lr},{type:"ssml-p",elemToHtml:ar},{type:"ssml-say-as",elemToHtml:ur},{type:"ssml-break",elemToHtml:cr},{type:"ssml-sub",elemToHtml:fr},{type:"ssml-prosody",elemToHtml:dr},{type:"ssml-audio",elemToHtml:pr}];function vr(t,e){return{type:"paragraph",children:e}}function hr(t,e){const n=t.getAttribute("phoneme");return n?{type:"ssml-w",phoneme:n,value:t.textContent,children:[{text:t.textContent||""}]}:{type:"ssml-w",children:e}}const gr=[{selector:"s",parseElemHtml:vr},{selector:"w",parseElemHtml:hr}];function E(t,e){return t===e}function br(t){const{isInline:e,isVoid:n,deleteBackward:r,deleteForward:s,insertBreak:i,getHtml:l,apply:d}=t,f=t;f.isInline=u=>{const c=p.DomEditor.getNodeType(u);return E(c,"ssml-w")||E(c,"ssml-p")||E(c,"ssml-break")||E(c,"ssml-say-as")||E(c,"ssml-sub")||E(c,"ssml-prosody")||E(c,"ssml-audio")?!0:e(u)},f.isVoid=u=>{const c=p.DomEditor.getNodeType(u);if(E(c,"ssml-w")){const{phoneme:m}=u;return!!m}return E(c,"ssml-p")||E(c,"ssml-break")?!0:E(c,"ssml-say-as")?!1:E(c,"ssml-sub")?!0:E(c,"ssml-prosody")?!1:E(c,"ssml-audio")?!0:n(u)},f.deleteBackward=u=>{r(u)},f.deleteForward=u=>{s(u)},f.insertBreak=()=>{i()};const a={voice:"",volume:"",pitch:""};return t.on("updateSpeak",u=>{Object.assign(a,u)}),t.on("updateBgm",u=>{a.bgm=u.value,a.bgmRemark=u.label}),t.on("removeBgm",()=>{a.bgm=void 0,a.bgmRemark=void 0}),f.getHtml=()=>{const u=[];for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const m=a[c];m&&u.push(`${c}=${m}`)}return`<speak ${u.join(" ")}>${l()}</speak>`},f.apply=u=>{d(u)},f}const yr={editorPlugin:br,renderElems:sr,elemsToHtml:mr,parseElemsHtml:gr};const wr={install(t){t.use(Lt),t.use(Jn)}};exports.AliasMenu=We;exports.BarButton=k;exports.BarInput=W;exports.BarPopover=_e;exports.BarSearch=$;exports.BarWrapper=Ve;exports.BarWrapperGroup=Te;exports.BarWrapperItem=Me;exports.BgmMenu=Ke;exports.ChangespeedMenu=He;exports.ContinuousMenu=Fe;exports.DOMComment=vn;exports.DOMElement=hn;exports.DOMNode=mn;exports.DOMRange=bn;exports.DOMSelection=yn;exports.DOMStaticRange=wn;exports.DOMText=gn;exports.DigitalMenu=Re;exports.EditorCoreModule=yr;exports.EnglishMenu=$e;exports.MuteMenu=Ge;exports.ReadMenu=je;exports.RhythmMenu=Ue;exports.SpeakerMenu=Pe;exports.SpecialMenu=ze;exports.TopPanel=Ne;exports.default=wr;exports.genRandomStr=C;exports.playSound=qe;
