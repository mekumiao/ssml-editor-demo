"use strict";var rn=Object.defineProperty;var ln=(t,n,o)=>n in t?rn(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var D=(t,n,o)=>(ln(t,typeof n!="symbol"?n+"":n,o),o);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),E=require("@wangeditor/editor"),M=require("element-plus"),Ne=require("@element-plus/icons-vue"),an="ssml-editor",sn="ssml-editor-config",K={EDITOR:an,EDITORCONFIG:sn},un="emitter-ediror-error",cn="emitter-bgm-menu-click",dn="emitter-bgm-drag-box-submit",fn="emitter-conversion-menu-click",pn="emitter-conversion-drag-box-submit",mn="emitter-management-menu-click",vn="emitter-management-drag-box-submit",hn="emitter-special-menu-click",_n="emitter-special-drag-box-submit",gn="emitter-sensitive-menu-click",bn="emitter-sensitive-drag-box-submit",V={ERROR:un,BGM_MENU_CLICK:cn,BGM_DRAG_BOX_SUBMIT:dn,CONVERSION_MENU_CLICK:fn,CONVERSION_DRAG_BOX_SUBMIT:pn,MANAGEMENT_MENU_CLICK:mn,MANAGEMENT_DRAG_BOX_SUBMIT:vn,SPECIAL_MENU_CLICK:hn,SPECIAL_DRAG_BOX_SUBMIT:_n,SENSITIVE_MENU_CLICK:gn,SENSITIVE_DRAG_BOX_SUBMIT:bn},yn="wangeditor-update-bgm",wn="wangeditor-remove-bgm",xn="wangeditor-update-speak",j={UPDATE_BGM:yn,REMOVE_BGM:wn,UPDATE_SPEAK:xn},En={class:"bar-button-icon"},Nn={class:"fw-normal",style:{"font-size":"0.85rem"}},Vn=e.defineComponent({__name:"bar-button",props:{text:{},icon:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:n}){const o=t,r=e.inject(K.EDITOR),i=()=>{o.disabled||n("click",r.value)};return(l,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["bar-button px-2 py-1",{disabled:l.disabled}]),onClick:i,onMousedown:a[0]||(a[0]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",En,[e.createElementVNode("span",{class:e.normalizeClass(["fs-3 iconfont-moyin",[`moyin-icon_${l.icon}`]])},null,2)]),e.createElementVNode("div",Nn,e.toDisplayString(l.text),1)],34))}});const $=(t,n)=>{const o=t.__vccOpts||t;for(const[r,i]of n)o[r]=i;return o},B=$(Vn,[["__scopeId","data-v-7741060a"]]);const le=e.defineComponent({__name:"bar-input",props:{type:{}},emits:["submit"],setup(t,{expose:n,emit:o}){const r=e.ref(""),i=e.ref();function l(){i.value.focus()}function a(){o("submit",r.value),r.value=""}return n({focus:l}),(u,s)=>(e.openBlock(),e.createBlock(e.unref(M.ElForm),{class:"flex flex-row",onSubmit:e.withModifiers(a,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(M.ElInput),{type:u.type,ref_key:"inputRef",ref:i,modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=m=>r.value=m)},null,8,["type","modelValue"])]),_:1},8,["onSubmit"]))}});const Ut=e.defineComponent({__name:"bar-popover",props:{visible:{type:Boolean},trigger:{},hideAfter:{},width:{}},emits:["update:visible"],setup(t){return(n,o)=>(e.openBlock(),e.createBlock(e.unref(M.ElPopover),{hideAfter:n.hideAfter,width:n.width,visible:n.visible,trigger:n.trigger,"onUpdate:visible":o[0]||(o[0]=r=>n.$emit("update:visible",r))},{reference:e.withCtx(()=>[e.renderSlot(n.$slots,"reference")]),default:e.withCtx(()=>[e.renderSlot(n.$slots,"default")]),_:3},8,["hideAfter","width","visible","trigger"]))}});function ae(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function A(t){return typeof t=="function"?t():e.unref(t)}const oe=typeof window<"u",Cn=t=>t!=null,ee=()=>{};var Sn=Object.defineProperty,Tn=Object.defineProperties,Mn=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,In=Object.prototype.hasOwnProperty,On=Object.prototype.propertyIsEnumerable,lt=(t,n,o)=>n in t?Sn(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,kn=(t,n)=>{for(var o in n||(n={}))In.call(n,o)&&lt(t,o,n[o]);if(it)for(var o of it(n))On.call(n,o)&&lt(t,o,n[o]);return t},Bn=(t,n)=>Tn(t,Mn(n));function Rn(t,n={}){if(!e.isRef(t))return e.toRefs(t);const o=Array.isArray(t.value)?Array.from({length:t.value.length}):{};for(const r in t.value)o[r]=e.customRef(()=>({get(){return t.value[r]},set(i){var l;if((l=A(n.replaceRef))!=null?l:!0)if(Array.isArray(t.value)){const u=[...t.value];u[r]=i,t.value=u}else{const u=Bn(kn({},t.value),{[r]:i});Object.setPrototypeOf(u,Object.getPrototypeOf(t.value)),t.value=u}else t.value[r]=i}}));return o}function Ft(t,n=!0){e.getCurrentInstance()?e.onMounted(t):n?t():e.nextTick(t)}function P(t){var n;const o=A(t);return(n=o==null?void 0:o.$el)!=null?n:o}const W=oe?window:void 0;function Q(...t){let n,o,r,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([o,r,i]=t,n=W):[n,o,r,i]=t,!n)return ee;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const l=[],a=()=>{l.forEach(d=>d()),l.length=0},u=(d,f,v,b)=>(d.addEventListener(f,v,b),()=>d.removeEventListener(f,v,b)),s=e.watch(()=>[P(n),A(i)],([d,f])=>{a(),d&&l.push(...o.flatMap(v=>r.map(b=>u(d,v,b,f))))},{immediate:!0,flush:"post"}),m=()=>{s(),a()};return ae(m),m}function $n(){const t=e.ref(!1);return e.getCurrentInstance()&&e.onMounted(()=>{t.value=!0}),t}function Ve(t){const n=$n();return e.computed(()=>(n.value,!!t()))}function Dn(t,n={}){const{window:o=W}=n,r=Ve(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let i;const l=e.ref(!1),a=m=>{l.value=m.matches},u=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",a):i.removeListener(a))},s=e.watchEffect(()=>{r.value&&(u(),i=o.matchMedia(A(t)),"addEventListener"in i?i.addEventListener("change",a):i.addListener(a),l.value=i.matches)});return ae(()=>{s(),u(),i=void 0}),l}var An=Object.defineProperty,Pn=Object.defineProperties,Ln=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,Un=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,st=(t,n,o)=>n in t?An(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,jn=(t,n)=>{for(var o in n||(n={}))Un.call(n,o)&&st(t,o,n[o]);if(at)for(var o of at(n))Fn.call(n,o)&&st(t,o,n[o]);return t},Gn=(t,n)=>Pn(t,Ln(n));function se(t,n={}){var o,r;const{pointerTypes:i,preventDefault:l,stopPropagation:a,exact:u,onMove:s,onEnd:m,onStart:d,initialValue:f,axis:v="both",draggingElement:b=W,handle:p=t}=n,c=e.ref((o=A(f))!=null?o:{x:0,y:0}),_=e.ref(),w=g=>i?i.includes(g.pointerType):!0,S=g=>{A(l)&&g.preventDefault(),A(a)&&g.stopPropagation()},h=g=>{if(!w(g)||A(u)&&g.target!==A(t))return;const T=A(t).getBoundingClientRect(),k={x:g.clientX-T.left,y:g.clientY-T.top};(d==null?void 0:d(k,g))!==!1&&(_.value=k,S(g))},y=g=>{if(!w(g)||!_.value)return;let{x:T,y:k}=c.value;(v==="x"||v==="both")&&(T=g.clientX-_.value.x),(v==="y"||v==="both")&&(k=g.clientY-_.value.y),c.value={x:T,y:k},s==null||s(c.value,g),S(g)},N=g=>{w(g)&&_.value&&(_.value=void 0,m==null||m(c.value,g),S(g))};if(oe){const g={capture:(r=n.capture)!=null?r:!0};Q(p,"pointerdown",h,g),Q(b,"pointermove",y,g),Q(b,"pointerup",N,g)}return Gn(jn({},Rn(c)),{position:c,isDragging:e.computed(()=>!!_.value),style:e.computed(()=>`left:${c.value.x}px;top:${c.value.y}px;`)})}var ut=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable,Kn=(t,n)=>{var o={};for(var r in t)Wn.call(t,r)&&n.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&ut)for(var r of ut(t))n.indexOf(r)<0&&zn.call(t,r)&&(o[r]=t[r]);return o};function jt(t,n,o={}){const r=o,{window:i=W}=r,l=Kn(r,["window"]);let a;const u=Ve(()=>i&&"ResizeObserver"in i),s=()=>{a&&(a.disconnect(),a=void 0)},m=e.computed(()=>Array.isArray(t)?t.map(v=>P(v)):[P(t)]),d=e.watch(m,v=>{if(s(),u.value&&i){a=new ResizeObserver(n);for(const b of v)b&&a.observe(b,l)}},{immediate:!0,flush:"post",deep:!0}),f=()=>{s(),d()};return ae(f),{isSupported:u,stop:f}}function J(t,n={}){const{reset:o=!0,windowResize:r=!0,windowScroll:i=!0,immediate:l=!0}=n,a=e.ref(0),u=e.ref(0),s=e.ref(0),m=e.ref(0),d=e.ref(0),f=e.ref(0),v=e.ref(0),b=e.ref(0);function p(){const c=P(t);if(!c){o&&(a.value=0,u.value=0,s.value=0,m.value=0,d.value=0,f.value=0,v.value=0,b.value=0);return}const _=c.getBoundingClientRect();a.value=_.height,u.value=_.bottom,s.value=_.left,m.value=_.right,d.value=_.top,f.value=_.width,v.value=_.x,b.value=_.y}return jt(t,p),e.watch(()=>P(t),c=>!c&&p()),i&&Q("scroll",p,{capture:!0,passive:!0}),r&&Q("resize",p,{passive:!0}),Ft(()=>{l&&p()}),{height:a,bottom:u,left:s,right:m,top:d,width:f,x:v,y:b,update:p}}function Ce(t,n={width:0,height:0},o={}){const{window:r=W,box:i="content-box"}=o,l=e.computed(()=>{var s,m;return(m=(s=P(t))==null?void 0:s.namespaceURI)==null?void 0:m.includes("svg")}),a=e.ref(n.width),u=e.ref(n.height);return jt(t,([s])=>{const m=i==="border-box"?s.borderBoxSize:i==="content-box"?s.contentBoxSize:s.devicePixelContentBoxSize;if(r&&l.value){const d=P(t);if(d){const f=r.getComputedStyle(d);a.value=Number.parseFloat(f.width),u.value=Number.parseFloat(f.height)}}else if(m){const d=Array.isArray(m)?m:[m];a.value=d.reduce((f,{inlineSize:v})=>f+v,0),u.value=d.reduce((f,{blockSize:v})=>f+v,0)}else a.value=s.contentRect.width,u.value=s.contentRect.height},o),e.watch(()=>P(t),s=>{a.value=s?n.width:0,u.value=s?n.height:0}),{width:a,height:u}}function Hn(t,n,o={}){const{root:r,rootMargin:i="0px",threshold:l=.1,window:a=W,immediate:u=!0}=o,s=Ve(()=>a&&"IntersectionObserver"in a),m=e.computed(()=>{const p=A(t);return(Array.isArray(p)?p:[p]).map(P).filter(Cn)});let d=ee;const f=e.ref(u),v=s.value?e.watch(()=>[m.value,P(r),f.value],([p,c])=>{if(d(),!f.value||!p.length)return;const _=new IntersectionObserver(n,{root:P(c),rootMargin:i,threshold:l});p.forEach(w=>w&&_.observe(w)),d=()=>{_.disconnect(),d=ee}},{immediate:u,flush:"post"}):ee,b=()=>{d(),v(),f.value=!1};return ae(b),{isSupported:s,isActive:f,pause(){d(),f.value=!1},resume(){f.value=!0},stop:b}}function Xn(t,{window:n=W,scrollTarget:o}={}){const r=e.ref(!1);return Hn(t,([{isIntersecting:i}])=>{r.value=i},{root:o,window:n}),r}function Se(t={}){const{window:n=W,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:l=!0}=t,a=e.ref(o),u=e.ref(r),s=()=>{n&&(l?(a.value=n.innerWidth,u.value=n.innerHeight):(a.value=n.document.documentElement.clientWidth,u.value=n.document.documentElement.clientHeight))};if(s(),Ft(s),Q("resize",s,{passive:!0}),i){const m=Dn("(orientation: portrait)");e.watch(m,()=>s())}return{width:a,height:u}}const qn=t=>(e.pushScopeId("data-v-fd90240d"),t=t(),e.popScopeId(),t),Yn={class:"search-content vh-50"},Qn={class:"ps-2 w-75"},Zn={class:"menu"},Jn={class:"flex flex-row pt-1"},eo={class:"content-list pt-1 w-90"},to=["onClick"],no=qn(()=>e.createElementVNode("span",{class:"iconfont icon-play"},null,-1)),oo=e.defineComponent({__name:"bar-search",props:{menuItemLabel:{},scenes:{},styles:{},dataList:{},fetch:{type:Function}},emits:["submit"],setup(t,{emit:n}){const o=t,r=e.ref(),i=e.ref(""),l=e.ref(""),a=e.ref(""),u=e.ref(o.dataList||[]),s=e.ref("first"),m=Xn(r);e.watch(m,b=>{b&&setTimeout(()=>{var p;(p=r.value)==null||p.focus()},100)}),e.onMounted(async()=>{await d()});async function d(){u.value=await o.fetch({search:i.value,menuKey:s.value,scene:l.value,style:a.value})}function f(b){s.value=b,d()}function v(b){n("submit",b)}return(b,p)=>(e.openBlock(),e.createElementBlock("div",Yn,[e.createElementVNode("div",Qn,[e.createVNode(e.unref(M.ElForm),{onSubmit:e.withModifiers(d,["prevent"])},{default:e.withCtx(()=>[e.createVNode(e.unref(M.ElInput),{ref_key:"searchInputRef",ref:r,placeholder:"搜索",modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=c=>i.value=c),"suffix-icon":e.unref(Ne.Search)},null,8,["modelValue","suffix-icon"])]),_:1},8,["onSubmit"])]),e.createElementVNode("div",Zn,[e.createVNode(e.unref(M.ElMenu),{mode:"horizontal","default-active":"first",onSelect:p[1]||(p[1]=c=>f(c))},{default:e.withCtx(()=>[e.createVNode(e.unref(M.ElMenuItem),{index:"first"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(b.menuItemLabel.first),1)]),_:1}),e.createVNode(e.unref(M.ElMenuItem),{index:"second"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(b.menuItemLabel.second),1)]),_:1}),e.createVNode(e.unref(M.ElMenuItem),{index:"last"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(b.menuItemLabel.last),1)]),_:1})]),_:1})]),e.createElementVNode("div",Jn,[e.createVNode(e.unref(M.ElSelect),{modelValue:l.value,"onUpdate:modelValue":p[2]||(p[2]=c=>l.value=c),onChange:d,class:"m-1",size:"large"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.scenes,c=>(e.openBlock(),e.createBlock(e.unref(M.ElOption),{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e.createVNode(e.unref(M.ElSelect),{modelValue:a.value,"onUpdate:modelValue":p[3]||(p[3]=c=>a.value=c),onChange:d,class:"m-1",size:"large"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.styles,c=>(e.openBlock(),e.createBlock(e.unref(M.ElOption),{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e.createElementVNode("div",eo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(c,_)=>(e.openBlock(),e.createElementBlock("div",{onClick:w=>v(c),class:"content-list-item clickable ps-3",key:_},[no,e.createElementVNode("span",null,e.toDisplayString(c.label),1)],8,to))),128))])]))}});const H=$(oo,[["__scopeId","data-v-fd90240d"]]),Gt=e.defineComponent({__name:"fixed-panel",emits:["dragging"],setup(t,{emit:n}){const o=e.ref(),r=oe?window.innerWidth:200,i=oe?window.innerHeight:200,{x:l,y:a}=se(o,{initialValue:{x:r-100,y:i/2},preventDefault:!0,onStart:()=>{n("dragging",!0)},onEnd:()=>{n("dragging",!1)}}),{width:u,height:s}=Ce(o),{width:m,height:d}=Se(),f=e.computed(()=>({x:m.value-u.value,y:d.value-s.value})),v=e.computed(()=>{if(!f.value)return b(l.value,a.value);const p=l.value<5?5:l.value>f.value.x?f.value.x-5:l.value,c=a.value<5?5:a.value>f.value.y?f.value.y-5:a.value;return b(p,c)});function b(p,c){return`left:${p}px;top:${c}px`}return(p,c)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{ref_key:"boxRef",ref:o,class:"fixed-panel z-3 user-select-none",style:e.normalizeStyle([{position:"fixed"},v.value])},[e.renderSlot(p.$slots,"default")],4)]))}});function ct(t,n){return`left:${t}px;top:${n}px`}function Te(t,n){const{x:o,y:r}=n,{width:i,height:l}=Ce(t),{width:a,height:u}=Se(),s=e.computed(()=>({x:a.value-i.value,y:u.value-l.value}));return{style:e.computed(()=>{if(!s.value)return ct(o.value,r.value);const d=o.value<5?5:o.value>s.value.x?s.value.x-5:o.value,f=r.value<5?5:r.value>s.value.y?s.value.y-5:r.value;return ct(d,f)})}}const ro={},io={class:"content"};function lo(t,n){return e.openBlock(),e.createElementBlock("div",io,[e.renderSlot(t.$slots,"default",{},void 0,!0)])}const Me=$(ro,[["render",lo],["__scopeId","data-v-7beae5b9"]]),ao={},so={class:"bar-wrapper-item"};function uo(t,n){return e.openBlock(),e.createElementBlock("div",so,[e.renderSlot(t.$slots,"default")])}const Wt=$(ao,[["render",uo]]),co={class:"bar-wrapper-group"},fo={class:"group-items"},po=e.defineComponent({__name:"bar-wrapper-group",props:{divider:{}},setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",co,[e.createElementVNode("div",fo,[e.renderSlot(n.$slots,"default",{},void 0,!0)]),e.createElementVNode("div",{class:e.normalizeClass(["divider",[n.divider]])},null,2)]))}});const F=$(po,[["__scopeId","data-v-3a7abad9"]]),mo=e.defineComponent({__name:"drag-box",props:{visible:{type:Boolean},position:{}},emits:["update:visible","update:position"],setup(t,{emit:n}){const o=t,r=e.ref(),{x:i,y:l}=se(r,{initialValue:o.position}),{width:a,height:u}=Ce(r),{width:s,height:m}=Se();e.watch([i,l],([_,w])=>{n("update:position",{x:_,y:w})});const d=e.computed(()=>({x:s.value-a.value,y:m.value-u.value})),f=e.computed(()=>{const{x:_,y:w}=o.position;if(!d.value)return c(_,w);const S=_<5?5:_>d.value.x?d.value.x-5:_,h=w<5?5:w>d.value.y?d.value.y-5:w;return c(S,h)});e.onMounted(()=>{window.addEventListener("keydown",p)}),e.onUnmounted(()=>{window.addEventListener("keydown",p)});function v(){n("update:visible",!1)}function b(_){const w=_.target;r.value&&!r.value.contains(w)&&o.visible&&n("update:visible",!1)}function p(_){_.code==="Escape"&&o.visible&&v()}function c(_,w){return`left:${_}px;top:${w}px`}return(_,w)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{class:"drag-box-mask user-select-none",onClick:b},[e.createElementVNode("div",{ref_key:"boxRef",ref:r,class:"card shadow brag-box",style:e.normalizeStyle([{position:"fixed"},f.value])},[e.createElementVNode("div",{class:"w-100 text-end me-2"},[e.createElementVNode("span",{onClick:v,class:"btn iconfont icon-close fs-5"})]),e.renderSlot(_.$slots,"default",{},void 0,!0)],4)],512),[[e.vShow,_.visible]])]))}});const X=$(mo,[["__scopeId","data-v-ca198ced"]]),vo={install(t){t.component("BarButton",B),t.component("BarInput",le),t.component("BarPopover",Ut),t.component("BarSearch",H),t.component("FixedPanel",Gt),t.component("BarWrapper",Me),t.component("BarWrapperItem",Wt),t.component("BarWrapperGroup",F),t.component("DragBox",X)}};var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ie(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var be={exports:{}},zt={exports:{}},ho=void 0,Kt=function(t){return t!==ho&&t!==null},_o=Kt,go={object:!0,function:!0,undefined:!0},bo=function(t){return _o(t)?hasOwnProperty.call(go,typeof t):!1},yo=bo,wo=function(t){if(!yo(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},xo=wo,Eo=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!xo(t)},No=Eo,Vo=/^\s*class[\s{/}]/,Co=Function.prototype.toString,So=function(t){return!(!No(t)||Vo.test(Co.call(t)))},To=function(){var t=Object.assign,n;return typeof t!="function"?!1:(n={foo:"raz"},t(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")},ce,dt;function Mo(){return dt||(dt=1,ce=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),ce}var Io=function(){},Oo=Io(),Oe=function(t){return t!==Oo&&t!==null},de,ft;function ko(){if(ft)return de;ft=1;var t=Oe,n=Object.keys;return de=function(o){return n(t(o)?Object(o):o)},de}var fe,pt;function Bo(){return pt||(pt=1,fe=Mo()()?Object.keys:ko()),fe}var pe,mt;function Ro(){if(mt)return pe;mt=1;var t=Oe;return pe=function(n){if(!t(n))throw new TypeError("Cannot use null or undefined");return n},pe}var me,vt;function $o(){if(vt)return me;vt=1;var t=Bo(),n=Ro(),o=Math.max;return me=function(r,i){var l,a,u=o(arguments.length,2),s;for(r=Object(n(r)),s=function(m){try{r[m]=i[m]}catch(d){l||(l=d)}},a=1;a<u;++a)i=arguments[a],t(i).forEach(s);if(l!==void 0)throw l;return r},me}var Do=To()?Object.assign:$o(),Ao=Oe,Po=Array.prototype.forEach,Lo=Object.create,Uo=function(t,n){var o;for(o in t)n[o]=t[o]},Fo=function(t){var n=Lo(null);return Po.call(arguments,function(o){Ao(o)&&Uo(Object(o),n)}),n},ve="razdwatrzy",jo=function(){return typeof ve.contains!="function"?!1:ve.contains("dwa")===!0&&ve.contains("foo")===!1},he,ht;function Go(){if(ht)return he;ht=1;var t=String.prototype.indexOf;return he=function(n){return t.call(this,n,arguments[1])>-1},he}var Wo=jo()?String.prototype.contains:Go(),te=Kt,_t=So,Ht=Do,Xt=Fo,Z=Wo,zo=zt.exports=function(t,n){var o,r,i,l,a;return arguments.length<2||typeof t!="string"?(l=n,n=t,t=null):l=arguments[2],te(t)?(o=Z.call(t,"c"),r=Z.call(t,"e"),i=Z.call(t,"w")):(o=i=!0,r=!1),a={value:n,configurable:o,enumerable:r,writable:i},l?Ht(Xt(l),a):a};zo.gs=function(t,n,o){var r,i,l,a;return typeof t!="string"?(l=o,o=n,n=t,t=null):l=arguments[3],te(n)?_t(n)?te(o)?_t(o)||(l=o,o=void 0):o=void 0:(l=n,n=o=void 0):n=void 0,te(t)?(r=Z.call(t,"c"),i=Z.call(t,"e")):(r=!0,i=!1),a={get:n,set:o,configurable:r,enumerable:i},l?Ht(Xt(l),a):a};var Ko=zt.exports,Ho=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,n){var o=Ko,r=Ho,i=Function.prototype.apply,l=Function.prototype.call,a=Object.create,u=Object.defineProperty,s=Object.defineProperties,m=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0},f,v,b,p,c,_,w;f=function(S,h){var y;return r(h),m.call(this,"__ee__")?y=this.__ee__:(y=d.value=a(null),u(this,"__ee__",d),d.value=null),y[S]?typeof y[S]=="object"?y[S].push(h):y[S]=[y[S],h]:y[S]=h,this},v=function(S,h){var y,N;return r(h),N=this,f.call(this,S,y=function(){b.call(N,S,y),i.call(h,this,arguments)}),y.__eeOnceListener__=h,this},b=function(S,h){var y,N,g,T;if(r(h),!m.call(this,"__ee__"))return this;if(y=this.__ee__,!y[S])return this;if(N=y[S],typeof N=="object")for(T=0;g=N[T];++T)(g===h||g.__eeOnceListener__===h)&&(N.length===2?y[S]=N[T?0:1]:N.splice(T,1));else(N===h||N.__eeOnceListener__===h)&&delete y[S];return this},p=function(S){var h,y,N,g,T;if(m.call(this,"__ee__")&&(g=this.__ee__[S],!!g))if(typeof g=="object"){for(y=arguments.length,T=new Array(y-1),h=1;h<y;++h)T[h-1]=arguments[h];for(g=g.slice(),h=0;N=g[h];++h)i.call(N,this,T)}else switch(arguments.length){case 1:l.call(g,this);break;case 2:l.call(g,this,arguments[1]);break;case 3:l.call(g,this,arguments[1],arguments[2]);break;default:for(y=arguments.length,T=new Array(y-1),h=1;h<y;++h)T[h-1]=arguments[h];i.call(g,this,T)}},c={on:f,once:v,off:b,emit:p},_={on:o(f),once:o(v),off:o(b),emit:o(p)},w=s({},_),t.exports=n=function(S){return S==null?a(w):s(Object(S),_)},n.methods=c})(be,be.exports);var Xo=be.exports;const qo=Ie(Xo),C=qo();var qt="Expected a function",gt=0/0,Yo="[object Symbol]",Qo=/^\s+|\s+$/g,Zo=/^[-+]0x[0-9a-f]+$/i,Jo=/^0b[01]+$/i,er=/^0o[0-7]+$/i,tr=parseInt,nr=typeof Y=="object"&&Y&&Y.Object===Object&&Y,or=typeof self=="object"&&self&&self.Object===Object&&self,rr=nr||or||Function("return this")(),ir=Object.prototype,lr=ir.toString,ar=Math.max,sr=Math.min,_e=function(){return rr.Date.now()};function ur(t,n,o){var r,i,l,a,u,s,m=0,d=!1,f=!1,v=!0;if(typeof t!="function")throw new TypeError(qt);n=bt(n)||0,re(o)&&(d=!!o.leading,f="maxWait"in o,l=f?ar(bt(o.maxWait)||0,n):l,v="trailing"in o?!!o.trailing:v);function b(g){var T=r,k=i;return r=i=void 0,m=g,a=t.apply(k,T),a}function p(g){return m=g,u=setTimeout(w,n),d?b(g):a}function c(g){var T=g-s,k=g-m,rt=n-T;return f?sr(rt,l-k):rt}function _(g){var T=g-s,k=g-m;return s===void 0||T>=n||T<0||f&&k>=l}function w(){var g=_e();if(_(g))return S(g);u=setTimeout(w,c(g))}function S(g){return u=void 0,v&&r?b(g):(r=i=void 0,a)}function h(){u!==void 0&&clearTimeout(u),m=0,r=s=i=u=void 0}function y(){return u===void 0?a:S(_e())}function N(){var g=_e(),T=_(g);if(r=arguments,i=this,s=g,T){if(u===void 0)return p(s);if(f)return u=setTimeout(w,n),b(s)}return u===void 0&&(u=setTimeout(w,n)),a}return N.cancel=h,N.flush=y,N}function cr(t,n,o){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(qt);return re(o)&&(r="leading"in o?!!o.leading:r,i="trailing"in o?!!o.trailing:i),ur(t,n,{leading:r,maxWait:n,trailing:i})}function re(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function dr(t){return!!t&&typeof t=="object"}function fr(t){return typeof t=="symbol"||dr(t)&&lr.call(t)==Yo}function bt(t){if(typeof t=="number")return t;if(fr(t))return gt;if(re(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=re(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(Qo,"");var o=Jo.test(t);return o||er.test(t)?tr(t.slice(2),o?2:8):Zo.test(t)?gt:+t}var pr=cr;const mr=Ie(pr);function yt(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function ke(t,n){t===void 0&&(t={}),n===void 0&&(n={}),Object.keys(n).forEach(function(o){typeof t[o]>"u"?t[o]=n[o]:yt(n[o])&&yt(t[o])&&Object.keys(n[o]).length>0&&ke(t[o],n[o])})}var Yt={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Be(){var t=typeof document<"u"?document:{};return ke(t,Yt),t}var vr={document:Yt,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout>"u"||clearTimeout(t)}};function Qt(){var t=typeof window<"u"?window:{};return ke(t,vr),t}function hr(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ye(t)}function ie(t,n){return ie=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},ie(t,n)}function _r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ne(t,n,o){return _r()?ne=Reflect.construct:ne=function(i,l,a){var u=[null];u.push.apply(u,l);var s=Function.bind.apply(i,u),m=new s;return a&&ie(m,a.prototype),m},ne.apply(null,arguments)}function gr(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function we(t){var n=typeof Map=="function"?new Map:void 0;return we=function(r){if(r===null||!gr(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return ne(r,arguments,ye(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ie(i,r)},we(t)}function br(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yr(t){var n=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return n},set:function(r){n.__proto__=r}})}var z=function(t){hr(n,t);function n(o){var r;return r=t.call.apply(t,[this].concat(o))||this,yr(br(r)),r}return n}(we(Array));function Re(t){t===void 0&&(t=[]);var n=[];return t.forEach(function(o){Array.isArray(o)?n.push.apply(n,Re(o)):n.push(o)}),n}function wr(t){for(var n=[],o=0;o<t.length;o+=1)n.indexOf(t[o])===-1&&n.push(t[o]);return n}function xr(t){return t.toLowerCase().replace(/-(.)/g,function(n,o){return o.toUpperCase()})}function Er(t,n){if(typeof t!="string")return[t];for(var o=[],r=n.querySelectorAll(t),i=0;i<r.length;i+=1)o.push(r[i]);return o}function I(t,n){var o=Qt(),r=Be(),i=[];if(!n&&t instanceof z)return t;if(!t)return new z(i);if(typeof t=="string"){var l=t.trim();if(l.indexOf("<")>=0&&l.indexOf(">")>=0){var a="div";l.indexOf("<li")===0&&(a="ul"),l.indexOf("<tr")===0&&(a="tbody"),(l.indexOf("<td")===0||l.indexOf("<th")===0)&&(a="tr"),l.indexOf("<tbody")===0&&(a="table"),l.indexOf("<option")===0&&(a="select");var u=r.createElement(a);u.innerHTML=l;for(var s=0;s<u.childNodes.length;s+=1)i.push(u.childNodes[s])}else i=Er(t.trim(),n||r)}else if(t.nodeType||t===o||t===r)i.push(t);else if(Array.isArray(t)){if(t instanceof z)return t;i=t}return new z(wr(i))}I.fn=z.prototype;function wt(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=Re(n.map(function(i){return i.split(" ")}));return this.forEach(function(i){var l;(l=i.classList).add.apply(l,r)}),this}function xt(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=Re(n.map(function(i){return i.split(" ")}));return this.forEach(function(i){var l;(l=i.classList).remove.apply(l,r)}),this}function Et(t,n){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var o=0;o<this.length;o+=1)if(arguments.length===2)this[o].setAttribute(t,n);else for(var r in t)this[o][r]=t[r],this[o].setAttribute(r,t[r]);return this}function Nt(){var t=this[0];if(t){var n={};if(t.dataset)for(var o in t.dataset)n[o]=t.dataset[o];else for(var r=0;r<t.attributes.length;r+=1){var i=t.attributes[r];i.name.indexOf("data-")>=0&&(n[xr(i.name.split("data-")[1])]=i.value)}for(var l in n)n[l]==="false"?n[l]=!1:n[l]==="true"?n[l]=!0:parseFloat(n[l])===n[l]*1&&(n[l]*=1);return n}}function Vt(t){if(typeof t>"u"){var n=this[0];if(!n)return;if(n.multiple&&n.nodeName.toLowerCase()==="select"){for(var o=[],r=0;r<n.selectedOptions.length;r+=1)o.push(n.selectedOptions[r].value);return o}return n.value}for(var i=0;i<this.length;i+=1){var l=this[i];if(Array.isArray(t)&&l.multiple&&l.nodeName.toLowerCase()==="select")for(var a=0;a<l.options.length;a+=1)l.options[a].selected=t.indexOf(l.options[a].value)>=0;else l.value=t}return this}function Ct(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n[0],i=n[1],l=n[2],a=n[3];typeof n[1]=="function"&&(r=n[0],l=n[1],a=n[2],i=void 0),a||(a=!1);function u(c){var _=c.target;if(_){var w=c.target.dom7EventData||[];if(w.indexOf(c)<0&&w.unshift(c),I(_).is(i))l.apply(_,w);else for(var S=I(_).parents(),h=0;h<S.length;h+=1)I(S[h]).is(i)&&l.apply(S[h],w)}}function s(c){var _=c&&c.target?c.target.dom7EventData||[]:[];_.indexOf(c)<0&&_.unshift(c),l.apply(this,_)}for(var m=r.split(" "),d,f=0;f<this.length;f+=1){var v=this[f];if(i)for(d=0;d<m.length;d+=1){var p=m[d];v.dom7LiveListeners||(v.dom7LiveListeners={}),v.dom7LiveListeners[p]||(v.dom7LiveListeners[p]=[]),v.dom7LiveListeners[p].push({listener:l,proxyListener:u}),v.addEventListener(p,u,a)}else for(d=0;d<m.length;d+=1){var b=m[d];v.dom7Listeners||(v.dom7Listeners={}),v.dom7Listeners[b]||(v.dom7Listeners[b]=[]),v.dom7Listeners[b].push({listener:l,proxyListener:s}),v.addEventListener(b,s,a)}}return this}function St(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n[0],i=n[1],l=n[2],a=n[3];typeof n[1]=="function"&&(r=n[0],l=n[1],a=n[2],i=void 0),a||(a=!1);for(var u=r.split(" "),s=0;s<u.length;s+=1)for(var m=u[s],d=0;d<this.length;d+=1){var f=this[d],v=void 0;if(!i&&f.dom7Listeners?v=f.dom7Listeners[m]:i&&f.dom7LiveListeners&&(v=f.dom7LiveListeners[m]),v&&v.length)for(var b=v.length-1;b>=0;b-=1){var p=v[b];l&&p.listener===l||l&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===l?(f.removeEventListener(m,p.proxyListener,a),v.splice(b,1)):l||(f.removeEventListener(m,p.proxyListener,a),v.splice(b,1))}}return this}function Tt(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function Mt(t){return t?(this.forEach(function(n,o){t.apply(n,[n,o])}),this):this}function It(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(var n=0;n<this.length;n+=1)this[n].innerHTML=t;return this}function Ot(t){var n=Qt(),o=Be(),r=this[0],i,l;if(!r||typeof t>"u")return!1;if(typeof t=="string"){if(r.matches)return r.matches(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);for(i=I(t),l=0;l<i.length;l+=1)if(i[l]===r)return!0;return!1}if(t===o)return r===o;if(t===n)return r===n;if(t.nodeType||t instanceof z){for(i=t.nodeType?[t]:t,l=0;l<i.length;l+=1)if(i[l]===r)return!0;return!1}return!1}function kt(){for(var t,n=Be(),o=0;o<arguments.length;o+=1){t=o<0||arguments.length<=o?void 0:arguments[o];for(var r=0;r<this.length;r+=1)if(typeof t=="string"){var i=n.createElement("div");for(i.innerHTML=t;i.firstChild;)this[r].appendChild(i.firstChild)}else if(t instanceof z)for(var l=0;l<t.length;l+=1)this[r].appendChild(t[l]);else this[r].appendChild(t)}return this}function Bt(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].parentNode;r;)t?I(r).is(t)&&n.push(r):n.push(r),r=r.parentNode;return I(n)}function Rt(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].querySelectorAll(t),i=0;i<r.length;i+=1)n.push(r[i]);return I(n)}function $t(t){for(var n=[],o=0;o<this.length;o+=1)for(var r=this[o].children,i=0;i<r.length;i+=1)(!t||I(r[i]).is(t))&&n.push(r[i]);return I(n)}var Nr="resize scroll".split(" ");function Zt(t){function n(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];if(typeof r[0]>"u"){for(var l=0;l<this.length;l+=1)Nr.indexOf(t)<0&&(t in this[l]?this[l][t]():I(this[l]).trigger(t));return this}return this.on.apply(this,[t].concat(r))}return n}var Dt=Zt("click"),At=Zt("focus");Tt&&(I.fn.hide=Tt);kt&&(I.fn.append=kt);Dt&&(I.fn.click=Dt);Ct&&(I.fn.on=Ct);St&&(I.fn.off=St);At&&(I.fn.focus=At);Et&&(I.fn.attr=Et);Vt&&(I.fn.val=Vt);It&&(I.fn.html=It);Nt&&(I.fn.dataset=Nt);wt&&(I.fn.addClass=wt);xt&&(I.fn.removeClass=xt);$t&&(I.fn.children=$t);Mt&&(I.fn.each=Mt);Rt&&(I.fn.find=Rt);Ot&&(I.fn.is=Ot);Bt&&(I.fn.parents=Bt);const Vr=globalThis.Node,Cr=globalThis.Comment,Sr=globalThis.Element,Tr=globalThis.Text,Mr=globalThis.Range,Ir=globalThis.Selection,Or=globalThis.StaticRange;function Jt(t,n,o,r,i){I("body").on("click",`#${r}-${n}`,mr(l=>{l.preventDefault();const a=Br(t,o,r);return a&&i(a)}))}function L(t,n,o,r){return Jt(t,"close",n,o,r)}function kr(t,n,o,r){return Jt(t,"play",n,o,r)}function Br(t,n,o){const[r]=E.SlateEditor.nodes(t,{at:[],match:i=>!E.SlateElement.isElement(i)||!E.DomEditor.checkNodeType(i,n)?!1:i.domId===o});return r}function ue(t,n,o){const r=E.SlateEditor.previous(t,{at:n[1],match:i=>E.SlateText.isText(i)});r!=null&&(E.SlateTransforms.insertText(t,o(n[0]),{at:E.SlateEditor.end(t,r[1])}),E.SlateTransforms.delete(t,{at:E.SlatePath.next(r[1])}))}let Rr=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,o)=>(o&=63,o<36?n+=o.toString(36):o<62?n+=(o-26).toString(36).toUpperCase():o>62?n+="-":n+="_",n),"");function en(t="r"){return`${t}-${Rr()}`}function $e(t){if(window.navigator.userAgent.toLowerCase().indexOf("ie")>=0){const o=`<embed name="embedPlay" src="${t}"></embed>`;I("body").find("embed").length<=0&&I("body").append(o);const r=document.embedPlay;r.volume=50}else{const o=`<audio id='audioPlay' src='${t}' hidden='true'>`;I("body").find("audio").length<=0&&I("body").append(o),document.getElementById("audioPlay").play()}}class U{constructor(n){D(this,"oldSelection",null);D(this,"editor");this.editor=n}genDomID(){return en(`w-e-dom-${this.key}`)}selection(){const{selection:n}=this.editor;return n??this.oldSelection}getValue(){const n=this.selection();return n==null?"":E.SlateEditor.string(this.editor,n)}record(){this.oldSelection=this.editor.selection}restore(){this.oldSelection&&this.editor.select(this.oldSelection)}isDisabled(){return this.selection()==null?(C.emit(V.ERROR,"未选中编辑器"),!0):!1}}class $r extends U{constructor(o){super(o);D(this,"key","speaker")}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();if(E.SlateRange.isCollapsed(o))return C.emit(V.ERROR,"请选中文本"),!0;const r=this.getValue();return r.length!=1?!0:/^[\u4E00-\u9FA5]+$/gi.test(r)?!1:(C.emit(V.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0)}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-p",domId:this.genDomID(),word:r,phoneme:o.value,remark:o.label,bgColor:"speaker",children:[{text:""}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),this.editor.move(1),L(this.editor,"ssml-p",i.domId,l=>{ue(this.editor,l,a=>a.word)})}}const De=e.defineComponent({setup(){const t=e.inject(K.EDITORCONFIG),n=e.shallowRef(),o=e.ref([]),r=e.ref(!1);function i(){r.value||(r.value=!0)}function l(){r.value&&(r.value=!1)}async function a(u){var m;if(n.value??(n.value=new $r(u)),(m=n.value)!=null&&m.isDisabled())return;const s=n.value.getValue();if(s?o.value=await t.fetchSpeaker(s):o.value=[],o.value.length==0)return C.emit(V.ERROR,"选中的字符没有不是多音字");i()}return()=>e.createVNode(M.ElPopover,{visible:r.value,"onUpdate:visible":u=>r.value=u,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"多音字",icon:"speaker",onClick:a},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[o.value.map(({label:u,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{n.value&&!n.value.isDisabled()&&n.value.exec({label:u,value:s}),l()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});class Dr extends U{constructor(o){super(o);D(this,"key","continuous")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isCollapsed(o)?(C.emit(V.ERROR,"请选择多个中文字符或者多个多个英文单词"),!0):E.SlateEditor.string(this.editor,o).length<2}exec(){if(this.isDisabled())return;const o=this.getValue();if(o==null)return;const r={type:"ssml-w",domId:this.genDomID(),children:[{text:o}],remark:"连读",bgColor:"continuous"};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,r),L(this.editor,"ssml-w",r.domId,i=>{E.SlateTransforms.unwrapNodes(this.editor,{at:i[1]})})}}const Ae=e.defineComponent({setup(){const t=e.shallowRef();function n(o){t.value??(t.value=new Dr(o)),t.value.exec()}return()=>e.createVNode(B,{text:"连读",icon:"continuous",onClick:n},null)}});class Ar extends U{constructor(){super(...arguments);D(this,"key","read")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return o==null?!0:E.SlateRange.isCollapsed(o)?(C.emit(V.ERROR,"请先选择文本"),!0):!1}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-w",domId:this.genDomID(),phoneme:o.value,remark:o.label,value:r,bgColor:"read",children:[{text:r}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),L(this.editor,"ssml-w",i.domId,l=>ue(this.editor,l,()=>r))}}const Pr=[{label:"重音",value:"重"},{label:"拖音",value:"拖"},{label:"重音+拖音",value:"重+拖"}],Pe=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function i(l){t.value??(t.value=new Ar(l)),!t.value.isDisabled()&&o()}return()=>e.createVNode(M.ElPopover,{visible:n.value,"onUpdate:visible":l=>n.value=l,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"重音",icon:"read",onClick:i},null),default:()=>e.createVNode("div",{class:"d-flex flex-column",onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[Pr.map(({label:l,value:a})=>e.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:l,value:a}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[l]))])})}});class Lr extends U{constructor(o){super(o);D(this,"key","digital")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();if(E.SlateRange.isCollapsed(o))return C.emit(V.ERROR,"请选择纯数字文本"),!0;const r=E.SlateEditor.string(this.editor,o);return!!(r.length<=0||Number.isNaN(Number(r)))}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-say-as",domId:this.genDomID(),interpretAs:o.value,remark:o.label,bgColor:"digital",children:[{text:r}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),L(this.editor,"ssml-say-as",i.domId,l=>{E.SlateTransforms.unwrapNodes(this.editor,{at:l[1]})})}}const Ur=[{value:"value",label:"读数值"},{value:"digits",label:"读数字"},{value:"telephone",label:"读手机号"}],Le=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value=!n.value}function r(i){t.value??(t.value=new Lr(i)),!t.value.isDisabled()&&o()}return()=>e.createVNode(M.ElPopover,{visible:n.value,"onUpdate:visible":i=>n.value=i,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"数字符号",icon:"digital",onClick:r},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Ur.map(({label:i,value:l})=>e.createVNode("div",{key:l,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:i,value:l}),o()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[i]))])})}});class Fr extends U{constructor(o){super(o);D(this,"key","alias")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isCollapsed(o)?(C.emit(V.ERROR,"选中一个中文字符，并且有不能在其他语句之内"),!0):E.SlateEditor.string(this.editor,o).length<=0}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-sub",domId:this.genDomID(),remark:`(${o.label})`,alias:o.value,value:r,bgColor:"alias",children:[{text:""}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),L(this.editor,"ssml-sub",i.domId,l=>ue(this.editor,l,a=>a.value))}}const Ue=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(),o=e.ref(!1);function r(){o.value||(o.value=!0)}function i(){o.value&&(o.value=!1)}async function l(u){t.value??(t.value=new Fr(u)),!t.value.isDisabled()&&(t.value.record(),r(),n.value.focus())}function a(u){var s,m;i(),u&&((s=t.value)==null||s.restore(),(m=t.value)==null||m.exec({value:u,label:u}))}return()=>e.createVNode(M.ElPopover,{visible:o.value,"onUpdate:visible":u=>o.value=u,trigger:"contextmenu",placement:"right-end",hideAfter:0,width:200},{reference:()=>e.createVNode(B,{text:"别名",icon:"alias",onClick:l},null),default:()=>e.createVNode(le,{ref:n,onSubmit:a},null)})}});function jr(t){const{selection:n}=t;if(n){const[o,r]=E.SlateRange.edges(n),i=E.SlateEditor.range(t,o,r),l=E.SlateEditor.string(t,i),a=l.trimEnd();if(a!==l){const u=l.length-a.length,s={...r,offset:r.offset-u},m={...n,anchor:o,focus:s};E.SlateTransforms.select(t,m)}}}class Gr extends U{constructor(o){super(o);D(this,"key","english")}getValue(){return super.getValue()}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();if(E.SlateRange.isCollapsed(o))return!0;const r=E.SlateEditor.string(this.editor,o);return r.length<=0?!0:/^[A-Za-z]+$/gi.test(r)?!1:(C.emit(V.ERROR,"请选择英文单词"),!0)}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-p",domId:this.genDomID(),word:r,phoneme:o.value,remark:o.label,bgColor:"english",children:[{text:""}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),this.editor.move(1),L(this.editor,"ssml-p",i.domId,l=>ue(this.editor,l,a=>a.word))}}const Fe=e.defineComponent({setup(){const t=e.shallowRef(),n=e.inject(K.EDITORCONFIG),o=e.ref([]),r=e.ref(!1);function i(){r.value||(r.value=!0)}function l(){r.value&&(r.value=!1)}async function a(u){if(t.value??(t.value=new Gr(u)),jr(u),t.value.isDisabled())return;const s=t.value.getValue();if(s){if(o.value=await n.fetchEnglish(s),o.value.length<=0)return C.emit(V.ERROR,"找不到单词的音标");i()}}return()=>e.createVNode(M.ElPopover,{visible:r.value,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"音标",icon:"english",onClick:a},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[o.value.map(({label:u,value:s})=>e.createVNode("div",{key:s,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:u,value:s}),l()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[u]))])})}});class Wr extends U{constructor(o){super(o);D(this,"key","changespeed")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return o==null?!0:E.SlateRange.isCollapsed(o)?(C.emit(V.ERROR,"请框选要变音的句子"),!0):!1}exec(o){if(this.isDisabled())return;const r=this.getValue();if(r==null)return;const i={type:"ssml-prosody",domId:this.genDomID(),remark:o.label,rate:o.value,bgColor:"changespeed",children:[{text:r}]};E.SlateTransforms.delete(this.editor),E.SlateTransforms.insertNodes(this.editor,i),L(this.editor,"ssml-prosody",i.domId,l=>{E.SlateTransforms.unwrapNodes(this.editor,{at:l[1]})})}}const zr=[{value:"0.1x",label:"0.1x"},{value:"0.15x",label:"0.15x"},{value:"0.2x",label:"0.2x"},{value:"0.25x",label:"0.25x"},{value:"0.3x",label:"0.3x"},{value:"0.35x",label:"0.35x"},{value:"0.4x",label:"0.4x"}],je=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}async function i(l){t.value??(t.value=new Wr(l)),!t.value.isDisabled()&&o()}return()=>e.createVNode(M.ElPopover,{style:{padding:"0px"},visible:n.value,"onUpdate:visible":l=>n.value=l,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"局部变速",icon:"changespeed",onClick:i},null),default:()=>e.createVNode("div",{class:"d-flex flex-column overflow-x-hidden overflow-y-scroll",style:"height:15rem"},[zr.map(({label:l,value:a})=>e.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{var u;(u=t.value)==null||u.exec({label:l,value:a}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[l]))])})}});class Kr extends U{constructor(o){super(o);D(this,"key","rhythm")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isExpanded(o)?(C.emit(V.ERROR,"不能选中文本"),!0):!1}exec(o){if(this.isDisabled())return;const r={type:"ssml-break",domId:this.genDomID(),time:o.value,remark:o.label,bgColor:"rhythm",children:[{text:""}]};E.SlateTransforms.insertNodes(this.editor,r),this.editor.move(1),L(this.editor,"ssml-break",r.domId,i=>{E.SlateTransforms.delete(this.editor,{at:i[1]})})}}const Hr=[{value:"200ms",label:"短"},{value:"300ms",label:"中"},{value:"500ms",label:"长"}],Ge=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1);function o(){n.value||(n.value=!0)}function r(){n.value&&(n.value=!1)}function i(l){t.value??(t.value=new Kr(l)),!t.value.isDisabled()&&o()}return()=>e.createVNode(M.ElPopover,{visible:n.value,"onUpdate:visible":l=>n.value=l,trigger:"contextmenu",hideAfter:0},{reference:()=>e.createVNode(B,{text:"停顿调节",icon:"rhythm",onClick:i},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Hr.map(({label:l,value:a})=>e.createVNode("div",{key:a,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>{t.value&&!t.value.isDisabled()&&t.value.exec({label:l,value:a}),r()},onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[l]))])})}});class Xr extends U{constructor(o){super(o);D(this,"key","special")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isExpanded(o)?(C.emit(V.ERROR,"不能框选文字"),!0):!1}exec(o){if(this.isDisabled()||this.getValue()==null)return;const i={type:"ssml-audio",domId:this.genDomID(),src:o.value,remark:o.label,bgColor:"special",children:[{text:""}]};E.SlateTransforms.insertNodes(this.editor,i),this.editor.move(1),L(this.editor,"ssml-audio",i.domId,l=>E.SlateTransforms.delete(this.editor,{at:l[1]})),kr(this.editor,"ssml-audio",i.domId,l=>$e(l[0].src))}}const We=e.defineComponent({__name:"special-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:l}=J(n),a=s=>{if(o.value??(o.value=new Xr(s)),o.value.isDisabled())return!1;o.value.record(),C.emit(V.SPECIAL_MENU_CLICK,{x:r.value-200,y:i.value+l.value})};function u(s){o.value&&!o.value.isDisabled()&&(o.value.restore(),o.value.exec(s))}return e.onMounted(()=>{C.on(V.SPECIAL_DRAG_BOX_SUBMIT,u)}),e.onUnmounted(()=>{C.off(V.SPECIAL_DRAG_BOX_SUBMIT,u)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:n,text:"音效",icon:"special",onClick:a},null,512))}}),ze=e.defineComponent({__name:"special-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认音效",second:"自定义音效",last:"最近音效"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],a=e.ref();e.onMounted(()=>{C.on(V.SPECIAL_MENU_CLICK,s)}),e.onUnmounted(()=>{C.off(V.SPECIAL_MENU_CLICK,s)});function u(d){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-3s.wav#1",label:`${d.search||"测试"}音效1`},{value:"https://download.samplelib.com/wav/sample-3s.wav#2",label:`${d.menuKey||"测试"}音效2`},{value:"https://download.samplelib.com/wav/sample-3s.wav#3",label:`${d.scene||"测试"}音效3`},{value:"https://download.samplelib.com/wav/sample-3s.wav#4",label:`${d.style||"测试"}音效4`}])}async function s(d){o.value=d,n.value=!0,a.value??(a.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function m(d){n.value=!1,C.emit(V.SPECIAL_DRAG_BOX_SUBMIT,d)}return(d,f)=>(e.openBlock(),e.createBlock(e.unref(X),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=v=>n.value=v),position:o.value,"onUpdate:position":f[1]||(f[1]=v=>o.value=v)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:l,dataList:a.value,fetch:u,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}});class qr extends U{constructor(){super(...arguments);D(this,"key","mute")}isDisabled(){if(super.isDisabled())return!0;const o=this.selection();return E.SlateRange.isExpanded(o)?(C.emit(V.ERROR,"不能选中文本"),!0):!1}exec(o){if(this.isDisabled())return;const r={type:"ssml-break",domId:this.genDomID(),time:o.value,remark:o.label,bgColor:"mute",children:[{text:""}]};E.SlateTransforms.insertNodes(this.editor,r),this.editor.move(1),L(this.editor,"ssml-break",r.domId,i=>{E.SlateTransforms.delete(this.editor,{at:i[1]})})}}const Yr=[{value:"150ms",label:"150ms"},{value:"200ms",label:"200ms"},{value:"300ms",label:"300ms"},{value:"400ms",label:"400ms"},{value:"500ms",label:"500ms"},{value:"600ms",label:"600ms"}],Ke=e.defineComponent({setup(){const t=e.shallowRef(),n=e.ref(!1),o=e.ref();function r(){n.value||(n.value=!0)}function i(){n.value&&(n.value=!1)}function l(u){t.value??(t.value=new qr(u)),!t.value.isDisabled()&&(r(),t.value.record(),o.value.focus())}function a(u){var s,m;i(),u&&((s=t.value)==null||s.restore(),(m=t.value)==null||m.exec({value:u,label:u}))}return()=>e.createVNode(M.ElPopover,{visible:n.value,"onUpdate:visible":u=>n.value=u,trigger:"contextmenu",hideAfter:0,width:200},{reference:()=>e.createVNode(B,{text:"插入静音",icon:"mute",onClick:l},null),default:()=>e.createVNode("div",{class:"d-flex flex-column"},[Yr.map(({value:u,label:s})=>e.createVNode("div",{key:u,class:"clickable w-100 fs-6 rounded-1 px-3 py-2",onClick:()=>a(u),onMousedown:e.withModifiers(()=>{},["stop","prevent"])},[s])),e.createVNode(le,{type:"number",ref:o,onSubmit:a},null)])})}}),He=e.defineComponent({__name:"bgm-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:l}=J(n),a=s=>{o.value=s,C.emit(V.BGM_MENU_CLICK,{x:r.value-200,y:i.value+l.value})};function u(s){var m;(m=o.value)==null||m.emit(j.UPDATE_BGM,s)}return e.onMounted(()=>{C.on(V.BGM_DRAG_BOX_SUBMIT,u)}),e.onUnmounted(()=>{C.off(V.BGM_DRAG_BOX_SUBMIT,u)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:n,text:"配乐",icon:"bgm",onClick:a},null,512))}}),Xe=e.defineComponent({__name:"bgm-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],a=e.ref();e.onMounted(()=>{C.on(V.BGM_MENU_CLICK,s)}),e.onUnmounted(()=>{C.off(V.BGM_MENU_CLICK,s)});function u(d){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${d.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${d.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${d.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${d.style||"测试"}背景音乐4`}])}async function s(d){o.value=d,n.value=!0,a.value??(a.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function m(d){n.value=!1,C.emit(V.BGM_DRAG_BOX_SUBMIT,d)}return(d,f)=>(e.openBlock(),e.createBlock(e.unref(X),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=v=>n.value=v),position:o.value,"onUpdate:position":f[1]||(f[1]=v=>o.value=v)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:l,dataList:a.value,fetch:u,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),qe=e.defineComponent({__name:"sensitive-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:l}=J(n),a=s=>{o.value=s,C.emit(V.SENSITIVE_MENU_CLICK,{x:r.value-200,y:i.value+l.value})};function u(s){console.log(s)}return e.onMounted(()=>{C.on(V.SENSITIVE_DRAG_BOX_SUBMIT,u)}),e.onUnmounted(()=>{C.off(V.SENSITIVE_DRAG_BOX_SUBMIT,u)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:n,text:"敏感词",icon:"sensitive",onClick:a},null,512))}}),Ye=e.defineComponent({__name:"sensitive-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],a=e.ref();e.onMounted(()=>{C.on(V.SENSITIVE_MENU_CLICK,s)}),e.onUnmounted(()=>{C.off(V.SENSITIVE_MENU_CLICK,s)});function u(d){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${d.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${d.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${d.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${d.style||"测试"}背景音乐4`}])}async function s(d){o.value=d,n.value=!0,a.value??(a.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function m(d){n.value=!1,C.emit(V.SENSITIVE_DRAG_BOX_SUBMIT,d)}return(d,f)=>(e.openBlock(),e.createBlock(e.unref(X),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=v=>n.value=v),position:o.value,"onUpdate:position":f[1]||(f[1]=v=>o.value=v)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:l,dataList:a.value,fetch:u,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Qe=e.defineComponent({__name:"management-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:l}=J(n),a=s=>{o.value=s,C.emit(V.MANAGEMENT_MENU_CLICK,{x:r.value-200,y:i.value+l.value})};function u(s){console.log(s)}return e.onMounted(()=>{C.on(V.MANAGEMENT_DRAG_BOX_SUBMIT,u)}),e.onUnmounted(()=>{C.off(V.MANAGEMENT_DRAG_BOX_SUBMIT,u)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:n,text:"多人配音",icon:"management",onClick:a},null,512))}}),Ze=e.defineComponent({__name:"management-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],a=e.ref();e.onMounted(()=>{C.on(V.MANAGEMENT_MENU_CLICK,s)}),e.onUnmounted(()=>{C.off(V.MANAGEMENT_MENU_CLICK,s)});function u(d){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${d.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${d.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${d.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${d.style||"测试"}背景音乐4`}])}async function s(d){o.value=d,n.value=!0,a.value??(a.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function m(d){n.value=!1,C.emit(V.MANAGEMENT_DRAG_BOX_SUBMIT,d)}return(d,f)=>(e.openBlock(),e.createBlock(e.unref(X),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=v=>n.value=v),position:o.value,"onUpdate:position":f[1]||(f[1]=v=>o.value=v)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:l,dataList:a.value,fetch:u,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Je=e.defineComponent({__name:"conversion-menu",setup(t){const n=e.ref(),o=e.shallowRef(),{x:r,y:i,height:l}=J(n),a=s=>{o.value=s,C.emit(V.CONVERSION_MENU_CLICK,{x:r.value-200,y:i.value+l.value})};function u(s){console.log(s)}return e.onMounted(()=>{C.on(V.CONVERSION_DRAG_BOX_SUBMIT,u)}),e.onUnmounted(()=>{C.off(V.CONVERSION_DRAG_BOX_SUBMIT,u)}),(s,m)=>(e.openBlock(),e.createBlock(e.unref(B),{ref_key:"menuRef",ref:n,text:"局部变音",icon:"conversion",onClick:a},null,512))}}),et=e.defineComponent({__name:"conversion-drag-box",setup(t){const n=e.ref(!1),o=e.ref({x:20,y:20}),r={first:"默认配乐",second:"自定义配乐",last:"最近配乐"},i=[{value:"",label:"全部场景"},{value:"2",label:"场景2"},{value:"3",label:"场景3"}],l=[{value:"",label:"全部风格"},{value:"2",label:"风格2"},{value:"3",label:"风格3"}],a=e.ref();e.onMounted(()=>{C.on(V.CONVERSION_MENU_CLICK,s)}),e.onUnmounted(()=>{C.off(V.CONVERSION_MENU_CLICK,s)});function u(d){return Promise.resolve([{value:"https://download.samplelib.com/wav/sample-6s.wav#1",label:`${d.search||"测试"}背景音乐1`},{value:"https://download.samplelib.com/wav/sample-6s.wav#2",label:`${d.menuKey||"测试"}背景音乐2`},{value:"https://download.samplelib.com/wav/sample-6s.wav#3",label:`${d.scene||"测试"}背景音乐3`},{value:"https://download.samplelib.com/wav/sample-6s.wav#4",label:`${d.style||"测试"}背景音乐4`}])}async function s(d){o.value=d,n.value=!0,a.value??(a.value=await u({search:"",menuKey:"first",scene:"",style:""}))}function m(d){n.value=!1,C.emit(V.CONVERSION_DRAG_BOX_SUBMIT,d)}return(d,f)=>(e.openBlock(),e.createBlock(e.unref(X),{visible:n.value,"onUpdate:visible":f[0]||(f[0]=v=>n.value=v),position:o.value,"onUpdate:position":f[1]||(f[1]=v=>o.value=v)},{default:e.withCtx(()=>[e.createVNode(e.unref(H),{menuItemLabel:r,scenes:i,styles:l,dataList:a.value,fetch:u,onSubmit:m},null,8,["dataList"])]),_:1},8,["visible","position"]))}}),Qr=t=>(e.pushScopeId("data-v-93c5e583"),t=t(),e.popScopeId(),t),Zr={class:"anchor-avatar d-flex flex-column justify-content-center align-items-center"},Jr=["src"],ei=Qr(()=>e.createElementVNode("div",{class:"anchor-avatar-name text-white"},"莫厚渊",-1)),ti=e.defineComponent({__name:"try-play-circle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:n}){const o=e.ref(`
  https://mobvoi-speech-public.mobvoi.com/headerImage/4314c841777e4d20901cd5d04a28e91a.png?iopcmd=thumbnail&type=8&width=80&height=80`),r=e.ref(),i=e.ref(0),l=e.ref(0),{style:a}=Te(r,se(r,{initialValue:{x:window.innerWidth-15,y:window.innerHeight/2-15},onStart:(d,f)=>m(f.clientX,f.clientY)?!1:void 0}));function u(d){m(d.clientX,d.clientY)&&n("update:visible",!1)}function s(d){i.value=d.clientX,l.value=d.clientY}function m(d,f){return d>i.value-10&&d<i.value+10&&f>l.value-10&&f<l.value+10}return(d,f)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"try-play-circel user-select-none rounded-circle overflow-hidden",style:e.normalizeStyle([e.unref(a),{position:"fixed"}]),onMousedown:s,onMouseup:u},[e.createElementVNode("div",Zr,[e.createElementVNode("img",{src:o.value,class:"rounded-circle"},null,8,Jr),ei])],36)),[[e.vShow,d.visible]])}});const ni=$(ti,[["__scopeId","data-v-93c5e583"]]),oi=t=>(e.pushScopeId("data-v-09793f61"),t=t(),e.popScopeId(),t),ri={class:"anchor-avatar d-flex flex-column justify-content-center"},ii=["src"],li=oi(()=>e.createElementVNode("div",{class:"anchor-avatar-name text-white"},"莫厚渊",-1)),ai=e.defineComponent({__name:"anchor-avatar",setup(t){const n=e.ref(`
  https://mobvoi-speech-public.mobvoi.com/headerImage/4314c841777e4d20901cd5d04a28e91a.png?iopcmd=thumbnail&type=8&width=80&height=80`);return(o,r)=>(e.openBlock(),e.createElementBlock("div",ri,[e.createElementVNode("img",{src:n.value,class:"rounded-circle"},null,8,ii),li]))}});const si=$(ai,[["__scopeId","data-v-09793f61"]]),ui={class:"anchor-list w-100 d-flex flex-row flex-wrap justify-content-between align-content-start overflow-x-hidden overflow-y-auto"},ci=e.defineComponent({__name:"anchor-list",setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",ui,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(100,(r,i)=>e.createVNode(si,{key:i})),64))]))}});const di=$(ci,[["__scopeId","data-v-3c347263"]]),fi=e.defineComponent({__name:"tag-item",props:{isActivate:{type:Boolean}},setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tag-item p-2 text-white",[n.isActivate?"activate":null]])},[e.renderSlot(n.$slots,"default",{},void 0,!0)],2))}});const x=$(fi,[["__scopeId","data-v-fe47427c"]]),pi={class:"tag-list w-100"},mi={class:"w-100 d-flex flex-row"},vi={class:"tag-list-body w-100 d-flex flex-row flex-wrap align-items-start overflow-y-auto overflow-x-hidden"},hi=e.defineComponent({__name:"tag-list",setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock("div",pi,[e.createElementVNode("div",mi,[e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("男声")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("女声")]),_:1})]),e.createElementVNode("div",vi,[e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("全部")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("影视")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("情感")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("娱乐")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("快板")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("书单")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("名人")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("角色")]),_:1})])]))}});const _i=$(hi,[["__scopeId","data-v-4d21bc70"]]);const tn=t=>(e.pushScopeId("data-v-f75c8d40"),t=t(),e.popScopeId(),t),gi={class:"px-2 pb-2"},bi={class:"try-play-header d-flex flex-row justify-content-between align-items-center"},yi={class:"try-play-body w-100 h-100 d-flex flex-row"},wi={class:"try-play-left w-50"},xi={class:"type-list d-flex flex-row border-bottom border-secondary"},Ei=tn(()=>e.createElementVNode("div",{class:"py-1"},null,-1)),Ni=tn(()=>e.createElementVNode("div",{class:"try-play-right border border-secondary w-50"},"right",-1)),Vi=e.defineComponent({__name:"try-play-panle",props:{visible:{type:Boolean}},emits:["update:visible"],setup(t,{emit:n}){const o=t,r=e.ref(),i=e.ref(""),l=e.ref(),a=e.ref();e.onMounted(()=>{window.addEventListener("keydown",u)}),e.onUnmounted(()=>{window.addEventListener("keydown",u)}),e.watch(()=>o.visible,f=>{f&&setTimeout(()=>{d()},200)});function u(f){f.code==="Escape"&&o.visible&&m()}const{style:s}=Te(l,se(a,{initialValue:{x:200,y:200}}));function m(){n("update:visible",!1)}function d(){var f;(f=r.value)==null||f.focus()}return(f,v)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:l,style:e.normalizeStyle([e.unref(s),{position:"fixed"}]),class:"try-play user-select-none card z-3 shadow"},[e.createElementVNode("div",gi,[e.createElementVNode("div",bi,[e.createElementVNode("div",{ref_key:"handleRef",ref:a,class:"w-100 h-100"},null,512),e.createElementVNode("div",{onClick:m,class:"px-2 py-1 try-play-menu-close"},[e.createVNode(e.unref(M.ElIcon),{color:"white"},{default:e.withCtx(()=>[e.createVNode(e.unref(Ne.Minus))]),_:1})])]),e.createElementVNode("div",null,[e.createElementVNode("div",yi,[e.createElementVNode("div",wi,[e.createElementVNode("div",null,[e.createVNode(e.unref(M.ElForm),{onSubmit:v[1]||(v[1]=e.withModifiers(()=>{},["prevent"]))},{default:e.withCtx(()=>[e.createVNode(e.unref(M.ElInput),{ref_key:"searchInputRef",ref:r,modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=b=>i.value=b),placeholder:"输入名称搜索"},null,8,["modelValue"])]),_:1})]),e.createElementVNode("div",xi,[e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("热榜")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("SVIP")]),_:1}),e.createVNode(x,null,{default:e.withCtx(()=>[e.createTextVNode("付费")]),_:1})]),e.createVNode(_i),Ei,e.createVNode(di)]),Ni])])])],4)),[[e.vShow,f.visible]])}});const Ci=$(Vi,[["__scopeId","data-v-f75c8d40"]]),tt=e.defineComponent({__name:"try-play",setup(t){const n=e.ref(!0);function o(r){r||(n.value=!0)}return(r,i)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(ni,{visible:n.value,"onUpdate:visible":i[0]||(i[0]=l=>n.value=l)},null,8,["visible"]),e.createVNode(Ci,{visible:!n.value,"onUpdate:visible":o},null,8,["visible"])]))}});const Si={install:t=>{t.component("SpeakerMenu",De),t.component("ContinuousMenu",Ae),t.component("ReadMenu",Pe),t.component("DigitalMenu",Le),t.component("AliasMenu",Ue),t.component("EnglishMenu",Fe),t.component("ChangespeedMenu",je),t.component("RhythmMenu",Ge),t.component("SpecialMenu",We),t.component("SpecialDragBox",ze),t.component("MuteMenu",Ke),t.component("BgmMenu",He),t.component("BgmDragBox",Xe),t.component("SensitiveMenu",qe),t.component("SensitiveDragBox",Ye),t.component("ManagementMenu",Qe),t.component("ManagementDragBox",Ze),t.component("ConversionMenu",Je),t.component("ConversionDragBox",et),t.component("TryPlay",tt)}};var xe={exports:{}},Ee={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class o extends Error{constructor(y,N){super(y),this.cause=N}}n.ParsingError=o;let r;function i(){return s(!1)||v()||f()||d()}function l(){return c(/\s*/),s(!0)||f()||m()||u(!1)}function a(){const h=u(!0),y=[];let N,g=l();for(;g;){if(g.node.type==="Element"){if(N)throw new Error("Found multiple root nodes");N=g.node}g.excluded||y.push(g.node),g=l()}if(!N)throw new o("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new o("Failed to parse XML","Not Well-Formed XML");return{declaration:h?h.node:null,root:N,children:y}}function u(h){const y=c(h?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!y)return;const N={name:y[1],type:"ProcessingInstruction",attributes:{}};for(;!(_()||w("?>"));){const g=b();if(g)N.attributes[g.name]=g.value;else return}return c(/\?>/),{excluded:h?!1:r.options.filter(N)===!1,node:N}}function s(h){const y=c(/^<([^?!</>\s]+)\s*/);if(!y)return;const N={type:"Element",name:y[1],attributes:{},children:[]},g=h?!1:r.options.filter(N)===!1;for(;!(_()||w(">")||w("?>")||w("/>"));){const k=b();if(k)N.attributes[k.name]=k.value;else return}if(c(/^\s*\/>/))return N.children=null,{excluded:g,node:N};c(/\??>/);let T=i();for(;T;)T.excluded||N.children.push(T.node),T=i();if(r.options.strictMode){const k=`</${N.name}>`;if(r.xml.startsWith(k))r.xml=r.xml.slice(k.length);else throw new o("Failed to parse XML",`Closing tag not matching "${k}"`)}else c(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:g,node:N}}function m(){const h=c(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||c(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||c(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||c(/^<!DOCTYPE\s+\S+\s*>/);if(h){const y={type:"DocumentType",content:h[0]};return{excluded:r.options.filter(y)===!1,node:y}}}function d(){if(r.xml.startsWith("<![CDATA[")){const h=r.xml.indexOf("]]>");if(h>-1){const y=h+3,N={type:"CDATA",content:r.xml.substring(0,y)};return r.xml=r.xml.slice(y),{excluded:r.options.filter(N)===!1,node:N}}}}function f(){const h=c(/^<!--[\s\S]*?-->/);if(h){const y={type:"Comment",content:h[0]};return{excluded:r.options.filter(y)===!1,node:y}}}function v(){const h=c(/^([^<]+)/);if(h){const y={type:"Text",content:h[1]};return{excluded:r.options.filter(y)===!1,node:y}}}function b(){const h=c(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(h)return{name:h[1].trim(),value:p(h[2].trim())}}function p(h){return h.replace(/^['"]|['"]$/g,"")}function c(h){const y=r.xml.match(h);if(y)return r.xml=r.xml.slice(y[0].length),y}function _(){return r.xml.length===0}function w(h){return r.xml.indexOf(h)===0}function S(h,y={}){h=h.trim();const N=y.filter||(()=>!0);return r={xml:h,options:Object.assign(Object.assign({},y),{filter:N,strictMode:y.strictMode===!0})},a()}t.exports=S,n.default=S})(Ee,Ee.exports);var Ti=Ee.exports;(function(t,n){var o=Y&&Y.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(n,"__esModule",{value:!0});const r=o(Ti);function i(p){if(!p.options.indentation&&!p.options.lineSeparator)return;p.content+=p.options.lineSeparator;let c;for(c=0;c<p.level;c++)p.content+=p.options.indentation}function l(p){p.content=p.content.replace(/ +$/,"");let c;for(c=0;c<p.level;c++)p.content+=p.options.indentation}function a(p,c){p.content+=c}function u(p,c,_){if(typeof p.content=="string")s(p.content,c,_);else if(p.type==="Element")d(p,c,_);else if(p.type==="ProcessingInstruction")v(p,c);else throw new Error("Unknown node type: "+p.type)}function s(p,c,_){if(!_){const w=p.trim();(c.options.lineSeparator||w.length===0)&&(p=w)}p.length>0&&(!_&&c.content.length>0&&i(c),a(c,p))}function m(p,c){const _="/"+p.join("/"),w=p[p.length-1];return c.includes(w)||c.includes(_)}function d(p,c,_){if(c.path.push(p.name),!_&&c.content.length>0&&i(c),a(c,"<"+p.name),f(c,p.attributes),p.children===null||c.options.forceSelfClosingEmptyTag&&p.children.length===0){const w=c.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";a(c,w)}else if(p.children.length===0)a(c,"></"+p.name+">");else{const w=p.children;a(c,">"),c.level++;let S=p.attributes["xml:space"]==="preserve",h=!1;if(!S&&c.options.ignoredPaths&&(h=m(c.path,c.options.ignoredPaths),S=h),!S&&c.options.collapseContent){let y=!1,N=!1,g=!1;w.forEach(function(T,k){T.type==="Text"?(T.content.includes(`
`)?(N=!0,T.content=T.content.trim()):(k===0||k===w.length-1)&&T.content.trim().length===0&&(T.content=""),T.content.trim().length>0&&(y=!0)):T.type==="CDATA"?y=!0:g=!0}),y&&(!g||!N)&&(S=!0)}w.forEach(function(y){u(y,c,_||S)}),c.level--,!_&&!S&&i(c),h&&l(c),a(c,"</"+p.name+">")}c.path.pop()}function f(p,c){Object.keys(c).forEach(function(_){const w=c[_].replace(/"/g,"&quot;");a(p," "+_+'="'+w+'"')})}function v(p,c){c.content.length>0&&i(c),a(c,"<?"+p.name),f(c,p.attributes),a(c,"?>")}function b(p,c={}){c.indentation="indentation"in c?c.indentation:"    ",c.collapseContent=c.collapseContent===!0,c.lineSeparator="lineSeparator"in c?c.lineSeparator:`\r
`,c.whiteSpaceAtEndOfSelfclosingTag=c.whiteSpaceAtEndOfSelfclosingTag===!0,c.throwOnFailure=c.throwOnFailure!==!1;try{const _=(0,r.default)(p,{filter:c.filter,strictMode:c.strictMode}),w={content:"",level:0,options:c,path:[]};return _.declaration&&v(_.declaration,w),_.children.forEach(function(S){u(S,w,!1)}),c.lineSeparator?w.content.replace(/\r\n/g,`
`).replace(/\n/g,c.lineSeparator):w.content}catch(_){if(c.throwOnFailure)throw _;return p}}b.minify=(p,c={})=>b(p,Object.assign(Object.assign({},c),{indentation:"",lineSeparator:""})),t.exports=b,n.default=b})(xe,xe.exports);var Mi=xe.exports;const Ii=Ie(Mi),q=t=>(e.pushScopeId("data-v-f5188410"),t=t(),e.popScopeId(),t),Oi={class:"editor-title d-flex flex-row align-item-center justify-content-between"},ki={class:"title-wrapper d-flex flex-column justify-content-center ps-3"},Bi=q(()=>e.createElementVNode("div",{class:"title-author pb-1"},"SSML编辑器",-1)),Ri={class:"author d-flex flex-row align-items-center justify-content-start"},$i=q(()=>e.createElementVNode("div",null,"已保存",-1)),Di=q(()=>e.createElementVNode("div",null,"|",-1)),Ai=q(()=>e.createElementVNode("span",{class:"iconfont icon-play font-size-12 p-1"},null,-1)),Pi=q(()=>e.createElementVNode("div",{class:"d-inline-block"},null,-1)),Li={class:"operation-wrapper d-flex flex-row justify-content-center align-items-center"},Ui=q(()=>e.createElementVNode("div",{class:"menu-divider"},null,-1)),Fi=q(()=>e.createElementVNode("div",{class:"px-1"},null,-1)),ji={class:"ssml-code"},Gi={class:"dialog-footer"},Wi=e.defineComponent({__name:"editor-title",props:{characterTotal:{},characterMax:{},bgm:{}},setup(t){const n=e.inject(K.EDITOR),o=e.ref(!1),r=e.ref(""),i=e.computed(()=>Ii(r.value,{indentation:"    ",filter:u=>u.type!=="Comment",collapseContent:!1,lineSeparator:`
`})),l=()=>{n&&(r.value=n.value.getHtml(),o.value=!0)},a=()=>{n==null||n.value.emit(j.REMOVE_BGM)};return(u,s)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Oi,[e.createElementVNode("div",ki,[Bi,e.createElementVNode("div",Ri,[$i,Di,e.createElementVNode("div",null,e.toDisplayString(u.characterTotal)+"/"+e.toDisplayString(u.characterMax)+"字",1),u.bgm?(e.openBlock(),e.createBlock(e.unref(M.ElTag),{key:0,class:"bgm-txt ms-2",closable:"",size:"small",onClick:s[0]||(s[0]=()=>u.bgm&&u.bgm.value&&e.unref($e)(u.bgm.value)),onClose:a},{default:e.withCtx(()=>[Ai,Pi,e.createElementVNode("span",null,e.toDisplayString(u.bgm.label),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Li,[e.createVNode(e.unref(M.ElButton),{type:"primary",icon:e.unref(Ne.Share),disabled:""},{default:e.withCtx(()=>[e.createTextVNode("分享")]),_:1},8,["icon"]),Ui,e.createVNode(e.unref(M.ElButton),{type:"primary",onClick:l},{default:e.withCtx(()=>[e.createTextVNode("查看SSML")]),_:1}),e.createVNode(e.unref(M.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载音频")]),_:1}),e.createVNode(e.unref(M.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载视频")]),_:1}),e.createVNode(e.unref(M.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("下载字幕")]),_:1}),e.createVNode(e.unref(M.ElButton),{disabled:""},{default:e.withCtx(()=>[e.createTextVNode("声音转换")]),_:1}),Fi])]),e.createVNode(e.unref(M.ElDialog),{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=m=>o.value=m),title:"查看SSML",width:"50%"},{footer:e.withCtx(()=>[e.createElementVNode("span",Gi,[e.createVNode(e.unref(M.ElButton),{type:"primary",onClick:s[1]||(s[1]=m=>o.value=!1)},{default:e.withCtx(()=>[e.createTextVNode(" 确定 ")]),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("pre",ji,e.toDisplayString(i.value),1)]),_:1},8,["modelValue"])],64))}});const zi=$(Wi,[["__scopeId","data-v-f5188410"]]),Ki=e.defineComponent({__name:"editor-core",props:{editorConfig:{},defaultHtml:{}},emits:["created","change"],setup(t,{emit:n}){const o=t,r=e.ref(null);e.onMounted(()=>{i()});const i=()=>{r.value&&E.createEditor({selector:r.value,mode:"simple",html:e.toRaw(o.defaultHtml),config:{...e.toRaw(o.editorConfig),onCreated(l){const a=l.getConfig();a.hoverbarKeys=void 0,l.focus(!0),n("created",l)},onChange(l){n("change",l)}}})};return(l,a)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:r,class:"edit-core",style:{height:"600px","overflow-y":"hidden"}},null,512))}}),Hi={class:"content"},Xi=e.defineComponent({__name:"bar-view",setup(t){return(n,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Hi,[e.createVNode(e.unref(Me),null,{default:e.withCtx(()=>[e.createVNode(e.unref(F),{divider:"green"},{default:e.withCtx(()=>[e.createVNode(e.unref(B),{text:"24K高清音质",icon:"play",disabled:""})]),_:1}),e.createVNode(e.unref(F),{divider:"cyan"},{default:e.withCtx(()=>[e.createVNode(e.unref(De)),e.createVNode(e.unref(Pe)),e.createVNode(e.unref(Le)),e.createVNode(e.unref(Ae)),e.createVNode(e.unref(Ue)),e.createVNode(e.unref(Fe))]),_:1}),e.createVNode(e.unref(F),{divider:"orange"},{default:e.withCtx(()=>[e.createVNode(e.unref(je)),e.createVNode(e.unref(Qe)),e.createVNode(e.unref(Je))]),_:1}),e.createVNode(e.unref(F),{divider:"purple"},{default:e.withCtx(()=>[e.createVNode(e.unref(Ge)),e.createVNode(e.unref(Ke))]),_:1}),e.createVNode(e.unref(F),{divider:"yellow"},{default:e.withCtx(()=>[e.createVNode(e.unref(We)),e.createVNode(e.unref(He))]),_:1}),e.createVNode(e.unref(F),null,{default:e.withCtx(()=>[e.createVNode(e.unref(qe))]),_:1})]),_:1})]),e.createVNode(e.unref(Xe)),e.createVNode(e.unref(ze)),e.createVNode(e.unref(Ye)),e.createVNode(e.unref(Ze)),e.createVNode(e.unref(et)),e.createVNode(e.unref(tt))],64))}}),qi={class:"editor-view"},Yi={class:"editor-box"},Qi={class:"editor-core-container pt-1"},Zi=`地球在极其遥远的未来可能面临一些威胁，但目前不太可能突然消失。
The Earth may face some threats in the extremely distant future, but it is currently unlikely to suddenly disappear.
`,Ji=e.defineComponent({__name:"editor-view",emits:["onCreated","onChange"],setup(t,{emit:n}){const o=e.ref(0),r=e.shallowRef(),i=e.ref(null);e.provide(K.EDITOR,r);const l={maxLength:5e3,placeholder:"请输入内容..."};e.onUnmounted(()=>{var s;(s=r.value)==null||s.destroy()});const a=s=>{r.value=s,n("onCreated",s),s.on(j.UPDATE_BGM,m=>{i.value=m}),s.on(j.REMOVE_BGM,()=>{i.value=null})},u=s=>{o.value=s.getText().length,n("onChange",s)};return(s,m)=>(e.openBlock(),e.createElementBlock("div",qi,[e.createVNode(zi,{bgm:i.value,"character-total":o.value,"character-max":l.maxLength||0},null,8,["bgm","character-total","character-max"]),e.createElementVNode("div",Yi,[e.createVNode(Xi),e.createElementVNode("div",Qi,[e.createVNode(Ki,{"editor-config":l,"default-html":Zi,onChange:u,onCreated:a})])])]))}});const nn=$(Ji,[["__scopeId","data-v-0eafcab5"]]),el={install(t){t.component("EditorView",nn)}};function Pt(t,n,o,r,i){const l=n===void 0?void 0:n.key;return{sel:t,data:n,children:o,text:r,elm:i,key:l}}const Lt=Array.isArray;function ge(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function on(t,n,o){if(t.ns="http://www.w3.org/2000/svg",o!=="foreignObject"&&n!==void 0)for(let r=0;r<n.length;++r){const i=n[r];if(typeof i=="string")continue;const l=i.data;l!==void 0&&on(l,i.children,i.sel)}}function O(t,n,o){let r={},i,l,a;if(o!==void 0?(n!==null&&(r=n),Lt(o)?i=o:ge(o)?l=o.toString():o&&o.sel&&(i=[o])):n!=null&&(Lt(n)?i=n:ge(n)?l=n.toString():n&&n.sel?i=[n]:r=n),i!==void 0)for(a=0;a<i.length;++a)ge(i[a])&&(i[a]=Pt(void 0,void 0,void 0,i[a],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&on(r,i,t),Pt(t,r,i,l,void 0)}const G={style:{userSelect:"none"},contentEditable:!1};function nt(t){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...G},[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-close`,O("span.iconfont.icon-roundclosefill",null))]),O(`span.boundary.start.ft-color.${t.bgColor}`,{...G}),O("span",t.plain),O(`span.boundary.end.ft-color.${t.bgColor}`,{...G})])}function ot(t,n){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...G},[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-close`,O("span.iconfont.icon-roundclosefill",null))]),O(`span.boundary.start.ft-color.${t.bgColor}`,{...G}),O("span",n),O(`span.boundary.end.ft-color.${t.bgColor}`,{...G})])}function tl(t){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...G},[O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-close`,O("span.iconfont.icon-roundclosefill",null))])])}function nl(t){return O("span.ssml-wrap",[O(`span.tag.bg-color.${t.bgColor}`,{...G},[O(`span#${t.domId}-play.btn-text`,O("span.iconfont.icon-play",null)),O("span.tag-remark",{attrs:{"data-tag-remark":t.remark}}),O(`span#${t.domId}-close.btn-text`,O("span.iconfont.icon-roundclosefill",null))])])}function ol(t){const n=t;return nt({...n,plain:n.word})}function rl(t,n){if(n)return ot(t,n);const o=t;return nt({...o,plain:o.value})}function il(t,n){if(!n)throw Error("children is not null");return ot(t,n)}function ll(t){return tl(t)}function al(t){const n=t;return nt({...n,plain:n.value})}function sl(t,n){if(!n)throw Error("children is not null");return ot(t,n)}function ul(t){return nl(t)}const cl=[{type:"ssml-p",renderElem:ol},{type:"ssml-w",renderElem:rl},{type:"ssml-say-as",renderElem:il},{type:"ssml-break",renderElem:ll},{type:"ssml-sub",renderElem:al},{type:"ssml-prosody",renderElem:sl},{type:"ssml-audio",renderElem:ul}];function dl(t,n){return`<s>${n}</s>`}function fl(t,n){const{phoneme:o,value:r}=t;return o?`<w phoneme="${o}">${r}</w>`:`<w>${n}</w>`}function pl(t){const{word:n,phoneme:o}=t;return`<p ph="${o}">${n}</p>`}function ml(t,n){const{interpretAs:o}=t;return`<say-as interpret-as="${o}">${n}</say-as>`}function vl(t){const{time:n}=t;return`<break time="${n}" />`}function hl(t){const{alias:n,value:o}=t;return`<sub alias="${n}">${o}</sub>`}function _l(t,n){const{rate:o}=t;return`<prosody rate="${o}">${n}</prosody>`}function gl(t){const{src:n}=t;return`<audio src="${n}" />`}const bl=[{type:"paragraph",elemToHtml:dl},{type:"ssml-w",elemToHtml:fl},{type:"ssml-p",elemToHtml:pl},{type:"ssml-say-as",elemToHtml:ml},{type:"ssml-break",elemToHtml:vl},{type:"ssml-sub",elemToHtml:hl},{type:"ssml-prosody",elemToHtml:_l},{type:"ssml-audio",elemToHtml:gl}];function yl(t,n){return{type:"paragraph",children:n}}function wl(t,n){const o=t.getAttribute("phoneme");return o?{type:"ssml-w",phoneme:o,value:t.textContent,children:[{text:t.textContent||""}]}:{type:"ssml-w",children:n}}const xl=[{selector:"s",parseElemHtml:yl},{selector:"w",parseElemHtml:wl}];function R(t,n){return t===n}function El(t){const{isInline:n,isVoid:o,deleteBackward:r,deleteForward:i,insertBreak:l,getHtml:a,apply:u,normalizeNode:s}=t,m=t;m.isInline=f=>{const v=E.DomEditor.getNodeType(f);return R(v,"ssml-w")||R(v,"ssml-p")||R(v,"ssml-break")||R(v,"ssml-say-as")||R(v,"ssml-sub")||R(v,"ssml-prosody")||R(v,"ssml-audio")?!0:n(f)},m.isVoid=f=>{const v=E.DomEditor.getNodeType(f);if(R(v,"ssml-w")){const{phoneme:b}=f;return!!b}return R(v,"ssml-p")||R(v,"ssml-break")?!0:R(v,"ssml-say-as")?!1:R(v,"ssml-sub")?!0:R(v,"ssml-prosody")?!1:R(v,"ssml-audio")?!0:o(f)},m.deleteBackward=f=>{r(f)},m.deleteForward=f=>{i(f)},m.insertBreak=()=>{l()},m.normalizeNode=f=>{s(f)};const d={voice:"",volume:"",pitch:""};return t.on(j.UPDATE_SPEAK,f=>{Object.assign(d,f)}),t.on(j.UPDATE_BGM,f=>{d.bgm=f.value,d.bgmRemark=f.label}),t.on(j.REMOVE_BGM,()=>{d.bgm=void 0,d.bgmRemark=void 0}),m.getHtml=()=>{const f=[];for(const v in d)if(Object.prototype.hasOwnProperty.call(d,v)){const b=d[v];b&&f.push(`${v}=${b}`)}return`<speak ${f.join(" ")}>${a()}</speak>`},m.apply=f=>{u(f)},m}const Nl={editorPlugin:El,renderElems:cl,elemsToHtml:bl,parseElemsHtml:xl};const Vl={install(t,n){const o=n??{};t.provide(K.EDITORCONFIG,o),C.on(V.ERROR,o.handleError),t.use(vo),t.use(Si),t.use(el)}};exports.AliasMenu=Ue;exports.BarButton=B;exports.BarInput=le;exports.BarPopover=Ut;exports.BarSearch=H;exports.BarWrapper=Me;exports.BarWrapperGroup=F;exports.BarWrapperItem=Wt;exports.BgmDragBox=Xe;exports.BgmMenu=He;exports.ChangespeedMenu=je;exports.ContinuousMenu=Ae;exports.ConversionDragBox=et;exports.ConversionMenu=Je;exports.DOMComment=Cr;exports.DOMElement=Sr;exports.DOMNode=Vr;exports.DOMRange=Mr;exports.DOMSelection=Ir;exports.DOMStaticRange=Or;exports.DOMText=Tr;exports.DigitalMenu=Le;exports.DragBox=X;exports.EMITTER_EVENT=V;exports.EditorCoreModule=Nl;exports.EditorView=nn;exports.EnglishMenu=Fe;exports.FixedPanel=Gt;exports.ManagementDragBox=Ze;exports.ManagementMenu=Qe;exports.MuteMenu=Ke;exports.PROVIDER_KEY=K;exports.ReadMenu=Pe;exports.RhythmMenu=Ge;exports.SensitiveDragBox=Ye;exports.SensitiveMenu=qe;exports.SpeakerMenu=De;exports.SpecialDragBox=ze;exports.SpecialMenu=We;exports.TryPlay=tt;exports.WANGEDITOR_EVENT=j;exports.default=Vl;exports.genRandomStr=en;exports.playSound=$e;exports.withLimitView=Te;
